!function(){var e,t,n,i,s,a={3393:function(e,t,n){"use strict";var i=n(9658);e.exports={compressPayload:function(e){var t={};return Object.keys(i).forEach((function(n){var s=n,a=i[n];t[s]=e[a]})),t},expandPayload:function(e){var t={},n=["up"],s=Object.keys(e).filter((function(e){return-1===Object.keys(i).indexOf(e)&&!n.includes(e)}));return s.length&&(t.UNMATCHED={},s.forEach((function(n){t.UNMATCHED[n]=e[n]})),t.invalid=!0),Object.keys(i).forEach((function(s){if(!n.includes(s)){var a=s,r=i[s];e[a]&&(t[r]=e[a])}})),t}}},6994:function(e,t,n){"use strict";var i,s=n(4041);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}var r=function(e,t){return s.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),i||(i=s.createElement("polyline",{points:"6 9 12 15 18 9"})))},o=(0,s.forwardRef)(r),c=(0,s.memo)(o);t.A=c},1986:function(e,t,n){"use strict";var i,s,a,r,o=n(4041);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}var l=function(e,t){return o.createElement("svg",c({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t},e),i||(i=o.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeLinecap:"round",strokeLinejoin:"round"})),s||(s=o.createElement("path",{d:"M9.08984 9.00008C9.32495 8.33175 9.789 7.76819 10.3998 7.40921C11.0106 7.05024 11.7287 6.91902 12.427 7.03879C13.1253 7.15857 13.7587 7.52161 14.2149 8.06361C14.6712 8.60561 14.9209 9.2916 14.9198 10.0001C14.9198 12.0001 11.9198 13.0001 11.9198 13.0001",strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=o.createElement("circle",{cx:12,cy:16.5,r:.5,strokeLinecap:"round",strokeLinejoin:"round"})),r||(r=o.createElement("path",{d:"M11.5049 16L12.5049 17"})))},u=(0,o.forwardRef)(l),d=(0,o.memo)(u);t.A=d},534:function(e,t,n){var i={"./card-amex.png":3421,"./card-diners.png":2707,"./card-discover.png":1229,"./card-jcb.png":543,"./card-mastercard.png":9848,"./card-unionpay.png":8057,"./card-unknown-error.png":2217,"./card-unknown.png":8044,"./card-visa.png":9503};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id=534},114:function(e,t,n){const i=n(7012),s=n(8913),a=n(4025),r=n(2384),o=n(6631),c=n(4776),l=n(7804),u=n(8524),d=n(9576),h=n(9392),m=n(4246),p=n(7958),g=n(8825),y=n(5718),f=n(5199),S=n(2876);e.exports={creditCard:h,applePay:g,googlePay:p,clickToPay:m,ach:a,usBankAccount:r,plaid:o,paypal:u,venmo:d,auBecsDebit:c,ukBacs:l,acss:s,sepa:i,ideal:S,crypto:y,stock:f}},148:function(e,t,n){"use strict";var i;function s(e,t,n){const s=n-1;switch(e.code){case i.DOWN:return e.preventDefault(),null===t||t+1>s?{currentOptionIdx:0}:{currentOptionIdx:t+1};case i.UP:return e.preventDefault(),null===t||t-1<0?{currentOptionIdx:s}:{currentOptionIdx:t-1};case i.ENTER:return e.preventDefault(),{currentOptionIdx:t,needSelectOption:!0};case i.ESC:return{closeDropdown:!0,currentOptionIdx:null};default:return{currentOptionIdx:null}}}n.d(t,{J:function(){return i},t:function(){return s}}),function(e){e.DOWN="ArrowDown",e.UP="ArrowUp",e.ENTER="Enter",e.ESC="Escape",e.SPACE="Space"}(i||(i={}))},2762:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i=n(1085),s=n(4357);const a=e=>{const{htmlFor:t,label:n,labelOptional:a,labelSrOnly:r,labelFloating:o,formGroupClass:c,formLabelClass:l,formControlValue:u,children:d,dataQa:h}=e;return(0,i.jsxs)("div",{className:(0,s.A)("form-group",c),children:[d,(0,i.jsxs)("label",{htmlFor:t,className:(0,s.A)("form-label",{"sr-only":r,"is-floating":o,"has-value":u},l),"data-qa":h,children:[n,a&&(0,i.jsxs)("span",{className:"font-weight-400 text-gray-60",children:[" (",a,")"]})]})]})}},9196:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var i=n(5608),s=n(1085),a=n(4357),r=n(4041),o=n(2762),c=n(7314),l=n(8489),u=n(6780);const d=e=>{var{label:t,labelSrOnly:n,labelFloating:d,value:h,autoFocus:m,dataQa:p,dataTestId:g,children:y,className:f,placeholder:S,formGroupClass:E,formLabelClass:A,labelOptional:C,id:v,error:N,customPrefix:b,dataTrackingElementName:P,type:D="text",autoCorrect:_="off",spellCheck:T="false",autoFocusMode:x=l.Q.DESKTOP,setRef:O,autoScroll:k,forceShowPlaceholder:I}=e,w=(0,i.Tt)(e,["label","labelSrOnly","labelFloating","value","autoFocus","dataQa","dataTestId","children","className","placeholder","formGroupClass","formLabelClass","labelOptional","id","error","customPrefix","dataTrackingElementName","type","autoCorrect","spellCheck","autoFocusMode","setRef","autoScroll","forceShowPlaceholder"]);const R=(0,r.useRef)(null);(0,c.f)({ref:R,autoFocus:m,mode:x}),(0,u.Q)(R,{shouldScroll:k,shouldFocus:!0}),(0,r.useImperativeHandle)(O,(()=>R.current),[]);const M=((e,t,n)=>n?e:t?void 0:e)(S,d,I);return(0,s.jsxs)(o.s,{htmlFor:v,label:t,labelSrOnly:n,labelFloating:d,labelOptional:C,formGroupClass:E,formLabelClass:(0,a.A)(A,{"has-error":N}),formControlValue:h,dataQa:p+"-label",children:[b,(0,s.jsx)("input",Object.assign({id:v,className:(0,a.A)("form-control",f,{"has-label-floating":d,"has-error":N}),"aria-invalid":N,ref:R,type:D,placeholder:M,value:h,autoCorrect:_,spellCheck:T,"data-qa":p,"data-testid":g,"data-tracking-element-name":P},w)),y]})}},2766:function(e,t,n){"use strict";n.d(t,{J:function(){return d}});var i=n(1085),s=n(4041),a=n(6780);const r=e=>(0,s.useContext)(e);var o=n(5608),c=n(3225);const l=e=>{let{scrollIntoView:t,focus:n}=e;const i=(0,c.M)(),a=(0,s.useRef)(null),r=(0,s.useCallback)((()=>(0,o.sH)(void 0,void 0,void 0,(function*(){yield new Promise((e=>{i.addEventListener("scrollend",e,{once:!0}),setTimeout(e,350)})),n()}))),[i,n]);return(0,s.useEffect)((()=>{a.current={scrollIntoView:t,focus:r}}),[r,t]),a},u=e=>t=>{let{state:n,children:r}=t;const o=(0,s.useRef)(new Set),[c,l]=(0,s.useState)(null),u=(0,s.useRef)(!1),[d,h]=(0,s.useState)(),m=(0,s.useCallback)((()=>{u.current=!0,l(null),h({})}),[]);return(0,s.useEffect)((()=>{if(u.current){for(const e of o.current)if(e.ruleFunction(n)){l(e.ref);break}u.current=!1}}),[n,d]),(0,a.Q)(c,{shouldScroll:!0,shouldFocus:!0}),(0,i.jsx)(e.Provider,{value:{fields:o.current,setTriggered:m},children:r})},d=()=>{const e=(0,s.createContext)({setTriggered:()=>{},fields:new Set});return{useAddFieldToScroll:(t,n)=>((e,t,n)=>{const{fields:i}=r(e);(0,s.useEffect)((()=>{const e={ref:t,ruleFunction:n};return i.add(e),()=>{i.delete(e)}}),[i,t,n])})(e,t,n),useScrollToFieldsTrigger:()=>(e=>{const{setTriggered:t}=r(e);return t})(e),useFakeStripeElement:l,ScrollToFieldsProvider:u(e)}}},8227:function(e,t,n){"use strict";n.d(t,{G:function(){return s},n:function(){return a}});var i=n(4041);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("CheckoutConfiguration data is not provided");return e}},3225:function(e,t,n){"use strict";n.d(t,{M:function(){return a},U:function(){return s}});var i=n(4041);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("iframe window is not provided");return e}},8583:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var i=n(8227);function s(){return(0,i.n)().infrastructureParams.isMobile}},1362:function(e,t,n){"use strict";n.d(t,{Qq:function(){return r},Tn:function(){return s},wf:function(){return a}});var i=n(4041);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("Portal ref was not provided");return e}const r=(0,i.createContext)(null)},1885:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i=n(9679),s=n(7627);function a(){const e=(0,i.C)(),t=(0,s.Q)();return e&&!1!==t}},9679:function(e,t,n){"use strict";n.d(t,{C:function(){return a},m:function(){return s}});var i=n(4041);const s=(0,i.createContext)(!1);function a(){return(0,i.useContext)(s)}},7627:function(e,t,n){"use strict";n.d(t,{C:function(){return s},Q:function(){return a}});var i=n(4041);const s=(0,i.createContext)(null);function a(){return(0,i.useContext)(s)}},4367:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i,s,a=n(8227);function r(){return(0,a.n)().infrastructureParams.OS===i.IOS}!function(e){e.IOS="iOS",e.ANDROID="Android"}(i||(i={})),function(e){e.MOBILE_SAFARI="Mobile Safari"}(s||(s={}))},8489:function(e,t,n){"use strict";var i;n.d(t,{Q:function(){return i}}),function(e){e.DESKTOP="desktop",e.MOBILE="mobile",e.ALL="all"}(i||(i={}))},7314:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var i=n(4041),s=n(1885),a=n(6172),r=n(5102),o=n(8489),c=n(8583),l=n(4367);const u=e=>{const{ref:t,autoFocus:n,mode:u,preventScroll:d=!1}=e,h=(0,s.k)(),m=(0,c.P)(),p=(0,l.j)(),g=(0,a.$)(),y=(0,r.a)();(0,i.useEffect)((()=>{if(!g&&n&&h&&y.current&&((e,t,n)=>e===o.Q.DESKTOP?!t:e!==o.Q.MOBILE||t&&!n)(u,m,p)){if(!t.current)throw new Error("ref is not provided");(()=>{const e=()=>{var e;null===(e=t.current)||void 0===e||e.focus({preventScroll:d})};"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e)})()}}),[t,n,h,m,p,g,y,u,d])}},5538:function(e,t,n){"use strict";n.d(t,{Bh:function(){return a},Hs:function(){return s},Px:function(){return c},Qm:function(){return r},UJ:function(){return o}});var i=n(8728);const s=(new Date).getFullYear()+100;var a;!function(e){e.SLASH_MM_DD_YYYY="MM/DD/YYYY",e.SLASH_DD_MM_YYYY="DD/MM/YYYY",e.DASH_YYYY_MM_DD="YYYY-MM-DD",e.DASH_DD_MM_YYYY="DD-MM-YYYY",e.DOT_DD_MM_YYYY="DD.MM.YYYY",e.SLASH_YYYY_MM_DD="YYYY/MM/DD",e.DOT_YYYY_MM_DD="YYYY.MM.DD"}(a||(a={}));const r={[a.SLASH_MM_DD_YYYY]:/^\d{2}\/\d{2}\/\d{4}$/,[a.SLASH_DD_MM_YYYY]:/^\d{2}\/\d{2}\/\d{4}$/,[a.DASH_YYYY_MM_DD]:/^\d{4}-\d{2}-\d{2}$/,[a.DASH_DD_MM_YYYY]:/^\d{2}-\d{2}-\d{4}$/,[a.DOT_DD_MM_YYYY]:/^\d{2}\.\d{2}\.\d{4}$/,[a.SLASH_YYYY_MM_DD]:/^\d{4}\/\d{2}\/\d{2}$/,[a.DOT_YYYY_MM_DD]:/^\d{4}\.\d{2}\.\d{2}$/},o=a.SLASH_DD_MM_YYYY,c={[i.D.EN_US]:a.SLASH_MM_DD_YYYY,[i.D.EN_GB]:a.SLASH_DD_MM_YYYY,[i.D.EN_CA]:a.DASH_YYYY_MM_DD,[i.D.FR_CA]:a.DASH_YYYY_MM_DD,[i.D.FR_FR]:a.SLASH_DD_MM_YYYY,[i.D.ES]:a.SLASH_DD_MM_YYYY,[i.D.NL]:a.DASH_DD_MM_YYYY,[i.D.NO]:a.DOT_DD_MM_YYYY,[i.D.DE]:a.DOT_DD_MM_YYYY,[i.D.FI_FI]:a.DOT_DD_MM_YYYY,[i.D.AR_001]:a.SLASH_DD_MM_YYYY,[i.D.SV]:a.DASH_YYYY_MM_DD,[i.D.IT]:a.SLASH_DD_MM_YYYY,[i.D.PT_PT]:a.SLASH_DD_MM_YYYY,[i.D.PT_BR]:a.SLASH_DD_MM_YYYY,[i.D.ZH_CN]:a.SLASH_YYYY_MM_DD,[i.D.ZH_TW]:a.SLASH_YYYY_MM_DD,[i.D.JA]:a.SLASH_YYYY_MM_DD,[i.D.KO]:a.DOT_YYYY_MM_DD,[i.D.HU]:a.DOT_YYYY_MM_DD,[i.D.DA]:a.DOT_DD_MM_YYYY,[i.D.RU_RU]:a.DOT_DD_MM_YYYY,[i.D.ES_US]:a.SLASH_MM_DD_YYYY,[i.D.PL_PL]:a.DOT_DD_MM_YYYY}},4379:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var i=n(4041);function s(e){const t=(0,i.useRef)(),n=(0,i.useRef)(e);(0,i.useEffect)((()=>{n.current=e}),[e]);const s=(0,i.useCallback)((()=>{window.clearTimeout(t.current)}),[]),a=(0,i.useCallback)((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(),i?t.current=window.setTimeout((()=>{n.current(...e)}),i):n.current(...e)}),[s]);return(0,i.useEffect)((()=>s),[s]),{set:a,clear:s}}},5102:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var i=n(4041);function s(){const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},6780:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var i=n(4041);const s=(e,t)=>{(0,i.useEffect)((()=>{var n;(null==t?void 0:t.shouldScroll)&&(null===(n=null==e?void 0:e.current)||void 0===n?void 0:n.scrollIntoView)&&(e.current.scrollIntoView({behavior:"smooth",block:"center"}),t.shouldFocus&&e.current.focus({preventScroll:!0}))}),[null==t?void 0:t.shouldFocus,null==t?void 0:t.shouldScroll,e])}},6172:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var i=n(8227);const s=()=>(0,i.n)().infrastructureParams.showcase},6630:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i=n(4041),s=n(8393);function a(){const e=(0,i.useRef)();return void 0===e.current&&(e.current=(0,s.i)()),e.current}},7554:function(e,t,n){"use strict";(this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((i=i.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function*(){if(void 0===window.ResizeObserver){window.ResizeObserver=class{observe(){}unobserve(){}disconnect(){}};const e=yield n.e(295).then(n.bind(n,9295));window.ResizeObserver=e.ResizeObserver}}))},6007:function(e,t,n){"use strict";n.d(t,{U:function(){return E}});var i,s=n(5608),a=n(1085),r=n(4041);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}var c=function(e,t){return r.createElement("svg",o({fill:"none",height:24,viewBox:"0 0 24 24",width:24,strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),i||(i=r.createElement("g",{stroke:"currentColor"},r.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"m12 22c5.5228 0 10-4.4772 10-10 0-5.52285-4.4772-10-10-10-5.52285 0-10 4.47715-10 10 0 5.5228 4.47715 10 10 10z"}),r.createElement("path",{d:"m12 8v4"}),r.createElement("circle",{cx:12,cy:15.5,r:.5})),r.createElement("path",{d:"m11.5049 15 1 1"}))))},l=(0,r.forwardRef)(c),u=(0,r.memo)(l),d=n(6901),h=n(4357),m=n(8583),p=n(1362),g=n(8533),y=n(606);const f=["top","bottom"],S=e=>{var{className:t,children:n,dataQa:i}=e,r=(0,s.Tt)(e,["className","children","dataQa"]);const o=(0,g.Q)(),c=(0,y.t)(),l=(0,m.P)(),S=(0,p.wf)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d.S,{content:n,trigger:"click",className:l?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:o?"left":"right",fallbackPlacements:f,rootContainer:S,"data-qa":"tooltip-error-label",children:(0,a.jsx)("button",Object.assign({type:"button",className:(0,h.A)("btn-icon font-size-18 text-red-60",t),"aria-label":c.translate("common.errorTooltipButtonAriaLabel"),"data-qa":i?`${i}-tooltip-error-trigger`:"tooltip-error-trigger"},r,{children:(0,a.jsx)(u,{className:"icon-stroke d-block","aria-hidden":!0})}))})})},E=(0,r.memo)(S)},1660:function(e,t,n){"use strict";n.d(t,{FM:function(){return s},pv:function(){return a},rp:function(){return r}});var i=n(2766);const{useAddFieldToScroll:s,useScrollToFieldsTrigger:a,ScrollToFieldsProvider:r}=(0,i.J)()},5251:function(e,t,n){"use strict";n.d(t,{FM:function(){return s},pv:function(){return a},rp:function(){return r}});var i=n(2766);const{useAddFieldToScroll:s,useScrollToFieldsTrigger:a,ScrollToFieldsProvider:r}=(0,i.J)()},8533:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var i=n(4041),s=n(606),a=n(3836),r=n(5448);function o(){const e=(0,s.t)();return(0,i.useMemo)((()=>(0,a.iJ)(e.language)===r.p.RTL),[e.language])}},1380:function(e,t,n){"use strict";const i=(()=>{try{return window}catch(e){return self}})(),s=i.FUN_ENV||"production",a=i.FUN_HOST||"https://api.fundraiseup.com",r=(i.FUN_CDN,i.FUN_STATIC||"https://static.fundraiseup.com");var o,c;i.FUN_STATIC_S3,n.p=r+("/"===r.slice(-1)?"":"/"),function(e){e[e.COMPANY_NOT_FOUND=1]="COMPANY_NOT_FOUND",e[e.UNSUPPORTED_STORAGE_TYPE=2]="UNSUPPORTED_STORAGE_TYPE",e[e.BACKDROP_CONTAINER_IS_NOT_AVAILABLE=3]="BACKDROP_CONTAINER_IS_NOT_AVAILABLE",e[e.EXPERIMENT_ALREADY_STARTED=4]="EXPERIMENT_ALREADY_STARTED",e[e.INVALID_VARIANT_NAME_FOR_EXPERIMENT=5]="INVALID_VARIANT_NAME_FOR_EXPERIMENT",e[e.STORED_SETTINGS_MUST_BE_AN_OBJECT=6]="STORED_SETTINGS_MUST_BE_AN_OBJECT",e[e.INVALID_DISTRIBUTION_IN_EXPERIMENT=7]="INVALID_DISTRIBUTION_IN_EXPERIMENT",e[e.NO_SUCH_SETTINGS_FOR_EXPERIMENT=8]="NO_SUCH_SETTINGS_FOR_EXPERIMENT",e[e.NO_SUCH_EXPERIMENT=9]="NO_SUCH_EXPERIMENT",e[e.UNSUPPORTED_TYPE_OF_STORAGE=10]="UNSUPPORTED_TYPE_OF_STORAGE",e[e.FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED=11]="FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED",e[e.NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED=12]="NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED",e[e.UNSUPPORTED_LOCALE_CONFIG_TYPE=13]="UNSUPPORTED_LOCALE_CONFIG_TYPE",e[e.SERVICE_HAS_ALREADY_BEEN_PROVIDED=14]="SERVICE_HAS_ALREADY_BEEN_PROVIDED",e[e.MUST_PROVIDE_COMPANY_KEY=15]="MUST_PROVIDE_COMPANY_KEY",e[e.TRACKER_ALREADY_STARTED=16]="TRACKER_ALREADY_STARTED"}(o||(o={}));!function(e){e[e.BACKDROP=1]="BACKDROP",e[e.STATIC_CONFIG=2]="STATIC_CONFIG",e[e.KEYS_KEEPER=3]="KEYS_KEEPER",e[e.COLLECTOR=4]="COLLECTOR",e[e.RESOLVER=5]="RESOLVER",e[e.DEBUG=6]="DEBUG",e[e.TRACKING_URLS=7]="TRACKING_URLS",e[e.FUN_SESSION_STORAGE=8]="FUN_SESSION_STORAGE",e[e.EMBED_ELEMENTS_API=9]="EMBED_ELEMENTS_API",e[e.EMBED_CHECKOUT_API=10]="EMBED_CHECKOUT_API",e[e.EMBED_INTERNAL_API=11]="EMBED_INTERNAL_API",e[e.EMBED_FORMS_API=12]="EMBED_FORMS_API",e[e.EMBED_CONFIG=13]="EMBED_CONFIG",e[e.EMBED_TRACKER=14]="EMBED_TRACKER",e[e.FUN_EXPERIMENTS_STORAGE=15]="FUN_EXPERIMENTS_STORAGE",e[e.CHECKOUT=16]="CHECKOUT",e[e.EMBED_ELEMENTS_SERVICE=17]="EMBED_ELEMENTS_SERVICE",e[e.ELEMENTS_API=18]="ELEMENTS_API",e[e.EVENT_EMITTER=19]="EVENT_EMITTER",e[e.HTML_ELEMENT_STYLE_MANAGER=20]="HTML_ELEMENT_STYLE_MANAGER",e[e.FUN_TRACKER_STORAGE=21]="FUN_TRACKER_STORAGE",e[e.FUN_STAT_STORAGE=22]="FUN_STAT_STORAGE",e[e.FUN_COOKIES_MIGRATOR=23]="FUN_COOKIES_MIGRATOR",e[e.FUN_COOKIES_MANAGER=24]="FUN_COOKIES_MANAGER",e[e.USER_SESSION=25]="USER_SESSION",e[e.FUN_DEBUG_STORAGE=26]="FUN_DEBUG_STORAGE",e[e.SENTRY_CLIENT=27]="SENTRY_CLIENT",e[e.EXPERIMENTS_CONTROLLER=28]="EXPERIMENTS_CONTROLLER",e[e.CHECKOUT_SKELETON=29]="CHECKOUT_SKELETON",e[e.EMBED_ELEMENTS_URL_API=30]="EMBED_ELEMENTS_URL_API",e[e.CHECKOUT_STEPLESS=31]="CHECKOUT_STEPLESS",e[e.CONSENT_MANAGER_API=32]="CONSENT_MANAGER_API"}(c||(c={}));var l=n(5608),u=(n(7554),n(5873));class d extends Error{constructor(){super("Checkout render aborted")}}var h=n(4041);var m=n(7429);class p{constructor(e){this.window=e,this.hideTimeout=null,this.hiddenElementsList=[],this.elementsSelectorList=[".s.u.m.o"]}hideAll(){const e=()=>{this.elementsSelectorList.forEach((e=>{this.window.document.querySelectorAll(e).forEach(this.hideNode.bind(this))}))};e(),this.hideTimeout=this.window.setInterval(e,1e3)}restoreAll(){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hiddenElementsList.forEach((e=>{let{node:t,style:n}=e;null===n?t.removeAttribute("style"):t.setAttribute("style",n)})),this.hiddenElementsList=[]}hideNode(e){this.hiddenElementsList.some((t=>t.node===e))||(this.hiddenElementsList.push({node:e,style:e.getAttribute("style")}),e.setAttribute("style","display: none;"))}}const g="fundraiseupLivemode";var y,f,S,E;function A(e,t){const n=t.findElement(e);if(!n)throw new Error('No element with id "root"');return n}function C(e){if(!e.iframeDocument||!e.iframeWindow)throw new Error("No window or document in iframe");return{target:e.iframeWindow,global:window}}!function(e){e.CHECKOUT_BEFORE_OPEN="checkoutBeforeOpen",e.CHECKOUT_OPEN="checkoutOpen",e.CHECKOUT_CLOSE="checkoutClose",e.CHECKOUT_INTENT="checkoutIntent",e.DONATION_COMPLETE="donationComplete"}(y||(y={}));class v{get iframeNode(){throw new Error("Not implemented")}destroy(e){throw new Error("Not implemented")}}!function(e){e.CLOSE="close",e.OPEN="open",e.DONATION_COMPLETE="donationComplete",e.CHECKOUT_INTENT="checkoutIntent"}(f||(f={})),function(e){e.LIVE="live",e.TEST="test"}(S||(S={})),function(e){e.DONATE_FORM="donate-form",e.COMMENT="comment",e.UPSELL="upsell",e.PAYMENT_METHOD="payment-method",e.PAYPAL="paypal",e.BANK_LOADING="bank-loading",e.CREDIT_CARD="credit-card",e.UK_BACS="uk-bacs",e.UK_BACS_CONFIRMATION="uk-bacs-confirmation",e.AU_BECS="au-becs",e.SEPA="sepa",e.PRIVACY="privacy",e.DOUBLE="double",e.GIFT_AID="gift-aid",e.MAILING_ADDRESS="mailing-address",e.THANK_YOU="thank-you",e.THANK_YOU_TRIBUTE="thank-you-tribute",e.QUESTIONS1="questions1",e.QUESTIONS="questions",e.REMIND_ME="remind-me",e.ASK_PAGE="ask-page",e.POST_DONATION_UPSELL="post-donation-upsell",e.BLOCKED="blocked",e.COMMUNICATION_CONSENT="communication-consent"}(E||(E={}));class N extends v{constructor(e,t,n){super(),this.checkoutUI=e,this.checkoutCore=t,this.foreignElements=n,this.eventEmitter=new m.A,this.destroyed=!1}get iframeNode(){return this.checkoutUI.iframeNode}get checkoutLocale(){return this.checkoutCore.intl.locale}initialize(){this.checkoutAPIBridge.on(f.DONATION_COMPLETE,(e=>{this.emit(f.DONATION_COMPLETE,e)}))}destroy(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.assertNotDestroyed(),this.checkoutUI.close();const t=Object.assign(Object.assign({},e),this.checkoutAPIBridge.getClosePublicJsApiPayload());this.checkoutCore.logger.checkoutClose({key:this.checkoutCore.checkoutConfiguration.campaign.key,name:this.checkoutCore.checkoutConfiguration.campaign.name},this.checkoutAPIBridge.getClosePublicJsApiPayload()),this.emit(f.CLOSE,t),this.emit(f.CHECKOUT_INTENT,this.checkoutAPIBridge.getIntent()),this.foreignElements&&this.foreignElements.restoreAll(),this.eventEmitter.removeAllListeners(),this.checkoutAPIBridge.dispose(),this.checkoutCore.dispose(),this.destroyed=!0}))}on(e,t){this.assertNotDestroyed(),this.eventEmitter.on(e,t)}getOpenParams(){return this.checkoutAPIBridge.getOpenParams()}get checkoutAPIBridge(){return this.checkoutCore.checkoutAPIBridge}emit(e,t){this.eventEmitter.emit(e,t)}assertNotDestroyed(){if(this.destroyed)throw new Error("CheckoutAPI destroyed")}}var b=n(7758),P=n.n(b),D=n(9210),_=n.n(D),T=n(8035),x=n.n(T),O=n(6725);function k(e){return(0,O.Ay)(e)}var I=n(8728);const w=[I.D.EN_GB],R={[I.D.EN_US]:"en_US",[I.D.EN_GB]:"en_GB",[I.D.EN_CA]:"en_CA",[I.D.FR_CA]:"fr_CA",[I.D.ES]:"es_ES",[I.D.ES_US]:"es_US",[I.D.NL]:"nl_NL",[I.D.NO]:"no_NO",[I.D.DE]:"de_DE",[I.D.FI_FI]:"fi_FI",[I.D.FR_FR]:"fr_FR",[I.D.AR_001]:"ar_AE",[I.D.SV]:"sv_SE",[I.D.IT]:"it_IT",[I.D.PT_PT]:"pt_PT",[I.D.PT_BR]:"pt_BR",[I.D.ZH_CN]:"zh_CN",[I.D.ZH_TW]:"zh_TW",[I.D.JA]:"ja_JP",[I.D.KO]:"ko_KR",[I.D.HU]:"hu_HU",[I.D.DA]:"da_DK",[I.D.RU_RU]:"ru_RU",[I.D.PL_PL]:"pl_PL"};function M(e){return R[e]}class L extends Error{constructor(e){super(e),this.name=this.constructor.name}}class U extends L{constructor(e,t){super(t?`Unreachable statement: ${e} [${t}]`:`Unreachable statement: ${e}`)}}class F extends L{constructor(){super("Unexpected error")}}const j=new WeakMap;let B=null;const H=new Promise((e=>{B=e}));class q extends L{constructor(e){super(e?`'Script failed to load': ${e}`:"Script failed to load"),this.name="LoadScriptError"}}class G extends L{constructor(e){super(e?`Load script timeout: ${e}`:"Load script timeout"),this.name="LoadScriptTimeoutError"}}function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t=t||window;let a={};j.has(t)?a=j.get(t):j.set(t,a);const r=a[e];if(!i&&r)return r;const o=new Promise((function(i,s){setTimeout((()=>{const a=function(e,t){const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,Object.keys(t).forEach((e=>{n.setAttribute(e,t[e])})),n}(e,n);a.onerror=function(e){if("string"==typeof e)return void s(new q);const t=null==e?void 0:e.target;t instanceof HTMLScriptElement?s(new q(t.src)):s(new q)},a.onload=function(){i(!0)},t.document.documentElement.appendChild(a),K._immedeatly&&i(!0)}),0)})),c=[o];if(null!==s){const t=new Promise(((t,n)=>{setTimeout((()=>n(new G(e))),s)}));c.push(t)}const l=Promise.race(c);return a[e]=l,l}function K(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(i&&(!(r=i)||r.constructor!=={}.constructor))throw new Error("Expected attributes to be an object.");var r;return t?H.then((()=>V(e,n,i,s,a))):V(e,n,i,s,a)}K._windows=j,K._immedeatly=!1;const Y="supporter",z="1234@example.com",W="https://js.stripe.com/v3/";class $ extends Error{constructor(){super($.errorMessage)}}$.errorMessage="Stripe.js could not be loaded";const X={target:window,apiVersion:"2023-10-16",deferred:!1,promiseHandlerTimeout:0,locale:I.D.EN_US};function Q(e,t,n,i){const s=n.target,a=function(e){return w.includes(e)?e:e.split("-")[0]}(n.locale);return K(W,n.deferred,s,{},!1,n.loadScriptTimeout).then((()=>new Promise(((i,r)=>{const o=()=>{s.Stripe?i(s.Stripe(e,{stripeAccount:t,apiVersion:n.apiVersion,locale:a})):r(new $)};n.promiseHandlerTimeout?setTimeout((()=>{o()}),n.promiseHandlerTimeout):o()})))).catch((e=>{throw e.message.match("js.stripe.com")&&i.captureException(e,{extra:{script:e.message,stripeAccount:t}}),e}))}var Z=n(4020);const J=60*Z.MS.SECOND;class ee extends Error{constructor(e){super("[Stripe Factory]"+e)}}const te=new WeakMap;function ne(e,t){if(e.showcase)return()=>{};let n;const i=()=>(0,l.sH)(this,void 0,void 0,(function*(){if(!e.targetWindow)throw new ee("target window is not provided");const i=te.get(e.targetWindow);i?n=i:(n=function(e,t,n){return(0,l.sH)(this,arguments,void 0,(function*(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:X;const a=Object.assign({},X,s);try{return i=yield Q(e,t,a,n),i}catch(i){return Q(e,t,Object.assign(Object.assign({},a),{promiseHandlerTimeout:500}),n)}}))}(e.publicKey,e.stripeAccount||"",t,{target:e.targetWindow,locale:e.locale,loadScriptTimeout:J}),te.set(e.targetWindow,n))}));return i(),function(){return(0,l.sH)(this,void 0,void 0,(function*(){return n||(yield i(),n)}))}}class ie{constructor(){this.disposables=new Set}static isFunction(e){return"function"==typeof e}run(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.initializeCurrencyFilter(),yield this.setLocale(null==e?void 0:e.localeCode),this.initializePageGuardManager(),this.initializePublicJsApi(),this.initializeCookieConsent(),this.initializeUserSession(),this.initializeRouter(),this.initializeTracker(),this.initializeExperiments(),yield this.initializeCurrencyService(),yield this.startFlow(null==e?void 0:e.initialScreen);const t=this.subscribeOnUserInteraction();this.subscribeOnHistoryInteraction(),this.disposables.add(t).add(this.checkoutRouter).add(this.trackerCheckout).add(this.flowManager),this.initializeIFrameRemover()}))}dispose(){this.disposables.forEach((e=>{ie.isFunction(e)?e():e.dispose()}))}}var se,ae,re,oe,ce;!function(e){e.INACTIVITY="inactivity",e.EXIT="exit",e.PAYMENT_ISSUE="paymentIssue",e.REMINDER_REQUEST="reminderRequest"}(se||(se={})),function(e){e.YES="yes",e.NO="no",e.NOT_GIVEN="notGiven"}(ae||(ae={})),function(e){e.REMINDER="reminder",e.DONATE_BUTTON="donateButton",e.STICKY_BUTTON="stickyButton",e.IMAGE_CARD="imageCard",e.TEXT_LINK="textLink",e.DONATION_FORM="donationForm",e.SIMPLE_FORM="simpleForm",e.GOAL_METER="goalMeter",e.STAT_COUNTER="statCounter",e.IMPACT_SLIDER="impactSlider",e.DONATION_LEVELS="donationLevels",e.BUTTON_GROUP="buttonGroup",e.FLOATING_BUTTON="floatingButton",e.MESSAGE_BAR="messageBar",e.TOP_SUPPORTERS="topSupporters",e.TOP_LOCATIONS="topLocations",e.SOCIAL_PROOF="socialProof",e.QR_CODE="qrCode",e.RECENT_DONATIONS="recentDonations",e.P2P_BUTTON="p2pButton",e.P2P_LINK="p2pLink",e.TOP_FUNDRAISERS="topFundraisers",e.DONOR_MAP="donorMap",e.LIGHTBOX="lightbox",e.FUNDRAISING_PAGE_LINK="fundraisingPageLink",e.FUNDRAISING_PAGE_INVITE_LINK="fundraisingPageInviteLink",e.LINK="link",e.DIRECT_LINK="direct",e.DEBUG_PANEL="debugPanel",e.TEST_MODE_PANEL="testModePanel",e.SPLIT_TESTING="splitTesting",e.JS_API="jsApi"}(re||(re={}));class le{constructor(e){this.checkoutConfiguration=e,this.eventEmitter=new m.A}getOpenParams(){var e,t,n,i,s,a,r,o,c;const l=this.checkoutConfiguration.campaign,u=this.checkoutConfiguration.externalConfig,d=this.checkoutConfiguration.queryParams,h=this.checkoutConfiguration.mergedCustomFields;return{customFields:Object.fromEntries(null!==(e=null==h?void 0:h.map((e=>{let{name:t,value:n}=e;return[t,n]})))&&void 0!==e?e:[]),livemode:this.checkoutConfiguration.infrastructureParams.livemode,campaign:{id:l.key,code:l.code||null,name:l.name},utm:{source:d.utm.source||(null===(t=this.checkoutConfiguration.infrastructureQueryParams)||void 0===t?void 0:t.utm_source)||"",campaign:d.utm.campaign||(null===(n=this.checkoutConfiguration.infrastructureQueryParams)||void 0===n?void 0:n.utm_campaign)||"",medium:d.utm.medium||(null===(i=this.checkoutConfiguration.infrastructureQueryParams)||void 0===i?void 0:i.utm_medium)||"",content:d.utm.content||(null===(s=this.checkoutConfiguration.infrastructureQueryParams)||void 0===s?void 0:s.utm_content)||"",term:d.utm.term||(null===(a=this.checkoutConfiguration.infrastructureQueryParams)||void 0===a?void 0:a.utm_term)||""},element:{id:null===(r=u.launcher)||void 0===r?void 0:r.elementKey,type:null===(o=u.launcher)||void 0===o?void 0:o.elementTitle,name:null===(c=u.launcher)||void 0===c?void 0:c.elementName}}}on(e,t){return this.eventEmitter.on(e,t),this}emitCheckoutOpen(){this.emit(f.OPEN,this.getOpenParams())}emitDonationComplete(e){this.emit(f.DONATION_COMPLETE,Object.assign(Object.assign({},this.getOpenParams()),e))}setDonationParams(e){this.donationParams=e}setIntentParams(e){this.intent=this.formatIntent(e)}getClosePublicJsApiPayload(){if(!this.donationParams)throw new Error("Call setDonationParams first to set public donation params");return Object.assign(Object.assign({},this.getOpenParams()),this.donationParams)}getIntent(){if(void 0===this.intent)throw new Error("Call setIntentParams on close to set public intent params");return this.intent}dispose(){this.eventEmitter.removeAllListeners()}canFormatIntent(e){var t;if(!e)return!1;const n=this.checkoutConfiguration.externalConfig,i=!!n.checkoutIntent,s=(null===(t=n.launcher)||void 0===t?void 0:t.elementType)===re.JS_API;return!(e.isSavedEmailOnExit===ae.YES)&&(!i||s)}formatIntent(e){var t,n;if(!this.canFormatIntent(e))return null;const i=this.checkoutConfiguration.externalConfig,s=this.checkoutConfiguration.campaign,a=this.checkoutConfiguration.fundraisingPage,r={flowType:e.flowType,campaign:{id:s.key},element:{key:null===(t=i.launcher)||void 0===t?void 0:t.elementKey,type:null===(n=i.launcher)||void 0===n?void 0:n.elementType},checkoutSettings:{customFields:this.checkoutConfiguration.mergedCustomFields,designation:e.checkoutSettings.designation,modifyAmount:e.checkoutSettings.modifyAmount,modifyDesignation:e.checkoutSettings.modifyDesignation},comment:e.comment,donation:e.donation,supporter:e.supporter,tribute:e.tribute,feeCovered:e.feeCovered};return a&&(r.fundraisingPage={key:a.key,customerKey:a.admin}),r}emit(e,t){this.eventEmitter.emit(e,t)}}(ce=oe||(oe={})).ONCE="once",ce.DAILY="daily",ce.WEEKLY="weekly",ce.BIWEEKLY="biweekly",ce.EVERY_4_WEEKS="every4weeks",ce.MONTHLY="monthly",ce.BIMONTHLY="bimonthly",ce.QUARTERLY="quarterly",ce.SEMIANNUAL="semiannual",ce.ANNUAL="annual";const ue={[oe.DAILY]:[2e4,1e4,5e3,3e3,1e3,500],[oe.WEEKLY]:[2e4,1e4,5e3,3e3,1e3,500],[oe.BIWEEKLY]:[2e4,1e4,5e3,3e3,1e3,500],[oe.EVERY_4_WEEKS]:[2e4,1e4,5e3,3e3,1e3,500],[oe.MONTHLY]:[2e4,1e4,5e3,3e3,1e3,500],[oe.BIMONTHLY]:[2e4,1e4,5e3,3e3,1e3,500],[oe.QUARTERLY]:[2e4,1e4,5e3,3e3,1e3,500],[oe.SEMIANNUAL]:[2e4,1e4,5e3,3e3,1e3,500],[oe.ANNUAL]:[2e4,1e4,5e3,3e3,1e3,500],[oe.ONCE]:[1e5,5e4,25e3,1e4,5e3,2500]},de="paymentSession",he={[oe.ONCE]:10,[oe.ANNUAL]:20,[oe.SEMIANNUAL]:30,[oe.QUARTERLY]:40,[oe.MONTHLY]:50,[oe.EVERY_4_WEEKS]:60,[oe.BIMONTHLY]:70,[oe.WEEKLY]:80,[oe.BIWEEKLY]:90,[oe.DAILY]:100},me=[500,1e3,3e3],pe=[2500,5e3,1e4],ge=[500,1e3,3e3,5e3,1e4,2e4],ye=[2500,5e3,1e4,25e3,5e4,1e5],fe=2500;class Se{static getDefaultFrequency(e){const t=Object.keys(e).find((t=>e[t].enabled&&e[t].default));if(!t)throw new Error("No default frequency found");return t}static getDefaultFrequencyWithOverride(e,t){return t&&this.getEnabledFrequencies(e).includes(t)?t:Object.keys(e).find((t=>e[t].enabled&&e[t].default))||null}static getSecondaryFrequency(e){return Object.keys(e).find((t=>e[t].enabled&&!e[t].default))}static getEnabledFrequencies(e){const t=Object.keys(e).filter((t=>e[t].enabled)).map((e=>e));if(0===t.length)throw new Error("No enabled frequencies found");return this.sortByWeights(t)}static isOnetimeOnly(e){const t=this.getEnabledFrequencies(e);return 1===t.length&&t.includes(oe.ONCE)}static isRecurringOnly(e){return!this.getEnabledFrequencies(e).includes(oe.ONCE)}static isOnetimeEnabled(e){return this.getEnabledFrequencies(e).includes(oe.ONCE)}static isRecurringEnabled(e){return!!this.getEnabledFrequencies(e).find((e=>e!==oe.ONCE))}static frequencySettingsToWidgetRepeat(e){const t=this.isOnetimeEnabled(e),n=this.isRecurringEnabled(e);return t&&!n?u.VN.ONLY_ONETIME:!t&&n?u.VN.ONLY_MONTHLY:this.getDefaultFrequency(e)===oe.ONCE?u.VN.DEFAULT_ONETIME:u.VN.DEFAULT_MONTHLY}static isFrequencyEnabled(e,t){return null!==t&&(Object.values(oe).includes(t)&&Se.getEnabledFrequencies(e).includes(t))}static sortByWeights(e){return e.sort(((e,t)=>he[e]-he[t]))}}var Ee,Ae,Ce;!function(e){e.HELPING_HAND_STAGING="FUNTMDMPPAF",e.ISRAELI_AMERICAN_COUNCIL_1="FUNTWQULBUW",e.ISRAELI_AMERICAN_COUNCIL_2="FUNVUTSEZXA",e.ACCESS_FUND_1="FUNFWAWHCAJ",e.ACCESS_FUND_2="FUNYGCGZKAB",e.ACCESS_FUND_3="FUNUVSVAKSL",e.IAC_1="FUNRYLWADLU",e.IAC_2="FUNQNGXYKJA",e.IAC_3="FUNSWLJZBXE",e.IAC_4="FUNALPRPKQD"}(Ee||(Ee={})),function(e){e.MONEY="money",e.STOCK="stock",e.CRYPTO="crypto"}(Ae||(Ae={})),function(e){e.MODAL="modal",e.PAGE="page"}(Ce||(Ce={}));var ve=n(5898);function Ne(e){return(0,ve.Ay)(k(e),(e=>e))}const be=2*Z.MS.SECOND,Pe=5*Z.MS.SECOND,De=e=>`https://ucarecdn.com/7a2a472d-06d6-48fc-8c7d-37e313b717e0/-/resize/${e?"1248x":"624x"}/-/format/auto/`;var _e,Te,xe,Oe,ke,Ie,we,Re,Me,Le={getLinks:function(e){var t,n;return(null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.links)?[...e.campaignPage.ask.links]:[]},getAskTitle:function(e,t){var n,i,s;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.title:(null===(s=e.campaignPage)||void 0===s?void 0:s.ask.title)||""},getLogoImageURL:function(e,t){var n,i,s,a,r,o;return t?null===(s=null===(i=null===(n=e.campaignPage)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.logoImage)||void 0===s?void 0:s.previewUrlRetina:null===(o=null===(r=null===(a=e.campaignPage)||void 0===a?void 0:a.ask)||void 0===r?void 0:r.logoImage)||void 0===o?void 0:o.previewUrl},getAskDescription:function(e,t){var n,i,s,a;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.text:(null===(a=null===(s=e.campaignPage)||void 0===s?void 0:s.ask)||void 0===a?void 0:a.text)||""},getAskMainImageURL:function(e,t){var n,i,s,a,r,o;const c=De(t);return(t?null===(s=null===(i=null===(n=e.campaignPage)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.mainImage)||void 0===s?void 0:s.previewUrlRetina:null===(o=null===(r=null===(a=e.campaignPage)||void 0===a?void 0:a.ask)||void 0===r?void 0:r.mainImage)||void 0===o?void 0:o.previewUrl)||c},getCompanyImageURL:function(e,t){if(!e.logoUuid)return null;const n=t?"x112":"x56";return`https://ucarecdn.com/${e.logoUuid}/-/resize/${n}/-/format/auto/`},getLogoAltText:function(e){var t,n,i;return(null===(i=null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.logoImage)||void 0===i?void 0:i.alt)||null},getMainImageAltText:function(e){var t,n,i;return(null===(i=null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.mainImage)||void 0===i?void 0:i.alt)||null},getCompanyLogoImageAltText:function(e){return e.logoAlt||null}},Ue={getLinks:function(e){return[...e.ask.links]},getAskTitle:function(e,t){var n,i;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.title:e.ask.title},getLogoImageURL:function(e,t){var n,i;return t?null===(n=e.ask.logoImage)||void 0===n?void 0:n.previewUrlRetina:null===(i=e.ask.logoImage)||void 0===i?void 0:i.previewUrl},getAskDescription:function(e,t){var n,i;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.text:e.ask.text},getAskMainImageURL:function(e,t){var n,i;const s=De(t);return(t?null===(n=e.ask.mainImage)||void 0===n?void 0:n.previewUrlRetina:null===(i=e.ask.mainImage)||void 0===i?void 0:i.previewUrl)||s},getCompanyImageURL:function(e,t){if(!e.logoUuid)return null;const n=t?"x100":"x50";return`https://ucarecdn.com/${e.logoUuid}/-/resize/${n}/-/format/auto/`},getLogoAltText:function(e){var t;return(null===(t=e.ask.logoImage)||void 0===t?void 0:t.alt)||null},getMainImageAltText:function(e){var t;return(null===(t=e.ask.mainImage)||void 0===t?void 0:t.alt)||null},getCompanyLogoImageAltText:function(e){return e.logoAlt||null}};!function(e){e.RELATIVE="relative",e.ABSOLUTE="absolute"}(_e||(_e={})),function(e){e.TWO_WEEKS="2weeks",e.ONE_MONTH="1month",e.THREE_MONTHS="3months"}(Te||(Te={})),function(e){e.ASC="asc",e.DESC="desc"}(xe||(xe={})),function(e){e.WITHOUT="without",e.SELECT="select"}(Oe||(Oe={})),function(e){e.ENABLED="enabled",e.DISABLED="disabled"}(ke||(ke={})),function(e){e.ACTIVE="active",e.DISABLED="disabled",e.AUTO_ARCHIVE="autoArchive"}(Ie||(Ie={})),function(e){e.FULL_NAME="fullName",e.FIRST_NAME_LAST_INITIALS="firstNameLastInitials",e.FIRST_NAME="firstName",e.NONE="none"}(we||(we={})),function(e){e.SPECIFIED="specified",e.DETECTED="detected",e.ACTUAL="actual"}(Re||(Re={})),function(e){e.ROUNDED="rounded",e.SHARP="sharp",e.PILL="pill"}(Me||(Me={}));var Fe;Object.values({"2:1":1.5,"1:1":2,"1:2":3,"1:3":4,"1:4":5,"1:5":6,"1:6":7,"1:7":8,"1:8":9,"1:9":10,"1:10":11}),function(e){e.UP_TO_25="up_to_25",e.UP_TO_35="up_to_35",e.UP_TO_55="up_to_55",e.UP_TO_100="up_to_100",e.UP_TO_150="up_to_150",e.UP_TO_200="up_to_200"}(Fe||(Fe={}));const je={ask:{logoImage:null,mainImage:null,text:"",title:"",links:[]},sharing:{twitter:!1,facebook:!1,linkedin:!1,copyLink:!1,email:!1},goal:{hasGoal:!1,amount:0,endDate:null,raisedAmount:0,raisedAmountWithRateMatching:0,donorsCount:0,showTotalRaisedAmount:!1},donorImpact:{show:!1,donorNameType:we.NONE,showDonorComment:!1,showDonationAmount:!1,showDonationDate:!1,showDonorLocation:!1,currencyShowType:Re.ACTUAL,currency:""},rateMatching:{show:!1,rate:0,sponsor:null,minAmount:0,endDate:null,endDateEnabled:!1,sponsorEnabled:!1,startDate:null,totalAmountLimitEnabled:!1,totalAmountLimit:null,raised:null,remains:null},thankYouScreen:{type:u.N4.THANK_YOU_SCREEN,redirect:{url:null,includeSupporterData:!1},sharing:{link:null,text:null,channels:{twitter:!1,facebook:!1,email:!1,linkedin:!1}}},appearance:{color:"",type:Me.PILL}},Be={isActive:!0},He={enabledForDonationFrequencies:Object.values(oe),enabledTargetFrequencies:[oe.ANNUAL,oe.EVERY_4_WEEKS,oe.MONTHLY],amountsMap:{[Fe.UP_TO_25]:[500,1e3],[Fe.UP_TO_35]:[1e3,1500],[Fe.UP_TO_55]:[1500,2e3],[Fe.UP_TO_100]:[2e3,2500],[Fe.UP_TO_150]:[2500,3e3],[Fe.UP_TO_200]:[3e3,4e3]},isAdaptiveSuggestionEnabled:!0},qe={disabledPaymentMethods:[]},Ge={isEnabled:!0};var Ve;!function(e){e.TOP_LEVEL_DOMAIN="topLevelDomain",e.INTENT="intent",e.MESSAGE_BAR="messageBar",e.SOCIAL_PROOF="socialProof",e.POPUP="popup",e.SESSION_AT="sessionAt",e.SESSION_PAGE="sessionPage",e.X_FACTOR="xFactor",e.LIGHTBOX="lightbox",e.LAST_SUCCESS_DONATION_AT="lastSuccessDonationAt",e.FLOATING_BUTTON_POPUP_SHOWN="floatingButtonPopupShown"}(Ve||(Ve={}));const Ke=/#(.+?)(&|$)/;function Ye(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return{};const n=/([^=&#?]+)=([^=&#?]+)/gi,i={};for(;;){const s=n.exec(e);if(!s)break;const[,a,r]=s;try{t?i[decodeURIComponent(a)]=decodeURIComponent(r):i[a]=r}catch(e){console.error(e)}}return i}function ze(e,t){let n=e;for(;;){if(t(n))return n;if(!n.parentNode)return;n=n.parentNode}}function We(e,t){if(e.getAttribute)return e.getAttribute("data-"+t)||void 0}function $e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=[];for(const i in e){const s=e[i];t?n.push(`${encodeURIComponent(i)}=${encodeURIComponent(s)}`):n.push(`${i}=${s}`)}return n.join("&")}let Xe;function Qe(){return void 0===Xe&&(Xe=!1),Xe}var Ze;!function(e){e.RECURRING="recurring",e.ONE_TIME="one-time",e.ALL="all"}(Ze||(Ze={}));class Je{static overrideWidgetGoalsConfig(e){const t=k(e);return Se.isOnetimeOnly(e.frequencies)||Se.isRecurringOnly(e.frequencies)?(this.hasDefaultGoalForAllFrequencies(e.goals)||(t.goals=t.goals.map(((e,t)=>Object.assign(Object.assign({},e),{repeat:Ze.ALL,default:0===t?Ze.ALL:null})))),t):t}static hasDefaultGoalForAllFrequencies(e){return e.some((e=>{const t=e.repeat===Ze.ALL,n=e.default===Ze.ALL;return t&&n}))}constructor(e,t,n,i,s,a,r,o,c,l,u,d){this.window=l,this._showcase=e.showcase;const h=this.cloneWidget(e.campaign);this._externalConfig=this.getExternalConfig(Object.assign(Object.assign({},t),{checkoutData:i}),h),this._queryParams=Ne(n),this._infrastructureParams=Ne(s),this._infrastructureQueryParams=u&&Ne(u),this._integrations=Ne(a),this._launcherParams=Ne(r),this._environmentConfig=Ne(o),this._campaign=Ne(Object.assign(Object.assign({},h),{config:_()(h.config,"ask")})),this._cryptoCurrencies=Ne(e.config.cryptoCurrencies),this._currencies=Ne(e.config.currencies),this._user=Ne(e.user),this._aiSuggestions=Ne(e.aiSuggestions),this._company=this.getResolvedCompany(e.company),this._fundraisingPage=e.fundraisingPage?this.getFundraisingPage(e.fundraisingPage,this.campaign.key):void 0,this._splitTest=d&&Ne(d),this._getAskPageConfig=this.getAskPageConfigGetter(h,t,this.company),this._checkoutType=c.checkoutType,this._recentDonations=e.campaign.recentDonations?Ne(e.campaign.recentDonations.filter((e=>e.donationType!==Ae.STOCK)).map((t=>{var n;const i=function(e,t){if(!e||!t)return null;const n=Math.round(e*t-e);return Math.max(n,0)}(t.amount,null===(n=e.campaign.config.campaignPage)||void 0===n?void 0:n.rateMatching.rate);return Object.assign(Object.assign({},t),{matchedAmount:i})}))):null,this._totalRecentDonations=e.campaign.totalRecentDonations||null,this._commentSettings=c.commentSettings,this._preDonationUpsellSettings=c.preDonationUpsellSettings,this._paymentOptionsSettings=c.paymentOptionsSettings,this._remindMeLaterSettings=c.remindMeLaterSettings,this._aiConfig=Ne(e.campaign.config.ai)}get allowLegacyTributeLabel(){return["ASCBRLZS","APGYPDRM","AGPUPUKX","AGDVEKDU","ASMXWWKS","AYDKPHBH"].includes(this.company.key)}get successPaymentDelayBeforeLeave(){switch(this.checkoutType){case Ce.MODAL:return be;case Ce.PAGE:return 0;default:throw new U(this.checkoutType)}}get campaignPagesSharingEnabled(){return this.campaignPage.sharing.linkedin||this.campaignPage.sharing.facebook||this.campaignPage.sharing.copyLink||this.campaignPage.sharing.twitter}get showDonorImpactSection(){return this.checkoutType===Ce.PAGE&&this.campaignPage.donorImpact.show&&!!this.recentDonations}get showGoalMeterSection(){var e,t,n,i,s;return!!(null===(e=this.fundraisingPage)||void 0===e?void 0:e.goalAmount)||!!(null===(n=null===(t=this.campaign.config.campaignPage)||void 0===t?void 0:t.goal)||void 0===n?void 0:n.showTotalRaisedAmount)&&!!(null===(s=null===(i=this.campaign.config.campaignPage)||void 0===i?void 0:i.goal)||void 0===s?void 0:s.hasGoal)}get showAmountCounterSection(){var e,t,n,i;return!!(null===(t=null===(e=this.campaign.config.campaignPage)||void 0===e?void 0:e.goal)||void 0===t?void 0:t.showTotalRaisedAmount)&&!(null===(i=null===(n=this.campaign.config.campaignPage)||void 0===n?void 0:n.goal)||void 0===i?void 0:i.hasGoal)}get goalMeterData(){var e,t,n,i,s,a,r,o,c,l,u,d;const h=(null===(e=this.fundraisingPage)||void 0===e?void 0:e.currency)||this.campaign.config.defaultCurrency,m=(null===(t=this.fundraisingPage)||void 0===t?void 0:t.goalAmount)||(null===(i=null===(n=this.campaign.config.campaignPage)||void 0===n?void 0:n.goal)||void 0===i?void 0:i.amount)||null,p=(null===(s=this.fundraisingPage)||void 0===s?void 0:s.donationsAmount)||(null===(r=null===(a=this.campaign.config.campaignPage)||void 0===a?void 0:a.goal)||void 0===r?void 0:r.raisedAmount)||null,g=(null===(c=null===(o=this.campaign.config.campaignPage)||void 0===o?void 0:o.goal)||void 0===c?void 0:c.raisedAmountWithRateMatching)?Math.round(null===(u=null===(l=this.campaign.config.campaignPage)||void 0===l?void 0:l.goal)||void 0===u?void 0:u.raisedAmountWithRateMatching):null;return{shown:this.showGoalMeterSection,currency:h,totalAmount:m,raisedAmount:Qe()?g:p,isFundraisingPageGoalMeter:!!(null===(d=this.fundraisingPage)||void 0===d?void 0:d.goalAmount)}}get recentDonations(){return this._recentDonations}get totalRecentDonations(){return this._totalRecentDonations}get checkoutType(){return this._checkoutType}get aiSuggestions(){return this._aiSuggestions}get showcase(){return this._showcase}get featureConfig(){return this._company.featureConfig}get parentCompanyConfig(){return this._company.parentCompanyConfig}get fundraisingPage(){return this._fundraisingPage}get splitTest(){return this._splitTest}get defaultFlowType(){var e,t;return(null===(e=this.externalConfig.checkoutIntent)||void 0===e?void 0:e.flowType)?null===(t=this.externalConfig.checkoutIntent)||void 0===t?void 0:t.flowType:this.fundraisingPage&&this.enabledFlows.money?Ae.MONEY:this.campaign.config.defaultDonationType}get queryParams(){return this._queryParams}get isLighthouse(){var e;return null!==(e=this._infrastructureParams.isLighthouse)&&void 0!==e&&e}get queryTrackerParams(){var e;if(this.checkoutType!==Ce.PAGE)return{tags:[]};const t=null===(e=this.externalConfig.queryParams)||void 0===e?void 0:e.eventTags;return{tags:t?t.split(","):[]}}get infrastructureQueryParams(){return this._infrastructureQueryParams||{}}get infrastructureParams(){return this._infrastructureParams}get integrations(){return this._integrations}get launcherParams(){return this._launcherParams}get environmentConfig(){return this._environmentConfig}get element(){var e,t,n,i,s,a;return{key:(null===(e=this.externalConfig.launcher)||void 0===e?void 0:e.elementKey)||(null===(t=this.fundraisingPage)||void 0===t?void 0:t.elementKey)||"",type:(null===(n=this.externalConfig.launcher)||void 0===n?void 0:n.elementType)||(null===(i=this.fundraisingPage)||void 0===i?void 0:i.elementType)||re.DIRECT_LINK,reminderKey:(null===(s=this.externalConfig.launcher)||void 0===s?void 0:s.elementReminderKey)||"",locale:null===(a=this.externalConfig.launcher)||void 0===a?void 0:a.elementLocale}}get hasExternalAmount(){var e;return!(!this.queryParams.amount&&"number"!=typeof(null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.amount)&&!this.externalConfig.checkoutIntent)}get hasExternalFrequency(){var e,t,n;return!!this.queryParams.recurring||!!(null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.recurring)||!!(null===(n=null===(t=this.externalConfig.checkoutIntent)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.frequency)}get externalFrequency(){var e,t,n;return this.queryParams.recurring||(null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.recurring)||(null===(n=null===(t=this.externalConfig.checkoutIntent)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.frequency)||null}get campaign(){return this._campaign}get campaignPage(){return this.campaign.config.campaignPage||je}get company(){return this._company}get user(){return this._user}get cryptoCurrencies(){return this._cryptoCurrencies}get currencies(){return this._currencies}get externalConfig(){return this._externalConfig}get mergedCustomFields(){return this.getMergedCustomFields()}get enabledFrequencies(){return Se.getEnabledFrequencies(this.campaign.config.frequencies)}get defaultAmounts(){const e=this.campaign.config.frequencies,t={};return this.frequencies.forEach((n=>{t[n]=e[n].defaultAmount})),t}get defaultAmountOptions(){const e=this.campaign.config.frequencies,t={};return this.frequencies.forEach((n=>{t[n]=e[n].amountOptions})),t}get enabledFlows(){return{[Ae.MONEY]:this.campaign.config.donationTypes.money.enabled,[Ae.CRYPTO]:this.campaign.config.donationTypes.crypto.enabled&&!!this.company.cryptoProvider,[Ae.STOCK]:!1}}get preselectDesignation(){return!Object.values(Ee).includes(this.campaign.key)}get aiConfig(){return this._aiConfig}get commentSettings(){return Object.assign(Object.assign({},Be),this._commentSettings)}get preDonationUpsellSettings(){return Object.assign(Object.assign({},He),this._preDonationUpsellSettings)}get paymentOptionsSettings(){return Object.assign(Object.assign({},qe),this._paymentOptionsSettings)}get remindMeLaterSettings(){return Object.assign(Object.assign({},Ge),this._remindMeLaterSettings)}mergePreDonationUpsellSettings(e){this._preDonationUpsellSettings=Object.assign(Object.assign({},this._preDonationUpsellSettings),e)}getAskPageConfig(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._getAskPageConfig(e)}getInitialCustomFields(){var e;const t=this.getCustomFieldsHash(this.campaign.customFields||[],!0),n=((null===(e=this.externalConfig.launcher)||void 0===e?void 0:e.customFields)||[]).filter((e=>void 0!==t[e.name])),i=this.getCustomFieldsHash(n),s=Object.assign(t,i);return Object.keys(s).map((e=>{var t;return{name:e,value:Array.isArray(s[e])?null===(t=s[e])||void 0===t?void 0:t[0]:s[e]}}))}get frequencies(){const e=this.campaign.config.frequencies,t=[];for(const n of Object.keys(e))t.push(n);return t}getMergedCustomFields(){var e,t,n,i,s,a;const r=this.getCustomFieldsHash(this.campaign.customFields||[]),o=this.getCustomFieldsHash((null===(n=null===(t=null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.intent)||void 0===t?void 0:t.checkoutSettings)||void 0===n?void 0:n.customFields)||[]),c=this.getCustomFieldsHash((null===(i=this.externalConfig.launcher)||void 0===i?void 0:i.customFields)||[]);let l=this.launcherParams;void 0!==(null===(s=this.fundraisingPage)||void 0===s?void 0:s.customFields)&&(null===(a=this.fundraisingPage)||void 0===a?void 0:a.customFields.length)>0&&(l=this.getCustomFieldsHash(this.fundraisingPage.customFields));const u=Ye(window.location.href),d=Object.assign(r,c,l,o,u);return Object.keys(d).map((e=>{var t;return{name:e,value:Array.isArray(d[e])?null===(t=d[e])||void 0===t?void 0:t[0]:d[e]}})).filter((e=>e.value))}getFundraisingPage(e,t){if(e&&e.key&&e.openWidget===t)return e}getCustomFieldsHash(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={};return e.forEach((e=>{e.name&&(t||e.value)&&(n[e.name]=e.value)})),n}getResolvedCompany(e){if(e.key!==this.campaign.company)throw new Error("Invalid resolved company");if(e.useParentPaymentAccounts){if(!e.parentCompanyConfig)throw new Error("Widget's Parent Company not found");return Object.assign(Object.assign({},e),{stripeFee:e.parentCompanyConfig.stripeFee,applicationFees:e.parentCompanyConfig.applicationFees,coverFees:e.parentCompanyConfig.coverFees})}return Object.assign({},e)}cloneWidget(e){const t=Je.overrideWidgetGoalsConfig(e.config);return Ne(Object.assign(Object.assign({},e),{config:t}))}getAskPageConfigGetter(e,t,n){return i=>function(e,t,n,i){let{isRetina:s,checkoutType:a}=i;const r=function(e,t){var n,i;return Boolean(e.ask.show||(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show))}(e,t),o=n.name,c=function(e){return e===Ce.MODAL?Ue:Le}(a),l=c.getAskTitle(e,t),u=c.getAskDescription(e,t),d=c.getLinks(e),h=c.getLogoImageURL(e,s),m=c.getAskMainImageURL(e,s);return{text:u,title:l,companyName:o,links:d,logoImage:h||c.getCompanyImageURL(n,s),fallbackCompanyLogo:c.getCompanyImageURL(n,s),mainImage:m,logoAltText:c.getLogoAltText(e)||c.getCompanyLogoImageAltText(n),mainImageAltText:c.getMainImageAltText(e),show:r,showLinks:!!d.length}}(e.config,t,n,{isRetina:i,checkoutType:this.checkoutType})}getExternalConfig(e,t){var n;const i=Object.assign(Object.assign({},e),{checkoutData:Object.assign({},_()(e.checkoutData,["ask","designationId"]))}),s=t.config.goals.map((e=>e.key));return(null===(n=e.checkoutData)||void 0===n?void 0:n.designationId)&&s.includes(e.checkoutData.designationId)?Ne(Object.assign(Object.assign({},i),{checkoutData:Object.assign(Object.assign({},i.checkoutData),{designationId:e.checkoutData.designationId})})):Ne(i)}}function et(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const tt=99999900;class nt{static format(e){return Object.assign(Object.assign({},e),{recurring:nt.parseRecurring(e.recurring),amount:nt.parseAmount(e.amount),successUrl:nt.parseURL(e.successUrl)})}static parseAmount(e){return null==e||e<0?null:e>tt?tt:e}static parseRecurring(e){return e&&Object.values(oe).includes(e)?e:null}static parseURL(e){return e&&et(e)?e.trim():void 0}}var it,st=n(4601),at=JSON.parse('{"GD":1.607,"CH":0.962,"SL":6409.026,"HU":181.919,"TW":13.516,"BB":2.276,"CI":215.312,"TN":0.964,"IT":0.607,"BJ":204.545,"ID":4857.054,"CV":48.339,"KN":1.842,"LA":4974.159,"UG":1270.229,"AD":0.613,"BI":1171.573,"ZA":7.667,"FR":0.667,"LY":1.894,"MX":10.751,"GA":220.225,"MK":18.435,"CN":3.549,"YE":501.421,"SB":7.159,"UZ":3643.649,"EG":7.403,"SN":215.2,"LK":55.699,"BD":32.049,"PE":1.753,"SG":0.808,"TR":16.333,"AF":21.476,"AW":1.349,"GB":0.656,"ZM":8.526,"FI":0.777,"NE":215.707,"GW":217.94,"AZ":0.496,"DJ":85.618,"MU":18.342,"CO":1522.784,"GR":0.533,"HR":0.446,"MA":3.954,"DZ":44.144,"NL":0.767,"SD":1130.568,"FJ":0.911,"NP":35.395,"PR":0.765,"GE":0.893,"PK":73.075,"BW":5.356,"LB":949.837,"PG":2.852,"DO":24.377,"QA":2.23,"MG":1342.79,"IN":20.662,"ME":0.378,"SZ":6.431,"PY":2666.53,"SV":0.428,"UA":12.485,"NA":7.272,"AE":2.297,"BG":0.792,"DE":0.726,"KH":1394.293,"IQ":507.048,"SE":8.448,"KG":26.061,"RU":29.183,"MY":1.477,"ST":13.988,"CY":0.593,"CA":1.176,"MW":553.101,"SA":1.895,"BA":0.696,"ET":33.344,"ES":0.601,"SI":0.572,"OM":0.184,"MO":4.778,"SM":0.691,"LS":6.635,"MH":1.023,"IS":151.784,"LU":0.83,"AR":728.721,"NR":1.833,"DM":1.382,"CR":312.971,"AU":1.44,"TH":10.281,"HT":111.451,"TV":1.701,"HN":11.626,"GQ":235.11,"LC":1.4,"BY":0.839,"LV":0.515,"PW":1.057,"PH":19.489,"DK":5.767,"CM":199.382,"GN":3670.122,"BH":0.168,"SR":12.949,"CD":1189.848,"SO":0.431,"CZ":12.804,"VU":135.704,"TG":194.266,"KE":45.593,"RW":363.326,"EE":0.609,"RO":1.978,"TT":3.789,"GY":69.931,"TL":0.315,"VN":7018.453,"UY":27.325,"HK":5.518,"AT":0.742,"AG":1.915,"TM":1.727,"MZ":24.945,"PA":0.47,"FM":1.104,"IE":0.743,"NO":9.116,"CF":254.245,"BF":194.129,"ER":14.319,"TZ":791.399,"KR":777.266,"JO":0.306,"MR":11.11,"LT":0.497,"SK":0.541,"AO":311.966,"KZ":165.439,"MD":7.51,"ML":190.56,"AM":148.803,"WS":2.018,"JP":93.123,"BO":2.43,"CL":461.902,"US":1,"VC":1.471,"SC":7.578,"GT":3.399,"EC":0.411,"TJ":2.669,"MT":0.561,"GM":19.323,"NG":224.649,"BS":0.968,"KW":0.19,"MV":7.965,"SS":1892.921,"IR":147066.337,"AL":42.319,"BR":2.515,"RS":47.594,"BZ":1.088,"MM":576.459,"BT":20.67,"VE":37.85,"LR":0.443,"JM":97.796,"PL":1.97,"BN":0.514,"KM":189.09,"TO":1.695,"KI":1.028,"GH":4.138,"TD":216.713,"ZW":5.957,"MN":1290.931,"PT":0.55,"CG":227.689,"BE":0.706,"IL":3.681,"NZ":1.474,"NI":12.018}'),rt=n(1217);class ot{constructor(e,t){this.rates=e,this.sentry=t}getDigits(e){return this.currencyData[e]?this.currencyData[e].digits:2}getRate(e){return this.rates[e]||1}setData(e,t,n){this._currencyData=e,t&&(this._countriesData=t),n&&(this._pppexData=n)}convertBase(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;var a;if(!Number.isInteger(e)){const e=new Error("amount should be a finite number");return null===(a=this.sentry)||void 0===a||a.captureException(e),console.error(e),0}if(0===e)return 0;if(t===n)return e;const r=this.currencyData[t].type===rt.Z.FIAT,o=this.currencyData[n].type===rt.Z.FIAT,c=this.getDigits(t),l=this.getDigits(n),u=this.calcRate(t,n,r,o);return i&&s&&r&&o&&(e=this.toAiAmount(e,s)),Math.ceil(e/Math.pow(10,c)*u*Math.pow(10,l))}calcRate(e,t,n,i){let s;const a=this.getRate(e),r=this.getRate(t);return s=n&&i?r/a:n&&!i?1/(a*r):!n&&i?a*r:a/r,s}toAiAmount(e,t){const n=this.pppexData[t]||1,i=this.rates[this.getCountryCurrency(t)]||1;return 1===n||1===i?e:e*n/i}getCountryCurrency(e){return this.countriesData[e]?this.countriesData[e][0]:"USD"}get currencyData(){if(!this._currencyData)throw new Error("Currency data was not set");return this._currencyData}get countriesData(){if(!this._countriesData)throw new Error("Countries data was not set");return this._countriesData}get pppexData(){if(!this._pppexData)throw new Error("Pppex data was not set");return this._pppexData}}class ct extends ot{getCryptoCurrency(e){const t=this.currencyData[e];if(!t)throw new Error(`Currency ${e} was not found`);if(t.type!==rt.Z.CRYPTO)throw new Error(`Currency ${e} is not a crypto`);return t}getSymbol(e){return this.currencyData[e]?this.currencyData[e].symbol:""}getName(e){return this.currencyData[e]?this.currencyData[e].name:""}getRate(e){return this.rates[e]||1}convert(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;return this.convertBase(e,t,n,i,s)}round(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=Math.ceil(Math.log10(e+1))-t,i=5*Math.pow(10,Math.max(n-3,0)+t);return Math.ceil(e/i)*i}toFloatUnformattedStr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=this.getDigits(t);return(e/Math.pow(10,i)).toFixed(n)}toFloat(e,t){const n=this.getDigits(t);return e/Math.pow(10,n)}fromFloat(e,t){const n=this.getDigits(t);return Math.round(e*Math.pow(10,n))}ceil(e,t){return this.fromFloat(Math.ceil(this.toFloat(e,t)),t)}getMinAmount(e){return this.convert(70,"USD",e)}toInt(e,t){if(!Number.isFinite(e))throw new Error("amount should be a finite number");const n=this.getDigits(t);return e*Math.pow(10,n)}getCurrencyCodesBySource(e){return Object.keys(this.currencyData).filter((t=>this.currencyData[t].sources.includes(e)))}isCrypto(e){return this.currencyData[e].type===rt.Z.CRYPTO}}class lt extends ct{constructor(e,t,n){super(t,n),this.currencyDataLoader=e,this.rates=t,this.sentry=n}loadFiat(e){const t=this.currencyDataLoader.loadFiat(e),n=st,i=at,s=Object.assign(Object.assign({},t),this._currencyData);this.setData(s,n,i)}loadCrypto(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.currencyDataLoader.loadCrypto(),t=Object.assign(Object.assign({},e),this._currencyData);this.setData(t)}))}convertFeeCurrency(e,t,n,i){const s=Math.abs(i||1);return this.convertBase(e,t,n)*s}}!function(e){e.PREFIX="prefix",e.POSTFIX="postfix"}(it||(it={}));var ut=n(4850);class dt extends ut.${getCryptoCurrencies(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield Promise.resolve().then(n.t.bind(n,472,19))).default}))}}function ht(e){return!!e.campaign.config.donationTypes.crypto.enabled||e.checkoutType===Ce.PAGE&&e.showDonorImpactSection}function mt(e){return!!e&&function(e){return/^(([a-zA-Z0-9-_+.']+(\.[a-zA-Z0-9-_+.']+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e))}(e)}var pt=n(3954);n(3393);class gt{static format(e){const t=gt.parseAmount(e.amount);return{firstName:e.firstName?e.firstName.trim():null,lastName:e.lastName?e.lastName.trim():null,email:gt.parseEmail(e.email),amount:t,currency:e.currency?e.currency.trim():null,modifyAmount:e.modifyAmount?"no"!==e.modifyAmount:null,recurring:gt.parseRecurring(e.recurring),designationId:e.designationId||null,modifyDesignation:e.modifyDesignation?"no"!==e.modifyDesignation:null,tributeHonoree:e.tributeHonoree?e.tributeHonoree.trim():null,tributeSelected:e.tributeSelected?"yes"===e.tributeSelected:null,successUrl:gt.parseURL(e.successUrl),member:e.member?e.member.trim():null,fundraiseupLivemode:e.fundraiseupLivemode?"no"!==e.fundraiseupLivemode:null,embedClientId:gt.parseEmbedClientId(e.clientId),utm:{source:e.utm_source||null,campaign:e.utm_campaign||null,medium:e.utm_medium||null,content:e.utm_content||null,term:e.utm_term||null}}}static parseURL(e){return e&&et(e)?e.trim():null}static parseEmail(e){return e&&mt(e)?e.trim():null}static parseRecurring(e){return Object.values(oe).includes(e)?e:null}static parseEmbedClientId(e){return(t=e)&&20===t.length&&!/[^\d]/.test(t)?e:null;var t}static parseAmount(e){if(!e)return null;const t=Number.parseFloat(e);return Number.isNaN(t)?null:t>999999?99999900:t>0?t:null}}class yt{}class ft extends yt{isEnabled(e,t){return t.showMailing?e>=t.showMailingFromAmount:t.showMailing}isRequired(e,t){return t.showMailing&&t.mailingRequired?e>=t.mailingRequiredFromAmount:!!t.showMailing&&t.mailingRequired}}class St extends yt{isEnabled(){return!0}isRequired(){return!0}}var Et;!function(e){e.DONOR_PORTAL_SUBSCRIPTION_EDITOR="donorPortalSubscriptionEditor",e.DASHBOARD_SUBSCRIPTION_EDITOR="dashboardSubscriptionEditor",e.WIDGET="widget",e.VIRTUAL_TERMINAL="virtualTerminal"}(Et||(Et={}));class At extends yt{constructor(e){super(),this.mailingAddressCheckoutScreenLogic=e}isEnabled(e,t){return!!this.mailingAddressCheckoutScreenLogic.isEnabled(e,t)||!!this.isRequiredByPaymentMethod(t)||!!this.isRequiredByGiftAid(t)}isRequired(e,t){return!!this.mailingAddressCheckoutScreenLogic.isRequired(e,t)||!!this.isRequiredByPaymentMethod(t)||!!this.isRequiredByGiftAid(t)}isRequiredByPaymentMethod(e){return!!e.paymentMethod&&e.paymentMethodAvailabilityManagerRepository.getManager(e.paymentMethod,Et.WIDGET).isRequired("address",{ibanCountry:e.paymentMethodCountry})}isRequiredByGiftAid(e){return e.isGiftAidAccepted}}function Ct(e){return e.isException&&e.country===u.tg.CANADA?new St:new ft}const vt=[u.tg.CANADA,u.tg.GERMANY];class Nt{constructor(e){this.widget=e.widget}}class bt extends Nt{get currency(){return this.widget.defaultCurrency}}class Pt extends Nt{get currency(){return"EUR"}}class Dt extends yt{constructor(e,t){super(),this.checkoutScreenLogic=e,this.params=t}isEnabled(e,t){return this.checkoutScreenLogic.isEnabled(e,t)||this.mailingAddressForceRequired(t)}isRequired(e,t){return this.checkoutScreenLogic.isRequired(e,t)||this.mailingAddressForceRequired(t)}mailingAddressForceRequired(e){return e.paymentMethodAvailabilityManagerRepository.getManager(e.paymentMethod,Et.VIRTUAL_TERMINAL).isRequired("address",{ibanCountry:e.paymentMethodCountry})}}const _t={showMailing:!0,showMailingFromAmount:0,mailingRequired:!0,mailingRequiredFromAmount:3e4},Tt={showMailing:!0,showMailingFromAmount:0,mailingRequired:!0,mailingRequiredFromAmount:0},xt={showMailing:!1,showMailingFromAmount:0,mailingRequired:!1,mailingRequiredFromAmount:0};class Ot{}class kt extends Ot{getDefaults(){return xt}}class It extends Ot{getDefaults(){return Tt}}class wt extends Ot{getDefaults(){return _t}}class Rt{constructor(e){this.validator=e,this.legalText=""}getValidAmounts(e,t){return this.validator.isValid(e).isValid?{showMailingFromAmount:e.showMailingFromAmount,mailingRequiredFromAmount:e.mailingRequiredFromAmount}:{showMailingFromAmount:t,mailingRequiredFromAmount:t}}}class Mt extends Rt{constructor(){super(...arguments),this.shouldHideEditor=!1,this.showMailingShouldAlwaysEnabled=!1,this.mailingRequiredShouldAlwaysEnabled=!1}}class Lt extends Rt{constructor(){super(...arguments),this.shouldHideEditor=!0,this.showMailingShouldAlwaysEnabled=!1,this.mailingRequiredShouldAlwaysEnabled=!1}}const Ut=3e4;class Ft extends Rt{constructor(){super(...arguments),this.shouldHideEditor=!1,this.showMailingShouldAlwaysEnabled=!0,this.mailingRequiredShouldAlwaysEnabled=!0,this.legalText="We recommend leaving address optional if possible; requiring it prior to checkout may cause you to lose donations. Due to German receipt regulations, an address must be required on donations over 300 euros."}getValidAmounts(e,t){const n=super.getValidAmounts(e,t);let i=n.showMailingFromAmount,s=n.mailingRequiredFromAmount;const a=this.validator.isValid({showMailingFromAmount:n.showMailingFromAmount,mailingRequiredFromAmount:n.mailingRequiredFromAmount,showMailing:e.showMailing,mailingRequired:e.mailingRequired}),r=a.meta.isShowMailingFromAmountValid,o=a.meta.isMailingRequiredFromAmountValid;return e.showMailing&&!r&&(i=Ft.MAX_SHOW_MAILING_FROM_AMOUNT),e.mailingRequired&&!o&&(s=Ft.MAX_MAILING_REQUIRED_FROM_AMOUNT),{showMailingFromAmount:i,mailingRequiredFromAmount:s}}}Ft.MAX_SHOW_MAILING_FROM_AMOUNT=Ut,Ft.MAX_MAILING_REQUIRED_FROM_AMOUNT=3e4;class jt{isValid(e){if(e.showMailing&&e.mailingRequired){const t=e.showMailingFromAmount<=e.mailingRequiredFromAmount;return{isValid:t,meta:{isMailingRequiredFromAmountValid:t,isShowMailingFromAmountValid:t}}}return{isValid:!0,meta:{isMailingRequiredFromAmountValid:!0,isShowMailingFromAmountValid:!0}}}}class Bt extends jt{isValid(e){const t=super.isValid(e),n=e.showMailingFromAmount<=Ut,i=e.mailingRequiredFromAmount<=Ut;return{isValid:t.isValid&&i&&n,meta:{isMailingRequiredFromAmountValid:i,isShowMailingFromAmountValid:n}}}}class Ht{constructor(e){var t;this.company=Ht.resolveCompanyConfig(e),this.isDevelopmentMode=null!==(t=e.isDevelopmentMode)&&void 0!==t&&t}get isExceptionLogic(){return this.company.nonProfit&&vt.includes(this.company.country)}static resolveCompanyConfig(e){return e.company.useParentPaymentAccounts&&e.parentCompany?{nonProfit:e.parentCompany.nonProfit,country:e.parentCompany.country}:{nonProfit:e.company.nonProfit,country:e.company.country}}getWidgetDefaultsLogic(){return function(e){if(e.isException)switch(e.country){case u.tg.GERMANY:return new wt;case u.tg.CANADA:return new It;default:return new kt}return new kt}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode})}getCurrencyLogic(e){return function(e){return e.isException&&e.country===u.tg.GERMANY?new Pt(e):new bt(e)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,widget:e.widget})}getWidgetEditorLogic(){return function(e){if(e.isException)switch(e.country){case u.tg.GERMANY:return new Ft(e.validator);case u.tg.CANADA:return new Lt(e.validator);default:return new Mt(e.validator)}return new Mt(e.validator)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,validator:this.getValidator()})}getCheckoutScreenLogic(){return function(e){const t=Ct(e);return new At(t)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode})}getVirtualTerminalLogic(){return function(e){const t=Ct(e);return new Dt(t,e)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,nonProfit:this.company.nonProfit})}getValidator(){return(e={country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode}).isException&&e.country===u.tg.GERMANY?new Bt:new jt;var e}}class qt{constructor(e,t,n,i){this.createFundraiseupAddressProvider=e,this.sentry=t,this.requestService=n,this.config=i}getPlaces(e){return(0,l.sH)(this,void 0,void 0,(function*(){const{customData:t,input:n,sessionToken:i,restrictCountries:s}=e,a=this.createFundraiseupAddressProvider(this.sentry,this.config);return""===n?[]:yield a.getPlaces({customData:t,input:n,sessionToken:i,restrictCountries:s})}))}shouldFindSubplaces(e){const{place:t,restrictCountries:n}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).shouldFindSubplaces({place:t,restrictCountries:n})}getSubplaces(e){const{place:t,input:n,sessionToken:i,restrictCountries:s}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).getSubplaces({place:t,input:n,sessionToken:i,restrictCountries:s})}getDetails(e){const{customData:t,place:n,sessionToken:i,restrictCountries:s}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).getDetails({customData:t,place:n,sessionToken:i,restrictCountries:s})}}var Gt,Vt=n(6181),Kt=n(3266);!function(e){e.PREFIX="prefix",e.POSTFIX="postfix"}(Gt||(Gt={}));const Yt={[I.D.EN_US]:Gt.PREFIX,[I.D.EN_GB]:Gt.PREFIX,[I.D.EN_CA]:Gt.PREFIX,[I.D.FR_CA]:Gt.POSTFIX,[I.D.ES]:Gt.POSTFIX,[I.D.ES_US]:Gt.PREFIX,[I.D.NL]:Gt.PREFIX,[I.D.NO]:Gt.PREFIX,[I.D.DE]:Gt.POSTFIX,[I.D.FI_FI]:Gt.POSTFIX,[I.D.FR_FR]:Gt.POSTFIX,[I.D.SV]:Gt.POSTFIX,[I.D.IT]:Gt.POSTFIX,[I.D.PT_PT]:Gt.POSTFIX,[I.D.PT_BR]:Gt.PREFIX,[I.D.AR_001]:Gt.PREFIX,[I.D.ZH_CN]:Gt.PREFIX,[I.D.ZH_TW]:Gt.PREFIX,[I.D.JA]:Gt.PREFIX,[I.D.KO]:Gt.PREFIX,[I.D.HU]:Gt.POSTFIX,[I.D.DA]:Gt.POSTFIX,[I.D.RU_RU]:Gt.POSTFIX,[I.D.PL_PL]:Gt.POSTFIX};class zt{constructor(){this._currenciesData=null,this.notUseLetterSymbol=!1,this.currenciesExtraData=new Map}setData(e){if(this._currenciesData=e,!this._currenciesData)return;const t=this._currenciesData;Object.keys(t).forEach((e=>{this.currenciesExtraData.set(e,{symbolHasLetters:/[a-zA-Z]/.test(t[e].symbol)})}))}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"full",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"narrowSymbol";const o=this.currenciesData[t];e=(e||0)/Math.pow(10,o.digits);const c=this.buildOptions({amount:e,display:n,currency:t,displayCurrency:r,datum:o,withoutPrefix:i,withoutSuffix:s});e<0&&0===c.intlOptions.maximumFractionDigits&&(e=0),a===I.D.KO&&e>1e4&&(c.intlOptions.minimumFractionDigits=0,c.intlOptions.maximumFractionDigits=1);const l=this.currenciesExtraData.get(o.code);return(null==l?void 0:l.symbolHasLetters)&&this.notUseLetterSymbol&&(c.intlOptions.currencyDisplay="code"),zt.castIntl({amount:e,locale:a,options:c,datum:o})}getCurrencyFormat(e){return{decimalSeparator:Intl.NumberFormat(e).format(1.1).replace(/\d/g,""),groupSeparator:Intl.NumberFormat(e).format(1e5).replace(/\d/g,"")}}static castIntl(e){let t,{amount:n,locale:i,options:s,datum:a}=e;try{t=Intl.NumberFormat(i,s.intlOptions).format(n)}catch(e){if(!zt.isUnsupportedBrowserError(e,s))throw e;s.intlOptions.currencyDisplay=Vt.Uk,t=Intl.NumberFormat(i,s.intlOptions).format(n)}return a.symbol&&t.includes(a.code)&&"code"!==s.intlOptions.currencyDisplay&&(t=t.replace(a.code,a.symbol)),s.internalOptions.pushSuffix&&(t+=`${a.code}`),i===I.D.EN_CA&&"USD"===a.code&&"narrowSymbol"===s.intlOptions.currencyDisplay&&(t=t.replace("US$","$")),t}formatSymbol(e,t,n){const i=zt.currencySymbolPosition(n);return i===Gt.PREFIX&&t===it.PREFIX||i===Gt.POSTFIX&&t===it.POSTFIX?e:""}get currenciesData(){if(!this._currenciesData)throw new Error("Currencies data was not set");return this._currenciesData}buildOptions(e){let{amount:t,display:n,currency:i,datum:s,withoutPrefix:a,withoutSuffix:r,displayCurrency:o="narrowSymbol"}=e;const c=s.type===rt.Z.CRYPTO,l=c?void 0:s.symbol,u={style:l?"currency":"decimal",currency:c?void 0:i,notation:"standard",currencyDisplay:o,minimumFractionDigits:0,maximumFractionDigits:0,numberingSystem:"latn"},d={pushSuffix:!l};switch(n){case"short":{const e=this.shortFormatNotation(t),n=this.shortFormatFractionDigits(t);"compact"===e&&(u.minimumFractionDigits=0,u.maximumFractionDigits=n),u.notation=e;break}case"shortlabel":{const e=this.shortFormatNotation(t),n=this.shortFormatFractionDigits(t);"compact"===e&&(u.minimumFractionDigits=0,u.maximumFractionDigits=n),u.notation=e,d.pushSuffix=!1;break}case"round":break;case"roundstrict":throw new Error("Used only in non-localized parts, not rewritten at the moment");case"roundlabel":d.pushSuffix=!1;break;case"full":c&&(u.style="decimal",d.pushSuffix=!0),u.maximumFractionDigits=s.digits,u.minimumFractionDigits=c?Vt.lt:s.digits;break;case"fullstrict":c&&(u.style="decimal"),d.pushSuffix=!0,u.maximumFractionDigits=s.digits,u.minimumFractionDigits=c?Vt.lt:s.digits;break;case"floatcents":Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"trimzeroes":c?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=0):Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"fulltrimzeroes":d.pushSuffix=!0,c?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=0,u.style="decimal"):Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"scopeFloatCents":throw new Error("Unused, not rewritten at the moment");default:throw new Error(`Unknown display type ${n}`)}return a&&(u.style="decimal"),(r||(0,Kt.f)(i))&&(d.pushSuffix=!1),{intlOptions:u,internalOptions:d}}shortFormatNotation(e){return Math.abs(e)<1e4?"standard":"compact"}shortFormatFractionDigits(e){const t=Math.abs(e),n=this.calcDivisor(t);let i=zt.calcDigits(t,n);return t>=zt.TEN_THOUSAND&&t<zt.HUNDRED_THOUSAND&&(i=1),t%n==0&&(i=0),i}calcDivisor(e){let t=1;return e>=zt.MILLION?t=zt.TEN_MILLIONS:e>=zt.TEN_THOUSAND&&(t=zt.THOUSAND),t}static calcDigits(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=2-Math.ceil(Math.log10(e/t));return Math.max(0,n)}static currencySymbolPosition(e){return Yt[e]}static isUnsupportedBrowserError(e,t){const n="narrowSymbol"===t.intlOptions.currencyDisplay,i=e.toString()===Vt.yb;return n&&i}}zt.THOUSAND=1e3,zt.TEN_THOUSAND=1e4,zt.HUNDRED_THOUSAND=1e5,zt.MILLION=1e6,zt.TEN_MILLIONS=1e7;class Wt extends zt{constructor(e){super(),this.currencyDataLoader=e,this.loadFiat()}loadCrypto(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.currencyDataLoader.loadCrypto(),t=Object.assign(Object.assign({},e),this._currenciesData);this.setData(t)}))}loadFiat(){const e=this.currencyDataLoader.loadFiat(),t=Object.assign(Object.assign({},e),this._currenciesData);this.setData(t)}}var $t,Xt,Qt;!function(e){e.SESSION="fundraiseup_session",e.FUNC="fundraiseup_func",e.PERFORMANCE="fundraiseup_stat",e.CONSENT="fundraiseup_consent",e.MARKETING="fundraiseup_mark",e.CID="fundraiseup_cid",e.DEBUG="fundraiseup_debug",e.EXPERIMENTS="fundraiseup_experiments",e.FUN_AB_STORAGE="fundraiseup_ab_test"}($t||($t={})),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(Xt||(Xt={})),function(e){e.STRING="string",e.OBJECT="object"}(Qt||(Qt={}));var Zt,Jt=n(3478);function en(){const e=[],t=window.location.hostname.split(".");let n=t.splice(-1).join();for(let i=t.length;i>0;i--)n=t.splice(-1).join()+"."+n,e.push(n);return e}class tn{constructor(e,t){this.field=e,this.storage=t}get(){return this.storage.get(this.field)}set(e,t){this.storage.set(this.field,e,t)}remove(e){this.storage.remove(this.field,e)}}!function(e){e.STRING="string",e.OBJECT="object"}(Zt||(Zt={}));var nn=n(641);const sn=class{static isFailure(e){return"Failure"===e._tag}static isSuccess(e){return"Success"===e._tag}static fail(e){return{_tag:"Failure",failureResult:e}}static success(e){return{_tag:"Success",successResult:e}}constructor(){throw new Error("Either can not be instantiated")}},an={withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}};class rn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.baseURL=e,this.request=t}sendRequest(e){const t=Object.assign(Object.assign({},an),e);return t.url=this.baseURL+t.url,this.request(t).then((e=>{let{data:t,valid:n}=e;return n?sn.success(t):sn.fail(t)}))}get(e){return this.sendRequest(Object.assign(Object.assign({},e),{method:"GET"}))}post(e){return this.sendRequest(Object.assign(Object.assign({},e),{method:"POST"}))}}function on(){return new rn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",nn.Em)}var cn,ln=n(7601),un=n.n(ln);class dn{constructor(e){this.currencyService=e,this.numbers=this.generateNumbers()}beautify(e,t,n){const i=Array.isArray(e);let s=un()(e).map((e=>this.currencyService.toFloat(e,t)));const a=this.sortAsc(s);s=a.list;const r=a.positions;let o=this.findNearestPosition(s[0],0,this.numbers.length-s.length);if(n){const e=this.currencyService.toFloat(n,t),i=this.numbers[this.numbers.length-1];for(;e&&this.numbers[o]<e&&e<i;)o++}const c=this.getPositionsArray(o,s.length);for(let e=c.length-1;e>0;e--){const t=this.findNearestPosition(s[e],c[e-1]+1,c[e+1]-1);c[e]=t||c[e]}return s=this.restoreSort(c.map((e=>this.numbers[e])),r).map((e=>this.currencyService.fromFloat(e,t))),i?s:s[0]}generateNumbers(){const e=[1,2,3,4,5,6,7,8,9,10,12,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,100,120,130,140,150,160,170,180,190,200,250,300,350,400,450,500,600,650,700,750,800,900],t=[10,12,15,20,25,30,35,40,50,60,70,80,90];for(let n=100;n<1e7;n*=10)t.forEach((t=>e.push(t*n)));return e}sortAsc(e){let t=0;const n=e.map((e=>({val:e,pos:t++}))).sort(((e,t)=>e.val-t.val));return{list:n.map((e=>e.val)),positions:n.map((e=>e.pos))}}restoreSort(e,t){let n=0;return t.map((t=>({pos:t,val:e[n++]}))).sort(((e,t)=>e.pos-t.pos)).map((e=>e.val))}findNearestPosition(e,t,n){if(t=t||0,n=n||this.numbers.length-1,e>=this.numbers[n])return n;for(let i=n;i>t;i--)if(this.numbers[i-1]<=e&&e<=this.numbers[i])return e-this.numbers[i-1]>=this.numbers[i]-e?i:i-1;return 0}getPositionsArray(e,t){const n=[];for(let i=e;i<e+t;i++)n.push(i);return n}}class hn{constructor(e){this.window=e}subscribeOnUserInteraction(e){const t=function(e,t){let n=!1;return t=>{n||(e(t),n=!0,setTimeout((()=>{n=!1}),1e3))}}(e);return this.window.addEventListener("mousemove",t),this.window.addEventListener("touchstart",e),this.window.addEventListener("keypress",e),()=>{this.window.removeEventListener("mousemove",t),this.window.removeEventListener("touchstart",e),this.window.removeEventListener("keypress",e)}}}!function(e){e.US_BANK_ACCOUNT="us-bank-account",e.US_BANK_ACCOUNT_DONATE_OPTIONS="us-bank-account-donate-options",e.US_BANK_ACCOUNT_CONFIRMATION="us-bank-account-confirmation",e.US_BANK_ACCOUNT_VERIFICATION_GUIDE="us-bank-account-verification-guide",e.AU_BECS="au-becs",e.CREDIT_CARD="credit-card",e.DONATE="donate-form",e.DOUBLE="double",e.GIFT_AID="gift-aid",e.PAYMENT_OPTIONS="payment-method",e.POST_DONATION_UPSELL="post-donation-upsell",e.SEPA="sepa",e.UK_BACS="uk-bacs",e.UK_BACS_CONFIRMATION="uk-bacs-confirmation",e.IDEAL_CONFIRMATION="ideal-confirmation",e.UPSELL="upsell",e.COMMUNICATION_CONSENT="communication-consent"}(cn||(cn={}));const mn="customEvent";class pn{constructor(){this.payload={}}merge(e){const t={};for(const n in e)t[n]=e[n];for(const e in this.payload)t[e]=this.payload[e];var n;!e.elementType||(n=e.elementType)&&Object.values(re).includes(n)||delete t.elementType,this.payload=t,e.eventComment&&this.mergeEventComment(e.eventComment)}validate(){return!(!this.payload.companyKey||8!==this.payload.companyKey.length||!this.payload.clientId||!this.eventType)}toObject(){const e={};for(const t in this.payload)e[t]=this.payload[t];return this.payload.eventComment&&(e.eventComment=JSON.stringify(this.payload.eventComment)),e.eventType=this.eventType,e}mergeEventComment(e){this.payload.eventComment||(this.payload.eventComment={}),Object.assign(this.payload.eventComment,e)}}class gn extends pn{constructor(e){super(),this.eventId=e.options.eventID;const t={eventId:this.eventId,pixels:e.pixels,data:e.parameters,userData:{fbp:e.options.fbp}};this.payload={pixelEventName:e.eventName,pixelEventData:JSON.stringify(t)}}get eventType(){return"facebookPixel"}validate(){return!!this.payload.pixelEventName&&!!this.eventType}}var yn,fn,Sn;!function(e){e.INITIATE_CHECKOUT="InitiateCheckout",e.PURCHASE="Purchase",e.DONATE="Donate",e.SUBSCRIBE="Subscribe"}(yn||(yn={})),function(e){e.EVENT_DONATION_COMPLETE="donationComplete",e.EVENT_CHECKOUT_CLOSE="checkoutClose",e.EVENT_CHECKOUT_OPEN="checkoutOpen"}(fn||(fn={}));class En{constructor(e){this.window=e}track(e,t){switch(e){case fn.EVENT_CHECKOUT_OPEN:this.openEvent(e,t);break;case fn.EVENT_CHECKOUT_CLOSE:this.closeEvent(e,t);break;case fn.EVENT_DONATION_COMPLETE:this.donationEvent(e,t)}}openEvent(e,t){const n={event:"FundraiseUp."+e,FundraiseUp:t.data,ecommerce:{}};this.pushEvent(n)}closeEvent(e,t){const n={event:"FundraiseUp."+e,FundraiseUp:t.data,ecommerce:{}};this.pushEvent(n)}donationEvent(e,t){var n,i,s,a,r,o,c,l,u;const d=t.data,h={event:"FundraiseUp."+e,FundraiseUp:d,ecommerce:{transaction_id:null===(n=d.donation)||void 0===n?void 0:n.id,value:null===(i=d.donation)||void 0===i?void 0:i.amount,currency:null===(s=d.donation)||void 0===s?void 0:s.currency,items:[{item_id:t.widget.key,item_name:t.widget.name,index:0,item_brand:"Fundraise Up",item_category:null===(a=d.designation)||void 0===a?void 0:a.name,item_category2:null===(r=d.designation)||void 0===r?void 0:r.id,item_category3:null===(o=d.designation)||void 0===o?void 0:o.code,item_variant:null===(c=d.donation)||void 0===c?void 0:c.frequency,price:null===(l=d.donation)||void 0===l?void 0:l.amount,quantity:1,currency:null===(u=d.donation)||void 0===u?void 0:u.currency}]}};this.pushEvent(h)}pushEvent(e){this.window.dataLayer=this.window.dataLayer||[],this.window.dataLayer.push(e)}}class An{constructor(){this.queue=[]}pushEvent(e,t){this.queue.push({eventName:e,eventPayload:t})}[Symbol.iterator](){return this.queue.values()}}function Cn(e,t){var n;return(null!==(n=null==t?void 0:t.document)&&void 0!==n?n:document).cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")}class vn{constructor(e){this.observers=[],this.isActive=!0,this._eventsQueue=null,this.isEnabled=e.enabledByDefault,this.window=e.window,this.tracker=e.tracker,this.sentry=e.sentry,this.checkoutConfiguration=e.checkoutConfiguration,this.initialize()}donationComplete(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(fn.EVENT_DONATION_COMPLETE,n)}checkoutClose(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(fn.EVENT_CHECKOUT_CLOSE,n)}checkoutOpen(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(fn.EVENT_CHECKOUT_OPEN,n)}observe(e,t){this.isEnabled&&(this.isActive?this.observeEvent(e,t):this.eventsQueue.pushEvent(e,t))}setActive(e){if(this.isActive=e,this.isActive)for(const{eventName:e,eventPayload:t}of this.eventsQueue)this.observeEvent(e,t)}get eventsQueue(){return this._eventsQueue||(this._eventsQueue=new An),this._eventsQueue}observeEvent(e,t){for(const n of this.observers)n.track(e,t)}resolveFacebookPixels(){var e;let t=[];const n=this.window.fbq;if(!n)return t;if("function"==typeof(null==n?void 0:n.getState)){const i=n.getState();if(null===(e=null==i?void 0:i.pixels)||void 0===e?void 0:e.length)return t=i.pixels.map((e=>e.id)),t}const i=n.queue;return i.length?(i.forEach((e=>{const n=e[0],i=e[1];"init"===n&&i&&t.push(i)})),t):t}resolveFacebookEventOptions(e){return Object.assign(Object.assign({},e),{fbp:Cn("_fbp")})}initializeFacebookPixelTracking(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.overrideFacebookPixelQueuePush(),this.overrideFacebookPixelCallMethod()||e>24||setTimeout((()=>this.initializeFacebookPixelTracking(e+1)),100*e)}overrideFacebookPixelCallMethod(){const e=this.window.fbq;if(!e||!e.callMethod)return!1;if(e.callMethod.overridden)return!0;if(e.queue.length)return!1;const t=e.callMethod,n=this;return e.callMethod=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const[a,r,o,c]=n.transformQueuePushArgs(i),l=n.resolveFacebookEventOptions(c);t.call(this,...arguments),"string"==typeof r&&n.trackFacebookEventToClickhouse({eventType:a,eventName:r,parameters:o,options:l,pixels:n.resolveFacebookPixels()})},e.callMethod.overridden=!0,!0}transformQueuePushArgs(e){if((e=Array.isArray(e)?e:Array.from(e)).length<4)return e;const t=e[3];return t&&"object"==typeof t?(t.content_ids&&!Array.isArray(t.content_ids)&&(t.content_ids=[t.content_ids]),e.splice(1,1),e):e}overrideFacebookPixelQueuePush(){const e=this.window.fbq;if(!e||e.callMethod||!e.queue)return;if(e.queue.push.overridden)return;const t=this,n=t.resolveFacebookPixels(),i=e.queue;i.length&&i.forEach((e=>{const i=(e=t.transformQueuePushArgs(e))[0],s=e[1],a=e[2],r=t.resolveFacebookEventOptions();"init"!==i&&t.trackFacebookEventToClickhouse({eventType:i,eventName:s,parameters:a,options:r,pixels:n})}));const s=e.queue.push;e.queue.push=function(e){const i=s.call(this,e);if(!e)return i;const a=(e=t.transformQueuePushArgs(e))[0],r=e[1],o=e[2],c=e[3],l=t.resolveFacebookEventOptions(c);return"string"!=typeof r||t.trackFacebookEventToClickhouse({eventType:a,eventName:r,parameters:o,options:l,pixels:n}),i},e.queue.push.overridden=!0}trackFacebookEventToClickhouse(e){let{eventType:t,eventName:n,parameters:i,options:s,pixels:a}=e;if(!this.isEnabled)return;if(!Object.values(yn).includes(n))return;var r;Array.isArray(a)&&a.length&&(a=a.filter((e=>"string"==typeof e)),r=a,a=Array.from(new Set(r)));const o=this.tracker;"string"==typeof n&&/^\d+$/.test(n)?this.sentry.captureException(new Error(`Facebook Pixel event name is a number: ${n} attempt 2`),{extra:{eventName:n,eventType:t,parameters:i,options:s,pixels:a}}):o.track(new gn({eventType:t,eventName:n,parameters:i,options:s,pixels:a}))}initializeObservers(){this.observers.push(new En(this.window))}initialize(){(this.checkoutConfiguration.infrastructureParams.livemode||this.checkoutConfiguration.company.trackToMarketingPixels.trackTestData)&&(this.initializeObservers(),this.initializeFacebookPixelTracking())}}!function(e){e.DUMMY_EXPERIMENT="DummyExperiment",e.UPSELL_CURTAIN_EXPERIMENT="UpsellCurtainExperiment",e.CHECKOUT_BUNDLE_EXPERIMENT="CheckoutBundleExperiment",e.UPSELL_SCREEN_V_3_EXPERIMENT="UpsellScreenV3Experiment",e.DONOR_PORTAL_TEST_EXPERIMENT="DonorPortalTestExperiment",e.CAMPAIGN_PAGE_TEST_EXPERIMENT="CampaignPageTestExperiment",e.EMBED_TEST_EXPERIMENT="EmbedTestExperiment",e.UPGRADE_LINKS_IN_INSTALLMENT_EMAILS_AI_V2_EXPERIMENT="UpgradeLinksInInstallmentEmailsAIv2Experiment",e.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT="MlPostDonationUpsellCheckoutExperiment",e.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT="MlPostDonationUpsellCampaignPagesExperiment",e.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT="CheckoutWithoutPreDonationUpsellExperiment",e.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT="CampaignPagesWithoutPreDonationUpsellExperiment",e.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT="SmartCoveringFeeSuggestionCheckoutExperimentV2",e.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT="SmartCoveringFeeSuggestionCampaignPagesExperimentV2",e.AA_CHECKOUT_EXPERIMENT="AACheckoutExperiment",e.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT="AmountPresetsCheckoutV3Experiment",e.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT="SmartPostDonationUpsellCheckoutV2Experiment",e.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT="SmartPostDonationUpsellCampaignPagesV2Experiment",e.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT="LessPaymentOptionsCampaignPagesExperiment",e.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT="UpsellAmountsDatasetModalExperiment",e.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT="UpsellAmountsDatasetPagesExperiment",e.ML_DONATION_RETRY_V_2_EXPERIMENT="MlDonationRetryV2Experiment",e.UPGRADE_LINKS_PAGE_AI_V_2_EXPERIMENT="UpgradeLinksPageAIv2Experiment",e.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT="PresetsInDonationFormV3Experiment",e.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT="SteplessMobileCheckoutExperiment",e.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT="CollectDatasetPostDonationUpsellAmountCheckoutV3Experiment",e.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT="CollectDatasetPostDonationUpsellAmountCampaignPagesV3Experiment",e.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT="UpsellAmountsSuggestionModalExperiment",e.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT="UpsellAmountsSuggestionPagesExperiment",e.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT="BirthdayDonationCheckoutExperiment",e.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT="BirthdayDonationCampaignPageExperiment",e.NEW_LABELS_IN_DP_CANCELLATION_FLOW_EXPERIMENT="NewLabelsInDPCancellationFlowExperiment",e.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT="AmountPresetsPagesV3Experiment",e.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT="DefaultFrequencyV2ModalExperiment",e.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT="DefaultFrequencyV2CampaignPagesExperiment",e.ML_DEFAULT_FREQUENCY_IN_DONATION_FORM_EXPERIMENT="MlDefaultFrequencyInDonationFormExperiment",e.SMART_PDU_CHECKOUT_V_3_EXPERIMENT="SmartPDUCheckoutV3Experiment",e.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT="SmartPDUCampaignPagesV3Experiment",e.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT="RecurringFrequencyHintCampaignPagesExperiment",e.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT="RecurringFrequencyHintCheckoutDesktopExperiment",e.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT="RecurringFrequencyHintCheckoutMobileExperiment",e.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT="CheckoutStepsCampaignPagesExperiment",e.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT="CheckoutStepsCheckoutModalExperiment",e.DONOR_RATING_CHECKOUT_EXPERIMENT="DonorRatingCheckoutExperiment",e.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT="DonorRatingCampaignPagesExperiment"}(Sn||(Sn={}));const Nn={[Sn.DUMMY_EXPERIMENT]:"33802",[Sn.UPSELL_CURTAIN_EXPERIMENT]:"43030",[Sn.CHECKOUT_BUNDLE_EXPERIMENT]:"61172",[Sn.UPSELL_SCREEN_V_3_EXPERIMENT]:"65613",[Sn.DONOR_PORTAL_TEST_EXPERIMENT]:"68092",[Sn.CAMPAIGN_PAGE_TEST_EXPERIMENT]:"68383",[Sn.EMBED_TEST_EXPERIMENT]:"65492",[Sn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT]:"70084",[Sn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT]:"71732",[Sn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT]:"73814",[Sn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT]:"73816",[Sn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT]:"82767-modal",[Sn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT]:"82767-pages",[Sn.AA_CHECKOUT_EXPERIMENT]:"77715",[Sn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT]:"96929-modal",[Sn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT]:"79870-modal",[Sn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT]:"79870-pages",[Sn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT]:"86423",[Sn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT]:"87159-modal",[Sn.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT]:"87159-pages",[Sn.ML_DONATION_RETRY_V_2_EXPERIMENT]:"86213",[Sn.UPGRADE_LINKS_IN_INSTALLMENT_EMAILS_AI_V2_EXPERIMENT]:"87202",[Sn.UPGRADE_LINKS_PAGE_AI_V_2_EXPERIMENT]:"87190",[Sn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT]:"92387",[Sn.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT]:"60395",[Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT]:"89924-modal",[Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT]:"89924-pages",[Sn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT]:"89701-modal",[Sn.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT]:"89701-pages",[Sn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT]:"92376-pages",[Sn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT]:"84301-modal",[Sn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT]:"84301-pages",[Sn.NEW_LABELS_IN_DP_CANCELLATION_FLOW_EXPERIMENT]:"74047",[Sn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT]:"100054",[Sn.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT]:"100058",[Sn.ML_DEFAULT_FREQUENCY_IN_DONATION_FORM_EXPERIMENT]:"100053",[Sn.SMART_PDU_CHECKOUT_V_3_EXPERIMENT]:"89260-modal",[Sn.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT]:"89260-pages",[Sn.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT]:"59392-pages",[Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT]:"59392-desktop",[Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT]:"59392-mobile",[Sn.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT]:"59119-pages",[Sn.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT]:"59119-modal",[Sn.DONOR_RATING_CHECKOUT_EXPERIMENT]:"99706-modal",[Sn.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT]:"99706-pages"};var bn,Pn,Dn,_n,Tn,xn,On,kn,In,wn,Rn,Mn,Ln,Un,Fn,jn,Bn,Hn,qn,Gn,Vn,Kn,Yn,zn,Wn,$n,Xn,Qn,Zn,Jn,ei,ti,ni,ii,si,ai,ri,oi,ci,li,ui,di,hi,mi,pi,gi,yi,fi,Si,Ei,Ai,Ci;Object.values(Nn),function(e){e.BILLING="billing",e.EMBED="embed",e.CAMPAIGN_PAGES="campaignPages",e.DONOR_PORTAL="donorPortal",e.EMAILS="emails"}(bn||(bn={})),function(e){e.CONTROL="control",e.TEST="test"}(Pn||(Pn={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(Dn||(Dn={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(_n||(_n={})),function(e){e.CONTROL="control",e.TEST="test"}(Tn||(Tn={})),function(e){e.CONTROL="control",e.TEST="test"}(xn||(xn={})),function(e){e.CONTROL="control",e.TEST="test"}(On||(On={})),function(e){e.CONTROL="control",e.TEST="test"}(kn||(kn={})),function(e){e.CONTROL="control",e.TEST="test"}(In||(In={})),function(e){e.CONTROL="control",e.TEST="test"}(wn||(wn={})),function(e){e.CONTROL="control",e.TEST="test"}(Rn||(Rn={})),function(e){e.CONTROL="control",e.TEST="test"}(Mn||(Mn={})),function(e){e.CONTROL="control",e.TEST="test"}(Ln||(Ln={})),function(e){e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(Un||(Un={})),function(e){e.CONTROL="control",e.TEST="test"}(Fn||(Fn={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(jn||(jn={})),function(e){e.CONTROL="control",e.TEST="test"}(Bn||(Bn={})),function(e){e.CONTROL="control",e.TEST="test"}(Hn||(Hn={})),function(e){e.CONTROL="control",e.TEST="test"}(qn||(qn={})),function(e){e.CONTROL="control",e.TEST="test"}(Gn||(Gn={})),function(e){e.CONTROL="control",e.TEST="test"}(Vn||(Vn={})),function(e){e.CONTROL="control",e.TEST="test"}(Kn||(Kn={})),function(e){e.CONTROL="control",e.TEST="test"}(Yn||(Yn={})),function(e){e.CONTROL="control",e.TEST="test"}(zn||(zn={})),function(e){e.CONTROL="control",e.TEST="test"}(Wn||(Wn={})),function(e){e.CONTROL="control",e.TEST="test"}($n||($n={})),function(e){e.CONTROL="control",e.TEST="test"}(Xn||(Xn={})),function(e){e.CONTROL="control",e.TEST="test"}(Qn||(Qn={})),function(e){e.CONTROL="control",e.TEST="test"}(Zn||(Zn={})),function(e){e.CONTROL="control",e.TEST="test"}(Jn||(Jn={})),function(e){e.CONTROL="control",e.TEST="test"}(ei||(ei={})),function(e){e.CONTROL="control",e.TEST="test"}(ti||(ti={})),function(e){e.CONTROL="control",e.TEST="test"}(ni||(ni={})),function(e){e.CONTROL="control",e.TEST="test"}(ii||(ii={})),function(e){e.CONTROL="control",e.TEST="test"}(si||(si={})),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(ai||(ai={})),function(e){e.CONTROL="control",e.TEST="test"}(ri||(ri={})),function(e){e.CONTROL="control",e.TEST="test"}(oi||(oi={})),function(e){e.CONTROL="control",e.TEST="test"}(ci||(ci={})),function(e){e.CONTROL="control",e.TEST="test"}(li||(li={})),function(e){e.CONTROL="control",e.TEST="test"}(ui||(ui={})),function(e){e.CONTROL="control",e.TEST="test"}(di||(di={})),function(e){e.CONTROL="control",e.TEST="test"}(hi||(hi={})),function(e){e.CONTROL="control",e.TEST="test"}(mi||(mi={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(pi||(pi={})),function(e){e.CONTROL="control",e.TEST="test"}(gi||(gi={})),function(e){e.CONTROL="control",e.TEST="test"}(yi||(yi={})),function(e){e.CONTROL="control",e.TEST="test"}(fi||(fi={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(Si||(Si={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(Ei||(Ei={})),function(e){e[e.COMPANY_NOT_FOUND=1]="COMPANY_NOT_FOUND",e[e.UNSUPPORTED_STORAGE_TYPE=2]="UNSUPPORTED_STORAGE_TYPE",e[e.BACKDROP_CONTAINER_IS_NOT_AVAILABLE=3]="BACKDROP_CONTAINER_IS_NOT_AVAILABLE",e[e.EXPERIMENT_ALREADY_STARTED=4]="EXPERIMENT_ALREADY_STARTED",e[e.INVALID_VARIANT_NAME_FOR_EXPERIMENT=5]="INVALID_VARIANT_NAME_FOR_EXPERIMENT",e[e.STORED_SETTINGS_MUST_BE_AN_OBJECT=6]="STORED_SETTINGS_MUST_BE_AN_OBJECT",e[e.INVALID_DISTRIBUTION_IN_EXPERIMENT=7]="INVALID_DISTRIBUTION_IN_EXPERIMENT",e[e.NO_SUCH_SETTINGS_FOR_EXPERIMENT=8]="NO_SUCH_SETTINGS_FOR_EXPERIMENT",e[e.NO_SUCH_EXPERIMENT=9]="NO_SUCH_EXPERIMENT",e[e.UNSUPPORTED_TYPE_OF_STORAGE=10]="UNSUPPORTED_TYPE_OF_STORAGE",e[e.FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED=11]="FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED",e[e.NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED=12]="NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED",e[e.UNSUPPORTED_LOCALE_CONFIG_TYPE=13]="UNSUPPORTED_LOCALE_CONFIG_TYPE",e[e.SERVICE_HAS_ALREADY_BEEN_PROVIDED=14]="SERVICE_HAS_ALREADY_BEEN_PROVIDED",e[e.MUST_PROVIDE_COMPANY_KEY=15]="MUST_PROVIDE_COMPANY_KEY",e[e.TRACKER_ALREADY_STARTED=16]="TRACKER_ALREADY_STARTED"}(Ai||(Ai={})),function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(Ci||(Ci={}));class vi extends Error{constructor(e){super(`${Ai.EXPERIMENT_ALREADY_STARTED} - ${e}`)}}class Ni extends Error{constructor(e){super(`${Ai.STORED_SETTINGS_MUST_BE_AN_OBJECT} - ${e}`)}}class bi extends Error{constructor(e){super(`${Ai.NO_SUCH_SETTINGS_FOR_EXPERIMENT} - ${e}`)}}class Pi extends Error{constructor(e){super(`${Ai.INVALID_VARIANT_NAME_FOR_EXPERIMENT} - ${e}`)}}class Di extends Error{constructor(e){super(`${Ai.NO_SUCH_EXPERIMENT} - ${e}`)}}class _i{constructor(e){this.excluded=!1,this.isInitialized=!1,this.isActive=!1;const{settings:t,companyKey:n,widgetKey:i,tracker:s,funStorage:a,user:r,parentCompanyKey:o,infrastructureParams:c,sentry:l,distribution:u,allowExperiments:d=!0}=e;this.sentry=l,this.companyKey=n,this.parentCompanyKey=o,this.widgetKey=i,this.tracker=s,this.funStorage=a,this.user=r,this.infrastructureParams=c;const{experimentId:h,name:m,disabledAccounts:p,enabledAccounts:g,enabled:y,enabledWidgets:f}=t;this.name=m,this.experimentId=h,this.disabledAccounts=p,this.enabledAccounts=g,this.enabledWidgets=f,this.disabledWidgets=t.disabledWidgets,this.settings=t,this.enabled=y,this.distribution=u;const S=Array.isArray(window.FUN_DISABLED_EXPERIMENTS)?window.FUN_DISABLED_EXPERIMENTS:[];this.globalDisabled=!d||window.FUN_DISABLE_EXPERIMENTS||-1!==S.indexOf(h)}get isExperimentEnabled(){return((e,t)=>{var n;if(!t)return!1;const{enabled:i,name:s}=t,a=e.get(),r=a&&(null===(n=a.settings[s])||void 0===n?void 0:n.enabled);return i||Boolean(r)})(this.funStorage,this.settings)}getDebugPanelEnabled(){var e,t;const n=null===(e=this.funStorage.get())||void 0===e?void 0:e.settings;return Boolean(n&&(null===(t=n[this.name])||void 0===t?void 0:t.enabled))}get active(){return this.isActive}get variantName(){return this.distribution.currentVariantName}start(e){if(!this.checkDisabled()&&(this.isInitialized=this.init(),this.isInitialized)){this.activate();const e=this.getTags();this.tracker.setEventTags(e)}}getTags(){const e=[this.experimentId,`${this.experimentId}-${this.variantName}`];return this.excluded&&e.push(`${this.experimentId}-exclusion`),e}isVariant(e){return this.variantName===e}setVariant(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.distribution.setVariant(e),this.excluded=t;const n=[this.experimentId];this.tracker.removeEventTags(n);const i=this.getTags();this.tracker.setEventTags(i)}restoreVariant(){this.distribution.previousVariantName&&this.setVariant(this.distribution.previousVariantName,!1)}exposure(){this.isActive&&this.tracker.customTrack({type:"testGroupExposed",data:{exclusion:this.excluded,experimentId:this.experimentId,variantName:this.variantName}})}init(){var e,t,n,i;const s=this.getDebugPanelVariant();if(s.variant&&s.enabled)return this.setVariant(s.variant),!0;if(s.enabled&&!s.variant&&(this.excluded=!0),!((e,t)=>{const{disabledAccounts:n,enabledAccounts:i}=e;if(null==n?void 0:n.find((e=>e===t)))return!1;const s=null==i?void 0:i.find((e=>e===t));return!((null==i?void 0:i.length)&&!s)})(this.settings,this.companyKey))return!1;const a=null===(e=this.enabledWidgets)||void 0===e?void 0:e.find((e=>e===this.widgetKey));if((null===(t=this.enabledWidgets)||void 0===t?void 0:t.length)&&!a)return!1;const r=null===(n=this.disabledWidgets)||void 0===n?void 0:n.find((e=>e===this.widgetKey));return!((null===(i=this.disabledWidgets)||void 0===i?void 0:i.length)&&r||(this.distribution.initCurrentVariantName(),0))}activate(){this.isActive?this.sentry.captureException(new vi(this.name)):this.isActive=!0}checkDisabled(){const e=this.getDebugPanelExperimentsSettings();if(e){const t=e[this.name];if(t&&t.enabled)return!1}return!this.enabled||this.globalDisabled}getDebugPanelExperimentsSettings(){const e=this.funStorage.get();return"object"!=typeof e?(this.sentry.captureException(new Ni(e)),null):(null==e?void 0:e.settings)||null}getDebugPanelVariant(){var e;const t=null===(e=this.funStorage.get())||void 0===e?void 0:e.settings;if(!t)return{enabled:!1};const n=t[this.name];return n&&(null==n?void 0:n.enabled)?{enabled:!0,variant:n.variant}:{enabled:!1}}}var Ti=n(5448),xi=n(3836);class Oi extends _i{get isTestGroup(){return this.isActive&&this.isVariant(oi.TEST)}get isControlGroup(){return this.isActive&&this.isVariant(oi.CONTROL)}get isBirthdayDonationEnabled(){return this.isTestGroup}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryToExpose(){this.exposure()}canBeStarted(e){return(0,xi.iJ)(e.intl.language)!==Ti.p.RTL}}class ki extends _i{get isTestGroup(){return this.isActive&&this.isVariant(ri.TEST)}get isControlGroup(){return this.isActive&&this.isVariant(ri.CONTROL)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryStart(e){this.active||this.canBeStarted(e)&&this.start(e)}tryToExpose(){this.exposure()}canBeStarted(e){const{isPhoneEnabled:t,isOnBehalfOfEnabled:n,isAnonymousEnabled:i,isGeneralConsentEnabled:s,isTermsAndConditionsEnabled:a,isTributeFilled:r,isDesktop:o,intl:c}=e;if((0,xi.iJ)(c.language)===Ti.p.RTL)return!1;const l=o&&t&&n&&r;return!(l&&i&&s&&a||l&&!i&&s&&a||l&&i&&!s&&a||l&&i&&s&&!a)}}class Ii extends _i{tryStart(e){this.canBeStarted(e)&&(this.isActive||super.start())}isTestGroup(){return this.isActive&&this.isVariant(fi.TEST)}canBeStarted(e){return e.flowType===Ae.MONEY}}class wi extends _i{constructor(){super(...arguments),this.isExposed=!1}get isControlGroup(){return this.isActive&&this.isVariant(ci.CONTROL)}get isTestGroup(){return this.isActive&&this.isVariant(ci.TEST)}tryExpose(){this.isExposed||(this.exposure(),this.isExposed=!0)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return!(!e.enabledFrequencies.includes(oe.ONCE)||!e.enabledFrequencies.includes(oe.MONTHLY)||!e.aiFrequencyEnabled||e.hasExternalFrequencies||e.p2pUsed)}}class Ri extends _i{get isTestGroup1(){return this.isActive&&this.isVariant(Si.TEST_1)}get isTestGroup2(){return this.isActive&&this.isVariant(Si.TEST_2)}tryStart(e){this.canBeStarted(e)&&super.start()}isEnabled(e){return!!this.canBeStarted(e)}isDonorRatingTopExists(e){const{donorRating:t,enabledFrequencies:n}=e;return n.some((e=>void 0!==t.test1[e]))||n.some((e=>void 0!==t.test2[e]))}canBeStarted(e){return!!this.isDonorRatingTopExists(e)}}class Mi extends _i{isTestGroup(){return this.isActive&&this.isVariant(Kn.TEST)}tryStart(){this.isActive||this.start()}}class Li extends _i{constructor(){super(...arguments),this._allowedFrequencies=[oe.ONCE,oe.MONTHLY],this._allowedLocales=[I.D.EN_US,I.D.EN_GB,I.D.EN_CA]}get isTestGroup(){return[pi.TEST_1,pi.TEST_2].some((e=>this.isVariantTestGroup(e)))}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}isTestGroup1(){return this.isVariantTestGroup(pi.TEST_1)}isTestGroup2(){return this.isVariantTestGroup(pi.TEST_2)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!this._allowedLocales.includes(e.locale)&&(!e.isMobile&&!(!this._allowedFrequencies.every((t=>e.enabledFrequencies.includes(t)))||e.isTributeEnabled&&e.isDesignationEnabled&&e.isImpactDescriptionEnabled))}}class Ui extends _i{constructor(){super(...arguments),this._allowedFrequencies=[oe.ONCE,oe.MONTHLY],this._allowedLocales=[I.D.EN_US,I.D.EN_GB,I.D.EN_CA]}get isTestGroup(){return this.isActive&&this.isVariant(gi.TEST)}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!this._allowedLocales.includes(e.locale)&&(!!e.isMobile&&!!this._allowedFrequencies.every((t=>e.enabledFrequencies.includes(t))))}}class Fi extends _i{get isTestGroup(){return this.isActive&&this.isVariant(hi.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}}class ji extends _i{get isTestGroup(){return this.isActive&&this.isVariant(di.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}}class Bi extends _i{constructor(){super(...arguments),this._openListeners=new Set,this._closeListeners=new Set}get isTestGroup(){return this.active&&!this.isVariant(Dn.CONTROL)&&!this.isVariant(Dn.TEST_3)}canOpenUpsellCurtain(e){return this.isTestGroup&&e.preDonationUpsellIsEnabled&&!this.isTributeAnnualUpsell(e.tributeIsFilled,e.targetFrequency)}canBeStarted(e){return!!e.preDonationUpsellIsEnabled&&!!Bi.INCLUDED_LOCALES.includes(e.locale)&&e.currentFrequency===oe.ONCE&&!this.isTributeAnnualUpsell(e.tributeIsFilled,e.targetFrequency)}tryStart(e){this.active||this.canBeStarted(e)&&this.start(e)}openCurtain(){this.trackCurtainOpen(),this._openListeners.forEach((e=>e()))}closeCurtain(){this.trackCurtainClose(),this._closeListeners.forEach((e=>e()))}onCurtainOpen(e){return this._openListeners.add(e),()=>this._openListeners.delete(e)}onCurtainClose(e){return this._closeListeners.add(e),()=>this._closeListeners.delete(e)}onBackDropClose(e){return this._onBackDropCloseListener=e,()=>this._onBackDropCloseListener=void 0}closeCurtainOnBackDrop(){this._onBackDropCloseListener&&this._onBackDropCloseListener()}isTributeAnnualUpsell(e,t){return e&&t===oe.ANNUAL}trackCurtainOpen(){this.tracker.customTrack({type:"upsellCurtainExperimentOpen"})}trackCurtainClose(){this.tracker.customTrack({type:"upsellCurtainExperimentClose"})}}Bi.INCLUDED_LOCALES=[I.D.EN_US,I.D.EN_GB,I.D.EN_CA];var Hi,qi,Gi,Vi,Ki=n(8032);!function(e){e.GOOGLE_PLACES="google-places",e.LOB="lob",e.LOQATE="loqate"}(Hi||(Hi={})),function(e){e.DELIVERABLE="deliverable",e.UNDELIVERABLE="undeliverable"}(qi||(qi={})),function(e){e[e.STREET=200]="STREET",e[e.APARTMENT=200]="APARTMENT",e[e.CITY=40]="CITY",e[e.STATE=200]="STATE",e[e.ZIP=100]="ZIP"}(Gi||(Gi={})),function(e){e.AFGHANISTAN="AF",e.ALAND_ISLANDS="AX",e.ALBANIA="AL",e.ALGERIA="DZ",e.AMERICAN_SAMOA="AS",e.ANDORRA="AD",e.ANGOLA="AO",e.ANGUILLA="AI",e.ANTIGUA_AND_BARBUDA="AG",e.ARGENTINA="AR",e.ARMENIA="AM",e.ARUBA="AW",e.AUSTRALIA="AU",e.AUSTRIA="AT",e.AZERBAIJAN="AZ",e.BAHAMAS="BS",e.BAHRAIN="BH",e.BANGLADESH="BD",e.BARBADOS="BB",e.BELARUS="BY",e.BELGIUM="BE",e.BELIZE="BZ",e.BENIN="BJ",e.BERMUDA="BM",e.BHUTAN="BT",e.BOLIVIA="BO",e.BONAIRE="BQ",e.BOSNIA_AND_HERZEGOVINA="BA",e.BOTSWANA="BW",e.BRAZIL="BR",e.BRITISH_INDIAN_OCEAN_TERRITORY="IO",e.BRUNEI="BN",e.BULGARIA="BG",e.BURKINA_FASO="BF",e.BURUNDI="BI",e.CABO_VERDE="CV",e.CAMBODIA="KH",e.CAMEROON="CM",e.CANADA="CA",e.CAYMAN_ISLANDS="KY",e.CENTRAL_AFRICAN_REPUBLIC="CF",e.CHAD="TD",e.CHILE="CL",e.CHINA="CN",e.CHRISTMAS_ISLAND="CX",e.COCOS_KEELING_ISLANDS="CC",e.COLOMBIA="CO",e.COMOROS="KM",e.COOK_ISLANDS="CK",e.COSTA_RICA="CR",e.CROATIA="HR",e.CUBA="CU",e.CURACAO="CW",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.COTE_DIVOIRE="CI",e.DEMOCRATIC_REPUBLIC_OF_THE_CONGO="CD",e.DENMARK="DK",e.DJIBOUTI="DJ",e.DOMINICA="DM",e.DOMINICAN_REPUBLIC="DO",e.ECUADOR="EC",e.EGYPT="EG",e.EL_SALVADOR="SV",e.EQUATORIAL_GUINEA="GQ",e.ERITREA="ER",e.ESTONIA="EE",e.ETHIOPIA="ET",e.FALKLAND_ISLANDS="FK",e.FAROE_ISLANDS="FO",e.FEDERATED_STATES_OF_MICRONESIA="FM",e.FIJI="FJ",e.FINLAND="FI",e.FORMER_YUGOSLAV_REPUBLIC_OF_MACEDONIA="MK",e.FRANCE="FR",e.FRENCH_GUIANA="GF",e.FRENCH_POLYNESIA="PF",e.FRENCH_SOUTHERN_TERRITORIES="TF",e.GABON="GA",e.GAMBIA="GM",e.GEORGIA="GE",e.GERMANY="DE",e.GHANA="GH",e.GIBRALTAR="GI",e.GREECE="GR",e.GREENLAND="GL",e.GRENADA="GD",e.GUADELOUPE="GP",e.GUAM="GU",e.GUATEMALA="GT",e.GUERNSEY="GG",e.GUINEA="GN",e.GUINEA_BISSAU="GW",e.GUYANA="GY",e.HAITI="HT",e.HOLY_SEE="VA",e.HONDURAS="HN",e.HONG_KONG="HK",e.HUNGARY="HU",e.ICELAND="IS",e.INDIA="IN",e.INDONESIA="ID",e.IRAN_ISLAMIC_REPUBLIC_OF="IR",e.IRAQ="IQ",e.IRELAND="IE",e.ISLE_OF_MAN="IM",e.ISRAEL="IL",e.ITALY="IT",e.JAMAICA="JM",e.JAPAN="JP",e.JERSEY="JE",e.JORDAN="JO",e.KAZAKHSTAN="KZ",e.KENYA="KE",e.KIRIBATI="KI",e.KUWAIT="KW",e.KYRGYZSTAN="KG",e.LAOS="LA",e.LATVIA="LV",e.LEBANON="LB",e.LESOTHO="LS",e.LIBERIA="LR",e.LIBYA="LY",e.LIECHTENSTEIN="LI",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MACAU="MO",e.MADAGASCAR="MG",e.MALAWI="MW",e.MALAYSIA="MY",e.MALDIVES="MV",e.MALI="ML",e.MALTA="MT",e.MARSHALL_ISLANDS="MH",e.MARTINIQUE="MQ",e.MAURITANIA="MR",e.MAURITIUS="MU",e.MAYOTTE="YT",e.MEXICO="MX",e.MOLDOVA="MD",e.MONACO="MC",e.MONGOLIA="MN",e.MONTENEGRO="ME",e.MONTSERRAT="MS",e.MOROCCO="MA",e.MOZAMBIQUE="MZ",e.MYANMAR="MM",e.NAMIBIA="NA",e.NAURU="NR",e.NEPAL="NP",e.NETHERLANDS="NL",e.NEW_CALEDONIA="NC",e.NEW_ZEALAND="NZ",e.NICARAGUA="NI",e.NIGER="NE",e.NIGERIA="NG",e.NIUE="NU",e.NORFOLK_ISLAND="NF",e.NORTH_KOREA="KP",e.NORTHERN_MARIANA_ISLANDS="MP",e.NORWAY="NO",e.OMAN="OM",e.PAKISTAN="PK",e.PALAU="PW",e.PANAMA="PA",e.PAPUA_NEW_GUINEA="PG",e.PARAGUAY="PY",e.PERU="PE",e.PHILIPPINES="PH",e.PITCAIRN="PN",e.POLAND="PL",e.PORTUGAL="PT",e.PUERTO_RICO="PR",e.QATAR="QA",e.REPUBLIC_OF_THE_CONGO="CG",e.ROMANIA="RO",e.RUSSIA="RU",e.RWANDA="RW",e.REUNION="RE",e.SAINT_BARTHELEMY="BL",e.SAINT_HELENA="SH",e.SAINT_KITTS_AND_NEVIS="KN",e.SAINT_LUCIA="LC",e.SAINT_MARTIN="MF",e.SAINT_PIERRE_AND_MIQUELON="PM",e.SAINT_VINCENT_AND_THE_GRENADINES="VC",e.SAMOA="WS",e.SAN_MARINO="SM",e.SAO_TOME_AND_PRINCIPE="ST",e.SAUDI_ARABIA="SA",e.SENEGAL="SN",e.SERBIA="RS",e.SEYCHELLES="SC",e.SIERRA_LEONE="SL",e.SINGAPORE="SG",e.SINT_MAARTEN="SX",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SOLOMON_ISLANDS="SB",e.SOMALIA="SO",e.SOUTH_AFRICA="ZA",e.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS="GS",e.SOUTH_KOREA="KR",e.SOUTH_SUDAN="SS",e.SPAIN="ES",e.SRI_LANKA="LK",e.STATE_OF_PALESTINE="PS",e.SUDAN="SD",e.SURINAME="SR",e.SVALBARD_AND_JAN_MAYEN="SJ",e.SWAZILAND="SZ",e.SWEDEN="SE",e.SWITZERLAND="CH",e.SYRIAN_ARAB_REPUBLIC="SY",e.TAIWAN="TW",e.TAJIKISTAN="TJ",e.TANZANIA="TZ",e.THAILAND="TH",e.TIMOR_LESTE="TL",e.TOGO="TG",e.TOKELAU="TK",e.TONGA="TO",e.TRINIDAD_AND_TOBAGO="TT",e.TUNISIA="TN",e.TURKEY="TR",e.TURKMENISTAN="TM",e.TURKS_AND_CAICOS_ISLANDS="TC",e.TUVALU="TV",e.UGANDA="UG",e.UKRAINE="UA",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES_MINOR_OUTLYING_ISLANDS="UM",e.UNITED_STATES_OF_AMERICA="US",e.URUGUAY="UY",e.UZBEKISTAN="UZ",e.VANUATU="VU",e.VENEZUELA="VE",e.VIETNAM="VN",e.VIRGIN_ISLANDS_BRITISH="VG",e.VIRGIN_ISLANDS_US="VI",e.WALLIS_AND_FUTUNA="WF",e.WESTERN_SAHARA="EH",e.YEMEN="YE",e.ZAMBIA="ZM",e.ZIMBABWE="ZW"}(Vi||(Vi={}));class Yi{constructor(e,t,n){this.sentry=e,this.requestService=t,this.config=n,this.baseURL="",this.basePrefix="",(null==n?void 0:n.baseURL)&&(this.baseURL=n.baseURL)}setForcedProviderType(e){this.forcedProviderType=e}getForcedProviderType(e){const{restrictCountries:t}=e;switch(t&&t[0]){case u.tg.UNITED_KINGDOM:case u.tg.IRELAND:return Hi.LOQATE;default:return}}getPlaces(e){var t;const{customData:n,input:i,sessionToken:s,restrictCountries:a}=e,r=this.getForcedProviderType({restrictCountries:a});return this.requestService.get({url:`${this.baseURL}${this.basePrefix}/addresses/autocomplete`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{customData:Ki.stringify(n),input:i,sessionToken:s,restrictCountries:a,forceAddressProviderType:r},rejectOnInvalid:!0}).then((e=>sn.isFailure(e)?(this.sentry.captureException(new nn.Ki,{extra:{failureResult:e.failureResult},tags:{service:Yi.name}}),[]):e.successResult)).catch((e=>(this.sentry.captureException(e,{tags:{service:Yi.name}}),[])))}shouldFindSubplaces(){return!1}getSubplaces(){return Promise.reject(new Error("There is no subplaces in fundraiseup provider"))}getDetails(e){var t;const{customData:n,place:i,sessionToken:s,restrictCountries:a}=e,r=this.getForcedProviderType({restrictCountries:a});if(i.address)return Promise.resolve(i.address);if(!i.placeId)return Promise.reject(new Error("Nor address field neither placeId field is defined in place object, something gone wrong"));const{placeId:o}=i;return this.requestService.get({url:`${this.baseURL}${this.basePrefix}/addresses/${o}`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{customData:Ki.stringify(n),sessionToken:s,restrictCountries:a,forceAddressProviderType:r},rejectOnInvalid:!0}).then((e=>sn.isFailure(e)?Promise.reject(new nn.Ki):e.successResult))}}class zi extends Yi{constructor(e,t,n,i){super(e,t,n),this.sentry=e,this.requestService=t,this.config=n,this.checkoutSessionToken=i}getPlaces(e){var t,n;const{customData:i,input:s,sessionToken:a,restrictCountries:r}=e,o=this.checkoutSessionToken||(null==i?void 0:i.token);return o?this.requestService.get({url:`${this.baseURL}/${de}/${o}/addresses/autocomplete`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{input:s,sessionToken:a,restrictCountries:r,forceAddressProviderType:this.getForcedProviderType({restrictCountries:r}),locale:null===(n=this.config)||void 0===n?void 0:n.locale},rejectOnInvalid:!0}).then((e=>sn.isFailure(e)?(this.sentry.captureException(new nn.Ki,{extra:{failureResult:e.failureResult},tags:{service:Yi.name}}),[]):e.successResult)):Promise.reject(new Error("Expected the widgetSession token"))}getDetails(e){var t,n;const{customData:i,place:s,sessionToken:a,restrictCountries:r}=e;if(s.address)return Promise.resolve(s.address);if(!s.placeId)return Promise.reject(new Error("Nor address field neither placeId field is defined in place object, something gone wrong"));const{placeId:o}=s,c=this.checkoutSessionToken||(null==i?void 0:i.token);return c?this.requestService.get({url:`${this.baseURL}/${de}/${c}/addresses/${o}`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{sessionToken:a,forceAddressProviderType:this.getForcedProviderType({restrictCountries:r}),locale:null===(n=this.config)||void 0===n?void 0:n.locale},rejectOnInvalid:!0}).then((e=>sn.isFailure(e)?Promise.reject(new nn.Ki):e.successResult)):Promise.reject(new Error("Expected the widgetSession token"))}}const Wi={isFallback:!0},$i="USD";function Xi(){return function(){if(!function(){try{return void 0!==window.Intl}catch(e){return!1}}())return;const e=window.Intl;if(e&&"object"==typeof e&&"function"==typeof e.DateTimeFormat){const t=new e.DateTimeFormat("en-US");if("object"!=typeof t)return;const n="function"==typeof t.resolvedOptions&&t.resolvedOptions();if("object"!=typeof n)return;const i=n.timeZone;if(!i)return;return i}}()||function(){const e=-(new Date).getTimezoneOffset()/60;return e>=0?`UTC+${e}`:`UTC${e}`}()}class Qi{constructor(e){this._options=e,this._suggestions={}}getSuggestionRequestDurationMs(e){const t=this._suggestions[e];return(null==t?void 0:t.requestDurationMs)||0}isSuggestionRequested(e){const t=this._suggestions[e];return Boolean(null==t?void 0:t.isSuggestionRequested)}getSuggestion(e){const t=this._suggestions[e];return t?t.suggestion:Wi}fetchSuggestion(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){var n,i;if(this.needFetchSuggestion()&&!this.isSuggestionRequested(e)){this._suggestions[e]={isSuggestionRequested:!0,suggestion:Wi};try{const s=performance.now(),a=yield Promise.race([this.timeoutPromise,this.request(e,t)]);let r;(null===(n=a.data.v2)||void 0===n?void 0:n.isFallback)?r=a.data.v2:(null===(i=a.data.v2)||void 0===i?void 0:i.presets)&&(r={presets:this.convertAmountOptions(a.data.v2.presets,e),isFallback:!1}),this._suggestions[e].suggestion=a.data.isFallback?a.data:{presets:this.convertAmountOptions(a.data.presets,e),isFallback:!1,v2:r},this._suggestions[e].requestDurationMs=Math.round(performance.now()-s)}catch(t){this._suggestions[e]={suggestion:Wi,requestDurationMs:0}}}}))}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e({data:Wi,valid:!0})}),1500)}))}get clientTimeOptions(){const e=new Date;return{clientTimeZone:Xi(),clientWeekday:e.getDay(),clientHour:e.getHours(),eventTime:e.toISOString()}}needFetchSuggestion(){return!this._options.experimentsStorage||!this._options.experimentSettings||((e,t)=>{var n;if(!t)return!1;const{enabled:i,name:s}=t,a=e.get(),r=a&&(null===(n=a.settings[s])||void 0===n?void 0:n.enabled);return i||Boolean(r)})(this._options.experimentsStorage,this._options.experimentSettings)}convertAmountOptions(e,t){if(t===$i||!this._options.currencyService)return e;const n={};for(const[i,s]of Object.entries(e))n[i]={currency:t,defaultAmount:this._options.currencyService.convert(s.defaultAmount,$i,t),amountOptions:s.amountOptions.map((e=>this._options.currencyService.convert(e,$i,t)))};return n}request(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield(0,nn.Em)({url:`${this._options.apiHost}/checkout/getAmountPresets?token=${this._options.token}`,method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},params:Object.assign(Object.assign({},this.getRequestOptions(e)),{version:t})});if(!n.valid)throw new Error("Invalid response");return n}))}getRequestOptions(e){const t=this._options.currencyRates[e],n=Object.assign(Object.assign({companyKey:this._options.companyKey,campaignKey:this._options.campaignKey,clientLocale:this._options.clientLocale,utmSource:this._options.utmSource,currency:e,currencyRate:t},this.clientTimeOptions),{clientId:this._options.clientId,clientConnectionType:this._options.clientConnectionType,clientDeviceMemory:this._options.clientDeviceMemory,clientHardwareConcurrency:this._options.clientHardwareConcurrency,clientConnectionDownlink:this._options.clientConnectionDownlink,clientDoNotTrack:Boolean(this._options.clientDoNotTrack),clientDevicePixelRatio:this._options.clientDevicePixelRatio,clientBatteryLevel:this._options.clientBatteryLevel,checkoutType:this._options.checkoutType});return this.validateRequestOptionsSilently(n),n}validateRequestOptionsSilently(e){return void 0!==e.currency&&void 0!==e.currencyRate||(this._options.sentry.captureException(new Error("Amount Presets: request body is invalid"),{extra:{options:e}}),!1)}}const Zi={isFallback:!0,defaultFrequency:null};class Ji{constructor(e){this._options=e,this._suggestion=Zi,this._requestDurationMs=0,this._fetchCallsCount=0}getMeta(){return{requestDurationMs:this._requestDurationMs,fetchCallsCount:this._fetchCallsCount}}getSuggestion(){return this._suggestion}fetchSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{if(this._options.isLighthouse||this._options.isShowcase)return sn.fail(void 0);const t=performance.now(),n=yield Promise.race([this.timeoutPromise,this.request(e)]);return this._suggestion=n.data,this._requestDurationMs=Math.round(performance.now()-t),sn.success(void 0)}catch(e){return this._suggestion=Zi,this._requestDurationMs=0,sn.success(void 0)}finally{this._fetchCallsCount++}}))}get clientTimeOptions(){const e=new Date;return{clientTimeZone:Xi(),clientWeekday:e.getDay(),clientHour:e.getHours()}}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e({data:Zi,valid:!0})}),1500)}))}request(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield(0,nn.Em)({url:`${this._options.apiHost}/checkout/getDefaultFrequency?token=${this._options.token}`,method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},params:this.requestOptions(e)});if(!t.valid)throw new Error("Invalid response");return t}))}requestOptions(e){return Object.assign(Object.assign({},e),this.clientTimeOptions)}}class es{constructor(e,t){this._locale=e,this.commonCurrencyFilter=t,this.formatCurrency=t.formatCurrency.bind(t),this.formatSymbol=t.formatSymbol.bind(t),this.getCurrencyFormat=t.getCurrencyFormat.bind(t)}changeLocale(e){return this.locale=e,this.locale}format(e,t){return this.formatCurrency(e,null==t?void 0:t.currency,null==t?void 0:t.display,null==t?void 0:t.withoutPrefix,null==t?void 0:t.withoutSuffix,this.locale,null==t?void 0:t.displayCurrency)}formatCurrencySymbol(e,t){return this.formatSymbol(e,t,this.locale)}getFormat(){return this.getCurrencyFormat(this.locale)}get locale(){return this._locale}set locale(e){this._locale=e}}class ts extends es{constructor(e,t){super(e,t)}replaceCurrencyFilter(e){this.formatCurrency=e.formatCurrency,this.formatSymbol=e.formatSymbol,this.getCurrencyFormat=e.getCurrencyFormat}}var ns;!function(e){e.SCREEN_CHANGED="screenChanged",e.FLOW_CHANGED="flowChanged",e.DONE="done",e.LOCKED="locked",e.UNLOCKED="unlocked"}(ns||(ns={}));const is=[Ae.MONEY];class ss{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,E,A,C,v,N,b,P,D){this.eventEmitter=e,this.checkoutConfiguration=t,this.intl=n,this.tracker=i,this.debug=s,this.currencyService=a,this.suggestionsService=r,this.targetWindow=o,this.globalWindow=c,this.sentry=l,this.paymentMethods=u,this.stripeLoadingPromise=d,this.applePayStripeLoadingPromise=h,this.userSession=m,this.addressService=p,this.checkoutAPIBridge=g,this._experiments=y,this.flowFactoryMap=f,this.logger=S,this.requestService=E,this.subscriptionPeriodLabelsService=A,this.mailingAddressModule=C,this.paymentMethodAvailabilityManagerRepository=v,this.mailingAddressCustomization=N,this.adaptiveDefaultFrequencyFetcher=b,this.adaptiveAmountPresetsFetcher=P,this.params=D,this.currentFlow=null,this._checkoutService=null,this._flowType=null,this._isFlowInitializedOnce=!1}get checkoutService(){if(!this._checkoutService)throw new Error("Checkout service is not defined");return this._checkoutService}get experiments(){if(!this._experiments)throw new Error("Checkout Experiments Controller is not defined");return this._experiments}get flowType(){if(!this._flowType)throw new Error("Flow is not initialized");return this._flowType}get isFlowInitializedOnce(){return this._isFlowInitializedOnce}get questionsScreenPageCount(){return this._checkoutService?this._checkoutService.checkoutUIState.pagesOfQuestionsScreen:null}dispose(){var e,t;null===(e=this._checkoutService)||void 0===e||e.dispose(),null===(t=this.currentFlow)||void 0===t||t.dispose()}setInitialScreen(e){return this.initialScreen=e,this}getCurrentFlow(){if(!this.currentFlow)throw new Error("Start flow first");return this.currentFlow}onScreenChanged(e){return this.eventEmitter.on(ns.SCREEN_CHANGED,e),()=>this.eventEmitter.removeListener(ns.SCREEN_CHANGED,e)}onFlowChanged(e){return this.eventEmitter.on(ns.FLOW_CHANGED,e),()=>this.eventEmitter.removeListener(ns.FLOW_CHANGED,e)}startDefaultFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(this.checkoutConfiguration.defaultFlowType)}))}startFiatFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(Ae.MONEY)}))}startCryptoFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(Ae.CRYPTO)}))}restart(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(this.flowType)}))}canClose(e){if(this.checkoutConfiguration.company.blockedAt)return!0;if(!this.currentFlow)throw new Error("currentFlow is not defined");const t=this.checkoutService.isPaid,n=this.currentFlow.isLocked,i=this.checkoutService.getState().remindMeLater.isEnabled;if(n)return!1;if(this.checkoutConfiguration.infrastructureParams.showcase)return!1;if(i&&e.isFinalAvailableScreen&&this.currentFlow.tryExit())return!1;if(!t&&(!e.isUnrestrictedExitScreen||e.isMobile&&e.isMobileExitScreen)&&this.currentFlow.tryExit())return!1;if(!i&&!e.isUnrestrictedExitScreen&&!this.currentFlow.isExiting){const e=[this.intl.translate("confirmCloseDialog.question"),this.intl.translate("confirmCloseDialog.instructions")].join("\n\n");return confirm(e)}return!0}shouldNotifyAbandoned(e){var t;if(!is.includes(this.flowType))return!1;if(!this.currentFlow)throw new Error("currentFlow is not defined");if(e)return!1;if(!(null===(t=this.checkoutConfiguration.company.abandonedDonations)||void 0===t?void 0:t.enabled))return!1;const n=this.checkoutService.isPaid,i=this.checkoutService.isPaymentStarted;if(n||i)return!1;if(this.currentFlow.isExiting)return!0;const{remindMeLater:s}=this.checkoutService.getState();return!s.show}start(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n;yield null===(t=this._checkoutService)||void 0===t?void 0:t.dispose(),null===(n=this.currentFlow)||void 0===n||n.dispose();const{flow:i,checkoutService:s,adaptiveSuggestionsService:a}=yield this.initializeFlow(e,{shouldRestoreFromIntent:this.isFlowInitializedOnce});this.currentFlow=i,this._checkoutService=s,this._flowType=e,this._isFlowInitializedOnce=!0,yield this.tryFetchAndApplyAdaptiveSuggestion(a),yield i.start(),this.eventEmitter.emit(ns.FLOW_CHANGED,e),this.tryTrackAdaptiveSuggestion(a)}))}tryFetchAndApplyAdaptiveSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){e&&(yield e.tryFetchSuggestion(),e.tryApplySuggestion())}))}tryTrackAdaptiveSuggestion(e){e&&e.tryTrackSuggestion()}canNavigateBackward(e,t){var n,i,s,a;const r=this.checkoutService.checkoutUIState.isCanNotGoBackScreen(e.getCurrentScreen().name),o=e.previousScreenName&&e.previousScreenName===t.getPaymentScreen(e.previousScreenName,e.getHistoricalScreens())&&t.isPaid,c=e.previousScreenName===(null===(n=this.params.screenSet)||void 0===n?void 0:n.creditCard)&&t.isPaid,l=e.previousScreenName===(null===(i=this.params.screenSet)||void 0===i?void 0:i.ukBacs)&&t.isPaid,u=e.previousScreenName===(null===(s=this.params.screenSet)||void 0===s?void 0:s.paymentOptions)&&t.isPaid,d=null===(a=this.currentFlow)||void 0===a?void 0:a.isLocked;return!(r||o||c||l||u||d)}initializeFlow(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const{flow:n,checkoutService:i,initialScreenDecider:s,adaptiveSuggestionsService:a}=yield this.createFlow(e);n.on(ns.SCREEN_CHANGED,(e=>{i.setCanGoBack(this.canNavigateBackward(n,i)),i.shouldFindMandatoryScreen=!1,i.checkoutUIState.setCloseButtonVisibility(n.getCurrentScreen().name,n.getHistoricalScreens()),this.eventEmitter.emit(ns.SCREEN_CHANGED,e)})),n.on(ns.LOCKED,(()=>{i.setCanGoBack(this.canNavigateBackward(n,i))})),n.on(ns.UNLOCKED,(()=>{i.setCanGoBack(this.canNavigateBackward(n,i))})),i.initialize(t);const r=void 0!==this.initialScreen?this.initialScreen:yield s.getInitialScreen();return n.setFirstScreen(r),this.tracker.setCurrentScreenDataGetter((()=>({screenName:n.getCurrentScreen().name,screenData:n.getCurrentScreen().getScreenData()}))),this.tracker.setCheckoutTrackerDataGetter((()=>i.getCheckoutTrackerData())),this.tracker.setCheckoutUIStateGetter((()=>i.checkoutUIState)),this.tracker.setDonationType(i.type),{flow:n,checkoutService:i,adaptiveSuggestionsService:a}}))}createFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.flowFactoryMap[e],{formFlow:n,checkoutService:i,initialScreenDecider:s,adaptiveSuggestionsService:a}=t({checkoutConfiguration:this.checkoutConfiguration,intl:this.intl,tracker:this.tracker,debug:this.debug,currencyService:this.currencyService,suggestionsService:this.suggestionsService,targetWindow:this.targetWindow,globalWindow:this.globalWindow,sentry:this.sentry,paymentMethods:this.paymentMethods,stripeLoadingPromise:this.stripeLoadingPromise,applePayStripeLoadingPromise:this.applePayStripeLoadingPromise,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,userSession:this.userSession,addressService:this.addressService,eventEmitter:this.eventEmitter,checkoutAPIBridge:this.checkoutAPIBridge,experiments:this.experiments,logger:this.logger,requestService:this.requestService,mailingAddressModule:this.mailingAddressModule,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,mailingAddressCustomization:this.mailingAddressCustomization,adaptiveDefaultFrequencyFetcher:this.adaptiveDefaultFrequencyFetcher,adaptiveAmountPresetsFetcher:this.adaptiveAmountPresetsFetcher,stripe:{elementsOptions:this.params.stripe.elementsOptions,elementStyles:this.params.stripe.elementStyles,elementClasses:this.params.stripe.elementClasses}});return{flow:n,checkoutService:i,initialScreenDecider:s,adaptiveSuggestionsService:a}}))}}var as,rs,os,cs,ls,us,ds,hs,ms,ps,gs,ys,fs,Ss,Es,As,Cs,vs,Ns,bs,Ps,Ds,_s;!function(e){e.DEFAULT="default",e.POSTAL_CODE_FIRST="postalCodeFirst"}(as||(as={})),function(e){e.DEFAULT="default",e.ALTERNATIVE="alternative"}(rs||(rs={})),function(e){e.AND="AND",e.OR="OR"}(os||(os={}));class Ts{constructor(e){this._config=e}isLayoutPostalCodeFirst(e){return this.findOption(this._config.layout.type,e)===as.POSTAL_CODE_FIRST}isAlternativeLabels(e){return this.findOption(this._config.labels.type,e)===rs.ALTERNATIVE}isAutocompleteEnabled(e){return!!this.findOption(this._config.autocomplete.enabled,e)}isRegionEnabled(e){return!!this.findOption(this._config.region.enabled,e)}isRegionRequired(e){return!!this.findOption(this._config.region.required,e)}getPredefinedRegions(e){return this.findOption(this._config.region.predefinedRegions,e)}isPostalCodeRequired(e){return!!this.findOption(this._config.postalCode.required,e)}isPostalCodeAutocompleteEnabled(e){return!!this.findOption(this._config.postalCode.autocomplete.enabled,e)}getPostalCodeValidation(e){return this.findOption(this._config.postalCode.validation,e)}findOption(e,t){var n;const i=e.find((e=>{var n,i;if(!e.countries&&!e.companies)return!0;const s=t.country&&(null===(n=e.countries)||void 0===n?void 0:n.includes(t.country)),a=t.company&&(null===(i=e.companies)||void 0===i?void 0:i.includes(t.company));return e.logic===os.AND?s&&a:s||a}));return null!==(n=null==i?void 0:i.option)&&void 0!==n?n:null}}!function(e){e.TRILLIUM="AFHQHUFB",e.ANIMAL_HUMANE_SOCIETY="APZFWQVA",e.SOS_INTERNATIONAL="ASYXEBAM",e.MUSLIMI="APRVBZRU",e.DAILY_GIVING="AYEWEYZD",e.UNFPA="ACSRWCJP",e.UNICEF_NORGE="AMUBFBCE",e.ASCRS_FOUNDATION="ACYFHBCY",e.CLINTON_FOUNDATION="ACUVFNNB",e.BLINKNOW="AEDSCDSM",e.HICT_PARENT="AJDZGJPP",e.HICT="AKVNXBFW",e.GREATER_GOOD_CHARITIES="AHTMBNKF",e.STC="VMZETRCF",e.UNICEF="APQJSHGS",e.PIH="AJDEFYWC",e.AHA_PARENT="ARMPCVPV",e.AHA="ADQRERLU",e.BEST_FRIENDS="AFZUYXBL",e.NEVERTHIRSTWATER="RWHMSQPD",e.CORG="AZCENQQL",e.AUS="AGZKYDGZ",e.NDSTREET="ALTVXKWG",e.ALZ="AJGEZYBE",e.LUST="AEDVPKAW",e.ARTHRITIS="AUSMBFYM",e.FREEDOM_BAKERIES="AFKPNPQY",e.MASJID_AL_FURGAN="ASYLMXZK",e.FCA="AFLRJKTK",e.FOOD_FOR_THE_POOR="AGPURJCY",e.MPAC="ANSRXGKF",e.RFT="ACMRCWPB",e.CHILDMIND="ZSNREIBR",e.FUNDRAISE_UP_NYC="APWCYEMD",e.SALVATION_ARMY_UK="ASNVRJLX",e.MERCY_SHIPS_AU="AWKKWSUU",e.LONELY_ORPHANS="AUKZQSFX",e.ALZHEIMER_ASSOCIATION="AJGEZYBE",e.PANCREATIC_CANCER_UK="ATBTMWDS",e.THE_BAIL_PROJECT="AYHQYPSQ",e.OBAMA_FOUNDATION="AHNVSXNQ",e.SAFE_HORIZON="AWBJEPNJ",e.FEED_THE_CHILDREN="AHQLCMJQ",e.STAGING_HELPING_HAND="HRMEIGNS",e.STAGING_HELPING_HAND_UK="AWKXSTZX",e.HELPING_HAND="MCJZDSLZ",e.INTERNATIONAL_JUSTICE_MISSION_UK="AGMQWWLR",e.GUIDE_DOGS="APLFUNKH",e.ROPSI="AJZSDMZE",e.ROPSI_AU="AESYHEDW",e.ROPSI_UK="ASHPENZB",e.ROPSI_CA="AZRBXHWY",e.FAMILY_ELDERCARE="ARRCDXDL",e.ENTERTAINMENT_INDUSTRY="ASXBZCVR",e.ONE_FOR_ISRAEL="ASBGJCET",e.TREVOR="ABGHKWJN",e.PARKINSON="AWQWPUEN",e.NAVY="ALAWCVJC",e.HONEST_REPORTING="ARBELMET",e.KCET="AEJGNVQN",e.OPSMILE="ATVPVDAJ",e.WIKIMEDIA_FOUNDATION="AVLMPSRU",e.ARBOR="ALPEXDKM",e.CANADIAN_RED_CROSS="ATVNLEWE",e.CANADIAN_CANCER_SOCIETY="APZMZAGU",e.WORLDWISH="AZFMPNQE",e.LUPUS="ARVHGABZ",e.CONCERN_WORLDWIDE="AGSTXLKM",e.DURHAM_RESCUE_MISSION="ALCUDRVC",e.MUSCULAR_DYSTROPHY_ASSOCIATION="AJGERPHC",e.TRILLIUM_HEALTH_FOUNDATION="AFHQHUFB",e.CANADIAN_WILDLIFE_FEDERATION="ASBNVYMX",e.HARVEST_MANITOBA="AVALTECL",e.MUSLIM_LEGAL_FUND="AAMRKAJS"}(cs||(cs={})),function(e){e.NOWHERE="nowhere",e.WIDGET="widget",e.URL="url"}(ls||(ls={})),function(e){e.THE_ADVENTURE_PROJECT="5a8b26d4f9891300017cc0fc"}(us||(us={})),function(e){e[e.MONEY_LEGACY_MIN=0]="MONEY_LEGACY_MIN",e[e.MONEY_MIN=200]="MONEY_MIN",e[e.MONEY_MAX=500]="MONEY_MAX",e[e.MONEY_DEFAULT=200]="MONEY_DEFAULT",e[e.STOCK_MIN=200]="STOCK_MIN",e[e.STOCK_MAX=1e3]="STOCK_MAX",e[e.STOCK_DEFAULT=500]="STOCK_DEFAULT",e[e.CRYPTO_MIN=200]="CRYPTO_MIN",e[e.CRYPTO_MAX=1e3]="CRYPTO_MAX",e[e.CRYPTO_DEFAULT=500]="CRYPTO_DEFAULT"}(ds||(ds={})),function(e){e.ALWAYS="always",e.NEVER="never"}(hs||(hs={})),function(e){e.PER_INSTALLMENT="perInstallment",e.NONE="none"}(ms||(ms={})),function(e){e.UPPER="upper",e.PROPER="proper"}(ps||(ps={})),(_s=gs||(gs={})).AUTOMATIC="automatic",_s.MICRODEPOSITS="microdeposits",function(e){e.OFF="off",e.OPTIONAL="optional",e.REQUIRED="required"}(ys||(ys={})),function(e){e.INVALID_SSO_MODE="Invalid SSO mode.",e.TWO_FACTOR_AUTH_NOT_ALLOWED_WITH_SSS_REQUIRED="Cannot fulfill 2FA with SSO Required.",e.DOESNT_MATCH_RECORDS="The information you entered doesn't match our records.",e.COULDNT_MATCH_USER="We couldn't match this user email with an email from your identity provider.",e.USER_HAS_ANOTHER_ACTIVE_IDP_SESSION="Authentication failed. The email address used in the identity provider is different from the one you used to start the verification on the Dashboard. Make sure you use the same email in both places.",e.ENTITY_ID_ISSUE="The specified Issuer ID does not match the data in the IdP. Please check and ensure you've entered the correct Issuer ID.",e.EXPIRED_REQUEST="The authentication request has expired. The request is no longer valid as the allowed time has passed. Please re-authenticate to proceed.",e.CERTIFICATE_ISSUE="There was an issue validating the certificate. Ensure that your certificate is valid and correctly configured in your IdP.",e.SIGNATURE_ISSUE="The signature method used is not supported by our system. Please check and change the signature method in your IdP."}(fs||(fs={})),function(e){e.DOESNT_MATCH_RECORDS="DOESNT_MATCH_RECORDS",e.COULDNT_MATCH_USER="COULDNT_MATCH_USER"}(Ss||(Ss={})),function(e){e.ISSUER_ID="The specified Issuer ID does not match the data in the IdP. Please check and ensure you've entered the correct Issuer ID.",e.IDP_URL="The provided Identity provider URL is invalid or unreachable. Please verify the URL and ensure your IdP is accessible.",e.CERTIFICATE="There was an issue validating the certificate. Ensure that your certificate is valid and correctly configured in your IdP.",e.DEFAULT="An error occurred. Please try again later."}(Es||(Es={})),function(e){e.USER_HAS_ANOTHER_SSO="Your account has at least one user who is already using SSO to log into another account. Delete them from your account to enable SSO.",e.NO_VERIFIED_DOMAINS="SSO cant be set to Required because no domains have been verified for this account yet.",e.USER_HAS_UNVERIFIED_EMAIL_DOMAIN="Your account has at least one user with an email address that belongs to an unverified domain. You should either enable SSO as Optional, verify the domains used by these users, or delete the users from your account.",e.BAD_SSO_CONFIGURATION="Bad SSO configuration.",e.CURRENT_USER_CANNOT_ENABLE_SSO="SSO cannot be set as required because {admin_email} is already using SSO authentication in another account."}(As||(As={})),function(e){e.ONLY_SSO_RESET_NOT_ALLOWED="This profile only uses SSO for login, so password reset is not possible."}(Cs||(Cs={})),function(e){e.USER_NOT_FOUND="User was not found"}(vs||(vs={})),function(e){e.RATE_LIMIT_IP_EXCEEDED="Too many attempts to log in from your IP address. Please try again later.",e.RATE_LIMIT_EMAIL_EXCEEDED="Too many attempts to log in from your IP address. Please try again later."}(Ns||(Ns={})),function(e){e.CHANGE_EMAIL_SSO_RESTRICTION_ERROR="changeEmailSsoRestrictionError",e.UPDATE_SSO_MODE_ERROR="UpdateSsoModeError",e.INVITE_USER_SSO_RESTRICTION_ERROR="inviteUserSsoRestrictionError"}(bs||(bs={})),function(e){e.NOT_SUCCESS="SAML response is not successful",e.WRONG_SAML_VERSION="SAML version is not 2.0",e.NO_ISSUE_INSTANT="IssueInstant is not found",e.INVALID_ISSUE_INSTANT="IssueInstant is invalid",e.NO_ISSUER="Issuer is not found or invalid",e.NO_ASSERTION="Assertion is not found",e.NO_SIGNATURE="Signature is not found or invalid",e.NO_EMAIL="Email is not found",e.NO_RESPONSE="Response is not found"}(Ps||(Ps={})),function(e){e.DEFAULT="Incorrect email or password."}(Ds||(Ds={}));const xs={autocomplete:{enabled:[{option:!1,companies:[cs.CONCERN_WORLDWIDE],countries:[u.tg.IRELAND],logic:os.AND},{option:!0}]},layout:{type:[{option:as.POSTAL_CODE_FIRST,countries:[u.tg.UNITED_KINGDOM]},{option:as.DEFAULT}]},labels:{type:[{option:rs.ALTERNATIVE,countries:[u.tg.UNITED_KINGDOM,u.tg.IRELAND]},{option:rs.DEFAULT}]},region:{enabled:[{option:!1,countries:[u.tg.UNITED_KINGDOM,u.tg.ISRAEL,u.tg.FRANCE,u.tg.NETHERLANDS,u.tg.GERMANY,u.tg.NEW_ZEALAND]},{option:!0}],required:[{option:!1,countries:[u.tg.UNITED_KINGDOM,u.tg.ISRAEL,u.tg.FRANCE,u.tg.NETHERLANDS,u.tg.GERMANY,u.tg.NEW_ZEALAND]},{option:!0}],predefinedRegions:[{option:{"US States":[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DC",name:"District of Columbia"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],"US Territories":[{code:"AS",name:"American Samoa"},{code:"GU",name:"Guam"},{code:"MP",name:"Northern Mariana Islands"},{code:"PR",name:"Puerto Rico"},{code:"VI",name:"U.S. Virgin Islands"}],"US Military":[{code:"AA",name:"Armed Forces America"},{code:"AE",name:"Armed Forces"},{code:"AP",name:"Armed Forces Pacific"}]},countries:[u.tg.UNITED_STATES]},{option:[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NL",name:"Newfoundland and Labrador"},{code:"NS",name:"Nova Scotia"},{code:"NT",name:"Northwest Territories"},{code:"NU",name:"Nunavut"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewan"},{code:"YT",name:"Yukon"}],countries:[u.tg.CANADA]},{option:[{code:"Carlow",name:"Carlow"},{code:"Cavan",name:"Cavan"},{code:"Clare",name:"Clare"},{code:"Cork",name:"Cork"},{code:"Donegal",name:"Donegal"},{code:"Dublin",name:"Dublin"},{code:"Dublin 1",name:"Dublin 1"},{code:"Dublin 2",name:"Dublin 2"},{code:"Dublin 3",name:"Dublin 3"},{code:"Dublin 4",name:"Dublin 4"},{code:"Dublin 5",name:"Dublin 5"},{code:"Dublin 6",name:"Dublin 6"},{code:"Dublin 6W",name:"Dublin 6W"},{code:"Dublin 7",name:"Dublin 7"},{code:"Dublin 8",name:"Dublin 8"},{code:"Dublin 9",name:"Dublin 9"},{code:"Dublin 10",name:"Dublin 10"},{code:"Dublin 11",name:"Dublin 11"},{code:"Dublin 12",name:"Dublin 12"},{code:"Dublin 13",name:"Dublin 13"},{code:"Dublin 14",name:"Dublin 14"},{code:"Dublin 15",name:"Dublin 15"},{code:"Dublin 16",name:"Dublin 16"},{code:"Dublin 17",name:"Dublin 17"},{code:"Dublin 18",name:"Dublin 18"},{code:"Dublin 20",name:"Dublin 20"},{code:"Dublin 22",name:"Dublin 22"},{code:"Dublin 24",name:"Dublin 24"},{code:"Galway",name:"Galway"},{code:"Kerry",name:"Kerry"},{code:"Kildare",name:"Kildare"},{code:"Kilkenny",name:"Kilkenny"},{code:"Laois",name:"Laois"},{code:"Leitrim",name:"Leitrim"},{code:"Limerick",name:"Limerick"},{code:"Longford",name:"Longford"},{code:"Louth",name:"Louth"},{code:"Mayo",name:"Mayo"},{code:"Meath",name:"Meath"},{code:"Monaghan",name:"Monaghan"},{code:"Offaly",name:"Offaly"},{code:"Roscommon",name:"Roscommon"},{code:"Sligo",name:"Sligo"},{code:"Tipperary",name:"Tipperary"},{code:"Waterford",name:"Waterford"},{code:"Westmeath",name:"Westmeath"},{code:"Wexford",name:"Wexford"},{code:"Wicklow",name:"Wicklow"}],countries:[u.tg.IRELAND]}]},postalCode:{required:[{option:!1,countries:[u.tg.HONG_KONG]},{option:!0}],autocomplete:{enabled:[{option:!0}]},validation:[{option:/^\d{5}(-\d{4})?$/,countries:[u.tg.UNITED_STATES]},{option:/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/i,countries:[u.tg.CANADA]}]}},Os=n(114);class ks{constructor(e,t){this.schema=e,this.config=t}validate(e){return this.schema.validate(e)}allowed(e,t){const n=this.schema.path(e);return!!n&&!n.validate(t,{[e]:t},e)}isRequired(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.schema.path(e);return!!n&&!!n.validate(null,t,e)}getProvider(){return this.config.provider}}class Is{constructor(e,t){this.config=e,this.paymentMethodConfigParser=t,this.managersMap=new Map}createManager(e,t){const n=this.config[e],i=n[t],s=this.paymentMethodConfigParser.parse(i);return new ks(s,Object.assign(Object.assign({},i),{name:n.name,provider:n.provider}))}getManager(e,t){const n=e+"_"+t;let i=this.managersMap.get(n);return i||(i=this.createManager(e,t),this.managersMap.set(n,i),i)}}var ws=n(5519),Rs=n.n(ws),Ms=n(468),Ls=n.n(Ms),Us=n(1861),Fs=n.n(Us),js=n(5157),Bs=n.n(js),Hs=n(5052),qs=n.n(Hs),Gs=n(1058),Vs=n.n(Gs);const Ks=(e,t,n)=>{const i=Bs()(t,"ibanCountry");return!n.includes(i)||!!e&&!qs()(e)},Ys=(e,t,n)=>!!Vs()(e)||e>=n.size,zs=e=>!!Vs()(e)||!!e;var Ws=n(5545),$s=n(9205),Xs=n.n($s);class Qs extends Error{constructor(e,t){super(e),Zs(this,"path",t),Zs(this,"expose",!0),Zs(this,"status",400),Error.captureStackTrace&&Error.captureStackTrace(this,Qs)}}const Zs=(e,t,n)=>{Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})};var Js={type(e,t,n){return"function"==typeof n&&(n=n.name),`${e} must be of type ${n}.`},required(e){return`${e} is required.`},match(e,t,n){return`${e} must match ${n}.`},length(e,t,n){if("number"==typeof n)return`${e} must have a length of ${n}.`;const{min:i,max:s}=n;return i&&s?`${e} must have a length between ${i} and ${s}.`:s?`${e} must have a maximum length of ${s}.`:i?`${e} must have a minimum length of ${i}.`:void 0},size(e,t,n){if("number"==typeof n)return`${e} must have a size of ${n}.`;const{min:i,max:s}=n;return void 0!==i&&void 0!==s?`${e} must be between ${i} and ${s}.`:void 0!==s?`${e} must be less than ${s}.`:void 0!==i?`${e} must be greater than ${i}.`:void 0},enum(e,t,n){const i=n.slice(),s=i.pop();return`${e} must be either ${i.join(", ")} or ${s}.`},illegal(e){return`${e} is not allowed.`},default(e){return`Validation failed for ${e}.`}},ea=n(5096),ta=n.n(ea);function na(e,t,n){"string"!=typeof e?Object.keys(e).forEach((t=>n[t]=e[t])):n[e]=t}function ia(e,t,n){const i=e.split(/\.\$(?=\.|$)/),s=i.shift(),a=Ws.get(t,s);if(!i.length)return n(s,a);if(Array.isArray(a))for(let e=0;e<a.length;e++)ia(aa(e,s)+i.join(".$"),t,n)}function sa(e,t,n,i){const s=ta()(e);if("array"!==s){if("object"===s)for(const[s,a]of Object.entries(e)){const e=aa(s,n),r=aa(s,i);t(e,r)&&sa(a,t,e,r)}}else e.forEach(((e,s)=>sa(e,t,aa(s,n),aa("$",i))))}function aa(e,t){return t?`${t}.${e}`:e}class ra{constructor(e,t){this.name=e,this.registry={},this._schema=t,this._type=null,this.messages={}}message(e){"string"==typeof e&&(e={default:e});const t=Object.entries(e);for(const[e,n]of t)this.messages[e]=n;return this}schema(e){return this._schema.path(this.name,e),this}use(e){return Object.keys(e).forEach((t=>{let n=e[t];Array.isArray(n)||(n=[n]);const i=n.shift();this._register(t,n,i)})),this}required(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._register("required",[e])}type(e){return this._type=e,this._register("type",[e])}string(){return this.type(String)}number(){return this.type(Number)}array(){return this.type(Array)}date(){return this.type(Date)}length(e){return this._register("length",[e])}size(e){return this._register("size",[e])}enum(e){return this._register("enum",[e])}match(e){return this._register("match",[e])}each(e){return this._schema.path(aa("$",this.name),e),this}elements(e){return e.forEach(((e,t)=>{this._schema.path(aa(t,this.name),e)})),this}properties(e){for(const[t,n]of Object.entries(e))this._schema.path(aa(t,this.name),n);return this}path(){return this._schema.path(...arguments)}typecast(e){const t=this._schema;let n=this._type;if(!n)return e;"function"==typeof n&&(n=n.name);const i=t.typecasters[n]||t.typecasters[n.toLowerCase()];if("function"!=typeof i)throw new Error(`Typecasting failed: No typecaster defined for ${n}.`);return i(e)}validate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.name;const i=Object.keys(this.registry);for(const s of i){const i=this._run(s,e,t,n);if(i)return i}return null}_run(e,t,n,i){if(!this.registry[e])return;const s=this._schema,{args:a,fn:r}=this.registry[e];return(r||s.validators[e])(t,n,...a,i)?void 0:this._error(e,n,a,i)}_register(e,t,n){return this.registry[e]={args:t,fn:n},this}_error(e,t,n,i){const s=this._schema;let a=this.messages[e]||this.messages.default||s.messages[e]||s.messages.default;return"function"==typeof a&&(a=a(i,t,...n)),new Qs(a,i)}}var oa,ca,la={required(e,t,n){return!1===n||null!=e&&""!==e},type(e,t,n){return null==e||("function"==typeof n?e.constructor===n:ta()(e)===n)},length(e,t,n){if(null==e)return!0;if("number"==typeof n)return e.length===n;const{min:i,max:s}=n;return!(i&&e.length<i||s&&e.length>s)},size(e,t,n){if(null==e)return!0;if("number"==typeof n)return e===n;const{min:i,max:s}=n;return!(null!=parseInt(i)&&e<i||null!=parseInt(s)&&e>s)},enum(e,t,n){return null==e||n.includes(e)},match(e,t,n){return null==e||n.test(e)}};class ua{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.opts=t,this.hooks=[],this.props={},this.messages=Object.assign({},Js),this.validators=Object.assign({},la),this.typecasters=Object.assign({},Xs()),Object.keys(e).forEach((t=>this.path(t,e[t])))}path(e,t){const n=e.split("."),i=n.pop(),s=n.join(".");if(s&&this.path(s),"$"===i&&this.path(s).type(Array),t instanceof ua)return t.hook(((t,n)=>this.path(aa(t,e),n))),this.path(e,t.props);if(t instanceof ra)return this.props[e]=t,this.propagate(e,t),t;const a=this.props[e]||new ra(e,this);if(this.props[e]=a,this.propagate(e,a),!t)return a;if("string"==typeof t||"function"==typeof t)return a.type(t),a;if(Array.isArray(t))return a.type(Array),1===t.length?a.each(t[0]):a.elements(t),a;const r=Object.keys(t);let o=!1;for(const e of r)if("function"!=typeof a[e]){a.type(Object),o=!0;break}return r.forEach((n=>{const i=t[n];if(o)return this.path(aa(n,e),i);a[n](i)})),a}typecast(e){for(const[t,n]of Object.entries(this.props))ia(t,e,((t,i)=>{if(null==i)return;const s=n.typecast(i);s!==i&&Ws.set(e,t,s)}));return this}strip(e){return sa(e,((t,n)=>!!this.props[n]||(Ws.delete(e,t),!1))),this}enforce(e){const t=[];return sa(e,((e,n)=>{if(this.props[n])return!0;const i=new Qs(Js.illegal(e),e);return t.push(i),!1})),t}validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign(this.opts,t);const n=[];t.typecast&&this.typecast(e),t.strict&&n.push(...this.enforce(e)),!1!==t.strip&&this.strip(e);for(const[t,i]of Object.entries(this.props))ia(t,e,((t,s)=>{const a=i.validate(s,e,t);a&&n.push(a)}));return n}assert(e,t){const[n]=this.validate(e,t);if(n)throw n}message(e,t){return na(e,t,this.messages),this}validator(e,t){return na(e,t,this.validators),this}typecaster(e,t){return na(e,t,this.typecasters),this}hook(e){return this.hooks.push(e),this}propagate(e,t){return this.hooks.forEach((n=>n(e,t))),this}}ua.ValidationError=Qs;class da{constructor(e){this.validationMessagesService=e,this.props={},this.customValidations={requiredIfIbanCountry:Ks,availableAll:zs,minAmount:Ys}}parse(e){return Rs()(e,((e,t)=>this._parse(t,e))),new ua(this.props,{strip:!1})}_parse(e,t){if("repeat"===e&&Ls()(t))return this.props.period={enum:Fs()(t,oe.ONCE),message:{enum:(e,n)=>this.validationMessagesService.get("period")(e,n,Fs()(t,oe.ONCE))}},void(this.props[e]={enum:t,message:{enum:(e,n)=>this.validationMessagesService.get("enum")(e,n,t)}});Ls()(t)?this.props[e]={enum:t,message:{enum:(e,n)=>this.validationMessagesService.get("enum")(e,n,t)}}:Rs()(t,((t,n)=>{n in this.customValidations?this.props[e]={use:{[n]:(e,i)=>this.customValidations[n](e,i,t)},message:{[n]:(e,i)=>this.validationMessagesService.get(n)(e,i,t)}}:this.props[e]={[n]:t,message:{[n]:(e,i)=>this.validationMessagesService.get(n)(e,i,t)}}}))}}(ca=oa||(oa={})).SHORT="short",ca.ADVERB="adverb",ca.NOUN="noun",ca.ADJECTIVE="adjective",oa.SHORT,oa.ADVERB,oa.NOUN;const ha={daily:{short:"day",noun:"day",adverb:"daily",adjective:"daily"},weekly:{short:"w",noun:"week",adverb:"weekly",adjective:"weekly"},biweekly:{short:"2w",noun:"2 weeks",adverb:"biweekly",adjective:"biweekly"},every4weeks:{short:"4w",noun:"4 weeks",adverb:"every 4 weeks",adjective:"4-weekly"},monthly:{short:"mo",noun:"month",adverb:"monthly",adjective:"monthly"},bimonthly:{short:"2mo",noun:"2 months",adverb:"bimonthly",adjective:"bimonthly"},quarterly:{short:"qrt",noun:"quarter",adverb:"quarterly",adjective:"quarterly"},semiannual:{short:"6mo",noun:"6 months",adverb:"semiannually",adjective:"semiannual"},annual:{short:"yr",noun:"year",adverb:"annually",adjective:"annual"}};function ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oa.ADVERB;const n=ha[e];return n&&n[t]}class pa{constructor(e,t){this.currencyFormatter=e,this.translateServices=t}get(e){switch(e){case"enum":return this.enum.bind(this);case"minAmount":return this.minAmount.bind(this);case"required":case"requiredIfIbanCountry":return this.required.bind(this);case"period":return this.period.bind(this);default:return this.default.bind(this)}}enum(e,t,n){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.enum",{enums:n.join(", ")}):`This value must be either ${n.join(", ")}`}period(e,t,n){if(this.translateServices){const e=this.translateServices.subscriptionPeriodLabelsService,t=n.map((t=>e.getLabel(t,oa.ADJECTIVE))).join(", ");return this.translateServices.intlService.translate("paymentMethodValidationMessages.period",{periods:t})}return`The chosen payment method only works with the following frequencies: ${n.map((e=>ma(e,oa.ADJECTIVE))).join(", ")}`}minAmount(e,t,n){if(this.translateServices){const e=this.translateServices.intlService.formatCurrency(n.size,{currency:n.currency});return this.translateServices.intlService.translate("paymentMethodValidationMessages.minAmount",{minAmount:e})}return`This amount must be at least ${this.currencyFormatter.format(n.size,{currency:n.currency})} due to the payment method chosen.`}required(e){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.required"):`${e} is required`}default(e){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.default"):`Validation failed for ${e}`}}class ga{constructor(e){this.intl=e}get all(){return{daily:{short:this.intl.translate("widgetSubscriptionPeriodLabel.daily.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.daily.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adjective")},weekly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adjective")},biweekly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adjective")},every4weeks:{short:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adjective")},monthly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adjective")},bimonthly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adjective")},quarterly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adjective")},semiannual:{short:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adjective")},annual:{short:this.intl.translate("widgetSubscriptionPeriodLabel.annual.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.annual.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adjective")}}}}class ya{get all(){return ha}}class fa{constructor(e){this.subscriptionPeriodLabelsProvider=e}getLabel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oa.ADVERB;if(!e)return;const n=this.subscriptionPeriodLabelsProvider.all[e];return n&&n[t]}getValueWithLabel(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa.SHORT;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa.SHORT;return t?(n=(arguments.length>3?arguments[3]:void 0)||ma(t,i),n?`${e}/${n}`:e):e}(e,t,n,this.getLabel(t,n))}}class Sa{constructor(e){this.targetWindow=e,this.isTrackingClicks=!1,this.clickHandler=this.handleClick.bind(this)}setTrackSender(e){this.trackSender=e}startTracking(){if(this.isTrackingClicks)throw new Error("Already tracking clicks");this.targetWindow.addEventListener("click",this.clickHandler,!0),this.isTrackingClicks=!0}stopTracking(){this.targetWindow.removeEventListener("click",this.clickHandler),this.isTrackingClicks=!1}handleClick(e){var t;const n=e.target;if(!n)return;if(n.closest("label")&&"INPUT"!==n.tagName)return;const i=ze(n,(e=>e&&e.hasAttribute&&e.hasAttribute(Sa.ElementNameDataAttr)));null===(t=this.trackSender)||void 0===t||t.call(this,{target:n,elementName:null==i?void 0:i.getAttribute(Sa.ElementNameDataAttr)})}}Sa.ElementNameDataAttr="data-tracking-element-name";class Ea{constructor(e,t,n,i){this.checkoutConfiguration=e,this.currencyService=t,this.screenDataFormatter=n,this.checkoutLocale=i,this.currentScreenDataGetter=null,this.checkoutTrackerDataGetter=null,this.checkoutUIStateGetter=null,this.donationType=null}getPayParams(){var e;const t=this.getCheckoutTrackerData();return t?{frequency:t.donation.frequency,currency:t.donation.currency,amount:null!==(e=t.donation.amount)&&void 0!==e?e:0,amountOptions:{[t.donation.frequency]:t.donation.amountOptions||[]}}:null}getCommonPayload(e){var t;const n=this.getCheckoutCurrencyRate(e),i=this.getCheckoutInUSDAmount(e),s=this.getFundraisingPageCustomerKey(),a=this.getExternalEventTags(),r=this.getEventComment();let o,c,l=null;const u=this.getCurrentScreenData();if(u){if(o=u.screenName,l=this.getCheckoutTrackerData(),!l)throw new Error("Checkout tracker data is required");const e=this.getCheckoutUIStateData();if(!e)throw new Error("Checkout UI state data is required");c=JSON.stringify(this.screenDataFormatter.format(o,u.screenData,l,e,this.checkoutConfiguration))}return{widgetKey:this.checkoutConfiguration.campaign.key,checkoutCompanyKey:this.checkoutConfiguration.campaign.company,checkoutFrequency:null==l?void 0:l.donation.frequency,checkoutLocale:this.checkoutLocale,elementReminderKey:this.checkoutConfiguration.element.reminderKey,elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementLocale:this.checkoutConfiguration.element.locale,checkoutViewId:e.checkoutViewId,checkoutOpenTime:e.checkoutOpenTimestamp,checkoutLifetime:Date.now()-e.checkoutOpenTimestamp,checkoutScreen:o,checkoutScreenData:c,checkoutInUSDAmount:i,checkoutCurrencyRate:n,checkoutDefaultAmount:(null==l?void 0:l.donation.defaultAmount)||0,splitTestName:this.checkoutConfiguration.splitTest&&this.checkoutConfiguration.splitTest.name||"",splitTestVariant:this.checkoutConfiguration.splitTest&&this.checkoutConfiguration.splitTest.variant||"",elementData:JSON.stringify(this.checkoutConfiguration.externalConfig.elementTrackingData),fundraisingPageKey:(null===(t=this.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.key)||"",fundraisingPageCustomerKey:s,donationType:this.getDonationType(),checkoutType:this.checkoutConfiguration.checkoutType,eventTags:a,eventComment:r}}setCurrentScreenDataGetter(e){this.currentScreenDataGetter=e}setCheckoutTrackerDataGetter(e){this.checkoutTrackerDataGetter=e}setCheckoutUIStateGetter(e){this.checkoutUIStateGetter=e}setDonationType(e){this.donationType=e}getCurrentScreenData(){var e,t;try{return null!==(t=null===(e=this.currentScreenDataGetter)||void 0===e?void 0:e.call(this))&&void 0!==t?t:null}catch(e){if(e instanceof Error&&"Cannot identify current screen"===e.message)return null;throw e}}getCheckoutTrackerData(){var e,t;return null!==(t=null===(e=this.checkoutTrackerDataGetter)||void 0===e?void 0:e.call(this))&&void 0!==t?t:null}getCheckoutUIStateData(){var e,t;return null!==(t=null===(e=this.checkoutUIStateGetter)||void 0===e?void 0:e.call(this))&&void 0!==t?t:null}getDonationType(){var e;return null!==(e=this.donationType)&&void 0!==e?e:this.checkoutConfiguration.defaultFlowType}getCheckoutCurrencyRate(e){if(e.checkoutCurrency)return this.currencyService.getRate(e.checkoutCurrency)}getCheckoutInUSDAmount(e){if(e.checkoutAmount&&e.checkoutCurrency)return this.currencyService.convert(e.checkoutAmount,e.checkoutCurrency,"USD")}getFundraisingPageCustomerKey(){var e;return this.checkoutConfiguration.queryParams.member||(null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.admin)||""}getEventComment(){const e={};return this.checkoutConfiguration.queryParams.embedClientId&&(e.embedClientId=this.checkoutConfiguration.queryParams.embedClientId),e}getExternalEventTags(){var e;const t=null===(e=this.checkoutConfiguration.externalConfig.queryParams)||void 0===e?void 0:e.eventTags;return t?t.split(","):[]}}var Aa=n(8393);const Ca=[[0,3,1,7,5,9,8,6,4,2],[7,0,9,2,1,5,4,8,6,3],[4,2,0,6,8,7,1,3,5,9],[1,7,5,0,9,8,3,4,2,6],[6,1,2,3,0,4,5,9,7,8],[3,6,7,4,2,0,9,5,8,1],[5,8,6,9,7,2,0,1,3,4],[8,9,4,5,3,6,2,0,1,7],[9,4,3,8,6,1,7,2,0,5],[2,5,8,1,4,3,6,7,9,0]];var va,Na;!function(e){e.CHECKOUT="checkout"}(va||(va={}));class ba extends pn{get eventType(){return"ping"}}class Pa{constructor(e){this.tags=new Set,this.tracker=e}get companyKey(){return this.tracker.companyKey}get clientId(){return this.tracker.clientId}get livemode(){return this.tracker.livemode}get clientLocale(){return this.tracker.clientLocale}get debug(){return this.tracker.debug}get page(){return this.tracker.page}get isPingAvailable(){return this.tracker.isPingAvailable}getTags(){return Array.from(this.tags)}customTrack(e){return this.tracker.customTrack(e)}track(e,t){return this.tracker.track(e,t)}ping(e,t){const n=e||new ba;this.tracker.ping(n,t)}initializePointerUsageTracking(){this.tracker.initializePointerUsageTracking()}subscribe(e,t){return this.tracker.subscribe(e,t)}setEventTags(e){e.forEach((e=>this.tags.add(e)))}removeEventTags(e){this.tags.forEach((t=>{e.some((e=>t.substring(0,e.length)===e))&&this.tags.delete(t)}))}mergeEventTags(e){let t=[];e.payload.eventTags&&(t=e.payload.eventTags.slice()),this.tags.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),e.payload.eventTags=t}}class Da extends pn{constructor(e,t){super(),this.payload={checkoutIsRecurring:e.frequency!==oe.ONCE?1:0,checkoutCurrency:e.currency,checkoutAmount:e.amount,checkoutPresets:e.amountOptions[e.frequency],elementKey:t.elementKey,elementType:t.elementType,elementReminderKey:t.elementReminderKey}}}class _a extends Da{constructor(e,t,n){super(e,t),this.merge({customEventType:n.customEventType,customEventData:JSON.stringify(n.customEventData)})}get eventType(){return mn}}class Ta extends Da{constructor(e,t,n,i,s){super(e,t),this.merge({checkoutScreen:n,checkoutClickElement:i,clickAHref:null==s?void 0:s.link,clickDOMPath:null==s?void 0:s.path,clickText:null==s?void 0:s.text})}get eventType(){return"checkoutClick"}}function xa(e,t){if(!e)return;if("test"===t&&e.FUN_SPLIT_TESTING_NAME)return{name:e.FUN_SPLIT_TESTING_NAME,node:e};if("variant"===t&&e.FUN_SPLIT_TESTING_VARIANT_NAME)return{name:e.FUN_SPLIT_TESTING_VARIANT_NAME,node:e};const n=We(e,`fun-${t}`);if(n)return{name:n,node:e};const i=e.getAttribute("href")||"",s=/#FUN/.test(i),a=/#X/.test(i);if(s||a){const n=function(e){if(!e)return null;if(!Ke.test(e))return null;const t=/(#.+?)$/.exec(e);if(!t)return null;const n=t[0],i=Ke.exec(n);if(!i)return null;const s=i[1],a=Ye(n),r={key:s};return Object.assign(r,a),r}(i);if(n&&n.key&&n[t])return{name:n[t],node:e}}}class Oa{constructor(e){this.node=e,this.path="",this.purePath=this.createPath(this.node),this.convertPathToString(this.purePath),this.extractDataFromNode(),this.extractSplitTest()}createPath(e){let t=e;const n=[];for(;!(t instanceof HTMLHtmlElement)&&t.parentNode;)n.push(t),t=t.parentNode;return n}convertPathToString(e){this.path=e.map((e=>{if(e.tagName&&e.nodeName&&"HTML"!==e.tagName){const t=e.classList?[].slice.call(e.classList):[];return e.tagName.toLowerCase()+(t.length?"."+t.join("."):"")}return!1})).filter(Boolean).reverse().join(" ")}extractDataFromNode(){const e=this.findExtractableNode();if(!e)return;const t=e.innerText||e.textContent||e.value;if(this.text=t?t.replace(/\s+/g," ").trim().substr(0,200):void 0,e instanceof HTMLAnchorElement)this.link=e.href;else{let t=e;for(;t;){if(t.href){this.link=t.href;break}t=t.parentNode}}}findExtractableNode(){return this.purePath.find((e=>{if(e.nodeType!==Node.ELEMENT_NODE)return!1;const t=e.tagName.toLowerCase();return-1!==["a","button"].indexOf(t)||"input"===t&&-1!==["submit","button"].indexOf(e.type)}))}extractSplitTest(){const e=function(e){if(!function(e){if(!e)return!1;const t=ze(e,(e=>Boolean(e.FUN_SPLIT_TESTING)));return Boolean(t)}(e))return;const t=function(e){const t=ze(e,(e=>Boolean(e.FUN_SPLIT_TESTING_NAME||We(e,"fun-test"))));return xa(e,"test")||xa(t,"test")}(e),n=function(e){const t=ze(e,(e=>Boolean(e.FUN_SPLIT_TESTING_VARIANT_NAME||We(e,"fun-variant"))));return xa(e,"variant")||xa(t,"variant")}(e);return t&&n?{test:t.name,variant:n.name}:void 0}(this.node);e&&(this.test=e.test,this.variant=e.variant)}}class ka extends Pa{constructor(e,t,n,i,s,a,r){var o;super(e),this.tracker=e,this.checkoutConfiguration=t,this.trackerCheckoutPayloadService=n,this.targetWindow=i,this.url=s,this.checkoutOpenTimestamp=a,this.trackerClickInterception=r,this.checkoutViewId=`${o=(0,Aa.i)().slice(0,-1)}${function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charAt(n);t=Ca[t][i]}return t.toString()}(o)}`,this.trackerClickInterception.setTrackSender(this.trackClickEvent.bind(this))}get pageViewId(){var e;return null===(e=this.tracker.page)||void 0===e?void 0:e.pageViewId}initialize(){this.tracker.initializePointerUsageTracking(this.targetWindow),this.trackClicks()}dispose(){this.trackerClickInterception.stopTracking()}initializePointerUsageTracking(){this.tracker.initializePointerUsageTracking(this.targetWindow)}track(e){this.showcase||(this.addTrackerData(e),this.tracker.track(e,{url:this.url,trackerType:va.CHECKOUT}))}customTrack(e){if(this.showcase)return;const t=this.trackerCheckoutPayloadService.getPayParams();if(!t)return;const n={elementKey:this.checkoutConfiguration.element.key,elementReminderKey:this.checkoutConfiguration.element.reminderKey,elementType:this.checkoutConfiguration.element.type};this.track(new _a(t,n,{customEventType:e.type,customEventData:e.data}))}ping(e){if(this.showcase)return;if(!this.tracker.isPingAvailable)return;const t=e||new ba;this.addTrackerData(t),this.tracker.ping(t,{url:this.url})}trackClicks(){this.trackerClickInterception.startTracking()}getTags(){return[...super.getTags(),...this.tracker.getTags()]}setCurrentScreenDataGetter(e){this.trackerCheckoutPayloadService.setCurrentScreenDataGetter(e)}setCheckoutTrackerDataGetter(e){this.trackerCheckoutPayloadService.setCheckoutTrackerDataGetter(e)}setCheckoutUIStateGetter(e){this.trackerCheckoutPayloadService.setCheckoutUIStateGetter(e)}setDonationType(e){this.trackerCheckoutPayloadService.setDonationType(e)}trackClick(e,t){this.trackClickEvent({elementName:e,target:t})}get showcase(){return this.checkoutConfiguration.infrastructureParams.showcase}addTrackerData(e){const t=this.trackerCheckoutPayloadService.getCommonPayload({checkoutViewId:this.checkoutViewId,checkoutOpenTimestamp:this.checkoutOpenTimestamp,checkoutAmount:e.payload.checkoutAmount,checkoutCurrency:e.payload.checkoutCurrency});e.merge(t),this.mergeEventTags(e)}trackClickEvent(e){var t;const{target:n,elementName:i}=e,s=this.trackerCheckoutPayloadService.getPayParams();if(!s)return;const a={elementKey:this.checkoutConfiguration.element.key,elementReminderKey:this.checkoutConfiguration.element.reminderKey,elementType:this.checkoutConfiguration.element.type},r=new Oa(n),o=(null===(t=this.trackerCheckoutPayloadService.getCurrentScreenData())||void 0===t?void 0:t.screenName)||"";this.track(new Ta(s,a,o,i||"other",r))}}!function(e){e.SHOULD_SHOW="should-show",e.SHOULD_HIDE="should-hide",e.WAS_HIDDEN="was-hidden"}(Na||(Na={}));const Ia=(0,h.createContext)(null);function wa(){const e=(0,h.useContext)(Ia);if(!e)throw new Error("View event emitter was not provided");return e}class Ra extends _i{tryStart(){this.isActive||super.start()}}class Ma extends _i{}function La(e){let t,n,i,s,a,r,o,c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(t=3&e.length,n=e.length-t,i=l,a=3432918353,r=461845907,c=0;c<n;)o=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,o=(65535&o)*a+(((o>>>16)*a&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(65535&o)*r+(((o>>>16)*r&65535)<<16)&4294967295,i^=o,i=i<<13|i>>>19,s=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&s)+((58964+(s>>>16)&65535)<<16);switch(o=0,t){case 3:o^=(255&e.charCodeAt(c+2))<<16;break;case 2:o^=(255&e.charCodeAt(c+1))<<8;break;case 1:o^=255&e.charCodeAt(c),o=(65535&o)*a+(((o>>>16)*a&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(65535&o)*r+(((o>>>16)*r&65535)<<16)&4294967295,i^=o}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0}function Ua(e,t){if(t.length<3)return t;const n=La(e)%t.length,i=(La(e+"_secondary")%t.length+n+1)%t.length;return[t[n],t[i]].sort(((e,t)=>null===e||null===t?0:e-t))}class Fa extends _i{get isTestGroup(){return this.isActive&&this.isVariant(Yn.TEST)}get upsellAmountsMap(){const e=this.tracker.clientId;return{[Fe.UP_TO_25]:Ua(e,[1500,2e3]),[Fe.UP_TO_35]:Ua(e,[2e3,2500,3e3]),[Fe.UP_TO_55]:Ua(e,[2500,3e3,3500,4e3]),[Fe.UP_TO_100]:Ua(e,[3500,4500,5500]),[Fe.UP_TO_150]:Ua(e,[4e3,5e3,6e3]),[Fe.UP_TO_200]:Ua(e,[5e3,7500,1e4])}}tryStart(e){this.active||this.canBeStarted(e)&&this.start(e)}canBeStarted(e){return!!e.preDonationUpsellIsEnabled}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryToExpose(e){e!==oe.MONTHLY&&e!==oe.EVERY_4_WEEKS||this.exposure()}}class ja extends _i{get isTestGroup(){return this.isActive&&this.isVariant(ti.TEST)}tryStart(e){this.active||e.isPreDonationUpsellEnabled&&this.start(e)}tryExposure(e){e.preDonationUpsellTargetFrequency!==oe.MONTHLY&&e.preDonationUpsellTargetFrequency!==oe.EVERY_4_WEEKS||this.exposure()}}class Ba{constructor(e){this._locale=e}get intl(){if(!this._intl)throw new Error("Intl service is undefined in date formatter");return this._intl}set intl(e){this._intl=e}changeLocale(e){return this.locale=e,this.locale}get locale(){return this._locale}set locale(e){this._locale=e}}var Ha;!function(e){e.LONG="long",e.SHORT="short",e.LONG_WITH_YEAR="longWithYear",e.SHORT_WITH_YEAR="shortWithYear"}(Ha||(Ha={}));class qa extends Ba{format(e){const t={numberingSystem:"latn"};switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:Ha.SHORT}).type){case Ha.LONG:t.month="long",t.day="numeric";break;case Ha.LONG_WITH_YEAR:t.month="long",t.day="numeric",t.year="numeric";break;case Ha.SHORT_WITH_YEAR:t.month="short",t.day="numeric",t.year="numeric";break;default:t.month="short",t.day="numeric"}return new Date(e).toLocaleString(this.locale,t)}}class Ga{load(e){const t=this.getTranslationFilename(e);return this.loadFile(t)}getTranslationFilename(e){return e.replace("-","_")}}class Va extends Ga{loadFile(e){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield n(3367)(`./${e}.json`)).default}))}}const Ka=["common.screenAriaLabel","common.thankYouBadge","common.paymentNotAuthorizedError","confirmCloseDialog.question","confirmCloseDialog.instructions","paymentLoader.text","sharing.label","sharing.ariaLabel","tributeBadge.tooltipLabel","blockedScreen.description","mailingAddressScreen.onBehalfOfSubtitle","privacyScreen.alert.message","privacyScreen.donateAnonymously.label","privacyScreen.donateAnonymously.helpAriaLabel","privacyScreen.donateAsOrganization.label","privacyScreen.donateAsOrganization.input.helpAriaLabel","privacyScreen.donateAsOrganization.input.tooltipLabel","privacyScreen.donateAsOrganization.input.error.required","privacyScreen.donateAsOrganization.input.error.minLength","thankYouScreen.description.once","thankYouScreen.description.recurring.default","thankYouScreen.description.recurring.withEndDate","thankYouScreen.description.upsell","thankYouScreen.description.tribute.once","thankYouScreen.description.tribute.recurring.withEndDate","thankYouScreen.share.emailSubject","thankYouScreen.makeAnotherTribute.button","payButton.label.annual","payButton.label.continue","payButton.label.once","payButton.label.daily","payButton.label.weekly","payButton.label.biweekly","payButton.label.every4weeks","payButton.label.monthly","payButton.label.bimonthly","payButton.label.quarterly","payButton.label.semiannual","donateForm.donationCurrency","donateForm.title","donateForm.frequencyAriaLabel","donateForm.donationCurrency","donateForm.donationAmountField.label","donateForm.donationAmountField.hint.average","donateForm.donationAmountField.error.required","donateForm.donationAmountField.error.min","donateForm.designation.error.required","donateForm.tribute.label.dedication","donateForm.tribute.tooltipLabel","donateForm.donateButton.once","donateForm.donateButton.daily","donateForm.donateButton.weekly","donateForm.donateButton.biweekly","donateForm.donateButton.every4weeks","donateForm.donateButton.monthly","donateForm.donateButton.bimonthly","donateForm.donateButton.quarterly","donateForm.donateButton.semiannual","donateForm.donateButton.annual","doubleDonationScreen.description.desktop","doubleDonationScreen.description.mobile","doubleDonationScreen.tooltipLabel","doubleDonationScreen.nameMatch","doubleDonationScreen.message","doubleDonationScreen.matchedCompanyBlock.name","doubleDonationScreen.smallDonationAmountExperiment.name","doubleDonationScreen.button.donate.once","doubleDonationScreen.button.donate.recurring","idealConfirmationScreen.nextStepOverview","idealConfirmationScreen.nextStep","idealConfirmationScreen.returnLabel","paymentMethodScreen.title","paymentMethodScreen.transactionCostsInfo","paymentMethodScreen.donateNow","paymentMethodScreen.applePayDonateButton","paymentMethodScreen.applePayDonateButtonAriaLabel","paymentMethodScreen.paypal.errors.unavailable","paymentMethodScreen.creditCardIsUnavailableInfo.part-1","paymentMethodScreen.creditCardIsUnavailableInfo.part-2","postDonationUpsellScreen.amount.another","postDonationUpsellScreen.title","postDonationUpsellScreen.screenTitle","postDonationUpsellScreen.description","postDonationUpsellScreen.error.minAmount","upsellScreen.questionShort","upsellScreen.questionShortEvery4Weeks","upsellScreen.description","upsellScreen.descriptionEvery4Weeks","upsellScreen.button.donate4Weeks","upsellScreen.button.donateMonthly","usBankAccountScreen.description.desktop","usBankAccountConfirmationScreen.button","usBankAccountGuideScreen.description.descriptorCode"];var Ya=n(1324);class za{static isLocaleCode(e){return void 0!==e&&Ya.O.includes(e)}constructor(e,t,n,i,s,a,r){this.translationService=e,this.dateFormatter=t,this.currencyFormatter=n,this.numberFormatter=i,this.company=s,this.donateToPayTokens=a,this._locale=za.DEFAULT_LOCALE,this.availableLocales=r.availableLocales,this.locale=r.locale,this.company=s,this.donateToPayTokens=a,this.dateFormatter.intl=this}get locale(){return this._locale}get language(){return this.locale.split("-")[0]}getCurrencyFormat(){return this.currencyFormatter.getFormat()}setLocale(e){const t=this.locale;this.locale=e;const n=[this.translationService.changeLocale(this.locale)];return Promise.all(n).then((()=>this.locale)).catch((e=>(this.locale=t,Promise.reject(e)))).finally((()=>{this.dateFormatter.changeLocale(this.locale),this.currencyFormatter.changeLocale(this.locale),this.numberFormatter.changeLocale(this.locale)}))}translate(e,t){const n=(0,xi.q1)(this.translationService.translate(e,t));return this.replaceDonateToPay(e,n)}safeTranslate(e,t){const n=(0,xi.q1)(this.translationService.safeTranslate(e,t));return this.replaceDonateToPay(e,n)}formatDate(e,t){return this.dateFormatter.format(e,t)}formatCurrency(e,t){return this.currencyFormatter.format(e,t)}formatSymbol(e,t){return this.currencyFormatter.formatCurrencySymbol(e,t)}formatNumber(e,t){return this.numberFormatter.format(e,t)}isLocaleAvailable(e){return this.availableLocales.some((t=>t===e))}replaceDonateToPay(e,t){if("AFJCHFEK"===this.company&&this.locale===I.D.EN_US&&this.donateToPayTokens.includes(e)){const e={donation:"payment",Donation:"Payment",Donate:"Pay",donate:"pay",donating:"paying"};return t.replace(/donation|Donation|Donate|donate|donating/g,(t=>e[t]))}return t}set locale(e){this.isLocaleAvailable(e)?this._locale=e:this._locale=za.DEFAULT_LOCALE}}za.DEFAULT_LOCALE=I.D.EN_US;class Wa{constructor(e,t){this.translationProvider=e,this.translationLoader=t}changeLocale(e){return this.loadTranslation(e).then((t=>{this.translationProvider.locale(e),this.translationProvider.extend(t)}))}translate(e,t){return this.translationProvider.t(e,t)}safeTranslate(e,t){return this.translationProvider.safeT(e,t)}loadTranslation(e){return this.translationLoader.load(e)}}var $a=n(9966),Xa=n(6713);class Qa{constructor(e,t){this.baseLocale=e,this.lingui=(0,$a.sK)({locale:e,messages:{[e]:t||{}},localeData:{[e]:Qa.makeLocaleData(e)}})}static extractLanguageFromLocale(e){const[t]=e.split("-");return t}static makeLocaleData(e){const t=this.extractLanguageFromLocale(e);return{plurals:Xa[t]}}get defaultMessages(){return this.lingui._messages[this.baseLocale]}locale(e){if(void 0!==e){const t=Qa.makeLocaleData(e);this.lingui.loadLocaleData(e,t),this.lingui.activate(e)}return this.lingui.locale}t(e,t){const n=this.lingui._(e,t,{formats:{number:{numberingSystem:"latn"}}});return n===e?"":n}safeT(e,t){const n=Object.fromEntries(Object.entries(t||{}).map((e=>{let[t,n]=e;return[t,(0,xi.ZD)(String(n))]})));return this.t(e,n)}extend(e){const t=Object.assign({},this.defaultMessages,e);this.lingui.load(this.locale(),t)}}function Za(e,t,n,i){return(Number(e)||0).toLocaleString(i||"en-US",{style:"decimal",currency:"USD",minimumFractionDigits:t||0,maximumFractionDigits:n||0,numberingSystem:"latn"})}class Ja{constructor(e){this._locale=e}changeLocale(e){return this.locale=e,this.locale}get locale(){return this._locale}set locale(e){this._locale=e}}class er extends Ja{constructor(e){super(e),this.formatNumber=Za}format(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{minimumFractionDigits:0,maximumFractionDigits:0};return this.formatNumber(e,t.minimumFractionDigits,t.maximumFractionDigits,this.locale)}}class tr{constructor(e,t,n){this.locale=e,this.widgetLocalizationConfig=t,this.companyLocalizationConfig=n}getDataLanguage(){const e=(0,xi.Qk)(this.locale);return-1!==this.widgetLocalizationConfig.supportedLanguages.indexOf(e)?e:(0,xi.Qk)(this.widgetLocalizationConfig.defaultLocale)}getUILocale(){const e=this.locale,t=this.widgetLocalizationConfig.useCompanyInterfaceLocales,n=-1!==this.companyLocalizationConfig.interfaceLocales.indexOf(e),i=-1!==this.widgetLocalizationConfig.supportedLanguages.indexOf((0,xi.Qk)(e));return t&&!n||!t&&!i?this.widgetLocalizationConfig.defaultLocale:e}}var nr=n(1755);const ir={base:{color:"#222832",fontWeight:400,fontFamily:"'IBM Plex Sans', sans-serif",fontSize:"16px",lineHeight:"24px",fontSmoothing:"antialiased",":focus":{color:"#222832"},"::placeholder":{color:"#697484"},":focus::placeholder":{color:"#697484"}},invalid:{color:"#dA2243",":focus":{color:"#dA2243"},"::placeholder":{color:"#697484"},":focus::placeholder":{color:"#697484"}}},sr={focus:"focused",empty:"empty",invalid:"invalid"},ar={fonts:[{family:"IBM Plex Sans",src:`url(${nr}) format('woff2')`,weight:"400",style:"normal"}]},rr=/#([\da-z_-]{1,25})(\?|&|$)/i,or=e=>{var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("CriOS"))},cr=/^X[\dA-Z]{7}/,lr=new RegExp("\\/-\\/(N[\\dA-Z]{7})");var ur,dr,hr;new RegExp(`${lr.source}(?!\\/join)`),new RegExp(`${lr.source}\\/join`),function(e){e.WIDGET="WIDGET",e.ELEMENT="ELEMENT",e.FUNDRAISING_PAGE="FUNDRAISING_PAGE"}(ur||(ur={})),function(e){e.type="type",e.recurring="recurring",e.amount="amount",e.modifyAmount="modifyAmount",e.designationId="designationId",e.fundraiser="fundraiser",e.modifyDesignation="modifyDesignation",e.firstName="firstName",e.lastName="lastName",e.email="email",e[e.fundraiseupLivemode=g]="fundraiseupLivemode"}(dr||(dr={})),function(e){e.fundraiser="fundraiser",e.element="element"}(hr||(hr={}));let mr=!1;class pr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;this.keysKeeper=e,this._disabled=!1,this.originalQueryStringAndHash="",this.window=t}get disabled(){return this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e)}checkUrl(){if(this.disabled)return;if(!this.window.location.hash)return;if(!this.keysKeeper.exists(ur.WIDGET,this.window.location.hash))return;mr=!1;const e=this.keysKeeper.getOriginalWidgetKey(this.window.location.hash),t=this.window.location.href.replace(this.window.location.hash,"#"+e);this.window.history.replaceState(null,this.window.document.title,t)}setUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.disabled)return;if(!this.keysKeeper.exists(ur.WIDGET,e)&&!this.isModalKey(e))return;const s=this.getQueryString({keyOrHash:e,hrefParams:t,queryString:this.window.location.search,hash:this.window.location.hash,fundraisingPageKey:n}),a=this.cleanHash(this.window.location.hash);this.originalQueryStringAndHash=this.cleanQueryString(s,t,i)+a;const r=this.window.location.origin+this.normalizePathname(this.window.location.pathname)+s+a;this.window.history.replaceState(null,this.window.document.title,r),mr=!1}back(){or(this.window)||this.window.history.go(-2),setTimeout((()=>{const e=Ye(this.window.location.search,!1).form;if(this.keysKeeper.exists(ur.WIDGET,e)||this.isModalKey(e))return mr?void this.window.history.back():this.clearUrl()}),150)}clearUrl(){if(this.disabled)return;const e=Ye(this.window.location.search,!1).form;if(!this.keysKeeper.exists(ur.WIDGET,e)&&!this.isModalKey(e))return;const t=this.window.location.origin+this.normalizePathname(this.window.location.pathname)+this.originalQueryStringAndHash;this.window.history.replaceState(null,this.window.document.title,t),mr=!0}isModalKey(e){return[re.P2P_BUTTON,re.P2P_LINK].some((t=>this.keysKeeper.checkElementType(t,e)))}getQueryString(e){let{keyOrHash:t,hrefParams:n,hash:i,queryString:s,fundraisingPageKey:a}=e;const r=Ye(n,!0),o={form:t},c=Ye(i,!1),l=Ye(s,!1),u=function(e){const t=rr.exec(e);return t&&t[1]?t[1]:""}(i)||l.form||"",d=0!==u.length&&u.toLowerCase()!==t.toLowerCase();return a&&(o.fundraiser=a),Object.keys(c).forEach((e=>{d&&e in o||(o[e]=c[e])})),Object.keys(l).forEach((e=>{d&&e in o||(o[e]=l[e])})),Object.assign(o,r),o.form=t,o.element&&cr.test(o.element)&&delete o.element,"?"+$e(o,!1)}cleanHash(e){const t=e.split("&",1)[0];return this.keysKeeper.exists(ur.WIDGET,t)||"#"===t||-1!==t.indexOf("=")?"":t}cleanQueryString(e,t,n){const i=Ye(t,!1),s=Ye(e,!1);delete s.form,Object.keys(dr).forEach((e=>delete s[e])),Object.keys(hr).forEach((e=>delete s[e])),n||Object.keys(i).forEach((e=>delete s[e]));const a=$e(s,!1);return""===a?"":"?"+a}normalizePathname(e){return e.startsWith("//")?e.slice(1):e}}function gr(e){return new Promise((t=>{setTimeout(t,e)}))}class yr{static forKey(e){return new yr(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.key=e,this.params=t,this.customParams=n}toString(){const e=[].concat(this.params,this.customParams);return["#"+this.key,e.map((e=>{let[t,n]=e;return t+"="+encodeURIComponent(n)})).join("&")].filter(Boolean).join("&")}addRecurring(e){return e&&this.params.push([dr.recurring,e]),this}addAmount(e){return e&&this.params.push([dr.amount,e.toString()]),this}addModifyAmount(e){return!1!==e&&"no"!==e||this.params.push([dr.modifyAmount,"no"]),this}addModifyDesignation(e){return!1!==e&&"no"!==e||this.params.push([dr.modifyDesignation,"no"]),this}addDesignation(e){return"no"===e?this.params.push(["designation",e]):e&&this.params.push([dr.designationId,e]),this}addFirstName(e){return e&&this.params.push([dr.firstName,e]),this}addLastName(e){return e&&this.params.push([dr.lastName,e]),this}addEmail(e){return e&&this.params.push([dr.email,e]),this}addFundraiseupLivemode(e){return!1!==e&&"no"!==e||this.params.push([dr.fundraiseupLivemode,"no"]),this}addCustomQueryParams(e){if(!e)return this;for(const[t,n]of Object.entries(e))n&&this.customParams.push([t,n]);return this}}var fr,Sr,Er,Ar,Cr,vr,Nr,br,Pr,Dr,_r,Tr;!function(e){e.POP="popstate"}(fr||(fr={})),function(e){e.INITIAL="initial",e.LOOP="loop"}(Sr||(Sr={}));class xr{constructor(e){this.window=e,this.navigationHandlers=new Set,this.isLoop=!1,this.historyStateStack=[],this.historyApi=this.window.history,this._handleNavigation=this.handleNavigation.bind(this)}initialize(e){var t;this.historyStateStack=[],this.url=e;const n=(null===(t=this.historyApi.state)||void 0===t?void 0:t.state)||this.historyApi.state;return n!==Sr.INITIAL&&this.setInitialNavigationState(n),this.window.addEventListener(fr.POP,this._handleNavigation),this}dispose(){this.historyStateStack.length&&(this.historyApi.go(-this.historyStateStack.length),this.historyStateStack=[]),this.window.removeEventListener(fr.POP,this._handleNavigation)}onNavigation(e){this.navigationHandlers.add(e)}activateLoop(){this.isLoop||(this.isLoop=!0,this.setNavigationState(Sr.LOOP,{replace:!0}))}deactivateLoop(){this.isLoop&&(this.isLoop=!1,this.setNavigationState(Sr.INITIAL,{replace:!0}))}callNavigationHandlers(){this.navigationHandlers.forEach((e=>{e()}))}handleNavigationInitialState(){this.historyApi.length>2?this.historyApi.back():this.setNavigationState(Sr.INITIAL)}handleNavigation(e){var t;const n=(null===(t=e.state)||void 0===t?void 0:t.state)||e.state,i=null===n||""===n,s=n===Sr.INITIAL;this.historyStateStack.pop(),this.isLoop&&(s||i)&&this.setNavigationState(Sr.LOOP),this.isLoop||!s&&!i?this.callNavigationHandlers():this.handleNavigationInitialState()}setNavigationState(e,t){(null==t?void 0:t.replace)?this.historyApi.replaceState({state:e},"",this.url):(this.historyApi.pushState({state:e},"",this.url),this.historyStateStack.push(e))}setInitialNavigationState(e){const t=e===Sr.LOOP;this.setNavigationState(Sr.INITIAL,{replace:t})}}class Or extends xr{handleNavigationInitialState(){this.callNavigationHandlers()}}!function(e){e.CHECKOUT_INTENT="checkoutIntent",e.TRIBUTE_SELECTED="tributeSelected",e.EMAIL_LOG="emailLog",e.EMAIL_LOG_ID="emailLogId"}(Er||(Er={}));class kr{constructor(e,t,n,i,s,a){this.globalWindow=e,this.keysKeeper=t,this.checkoutConfiguration=n,this.queryParams=i,this.launcherParams=s,this.isOpenedFromUrl=a}initialize(){this.setUrl();const e=this.clearUrl();this.flowNavigationRouter.initialize(e)}dispose(){return(0,l.sH)(this,void 0,void 0,(function*(){this.flowNavigationRouter.dispose(),yield gr(150),this.urlRouter.clearUrl()}))}onNavigation(e){this.flowNavigationRouter.onNavigation(e)}activateNavigationLoop(){this.flowNavigationRouter.activateLoop()}deactivateNavigationLoop(){this.flowNavigationRouter.deactivateLoop()}get urlRouter(){return this._urlRouter||(this._urlRouter=new pr(this.keysKeeper,this.globalWindow)),this._urlRouter}get flowNavigationRouter(){return this._flowNavigationRouter||(this._flowNavigationRouter=new Or(this.globalWindow)),this._flowNavigationRouter}clearUrl(){const e=Ye(this.globalWindow.location.search,!1),t={},n=Object.values(Er);Object.keys(e).forEach((i=>{n.includes(i)||(t[i]=e[i])}));const i=$e(t,!1);return`${this.globalWindow.location.origin}${this.globalWindow.location.pathname}${i?`?${i}`:""}`}setUrl(){var e,t;this.urlRouter.disabled=!!this.checkoutConfiguration.showcase;const n=yr.forKey("").addAmount(this.queryParams.amount).addDesignation(this.queryParams.designationId).addModifyDesignation(this.queryParams.modifyDesignation).addRecurring(this.queryParams.recurring).addModifyAmount(this.queryParams.modifyAmount).addFirstName(this.queryParams.firstName).addLastName(this.queryParams.lastName).addEmail(this.queryParams.email).addFundraiseupLivemode(this.queryParams[g]).addCustomQueryParams(this.checkoutConfiguration.externalConfig.queryParams);this.urlRouter.checkUrl(),this.urlRouter.setUrl(this.checkoutConfiguration.campaign.customHash||this.checkoutConfiguration.campaign.key,n.toString().slice(1),null!==(t=null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.key)&&void 0!==t?t:"",this.isOpenedFromUrl)}}!function(e){e.COMMENT="comment",e.MAILING_ADDRESS="mailing-address",e.PRIVACY="privacy",e.THANK_YOU="thank-you",e.REMIND_ME="remind-me",e.QUESTIONS="questions",e.BLOCKED="blocked"}(Ar||(Ar={})),function(e){e.CRYPTO_CURRENCY="crypto-currency",e.CRYPTO_WALLET="crypto-wallet"}(Cr||(Cr={})),function(e){e.DONATION="CryptoDonation"}(vr||(vr={})),function(e){e.DONOR_NAME="DonorName",e.DONOR_EMAIL="DonorEmail",e.MAILING_ADDRESS="MailingAddress",e.TRIBUTE="Tribute",e.DESIGNATION="Designation",e.QUESTIONS="Questions",e.PHONE_NUMBER="PhoneNumber",e.TERMS_AND_CONDITIONS="TermsAndConditions",e.REMIND_ME_LATER="RemindMeLater",e.ON_BEHALF_OF="OnBehalfOf",e.DONATE_ANONYMOUS="DonateAnonymous",e.CUSTOMER_TITLE="CustomerTitle",e.COMMENT="Comment",e.COMMUNICATION_CONSENT="CommunicationConsent",e.BIRTHDAY_DATE="BirthdayDate"}(Nr||(Nr={})),function(e){e.SHARING="Sharing",e.TRIBUTE="Tribute",e.DEFAULT="Default"}(br||(br={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.ERROR="error",e.IDLE="idle"}(Pr||(Pr={})),function(e){e.FUNDRAISER="fundraiser",e.CAUSE="cause"}(Dr||(Dr={})),function(e){e.CARD_NUMBER="cardNumber",e.CARD_EXPIRY="cardExpiry",e.CARD_CVC="cardCvc",e.AU_BANK_ACCOUNT="auBankAccount",e.IBAN="iban",e.IDEAL_BANK="idealBank"}(_r||(_r={})),function(e){e.CARD="card",e.PAYMENT_OPTIONS="paymentOptions"}(Tr||(Tr={}));const Ir=[cn.DONATE,cn.DOUBLE,cn.GIFT_AID,cn.PAYMENT_OPTIONS,cn.POST_DONATION_UPSELL,cn.UK_BACS,cn.UPSELL,cn.COMMUNICATION_CONSENT,Ar.COMMENT,Ar.MAILING_ADDRESS,Ar.PRIVACY,Ar.THANK_YOU,Ar.REMIND_ME,Cr.CRYPTO_CURRENCY];class wr{format(e,t,n,i,s){return function(e,t,n,i,s){if(a=e,!Ir.some((e=>e===a)))return{};var a;switch(e){case cn.DONATE:return function(e,t,n,i){var s,a,r,o;return{isFiatEnabled:!0,isCryptoEnabled:e.enabledFlows.crypto,frequency:{value:e.donation.frequency,options:[e.leftButtonFrequency,e.rightButtonFrequency],editable:e.donation.canModifyFrequency,isEndDateActive:e.donation.showDonationEndDate?e.donation.isDonationEndDateActive:null},amountOptions:{selected:e.donation.amountOptions.includes(null!==(s=e.donation.amount)&&void 0!==s?s:0),values:e.donation.amountOptions,shown:e.donation.amountOptions.length>0},amount:{filled:!!e.donation.amount,value:null!==(a=e.donation.amount)&&void 0!==a?a:0,editable:e.donation.canModifyAmount,hasExternalAmount:i.hasExternalAmount},currency:{value:e.donation.currency,editable:e.donation.canSelectCurrency},tribute:{filled:e.tribute.isFilled,type:e.tribute.show?e.tribute.labelType:null,shown:e.tribute.show},comment:{shown:e.comment.isEnabled,filled:!!e.comment.content},goal:{value:e.designation.goalKey,editable:e.designation.isEditable,shown:e.designation.show},askPage:{shown:i.getAskPageConfig().show},fundraisingPage:{shown:Boolean((null===(r=i.fundraisingPage)||void 0===r?void 0:r.key)&&n.askPageActiveTab===Dr.FUNDRAISER)},hint:t.donation.currentHint&&{amount:t.donation.currentHint.amount,description:t.donation.currentHint.description,amountUsd:t.donation.currentHint.amountUsd}||null,hintOptions:(null===(o=t.donation.hintOptions)||void 0===o?void 0:o.map((e=>({amount:e.amount,description:e.description,amountUsd:e.amountUsd,default:e.default}))))||null,hintVariantName:t.donation.hintVariantName||null,aiEnabled:i.campaign.config.enableAI,goalMeter:t.goalMeter}}(t,n,i,s);case cn.UPSELL:return function(e){var t,n,i,s;return{amount:{value:e.upsell.fromAmount,valueInUsd:e.upsell.fromAmountInUSD},currency:{value:e.currency},smallAmount:{shown:null!==e.lowAmount,value:null!==(t=e.lowAmount)&&void 0!==t?t:0,valueInUsd:null!==(n=e.lowAmountInUSD)&&void 0!==n?n:0},bigAmount:{value:null!==(i=e.highAmount)&&void 0!==i?i:0,valueInUsd:null!==(s=e.highAmountInUSD)&&void 0!==s?s:0,frequency:e.targetFrequency}}}(t);case cn.PAYMENT_OPTIONS:return function(e,t,n){var i;const s=e.availableOptions.filter((t=>e.buttonOptions[t].visible));return{coverFees:{checked:e.isFeeCovered,fees:e.processingFee,total:e.total,currency:e.currency},frequency:e.frequency,paymentMethods:s,paymentOptions:{visible:e.visiblePaymentOptions,hidden:e.hiddenPaymentOptions},askPage:{shown:n.getAskPageConfig().show},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Dr.FUNDRAISER)},card:{number:{filled:e.cardFilledFields[_r.CARD_NUMBER]},expiry:{filled:e.cardFilledFields[_r.CARD_EXPIRY]},cvc:{filled:e.cardFilledFields[_r.CARD_CVC]}}}}(t,i,s);case cn.GIFT_AID:return{shown:!0};case cn.UK_BACS:return function(e){return{accountNumber:{filled:!!e.accountNumber},sortCode:{filled:!!e.sortCode}}}(t);case cn.DOUBLE:return function(e){return{upsell:{currency:e.currency,currentAmount:e.total,matchingFromAmount:e.minimumMatchedAmount,matchingPromisedAmount:e.matchingPromisedAmount,matchingRatio:e.matchingRatio,proposedAmount:e.proposedAmount,proposedAmountBeforeFeeCovered:e.proposedAmountBeforeFeeCovered,show:e.showDTDUpsellExperiment&&e.showDTDUpsell},employer:{filled:!!e.employer.name,filledFromList:e.companies.some((t=>{let{company_name:n}=t;return n===e.employer.name}))}}}(t);case cn.POST_DONATION_UPSELL:return function(e){var t,n,i;return{amount:{value:null!==(t=e.amount)&&void 0!==t?t:0},minAmount:{value:e.recurringMinAmount},total:{value:null!==(n=e.amount)&&void 0!==n?n:0},currency:{value:e.currency},period:{value:e.period},amountInUSD:{value:null!==(i=e.amountInUSD)&&void 0!==i?i:0}}}(t);case Ar.COMMENT:return function(e){return{comment:{filled:!!e.comment}}}(t);case Ar.PRIVACY:return function(e,t,n){var i;return{firstName:{filled:!!e.firstName},lastName:{filled:!!e.lastName},email:{filled:!!e.email,validated:!1,valid:null},phoneNumber:{shown:e.showPhone,required:e.phoneRequired,filled:!!e.phone},anonymous:{shown:e.showAnonymous,filled:e.anonymousChecked},onBehalfOf:{shown:e.onBehalfOf.isEnabled,filled:!!e.onBehalfOf.companyName},terms:{shown:e.termsAndConditions.isEnabled,checked:e.termsAndConditions.isAccepted},generalConsent:{shown:e.generalConsent.isEnabled,checked:e.generalConsent.isEnabled&&e.generalConsent.isAccepted},askPage:{shown:n.getAskPageConfig().show},birthday:{shown:e.birthday.isEnabled,filled:!!e.birthday.value,date:e.birthday.convertedDate},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Dr.FUNDRAISER)}}}(t,i,s);case Ar.MAILING_ADDRESS:return function(e){return{mailingAddressRequired:e.isRequired,city:{filled:!!e.city},country:{filled:!!e.countryCode,value:e.countryCode},line1:{filled:!!e.line1},line2:{filled:!!e.line2},postal:{filled:!!e.postal},region:{filled:!!e.region,value:e.region}}}(t);case Ar.THANK_YOU:return function(e){return{amount:{value:e.total},currency:{value:e.currency},email:{shown:e.sharing.showEmail},facebook:{shown:e.sharing.showFacebook},linkedin:{shown:e.sharing.showLinkedin},twitter:{shown:e.sharing.showTwitter},makeAnotherDonation:{shown:e.tribute.makeAnotherDonation},completeDedication:{shown:e.tribute.completeDedication}}}(t);case Ar.REMIND_ME:return function(e){return{email:{filled:!!e.email.value},terms:{shown:e.isTermsAndConditionsEnabled,checked:e.termsAndConditions.isAccepted}}}(t);case Cr.CRYPTO_CURRENCY:return function(e,t,n){var i;return{isFiatEnabled:e.enabledFlows.money,isCryptoEnabled:!0,tribute:{filled:e.tribute.isFilled,type:e.tribute.show?e.tribute.labelType:null,shown:e.tribute.show},comment:{shown:e.comment.isEnabled,filled:!!e.comment.content},goal:{value:e.designation.goalKey,editable:e.designation.isEditable,shown:e.designation.show},askPage:{shown:n.getAskPageConfig().show},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Dr.FUNDRAISER)},cryptocurrency:e.currencyCode}}(t,i,s);case cn.COMMUNICATION_CONSENT:return(e=>{const t=t=>{const n=e.channels.find((e=>e.type===t));return{shown:Boolean(n),checked:!!n&&n.isAccepted}};return{channels:{email:t(u.ax.EMAIL),sms:t(u.ax.SMS),phoneCalls:t(u.ax.PHONE_CALLS),postalMail:t(u.ax.POSTAL_MAIL),socialMedia:t(u.ax.SOCIAL_MEDIA)}}})(t);default:throw new U(e,`Unknown screen name "${e}"`)}}(e,t,n,i,s)}}class Rr{constructor(e){let{distributionId:t,name:n,variants:i,sentry:s}=e;this.variants=new Map,this.distributionId=t,this.name=n,this.sentry=s,i.forEach((e=>{this.variants.set(e.name,{name:e.name,weight:e.weight})})),this.variantSelectors=this.getDistributedSelectors()}get currentVariantName(){return this._currentVariantName}get previousVariantName(){return this._previousVariantName}initCurrentVariantName(){var e;const t=this.getSelection(),n=[];this.variantSelectors.forEach(((e,t)=>{n.push([t,e])})),this.currentVariantName=null===(e=n.find((e=>{let[,[n,i]]=e;return t>=n&&t<i})))||void 0===e?void 0:e[0]}setVariant(e){this.variants.has(e)?this.currentVariantName=e:this.sentry.captureException(new Pi(this.name))}set currentVariantName(e){this._previousVariantName=this._currentVariantName,this._currentVariantName=e}getSelection(){const e=this.getMaxDistributionValue();return Number(La(`${this.distributionId}:${this.name}`)%e)}getDistributedSelectors(){let e=0;const t=new Map;return this.assertVariantsWithWeight(this.variants),this.variants.forEach(((n,i)=>{let{weight:s}=n;const a=this.getWeightSum(),r=this.getMaxDistributionValue()/a;t.set(i,[e,e+r*s]),e+=r*s})),t}getWeightSum(){let e=0;return this.assertVariantsWithWeight(this.variants),this.variants.forEach((t=>{let{weight:n}=t;return e+=n})),e}getMaxDistributionValue(){return 100*this.variants.size}assertVariantsWithWeight(e){if(![...e.entries()].every((e=>{let[,{weight:t}]=e;return void 0!==t})))throw new Error("Every variant should have weight")}}class Mr{constructor(e){this.experiments=new Map;const{experimentsSettings:t,tracker:n,funStorage:i,companyKey:s,widgetKey:a,user:r,parentCompanyKey:o,infrastructureParams:c,sentry:l,distributionId:u,isDebugMode:d,isFundraiseupVisitor:h,isAbTestMode:m=!1}=e;if(this.experimentsSettings=t,this.tracker=n,this.funStorage=i,this.companyKey=s,this.parentCompanyKey=o,this.widgetKey=a,this.user=r,this.infrastructureParams=c,this.sentry=l,this.distributionId=u,this.isDebugMode=d,this.isFundraiseupVisitor=h,this.isAbTestMode=m,!this.distributionId)throw new Error("ExperimentController: Distribution ID is required")}get allowExperiments(){return!!this.isDebugMode||!this.isFundraiseupVisitor&&!this.isAbTestMode}register(e,t){if(this.experiments.has(e))return;const n=this.createExperiment(e,t);n&&this.experiments.set(e,n)}get(e){if(!this.experiments.has(e)){const t=new Di(e);throw this.sentry.captureException(t),t}return this.experiments.get(e)}registerAndGet(e,t){return this.register(e,t),this.get(e)}has(e){return this.experiments.has(e)}createExperiment(e,t){const n=this.experimentsSettings.find((t=>t.name===e));if(!n)return this.sentry.captureException(new bi(e)),null;const i=this.getDistributionExperimentName(n),s=new Rr({distributionId:this.distributionId,name:i,variants:n.variants,sentry:this.sentry});return new t({settings:n,companyKey:this.companyKey,parentCompanyKey:this.parentCompanyKey,tracker:this.tracker,funStorage:this.funStorage,user:this.user,widgetKey:this.widgetKey,infrastructureParams:this.infrastructureParams,sentry:this.sentry,distribution:s,allowExperiments:this.allowExperiments})}getDistributionExperimentName(e){return e.experimentId===Nn[Sn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT]||e.experimentId===Nn[Sn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT]?Sn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT:e.experimentId===Nn[Sn.ML_DEFAULT_FREQUENCY_IN_DONATION_FORM_EXPERIMENT]?Sn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT:e.name}}const Lr={experimentId:Nn[Sn.CAMPAIGN_PAGE_TEST_EXPERIMENT],name:Sn.CAMPAIGN_PAGE_TEST_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:On.CONTROL,weight:1},{name:On.TEST,weight:1}]},Ur={experimentId:Nn[Sn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT],name:Sn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:"control",weight:1},{name:"test",weight:1}]},Fr={experimentId:Nn[Sn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT],name:Sn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:Ln.CONTROL,weight:1},{name:Ln.TEST,weight:1}]},jr={experimentId:Nn[Sn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT],name:Sn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:Bn.CONTROL,weight:1},{name:Bn.TEST,weight:1}]},Br={experimentId:Nn[Sn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT],name:Sn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:Vn.CONTROL,weight:1},{name:Vn.TEST,weight:1}]},Hr={experimentId:Nn[Sn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT],name:Sn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:Kn.CONTROL,weight:1},{name:Kn.TEST,weight:1}]},qr={experimentId:Nn[Sn.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT],name:Sn.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:zn.CONTROL,weight:0},{name:zn.TEST,weight:1}]},Gr={experimentId:Nn[Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT],name:Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:ei.CONTROL,weight:0},{name:ei.TEST,weight:1}]},Vr={experimentId:Nn[Sn.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT],name:Sn.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:ni.CONTROL,weight:1},{name:ni.TEST,weight:1}]},Kr={experimentId:Nn[Sn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT],name:Sn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:si.CONTROL,weight:1},{name:si.TEST,weight:1}]},Yr={experimentId:Nn[Sn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT],name:Sn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:oi.CONTROL,weight:1},{name:oi.TEST,weight:1}]},zr={experimentId:Nn[Sn.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT],name:Sn.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:li.CONTROL,weight:1},{name:li.TEST,weight:1}]},Wr={experimentId:Nn[Sn.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT],name:Sn.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:hi.CONTROL,weight:1},{name:hi.TEST,weight:1}]},$r={experimentId:Nn[Sn.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT],name:Sn.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:mi.CONTROL,weight:1},{name:mi.TEST,weight:1}]},Xr={experimentId:Nn[Sn.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT],name:Sn.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:yi.CONTROL,weight:1},{name:yi.TEST,weight:1}]},Qr={experimentId:Nn[Sn.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT],name:Sn.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:bn.CAMPAIGN_PAGES,variants:[{name:Ei.CONTROL,weight:1},{name:Ei.TEST_1,weight:1},{name:Ei.TEST_2,weight:1}]};const Zr={experimentId:Nn[Sn.DUMMY_EXPERIMENT],name:Sn.DUMMY_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Pn.CONTROL,weight:1},{name:Pn.TEST,weight:1}]},Jr={experimentId:Nn[Sn.UPSELL_CURTAIN_EXPERIMENT],name:Sn.UPSELL_CURTAIN_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Dn.CONTROL,weight:33},{name:Dn.TEST_1,weight:33},{name:Dn.TEST_2,weight:33},{name:Dn.TEST_3,weight:1}]},eo={experimentId:Nn[Sn.UPSELL_SCREEN_V_3_EXPERIMENT],name:Sn.UPSELL_SCREEN_V_3_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Tn.CONTROL,weight:1},{name:Tn.TEST,weight:1}]},to={experimentId:Nn[Sn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT],name:Sn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Rn.CONTROL,weight:1},{name:Rn.TEST,weight:1}]},no={experimentId:Nn[Sn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT],name:Sn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Mn.CONTROL,weight:1},{name:Mn.TEST,weight:1}]},io={experimentId:Nn[Sn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT],name:Sn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:jn.CONTROL,weight:1},{name:jn.TEST_1,weight:1},{name:jn.TEST_2,weight:1}]},so={experimentId:Nn[Sn.AA_CHECKOUT_EXPERIMENT],name:Sn.AA_CHECKOUT_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Hn.CONTROL,weight:1},{name:Hn.TEST,weight:1}]},ao={experimentId:Nn[Sn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT],name:Sn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:qn.CONTROL,weight:1},{name:qn.TEST,weight:1}]},ro={experimentId:Nn[Sn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT],name:Sn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Gn.CONTROL,weight:1},{name:Gn.TEST,weight:1}]},oo={experimentId:Nn[Sn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT],name:Sn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Yn.CONTROL,weight:0},{name:Yn.TEST,weight:1}]},co={experimentId:Nn[Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT],name:Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Jn.CONTROL,weight:0},{name:Jn.TEST,weight:1}]},lo={experimentId:Nn[Sn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT],name:Sn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:ti.CONTROL,weight:1},{name:ti.TEST,weight:1}]},uo={experimentId:Nn[Sn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT],name:Sn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:ri.CONTROL,weight:1},{name:ri.TEST,weight:1}]},ho={experimentId:Nn[Sn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT],name:Sn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:ci.CONTROL,weight:1},{name:ci.TEST,weight:1}]},mo={experimentId:Nn[Sn.SMART_PDU_CHECKOUT_V_3_EXPERIMENT],name:Sn.SMART_PDU_CHECKOUT_V_3_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:di.CONTROL,weight:1},{name:di.TEST,weight:1}]},po={experimentId:Nn[Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT],name:Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:pi.CONTROL,weight:1},{name:pi.TEST_1,weight:1},{name:pi.TEST_2,weight:1}]},go={experimentId:Nn[Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT],name:Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:gi.CONTROL,weight:1},{name:gi.TEST,weight:1}]},yo={experimentId:Nn[Sn.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT],name:Sn.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:fi.CONTROL,weight:1},{name:fi.TEST,weight:1}]},fo={experimentId:Nn[Sn.DONOR_RATING_CHECKOUT_EXPERIMENT],name:Sn.DONOR_RATING_CHECKOUT_EXPERIMENT,enabled:!1,scope:bn.EMBED,variants:[{name:Si.CONTROL,weight:1},{name:Si.TEST_1,weight:1},{name:Si.TEST_2,weight:1}]};var So=function(e){return[Zr,Jr,eo,to,no,io,so,ao,ro,oo,lo,co,uo,ho,mo,po,go,yo,fo].map((t=>{const n=e.find((e=>e.experimentId===t.experimentId));return n?{experimentId:n.experimentId,enabledWidgets:n.enabledWidgets,disabledWidgets:n.disabledWidgets,scope:n.scope,name:n.name,enabled:n.enabled,variants:n.variants,disabledAccounts:n.disabledAccounts,enabledAccounts:n.enabledAccounts}:t}))};class Eo{constructor(e,t){this.storage=e,this.initAt=t||(new Date).getTime(),this.read()}incrementSession(){this.sessionPage++,this.refresh()}refresh(){this.sessionAt||this.addSession(),this.write()}addSession(){this.sessionAt=this.initAt}write(){this.storage.setField(Ve.SESSION_AT,this.sessionAt.toString(10)),this.storage.setField(Ve.SESSION_PAGE,this.sessionPage)}read(){this.sessionAt=Number(this.storage.getField(Ve.SESSION_AT))||0,this.sessionPage=Number(this.storage.getField(Ve.SESSION_PAGE))||0}}class Ao extends ie{constructor(e,t,n,i,s,a,r,o,c,l){super(),this.embedTracker=e,this.debug=t,this.keysKeeper=n,this.checkoutViewEventEmitter=i,this.targetWindow=s,this.globalWindow=a,this.params=r,this.servicesFactoryMap=o,this.funSessionStorage=l,this.sentryInstance=c;const u=this.createCoreInstances();this.flowManager=u.flowManager,this.intl=u.intl,this.trackerCheckout=u.trackerCheckout,this.experiments=u.experiments,this.currencyService=u.currencyService,this.checkoutConfiguration=u.checkoutConfiguration,this.checkoutAPIBridge=u.checkoutAPIBridge,this.checkoutRouter=u.checkoutRouter,this.logger=u.logger,this.userInteraction=u.userInteraction,this.currencyFilter=u.currencyFilter,this.checkoutCurrencyFormatter=u.checkoutCurrencyFormatter}setLocale(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.intl.setLocale(e||this.intl.locale)}))}initializePublicJsApi(){}initializePageGuardManager(){}initializeIFrameRemover(){}initializeCookieConsent(){}initializeUserSession(){}initializeRouter(){this.checkoutConfiguration.infrastructureParams.showcase||this.checkoutRouter.initialize()}initializeTracker(){this.trackerCheckout.initialize()}initializeExperiments(){this.experiments.register(Sn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT,Mi),this.experiments.register(Sn.UPSELL_CURTAIN_EXPERIMENT,Bi),this.experiments.register(Sn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT,Oi),this.experiments.register(Sn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT,ki),this.experiments.register(Sn.SMART_PDU_CHECKOUT_V_3_EXPERIMENT,ji),this.experiments.register(Sn.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT,Fi),this.initializeAACheckoutExperiment(),this.initializeUpsellAmountsDatasetModalExperiment(),this.initializeUpsellAmountsSuggestionModalExperiment(),this.initializeDefaultFrequencyV2ModalExperiment(),this.initializeRecurringFrequencyHintCheckoutMobileExperiment(),this.initializeRecurringFrequencyHintCheckoutDesktopExperiment(),this.initializeDonorRatingCheckoutExperiment()}initializeAACheckoutExperiment(){this.experiments.register(Sn.AA_CHECKOUT_EXPERIMENT,Ra),this.experiments.get(Sn.AA_CHECKOUT_EXPERIMENT).tryStart()}initializeUpsellAmountsDatasetModalExperiment(){this.experiments.register(Sn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT,Fa);const e=this.experiments.get(Sn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT);e.tryStart({preDonationUpsellIsEnabled:this.checkoutConfiguration.campaign.config.showUpsell}),this.checkoutConfiguration.mergePreDonationUpsellSettings(this.getUpsellAmountsDatasetConfiguration(e))}initializeUpsellAmountsSuggestionModalExperiment(){this.experiments.register(Sn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT,ja),this.experiments.get(Sn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT).tryStart({isPreDonationUpsellEnabled:this.checkoutConfiguration.campaign.config.showUpsell})}initializeDefaultFrequencyV2ModalExperiment(){var e;this.experiments.register(Sn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT,wi),this.experiments.get(Sn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT).tryStart({enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,aiFrequencyEnabled:this.checkoutConfiguration.aiConfig.frequencies.enabled,hasExternalFrequencies:this.checkoutConfiguration.hasExternalFrequency,p2pUsed:!!(null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.key)})}initializeRecurringFrequencyHintCheckoutMobileExperiment(){this.experiments.register(Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT,Ui),this.experiments.get(Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT).tryStart({enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,locale:this.params.localeCode,isMobile:this.params.isMobile})}initializeCheckoutStepsCheckoutModalExperiment(){this.experiments.register(Sn.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT,Ii);const e=this.experiments.get(Sn.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT);e.tryStart({flowType:this.flowManager.flowType}),e.exposure()}initializeRecurringFrequencyHintCheckoutDesktopExperiment(){this.experiments.register(Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT,Li)}initializeCurrencyService(){return(0,l.sH)(this,void 0,void 0,(function*(){yield function(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){e.loadFiat(n),ht(t)&&(yield e.loadCrypto())}))}(this.currencyService,this.checkoutConfiguration,this.intl)}))}initializeCurrencyFilter(){return(0,l.sH)(this,void 0,void 0,(function*(){yield function(e,t,i){return(0,l.sH)(this,void 0,void 0,(function*(){if(function(){try{Intl.NumberFormat("fr-FR",{style:"currency",currency:"VND",currencyDisplay:"narrowSymbol",minimumFractionDigits:0,maximumFractionDigits:0}).format(8e3)}catch(e){return!1}return!0}())ht(i)&&(yield e.loadCrypto());else{const e=yield function(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield n.e(173).then(n.bind(n,6787));return{formatCurrency:e.currencyFilter,formatSymbol:(e,t)=>t===it.PREFIX?e:"",getCurrencyFormat:e.getCurrencyFormat,loadCrypto:()=>Promise.resolve()}}))}();t.replaceCurrencyFilter(e)}}))}(this.currencyFilter,this.checkoutCurrencyFormatter,this.checkoutConfiguration)}))}subscribeOnUserInteraction(){return this.userInteraction.subscribeOnUserInteraction((()=>{this.trackerCheckout.ping()}))}subscribeOnHistoryInteraction(){this.checkoutRouter.onNavigation((()=>{const e=this.flowManager.getCurrentFlow();e.isCurrentScreenFirst()||e.isCurrentScreenLast()?this.checkoutViewEventEmitter.emit(Na.SHOULD_HIDE,{}):this.flowManager.checkoutService.canGoBack&&e.prev()})),this.flowManager.onScreenChanged((()=>{const e=this.flowManager.getCurrentFlow();e.isCurrentScreenFirst()||e.isCurrentScreenLast()?this.checkoutRouter.deactivateNavigationLoop():this.checkoutRouter.activateNavigationLoop()}))}startFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.flowManager.setInitialScreen(e).startDefaultFlow()}))}createCoreInstances(){var e,t,n;const i=function(e){const t=function(e){const t=e.customFields;if(!t)return e;for(const n of t)e[n.name]=n.value;return _()(e,"customFields")}(k(e));return Object.assign({},x()(t,P()))}(this.params.externalConfig.queryParams||{}),s=gt.format(this.params.externalConfig.queryParams||{}),r=nt.format(this.params.externalConfig.checkoutData||{}),c=(null===(e=this.params.externalConfig.launcher)||void 0===e?void 0:e.elementType)===re.DIRECT_LINK,l={livemode:this.params.livemode,env:this.params.env,isMobile:this.params.isMobile,showcase:this.params.showcase,isDevelopmentMode:Qe(),OS:this.params.browserData.os.name||"",browser:this.params.browserData.browser.name||"",isInAppBrowser:this.params.browserData.isInAppBrowser,isSSLEnabled:"https:"===window.location.protocol},u=this.params.steplessCheckoutExperimentVariant===Zn.CONTROL,d=new Je(this.params.resolvedConfig,this.params.externalConfig,s,r,l,this.params.integrations,i,{locale:this.params.localeCode},Object.assign({checkoutType:Ce.MODAL},u?{preDonationUpsellSettings:{enabledForDonationFrequencies:[oe.ONCE,oe.MONTHLY],enabledTargetFrequencies:[oe.MONTHLY],isAdaptiveSuggestionEnabled:!1},paymentOptionsSettings:{disabledPaymentMethods:[pt._.US_BANK_ACCOUNT]},remindMeLaterSettings:{isEnabled:!1}}:{}),this.globalWindow,this.params.infrastructureQueryParams,this.params.test),h=new kr(this.globalWindow,this.keysKeeper,d,s,i,c),p=function(e,t,n){const i=function(e,t){return Object.assign(Object.assign({},e),Object.fromEntries(Object.entries(t).map((e=>{let[n]=e;var i;return[n,Number(null!==(i=t[n])&&void 0!==i?i:1)]}))))}(e,t.cryptoCurrencies),s=new dt;return new lt(s,i,n)}(this.params.currencyRates,d,this.sentryInstance),g=new dn(p),y=new Wt(new dt),f=new ts(za.DEFAULT_LOCALE,y),E=function(e,t,n){const i=new tr(e,{defaultLocale:t.campaign.config.localization.defaultLocale,useCompanyInterfaceLocales:t.campaign.config.localization.useCompanyInterfaceLocales,supportedLanguages:[...t.campaign.config.localization.supportedLanguages]},{interfaceLocales:[...t.company.localization.interfaceLocales]}).getUILocale();return function(e){let{dateFormatter:t,currencyFormatter:n,numberFormatter:i,availableLocales:s=[za.DEFAULT_LOCALE],translationLoader:a,locale:r=za.DEFAULT_LOCALE,phrases:o,company:c="",donateToPayTokens:l=[]}=e;const u=new Qa(r,o),d=new Wa(u,a);return new za(d,t,n,i,c,l,{locale:r,availableLocales:s})}({dateFormatter:new qa(za.DEFAULT_LOCALE),currencyFormatter:n,numberFormatter:new er(za.DEFAULT_LOCALE),availableLocales:Ya.O,translationLoader:new Va,locale:i,company:t.campaign.company,donateToPayTokens:Ka})}(this.params.localeCode,d,f),A=new wr,C=new Ea(d,p,A,E.locale),v=new Sa(this.targetWindow),N=new ka(this.embedTracker,d,C,this.targetWindow,this.params.trackingUrls.checkout,this.params.checkoutOpenTimestamp,v),b=N.checkoutViewId,D=on(),T=(O={sentry:this.sentryInstance,requestService:D,createFundraiseupAddressProvider:(e,t)=>new zi(e,D,t,b),baseURL:a,locale:E.locale},new qt(O.createFundraiseupAddressProvider,O.sentry,O.requestService,{locale:O.locale,baseURL:O.baseURL,fundraiseupAddressProviderHeaders:O.fundraiseupAddressProviderHeaders}));var O;const I=new Eo(this.funSessionStorage),w=d.company,R=this.params.livemode?S.LIVE:S.TEST,M=ne({publicKey:this.params.paymentMethods.stripePublicKey[R],targetWindow:this.targetWindow,locale:E.locale,stripeAccount:w.stripeAccount,showcase:this.params.showcase},this.sentryInstance),L=ne({publicKey:this.params.paymentMethods.stripePublicKey[R],targetWindow:this.globalWindow,locale:E.locale,stripeAccount:w.stripeAccount,showcase:this.params.showcase},this.sentryInstance),U=function(e,t){if(!Object.keys(Zt).find((e=>Zt[e]===t)))throw new Error(`${o.UNSUPPORTED_TYPE_OF_STORAGE} ${t}`);return new tn(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.A;function n(e,n){t.remove(e,n)}function i(e){return!!window.FUN_DO_NOT_TRACK||!!window.FUN_ONLY_STRICTLY_NECESSARY_COOKIES&&e!==$t.CID}return window.FUN_DO_NOT_TRACK&&en().forEach((e=>{n($t.CID,{domain:e}),n($t.SESSION,{domain:e}),n($t.FUNC,{domain:e}),n($t.PERFORMANCE,{domain:e})})),window.FUN_ONLY_STRICTLY_NECESSARY_COOKIES&&en().forEach((e=>{n($t.SESSION,{domain:e}),n($t.FUNC,{domain:e}),n($t.PERFORMANCE,{domain:e})})),{get:function(n){if(i(n))return null;const s=t.get(n);if(!s)return null;if(e===Qt.OBJECT){let e=null;return e=JSON.parse(s),e}return s},set:function(n,s,a){i(n)||(e===Qt.OBJECT&&(s=JSON.stringify(s)),t.set(n,s,a))},remove:n}}(t))}($t.EXPERIMENTS,Zt.OBJECT),F=new Mr({companyKey:w.key,parentCompanyKey:w.parentKey,widgetKey:d.campaign.key,tracker:N,experimentsSettings:[...(j=this.params.experimentsConfig.experiments,[Lr,Ur,Fr,jr,Br,Hr,qr,Vr,Gr,Kr,Yr,zr,Wr,$r,Xr,Qr].map((e=>{const t=j.find((t=>t.experimentId===e.experimentId));return t?{experimentId:t.experimentId,enabledWidgets:t.enabledWidgets,disabledWidgets:t.disabledWidgets,scope:t.scope,name:t.name,enabled:t.enabled,variants:t.variants,disabledAccounts:t.disabledAccounts,enabledAccounts:t.enabledAccounts}:e}))),...So(this.params.experimentsConfig.experiments)],user:d.user,funStorage:U,infrastructureParams:d.infrastructureParams,sentry:this.sentryInstance,isDebugMode:this.params.isDebugMode,isFundraiseupVisitor:this.params.isFundraiseupVisitor,isAbTestMode:this.params.isAbTestMode,distributionId:N.clientId});var j;F.register(Sn.DUMMY_EXPERIMENT,Ma),F.get(Sn.DUMMY_EXPERIMENT).start();const B=new m.A,H=new le(d),q=new vn({window:window,tracker:N,enabledByDefault:!0,sentry:this.sentryInstance,checkoutConfiguration:d}),G=on(),V=function(e){return function(e){const t=e||new ya;return new fa(t)}(new ga(e))}(E),K=new Ht({company:d.company,parentCompany:d.parentCompanyConfig,isDevelopmentMode:Qe()}),Y=function(e,t,n){const i=new pa(e,{intlService:t,subscriptionPeriodLabelsService:n}),s=new da(i);return new Is(Os,s)}(f,E,V),z=new Ts(xs),W=new Ji({apiHost:a,isShowcase:this.params.showcase,isLighthouse:!1,token:b}),$=So(this.params.experimentsConfig.experiments).find((e=>e.name===Sn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT)),X=null===(t=this.embedTracker.page)||void 0===t?void 0:t.toObject(),Q=new Qi({sentry:this.sentryInstance,apiHost:a,companyKey:d.company.key,campaignKey:d.campaign.key,clientLocale:this.params.localeCode,currencyRates:this.params.currencyRates,utmSource:(null===(n=this.params.externalConfig.queryParams)||void 0===n?void 0:n.utm_source)||"",currencyService:p,token:b,experimentSettings:$,experimentsStorage:U,clientId:this.embedTracker.clientId,clientConnectionType:null==X?void 0:X.clientConnectionType,clientDeviceMemory:null==X?void 0:X.clientDeviceMemory,clientHardwareConcurrency:null==X?void 0:X.clientHardwareConcurrency,clientConnectionDownlink:null==X?void 0:X.clientConnectionDownlink,clientDoNotTrack:null==X?void 0:X.clientDoNotTrack,clientDevicePixelRatio:null==X?void 0:X.clientDevicePixelRatio,clientBatteryLevel:null==X?void 0:X.clientBatteryLevel,checkoutType:Ce.MODAL});return{flowManager:new ss(B,d,E,N,this.debug,p,g,this.targetWindow,this.globalWindow,this.sentryInstance,this.params.paymentMethods,M,L,I,T,H,F,this.servicesFactoryMap,q,G,V,K,Y,z,W,Q,{stripe:{elementsOptions:ar,elementStyles:ir,elementClasses:sr},screenSet:{ukBacs:cn.UK_BACS,paymentOptions:cn.PAYMENT_OPTIONS}}),intl:E,trackerCheckout:N,experiments:F,currencyService:p,checkoutConfiguration:d,checkoutAPIBridge:H,checkoutRouter:h,logger:q,userInteraction:new hn(this.targetWindow),currencyFilter:y,checkoutCurrencyFormatter:f}}initializeDonorRatingCheckoutExperiment(){this.experiments.register(Sn.DONOR_RATING_CHECKOUT_EXPERIMENT,Ri);const e=this.experiments.get(Sn.DONOR_RATING_CHECKOUT_EXPERIMENT),t={[oe.ONCE]:{40:[5e3,8e3],20:[8e3,2e4],10:[2e4,4e4],5:[4e4,6e4],3:[6e4,15e4],2:[15e4,3e5],1:[3e5,45e4],.5:[45e4,6e5],.1:[6e5,1e6]},[oe.MONTHLY]:{40:[5e3,8e3],20:[8e3,2e4],10:[2e4,4e4],5:[4e4,6e4],3:[6e4,15e4],2:[15e4,3e5],1:[3e5,45e4],.5:[45e4,6e5],.1:[6e5,1e6]}},n={enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,donorRating:{date:(new Date).toISOString(),control:t,test1:t,test2:t}};e.tryStart(n)}getUpsellAmountsDatasetConfiguration(e){const t={};return e.active&&(t.isAdaptiveSuggestionEnabled=!1),e.isEnabled({preDonationUpsellIsEnabled:this.checkoutConfiguration.campaign.config.showUpsell})&&(t.amountsMap=e.upsellAmountsMap),t}}var Co=n(1085),vo=n(8254),No=n(8227),bo=n(3225);const Po=(0,h.createContext)(null);class Do extends h.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){if(!this.context)throw new Error("SentryService is not provided");this.context.captureException(e,{extra:{componentStack:t.componentStack}})}render(){return this.state.hasError?(0,Co.jsx)("h1",{children:this.props.fallback||"something went wrong"}):this.props.children}}Do.contextType=Po;var _o,To=n(4357),xo=n(503);!function(e){e.CLICK_SHOWCASE="click-showcase"}(_o||(_o={}));var Oo=n(148),ko=n(8583);const Io=(0,h.createContext)(null);var wo=n(1362),Ro=n(9679);function Mo(){const e=(0,ko.P)(),t=(0,h.useCallback)((t=>`${t} ${t}-${e?"mobile":"desktop"}`),[e]);return(0,h.useCallback)((e=>e.split(" ").map(t).join(" ")),[t])}const Lo=["button","input","select","textarea","iframe","object","embed","a","[tabindex]","[href]","[contenteditable]"].join(", ");function Uo(e){const{rootElRef:t,disabled:n,trapStartRef:i,trapStopRef:s}=e,[a,r]=(0,h.useState)(),o=(0,h.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!i.current)return;if(!s.current)return;if(!t.current)return;const n=t.current.querySelectorAll(Lo);let a=[].slice.call(n);a=a.filter((e=>e!==i.current&&e!==s.current)),e&&(a=a.reverse()),a.length&&a[0].focus()}),[t,i,s]),c=(0,h.useCallback)((e=>{n||i.current&&s.current&&(e.target===i.current&&o(a!==s.current),e.target===s.current&&o(a===i.current))}),[o,a,n,i,s]),l=(0,h.useCallback)((e=>{n||r(e.target)}),[n]);return{trapStartRef:i,trapStopRef:s,handleFocus:c,handleBlur:l}}var Fo=n(6172);function jo(e,t){if(!e.current)throw new Error("Ref was not passed");e.current.addEventListener("transitionend",(function n(){e.current&&(e.current.removeEventListener("transitionend",n),t())}),!1)}function Bo(e){return(0,h.useCallback)((t=>{jo(e,t)}),[e])}var Ho=n(606);const qo=e=>{const{tab:t,setActiveTab:n}=e,i=(0,Ho.t)(),s=Mo();return(0,Co.jsx)("div",{className:s("campaign-tabs-holder"),role:"tablist",children:(0,Co.jsxs)("div",{className:"campaign-tabs",children:[(0,Co.jsx)("button",{type:"button",className:(0,To.A)("campaign-tab",{active:t===Dr.FUNDRAISER}),onClick:()=>n(Dr.FUNDRAISER),"data-qa":"p2p-component-button","data-tracking-element-name":"switchToFundraisingPageTab",role:"tab","aria-selected":t===Dr.FUNDRAISER,children:i.translate("campaign.campaignTabs.fundraiser")}),(0,Co.jsx)("button",{type:"button",className:(0,To.A)("campaign-tab",{active:t===Dr.CAUSE}),onClick:()=>n(Dr.CAUSE),"data-qa":"ask-component-button","data-tracking-element-name":"switchToAskPageTab",role:"tab","aria-selected":t===Dr.CAUSE,children:i.translate("campaign.campaignTabs.cause")})]})})},Go=e=>{const t=(0,ko.P)(),n=Mo();return(0,Co.jsx)("div",{className:(0,To.A)(n("campaign-links-wrap"),e.className),children:(0,Co.jsx)("div",{className:n("campaign-links"),children:e.links.map(((e,i)=>(0,Co.jsxs)(h.Fragment,{children:[!!i&&!t&&(0,Co.jsx)("span",{className:(0,To.A)("text-gray-60 px-1-5",t?"link-2":"link-3"),"aria-hidden":!0,children:""}),(0,Co.jsx)("a",{href:e.url,className:n("campaign-link"),target:"_blank",rel:"noreferrer","data-tracking-element-name":"askPageLink","data-qa":"ask-link",children:e.label})]},i)))})})};var Vo=(0,h.memo)(Go);const Ko=e=>{const t=(0,ko.P)(),n=Mo(),i=!!e.links.length;return(0,Co.jsxs)(Co.Fragment,{children:[(e.title||e.description)&&(0,Co.jsxs)("div",{className:"min-h-0","data-qa":"ask-component",children:[!e.hideTitle&&e.title&&(0,Co.jsx)("h2",{className:n("campaign-title"),"data-qa":"ask-title",dangerouslySetInnerHTML:{__html:e.title},dir:"auto"}),e.showText&&e.description&&(0,Co.jsx)("p",{"data-qa":"ask-message",className:(0,To.A)(n("campaign-text"),{"mt-0":!e.title,"campaign-text-sm":i&&e.title,"campaign-text-md":i&&!e.title||!i&&e.title,"campaign-text-lg":!i&&!e.title}),dangerouslySetInnerHTML:{__html:e.description},dir:"auto"})]}),!t&&i&&(0,Co.jsx)(Vo,{links:e.links})]})};class Yo{static calculateProgressData(e){const t=Yo.round(e.currentAmount/e.targetAmount),n=e.increaseAmount?Yo.round(e.increaseAmount/e.targetAmount):0,i=e.increaseAmount?Yo.applyMinIncreasePercent(n):0,s=e.unlimitedProgress?t:Yo.limitMaxPercent(t),a=e.unlimitedProgress?i:Math.min(i,Yo.MAX_PROGRESS-s),r=t+n,o=e.currentAmount+(e.increaseAmount||0);return{progressPercent:s,progressIncreasePercent:a,totalProgressPercent:e.unlimitedProgress?r:Math.min(r,Yo.MAX_PROGRESS),totalAmount:o,isDone:r>=Yo.MAX_PROGRESS}}static round(e){return Math.round(1e3*e)/10}static limitMaxPercent(e){return Math.min(e,Yo.MAX_PROGRESS)}static applyMinIncreasePercent(e){return Math.max(e,Yo.MIN_INCREASE_PERCENT)}}Yo.MAX_PROGRESS=100,Yo.MIN_INCREASE_PERCENT=4;var zo=n(8533);const Wo=e=>{const{fundraiser:t,userAmount:n,isActualProgressShown:i}=e,s=(0,Ho.t)(),a=(0,zo.Q)(),r=(0,Ro.C)(),o=t.goalAmount||1,c=Yo.calculateProgressData({currentAmount:t.donationsAmount||0,targetAmount:o,increaseAmount:n}),[l,u]=(0,h.useState)(c.progressPercent);(0,h.useEffect)((()=>{i&&u(c.totalProgressPercent)}),[c.totalProgressPercent,i]);const d=!!n,m=c.progressPercent>=100,p=c.isDone&&(i||m),g=r&&d?c.progressIncreasePercent:null,y=function(e,t,n){return(t?100-t-e:100)*(n?1:-1)}(c.progressPercent,g,a),f={transform:`translate3d(${y}%, 0, 0)`},S={width:`${l}%`,borderLeft:a&&l>0&&l<100?"1px solid #fff":void 0,borderRight:!a&&l>0&&l<100?"1px solid #fff":void 0},E=i?c.totalAmount:t.donationsAmount;return(0,Co.jsxs)("div",{className:e.className,children:[(0,Co.jsx)("p",{className:"subtitle-4 text-line-clamp-2","data-qa":"fundraiser-display-name",children:t.name}),(0,Co.jsxs)("div",{className:"campaign-meter mt-2",children:[(0,Co.jsx)("div",{className:(0,To.A)("campaign-meter-progress-increase",{"campaign-meter-done":p}),"data-testid":"progress-increase",style:f}),(0,Co.jsx)("div",{className:(0,To.A)("campaign-meter-progress",{"campaign-meter-hidden":!r,"campaign-meter-done":p}),"data-testid":"progress",style:S,children:(l>20||!d)&&(0,Co.jsxs)("div",{className:(0,To.A)("campaign-meter-percent",{"campaign-meter-percent-right":l<20}),"data-qa":"raised-percent",children:[l,"%"]})})]}),(0,Co.jsxs)("div",{className:"body-3 d-flex justify-between mt-1",children:[(0,Co.jsx)("div",{className:"pe-1","data-qa":"fundraiser-raised-amount",children:s.translate("campaign.campaignMeter.raisedAmount",{amount:s.formatCurrency(E||0,{currency:t.currency||"USD"})})}),(0,Co.jsx)("div",{className:"ps-1 text-right","data-qa":"fundraiser-goal-amount",children:s.translate("campaign.campaignMeter.goalAmount",{amount:s.formatCurrency(t.goalAmount||0,{currency:t.currency||"USD"})})})]})]})},$o=(0,h.memo)(Wo);var Xo=n(5102);const Qo=(0,h.createContext)(null);function Zo(){const e=(0,h.useContext)(Qo);if(!e)throw new Error("FlowManager is not provided");return e}function Jo(e){const t=function(e){const t=Zo(),[n,i]=(0,h.useState)((()=>t.getCurrentFlow().getScreen(e))),s=(0,Xo.a)();return(0,h.useEffect)((()=>{let n=t.getCurrentFlow();const a=t.onScreenChanged((()=>{s.current&&i(n.getScreen(e))})),r=t.onFlowChanged((()=>{const i=t.getCurrentFlow();i.checkHasScreen(e)&&(n=i)}));return()=>{r(),a()}}),[t,e,s]),n}(e);return{controller:t,state:function(e){const[t,n]=(0,h.useState)((()=>e.getScreenData()));return(0,h.useEffect)((()=>{const t=()=>n(e.getScreenData());return t(),e.onUpdate(t),()=>e.removeUpdateListener(t)}),[e]),t}(t)}}function ec(){const e=Zo(),[t,n]=(0,h.useState)((()=>e.getCurrentFlow().getCurrentScreen().name));return(0,h.useEffect)((()=>e.onScreenChanged((()=>{n(e.getCurrentFlow().getCurrentScreen().name)}))),[e]),t}function tc(){const e=(0,h.useRef)();return void 0===e.current&&(e.current=(0,Aa.i)()),e.current}const nc=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:(0,To.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:"17",viewBox:"0 0 23 17",width:"23",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsx)("clipPath",{id:`a-${t}`,children:(0,Co.jsx)("path",{d:"m0 0h23v17h-23z"})}),(0,Co.jsxs)("g",{clipPath:`url(#a-${t})`,clipRule:"evenodd",fillRule:"evenodd",children:[(0,Co.jsx)("path",{d:"m22.2969 0c-.8672 1.46655-3.7617 6.01807-8.2266 9.52246-5.39647 4.23534-13.499988 5.99994-13.499988 5.99994s5.046878-2.8235 6.499998-7.99994c1.10547-3.93921-1.07226-6.51587-2.17578-7.52246z",fill:"#fff"}),(0,Co.jsx)("path",{d:"m7.55191 7.65746c.77276-2.75336.03501-4.90001-.89849-6.3473-.34341-.532424-.71273-.96995-1.0419-1.31016h-1.49731c.01863.0139417.04001.0301894.06389.0487302.10229.0794108.25003.2005208.42446.3622868.34964.324253.80182.807553 1.2105 1.441163.81179 1.25859 1.45612 3.11195.77605 5.53506-.69276 2.46832-2.24912 4.39336-3.65535 5.71146-.70079.6569-1.35754 1.1566-1.83782 1.4913-.239927.1673-.435221.2929-.569177.3759-.06696.0415-.11854.0724-.152646.0924l-.037771.022-.008553.0049-.001621.0009.000718.0012.350605.9231c-.000919-.0033-.009786-.0417-.106988-.4881l.106988.4881h.00157l.005114-.0011.018933-.0043.071831-.0163c.062651-.0144.154403-.0359.272607-.0647.2364-.0576.57873-.1442 1.0058-.2614.85387-.2343 2.04806-.5911 3.41269-1.0815 2.72174-.9783 6.15406-2.5 8.91316-4.66543 2.7453-2.15464 4.9007-4.69229 6.3676-6.68516.7343-.9977 1.2984-1.86198 1.6796-2.478191.1907-.308179.3358-.554524.4336-.7247323.0055-.0094298.0107-.0186262.0159-.0275867h-1.1613c-.043.0708235-.0892.146313-.1386.226197-.3693.597029-.9185 1.438623-1.6346 2.411523-1.4341 1.9483-3.5286 4.41065-6.1796 6.49131-2.6371 2.06977-5.95479 3.54807-8.63399 4.51097-.75169.2702-1.45055.4989-2.06666.688.18093-.1557.36719-.3223.55648-.4997 1.48056-1.3878 3.17421-3.4627 3.93428-6.17084z",fill:"#c7cdd6"})]})]})},ic=(0,h.memo)(nc),sc=window.devicePixelRatio>1?"128x128":"64x64",ac=e=>{var t;const{fundraiser:n}=e,i=(0,ko.P)(),s=ec(),[a,r]=(0,h.useState)(!1);(0,h.useEffect)((()=>{s===Ar.THANK_YOU&&r(!0)}),[s]);const o=(0,zo.Q)(),c=(0,Ho.t)(),l=(0,h.useMemo)((()=>{var e;const t=null===(e=n.image)||void 0===e?void 0:e.uuid;return t?`https://ucarecdn.com/${t}/-/preview/${sc}/-/format/auto/`:null}),[n]);return(0,Co.jsxs)("div",{"data-qa":"p2p-component",children:[(0,Co.jsxs)("div",{className:(0,To.A)("campaign-quote-bubble",i?"mb-6":"mb-7"),children:[(0,Co.jsx)("p",{className:"text-line-clamp-3","data-qa":"fundraiser-message",children:n.message}),(0,Co.jsx)(ic,{className:(0,To.A)("campaign-quote-bubble-edge",{"icon-flip-horizontal":o}),ariaHidden:!0})]}),(0,Co.jsxs)("div",{className:"d-flex items-start",children:[l&&(0,Co.jsx)("img",{className:"campaign-fundraiser-photo shrink-0 me-4",src:null!=l?l:"",alt:(null===(t=n.image)||void 0===t?void 0:t.alt)||c.translate("campaign.fundraiser.imageAlt"),width:64,height:64,"data-qa":"fundraiser-photo"}),(0,Co.jsx)($o,{className:"grow-1",isActualProgressShown:a,fundraiser:n,userAmount:e.userAmount})]})]})},rc=(0,h.createContext)(!1),oc=(0,h.createContext)(null);function cc(){const e=(0,h.useContext)(oc);if(!e)throw new Error("currency service is not provided");return e}function lc(){const e=Zo(),[t,n]=(0,h.useState)(e.checkoutService);return(0,h.useEffect)((()=>e.onFlowChanged((()=>{n(e.checkoutService)}))),[e]),t}function uc(){const e=lc(),[t,n]=(0,h.useState)((()=>e.getState()));return(0,h.useEffect)((()=>(n(e.getState()),e.onStateUpdate((()=>{n(e.getState())})))),[e]),t}function dc(){const e=lc(),[t,n]=(0,h.useState)((()=>e.checkoutUIState));return(0,h.useEffect)((()=>(n((t=>{const n=e.checkoutUIState;return e.checkoutUIState.askPageActiveTab=t.askPageActiveTab,n})),e.onStateUpdate((()=>{n(e.checkoutUIState)})))),[e]),t}const hc=e=>window.matchMedia(`(min-width: ${e}px)`),mc={sm:536,lg:916};function pc(e){return function(e){const t=(0,h.useRef)(hc(e)),[n,i]=(0,h.useState)(hc(e).matches);return(0,h.useEffect)((()=>{const e=t.current,n=e=>{i(e.matches)};return e.addListener(n),()=>e.removeListener(n)}),[]),n}(mc[e])}const gc=window.devicePixelRatio>1,yc=()=>{const e=(0,Ho.t)(),t=Mo(),n=cc(),i=lc(),s=dc(),a=ec(),r=uc(),o=(0,No.n)(),c=(0,h.useCallback)((e=>{s.askPageActiveTab=e,i.syncUpdateCheckoutState()}),[i,s]),l=(0,h.useMemo)((()=>o.getAskPageConfig(gc)),[o]),u=(0,ko.P)(),d=pc("lg"),m=o.fundraisingPage,p=!!u&&s.isMobileScreenWithoutAskTitle(a),g=!u||s.isMobileScreenWithAskText(a),y=g||!p,f=!p&&l.title||g&&l.text,S=a===cn.DONATE||a===Cr.CRYPTO_CURRENCY,E=!!m&&l.show&&S,A=!m||s.askPageActiveTab===Dr.CAUSE,C=m&&s.askPageActiveTab===Dr.FUNDRAISER;(0,h.useEffect)((()=>{m&&l.show&&!S&&c(Dr.FUNDRAISER)}),[l.show,m,c,S]);const v=(0,h.useMemo)((()=>m&&m.currency?n.convert(r.donation.amount||0,r.donation.currency,m.currency):0),[r.donation.amount,r.donation.currency,n,m]),N=(0,h.useRef)(null),b=(0,h.useRef)(null);!function(e,t){const n=(0,bo.M)(),i=(0,ko.P)(),s=(0,h.useContext)(rc),a=(0,h.useCallback)((()=>{if(!i||s)return;const t=e.current;if(!t)throw new Error("scrollRef was not passed");const a=window.pageYOffset||n.pageYOffset;t.offsetTop>a||t.scrollIntoView(!0)}),[e,n,i,s]);(0,h.useEffect)(a,[t,a])}(y?N:b,a);const[P,D]=(0,h.useState)(!0),[_,T]=(0,h.useState)(!1),x=(0,h.useRef)(null);(0,h.useEffect)((()=>{D(s.isScreenWithoutAskOverlay(a))}),[a,D,s]);const O=Bo(x);return(0,Co.jsxs)("div",{className:(0,To.A)(t("campaign"),{"p-rel":!P&&!u}),onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),ref:b,"data-qa":"campaign-info-section",children:[y&&(0,Co.jsxs)("div",{className:t("campaign-image-holder"),children:[l.mainImage&&(0,Co.jsx)("img",{className:t("campaign-image"),src:l.mainImage,alt:l.mainImageAltText||e.translate("campaign.imageAlt"),width:516,height:289,"data-qa":"ask-image","data-testid":"campaign-preview"}),E&&(0,Co.jsx)(qo,{tab:s.askPageActiveTab,setActiveTab:c})]}),(0,Co.jsx)("div",{className:t("campaign-header"),"data-qa":"ask-company-name",children:l.logoImage?(0,Co.jsx)("img",{src:l.logoImage,alt:l.logoAltText||l.companyName,className:t("campaign-header-logo"),"data-testid":"campaign-logo"}):(0,Co.jsx)("p",{className:t("campaign-header-name"),dir:"auto",title:l.companyName,"data-testid":"campaign-name",children:l.companyName})}),y&&(0,Co.jsxs)("div",{ref:N,className:(0,To.A)(t("campaign-body"),{"p-5":u&&(f||s.askPageActiveTab===Dr.FUNDRAISER),"justify-end":s.askPageActiveTab===Dr.FUNDRAISER&&!u}),role:m?"tabpanel":"",children:[A&&(0,Co.jsx)(Ko,{title:l.title,description:l.text,links:l.links,hideTitle:p,showText:g}),C&&(0,Co.jsx)(ac,{fundraiser:m,userAmount:v})]}),(0,Co.jsx)(xo.A,{classNames:"rtg-fade",nodeRef:x,in:!P&&!_&&!u&&d,addEndListener:O,mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)("div",{ref:x,className:"campaign-faded-overlay"})})]})},fc=[u.tg.UNITED_STATES,u.tg.CANADA,u.tg.MEXICO,u.tg.AUSTRALIA];var Sc;function Ec(){return Ec=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ec.apply(this,arguments)}var Ac=function(e,t){return h.createElement("svg",Ec({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Sc||(Sc=h.createElement("polyline",{points:"9 18 15 12 9 6"})))},Cc=(0,h.forwardRef)(Ac),vc=(0,h.memo)(Cc),Nc=n(6901);const bc=e=>{let{title:t,children:n,className:i,dataQa:s}=e;const a=(0,ko.P)(),r=(0,zo.Q)(),o=Mo(),[c,l]=(0,h.useState)(!1),u=(0,h.useRef)(null),d=(0,h.useRef)(null),m=(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("p",{className:"subtitle-5",children:t}),(0,Co.jsx)("div",{className:"body-3 mt-1",children:n})]});return(0,Co.jsxs)("li",{className:(0,To.A)(o("faq-link-item"),i),"data-qa":s,children:[(0,Co.jsx)(Nc.S,{content:!a&&m,trigger:"click",className:a?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",hasPortal:!1,"data-qa":`${s}-popover`,children:(0,Co.jsxs)("button",{ref:d,type:"button",className:(0,To.A)(o("faq-link"),{"font-weight-600":c&&a}),"data-qa":s+"-button",onClick:()=>l(!c),children:[a&&(0,Co.jsx)("span",{className:"icon-slot icon-slot-14 me-0-5 shrink-0","aria-hidden":!0,children:(0,Co.jsx)("span",{className:"p-abs centered font-size-14",children:(0,Co.jsx)(vc,{className:(0,To.A)("icon d-block faq-link-icon",{"icon-rotate-90":!r&&c,"icon-rotate-180":r&&!c,"icon-rotate-270":r&&c})})})}),(0,Co.jsx)("span",{className:"faq-link-title",children:t})]})}),a&&(0,Co.jsx)(xo.A,{nodeRef:u,in:c,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)("div",{ref:u,className:"body-3 py-2 ps-4 shrink-0","data-qa":`${s}-popover`,children:n})})]})},Pc=(0,h.memo)(bc),Dc=e=>{const t=(0,Ho.t)(),n=(0,ko.P)(),i=Mo(),s=lc(),a=(0,No.n)(),r=a.campaign.config.frequencies,o=a.company,c=pc("lg"),l=(0,h.useMemo)((()=>s.type===Ae.MONEY),[s]),u=(0,h.useMemo)((()=>s.type===Ae.CRYPTO),[s.type]),d=(m=o.country,p=o.nonProfit,fc.includes(m)&&p);var m,p;const g=l&&!Se.isOnetimeOnly(r)&&o.donorPortal.canCancelSubscription;return(0,Co.jsxs)("ul",{className:i("faq-links"),children:[(0,Co.jsxs)(Pc,{title:t.translate("faq.isDonationSecure.title"),dataQa:"is-donation-secure",children:[(0,Co.jsxs)("p",{className:"faq-link-text",children:[l&&t.translate("faq.isDonationSecure.message.fiat.part-1"),u&&t.translate("faq.isDonationSecure.message.crypto.part-1")]}),(0,Co.jsxs)("p",{className:"faq-link-text mt-1",children:[l&&t.translate("faq.isDonationSecure.message.fiat.part-2"),u&&t.translate("faq.isDonationSecure.message.crypto.part-2")]}),l&&(0,Co.jsx)("p",{className:"faq-link-text mt-1",children:t.translate("faq.isDonationSecure.message.fiat.part-3")})]}),d&&(0,Co.jsxs)(Co.Fragment,{children:[e.showAskPage&&!n&&c&&(0,Co.jsx)("li",{className:"body-4 text-white opacity-80 mx-3","aria-hidden":!0,children:""}),(0,Co.jsxs)(Pc,{title:t.translate("faq.isTaxDeductible.title"),dataQa:"is-tax-deductible",children:[(0,Co.jsxs)("p",{className:"faq-link-text",children:[l&&t.translate("faq.isTaxDeductible.message.fiat.part-1"),u&&t.translate("faq.isTaxDeductible.message.crypto.part-1")]}),(0,Co.jsxs)("p",{className:"faq-link-text mt-1",children:[l&&t.translate("faq.isTaxDeductible.message.fiat.part-2"),u&&t.translate("faq.isTaxDeductible.message.crypto.part-2")]}),u&&(0,Co.jsx)("p",{className:"faq-link-text mt-1",children:t.translate("faq.isTaxDeductible.message.crypto.part-3")})]})]}),g&&(0,Co.jsxs)(Co.Fragment,{children:[e.showAskPage&&!n&&c&&(0,Co.jsx)("li",{className:"body-4 text-white opacity-80 mx-3","aria-hidden":!0,children:""}),(0,Co.jsx)(Pc,{title:t.translate("faq.cancelRecurringDonation.title"),dataQa:"cancel-recurring-donation",children:(0,Co.jsx)("p",{className:"faq-link-text",children:t.translate("faq.cancelRecurringDonation.message")})})]})]})},_c=(0,h.memo)(Dc);var Tc;!function(e){e[e.BACKWARD=1]="BACKWARD",e[e.FORWARD=2]="FORWARD"}(Tc||(Tc={}));var xc=n(7627);const Oc=e=>{let{className:t}=e;return(0,Co.jsx)("div",{className:(0,To.A)("progress-bar",t,{"progress-bar-success":!1}),children:(0,Co.jsx)("span",{className:"progress-bar-fill",style:{width:"55%"}})})},kc=(0,h.memo)(Oc),Ic=e=>{let{children:t,className:n}=e;const i=(0,ko.P)(),s=(0,Fo.$)(),a=Mo(),r=(0,No.n)().getAskPageConfig().show,o=i&&!s&&r&&!1;return(0,Co.jsxs)("div",{className:(0,To.A)(a("flow"),n),children:[o&&(0,Co.jsx)(kc,{className:"p-abs top-left mt-minus-0-5 z-index-3"}),t]})},wc=(0,h.forwardRef)((function(e,t){const{children:n,hide:i,className:s}=e,a=Mo();return(0,Co.jsx)("div",{className:(0,To.A)(a("flow-slide"),s,{"flow-slide-hidden":i}),ref:t,children:n})})),Rc=e=>{const{alwaysMount:t,show:n,Screen:i,screenDirection:s,currentScreen:a,animationDisabled:r,onScreenEntered:o}=e,c=(0,h.useRef)(null),[l,u]=(0,h.useState)(!n),d=!n&&l,m=function(e){const t=(0,No.n)(),n=uc();return i=dc(),s=n.tribute,!(a={isShowcase:t.infrastructureParams.showcase,currentScreen:e}).isShowcase&&!i.isScreenWithoutTributeBadge(a.currentScreen)&&s.isEnabled&&s.isActive&&!!s.name;var i,s,a}(a),p=(0,h.useCallback)((()=>{u(!1)}),[]),g=(0,h.useCallback)((()=>{o()}),[o]),y=(0,h.useCallback)((()=>{u(!0)}),[]),f=Bo(c);return(0,Co.jsx)(xo.A,{in:n,classNames:`rtg-${s}`,addEndListener:f,onEnter:p,onEntered:g,onExited:y,nodeRef:c,mountOnEnter:!t,unmountOnExit:!t,children:e=>(0,Co.jsx)(wc,{ref:c,hide:d,className:r?"no-animation":"",children:(0,Co.jsx)(h.Suspense,{fallback:(0,Co.jsx)("span",{}),children:(0,Co.jsx)(i,{transitionEntered:"entered"===e,showBadge:m})})})})};var Mc=n(6630);const Lc=e=>{var t,n;const i=(0,Mc.Y)();return(0,Co.jsxs)("svg",{className:(0,To.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",viewBox:"0 0 56 56",height:null!==(t=e.height)&&void 0!==t?t:56,width:null!==(n=e.width)&&void 0!==n?n:56,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","data-qa":"attention-icon",children:[(0,Co.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52",width:"43",x:"7",y:"2.5",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.958333 0 0 0 0 0.345 0 0 0 0 0 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17752"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17752",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"32",width:"14.7373",x:"21.1348",y:"11.5",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.958333 0 0 0 0 0.345 0 0 0 0 0 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17752"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17752",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.9167",x2:"54.2937",y1:"13.1351",y2:"54.7877",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ffdc62"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#ffdc62",stopOpacity:".15"})]}),(0,Co.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"23.3333",x2:"36.1947",y1:"26.1546",y2:"31.9633",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ffeeb1"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#ffeeb1",stopOpacity:"0"})]}),(0,Co.jsx)("clipPath",{id:`e-${i}`,children:(0,Co.jsx)("path",{d:"m0 0h56v56h-56z"})}),(0,Co.jsxs)("g",{clipPath:`url(#e-${i})`,children:[(0,Co.jsx)("path",{d:"m29.3957.519694c-.9003-.335221-1.8911-.335221-2.7915 0l-20.80207 7.745476c-.78289.2915-1.30213 1.03889-1.30213 1.87433v17.8605c0 17.5 18.4643 28 23.5 28s23.5-10.5 23.5-28v-17.8605c0-.83544-.5192-1.58283-1.3021-1.87433z",fill:"#ffa800"}),(0,Co.jsxs)("g",{filter:`url(#a-${i})`,children:[(0,Co.jsx)("path",{clipRule:"evenodd",d:"m10.5 12.6455v15.205c0 6.6656 3.4432 12.2152 7.7738 16.2673 2.1476 2.0096 4.4134 3.549 6.3471 4.566.9661.5081 1.8026.8611 2.4565 1.0783.5577.1851.8514.2276.9186.2373l.004.0006.004-.0006c.0672-.0097.3609-.0522.9186-.2373.6539-.2172 1.4904-.5702 2.4565-1.0783 1.9337-1.017 4.1995-2.5564 6.3471-4.566 4.3306-4.0521 7.7738-9.6017 7.7738-16.2673v-15.205l-17.5-6.6455z",fill:"#ffa800",fillRule:"evenodd"}),(0,Co.jsx)("path",{d:"m28.7178 49.1452c-.3645.121-.5992.1738-.7178.1961-.1187-.0223-.3533-.0751-.7178-.1961-.6142-.204-1.4178-.5419-2.3587-1.0367-1.8834-.9905-4.1014-2.4964-6.2056-4.4653-4.2479-3.9747-7.5679-9.3643-7.5679-15.7927v-14.7565l16.85-6.39871 16.85 6.39871v14.7565c0 6.4284-3.32 11.818-7.5679 15.7927-2.1042 1.9689-4.3222 3.4748-6.2056 4.4653-.9409.4948-1.7445.8327-2.3587 1.0367z",stroke:`url(#c-${i})`,strokeWidth:"1.3"})]}),(0,Co.jsxs)("g",{filter:`url(#b-${i})`,children:[(0,Co.jsx)("path",{d:"m30.3683 15c.6011 0 1.0662.5266.9968 1.1237-.548 4.7133-.8884 9.4483-1.5544 14.1405h-3.5607c-.6658-4.6909-1.0302-9.4239-1.6072-14.1342-.0734-.5992.3925-1.13.9962-1.13zm-4.7016 21.5342c0-.3397.0599-.663.1796-.9698.1307-.3069.3049-.5699.5227-.7891.2287-.2191.4954-.3945.8003-.526s.6316-.1972.98-.1972c.3376 0 .6588.0657.9637.1972s.5662.3069.784.526c.2287.2192.4083.4822.539.7891.1307.3068.196.6301.196.9698 0 .3507-.0653.6795-.196.9863-.1307.2959-.3103.5535-.539.7726-.2178.2192-.4791.3891-.784.5096-.3049.1315-.6261.1973-.9637.1973-.3484 0-.6751-.0658-.98-.1973-.3049-.1205-.5716-.2904-.8003-.5096-.2178-.2191-.392-.4767-.5227-.7726-.1197-.3068-.1796-.6356-.1796-.9863z",fill:"#ffe792"}),(0,Co.jsx)("path",{d:"m29.631 35.0397h-.0001l.0066.0064c.1902.1822.3416.4025.4535.6652.1105.2595.166.5327.166.8229 0 .302-.0558.5798-.1651.8371-.1112.2511-.2624.4671-.4544.6511l-.0001-.0001-.0064.0065c-.1792.1803-.3961.3225-.6559.4252v-.0002l-.0106.0046c-.2572.1109-.5278.1666-.8152.1666-.2999 0-.5758-.0563-.8314-.1666v-.0002l-.0107-.0042c-.2598-.1027-.4838-.2456-.6754-.4284-.1806-.1826-.3272-.3979-.4391-.649-.0998-.2585-.151-.5383-.151-.8424 0-.2925.051-.5677.1519-.8282.1126-.2626.2592-.4821.4382-.6631.1941-.1853.4218-.3353.6861-.4492.2556-.1103.5315-.1666.8314-.1666.2874 0 .558.0556.8152.1666.2643.1139.4849.2632.6665.446zm.7373-19.6647c.3749 0 .6681.3291.6243.7054-.2146 1.8462-.3967 3.6864-.5783 5.5223-.2741 2.7698-.5471 5.5299-.9297 8.2865h-2.9086c-.3677-2.6452-.6417-5.2899-.9166-7.9435-.2019-1.9478-.4042-3.9003-.6444-5.8613-.0462-.3776.2475-.7094.624-.7094z",stroke:`url(#d-${i})`,strokeWidth:".75"})]})]})]})},Uc=(0,h.memo)(Lc),Fc=(0,h.forwardRef)((function(e,t){return(0,Co.jsx)("div",{ref:t,className:(0,To.A)("body",e.className),children:e.children})}));var jc,Bc;function Hc(){return Hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hc.apply(this,arguments)}var qc,Gc=function(e,t){return h.createElement("svg",Hc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),jc||(jc=h.createElement("line",{x1:19,y1:12,x2:5,y2:12})),Bc||(Bc=h.createElement("polyline",{points:"12 19 5 12 12 5"})))},Vc=(0,h.forwardRef)(Gc),Kc=(0,h.memo)(Vc);function Yc(){return Yc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yc.apply(this,arguments)}var zc=function(e,t){return h.createElement("svg",Yc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),qc||(qc=h.createElement("polyline",{points:"15 18 9 12 15 6"})))},Wc=(0,h.forwardRef)(zc),$c=(0,h.memo)(Wc);const Xc=e=>{let{type:t,className:n,disabled:i,onClick:s}=e;const a=(0,Ho.t)(),r=(0,zo.Q)();return(0,Co.jsx)(Co.Fragment,{children:"header"===t?(0,Co.jsx)("button",{className:(0,To.A)("header-back-btn",n),type:"button","aria-label":a.translate("common.backButton"),onClick:s,"data-qa":"back-checkout","data-testid":"back.checkout.header",disabled:i,"data-tracking-element-name":"backButton",children:(0,Co.jsx)($c,{className:(0,To.A)("icon-stroke icon-stroke-2 d-block",{"icon-flip-horizontal":r}),"aria-hidden":!0,"data-testid":"back-icon"})}):(0,Co.jsxs)("button",{type:"button",className:(0,To.A)("btn-link link-1 d-flex items-center justify-center",n),onClick:s,disabled:i,"data-qa":"back-checkout","data-testid":"back.checkout","data-tracking-element-name":"backButton",children:[(0,Co.jsx)("span",{className:"icon-slot icon-slot-14 shrink-0 me-1","aria-hidden":!0,children:(0,Co.jsx)("span",{className:"p-abs centered font-size-14",children:(0,Co.jsx)(Kc,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":r}),"data-testid":"back-icon"})})}),(0,Co.jsx)("span",{className:"text-truncate",children:a.translate("common.backButton")}),(0,Co.jsx)("span",{className:"icon-slot icon-slot-14 shrink-0 ms-1"})]})})},Qc=(0,h.memo)(Xc),Zc=e=>{const t=(0,ko.P)(),n=Mo(),i=Zo(),[s,a]=(0,h.useState)((()=>i.getCurrentFlow())),[r,o]=(0,h.useState)(s.isLocked),[c,l]=(0,h.useState)((()=>i.checkoutService.canGoBack)),[u,d]=(0,h.useState)((()=>s.canGoBack)),m=(0,xc.Q)();(0,h.useEffect)((()=>{m&&(l(i.checkoutService.canGoBack),d(i.getCurrentFlow().canGoBack))}),[i,m]),(0,h.useEffect)((()=>{const e=s.on(ns.LOCKED,(()=>{o(!0)})),t=s.on(ns.UNLOCKED,(()=>{o(!1)}));return()=>{e(),t()}}),[s]),(0,h.useEffect)((()=>i.onFlowChanged((()=>{a(i.getCurrentFlow())}))),[i]);const p=(0,h.useCallback)((()=>{u&&c&&s.prev()}),[s,u,c]),g=t&&(e.forceShowBackButton||c);return(0,Co.jsx)("div",{className:(0,To.A)(n("footer"),e.className),children:(0,Co.jsxs)("div",{className:"fixed-container p-rel",children:[e.children,g&&(0,Co.jsx)("div",{className:(0,To.A)("d-flex justify-center",{"mt-6":e.children}),children:(0,Co.jsx)(Qc,{className:(0,To.A)(e.backButtonClass),onClick:e.backButtonClickHandler||p,type:"footer",disabled:r})})]})})},Jc=()=>{const e=(0,Ho.t)(),t=(0,ko.P)(),n=wa();return(0,Co.jsxs)("div",{className:"flow-screen",children:[(0,Co.jsx)(Fc,{className:(0,To.A)("px-body justify-center",t?"pt-8 pb-16":"pt-2"),children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(0,Co.jsx)(Uc,{className:"d-block mx-auto",ariaHidden:!0}),(0,Co.jsx)("p",{className:"text-center text-ellipsis mt-6","data-qa":"blocked-message-text",children:e.translate("blockedScreen.description")})]})}),!t&&(0,Co.jsx)(Zc,{children:(0,Co.jsx)("div",{className:"d-flex justify-center",children:(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{n.emit(Na.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:e.translate("blockedScreen.button")})})})]})};var el;!function(e){e[e.MAX_LENGTH=500]="MAX_LENGTH"}(el||(el={}));var tl=n(1885);function nl(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,h.useRef)(null),n=(0,tl.k)(),i=(0,Fo.$)();return(0,h.useEffect)((()=>{if(i)return;if(!e||!n)return;if(!t.current)throw new Error("ref is not provided");const s=window.setTimeout((()=>{var e,n;null===(e=t.current)||void 0===e||e.setAttribute("tabindex","0"),null===(n=t.current)||void 0===n||n.focus({preventScroll:!0})}),50);return()=>window.clearTimeout(s)}),[t,e,n,i]),t}function il(e){const t=nl(e.autoFocus);return(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",ref:t,children:e.children})}var sl,al=n(8489),rl=n(7314);function ol(){return ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ol.apply(this,arguments)}var cl=function(e,t){return h.createElement("svg",ol({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),sl||(sl=h.createElement("path",{d:"M12 20C28.659 10.9628 18.2615 0.617428 12 6.95101C5.73851 0.617357 -4.659 10.9627 12 20Z",fill:"currentColor"})))},ll=(0,h.forwardRef)(cl),ul=(0,h.memo)(ll);const dl=["bottom"],hl=e=>{let{name:t}=e;const n=(0,Ho.t)(),i=(0,zo.Q)(),s=(0,ko.P)(),a=(0,wo.wf)(),r=Mo(),o=(0,No.n)(),c=o.campaign.config.tribute.showAddress||o.campaign.config.tribute.showEmail;return(0,Co.jsx)(Nc.S,{content:c&&n.translate("tributeBadge.tooltipLabel"),trigger:s?"click":"hover",className:s?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:i?"left-start":"right-start",fallbackPlacements:dl,maxWidth:"300px",rootContainer:a,children:(0,Co.jsxs)("p",{className:r("tribute-badge"),"data-qa":"tribute-badge","data-tracking-element-name":"tributeBadge",children:[(0,Co.jsxs)("span",{className:"body-2 d-flex",children:[(0,Co.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 me-1","aria-hidden":!0,children:(0,Co.jsx)("span",{className:"p-abs centered font-size-18 text-red-60",children:(0,Co.jsx)(ul,{className:"icon-fill d-block"})})}),(0,Co.jsx)("span",{className:"text-truncate me-1",children:n.translate("tributeBadge.label")})]}),(0,Co.jsx)("span",{className:(0,To.A)("label-2",s?"text-ellipsis":"text-truncate"),dir:"auto",children:t})]})})},ml=window.devicePixelRatio>1,pl=e=>{const t=(0,ko.P)(),n=Mo(),i=(0,Fo.$)(),s=Zo(),[a,r]=(0,h.useState)((()=>s.getCurrentFlow())),[o,c]=(0,h.useState)(a.isLocked),[l,u]=(0,h.useState)((()=>s.checkoutService.canGoBack)),[d,m]=(0,h.useState)((()=>a.canGoBack)),p=(0,xc.Q)(),g=(0,No.n)(),y=g.getAskPageConfig(ml),f=uc(),S=y.show||!!g.fundraisingPage,E=y.show?y.logoImage:y.fallbackCompanyLogo,A=!t&&!i&&S&&!1;(0,h.useEffect)((()=>{p&&(u(s.checkoutService.canGoBack),m(s.getCurrentFlow().canGoBack))}),[s,p]),(0,h.useEffect)((()=>{const e=a.on(ns.LOCKED,(()=>{c(!0)})),t=a.on(ns.UNLOCKED,(()=>{c(!1)}));return()=>{e(),t()}}),[a,e]),(0,h.useEffect)((()=>s.onFlowChanged((()=>{const e=s.getCurrentFlow();r(e)}))),[s]);const C=(0,h.useCallback)((()=>{d&&l&&a.prev()}),[a,d,l]);return(0,Co.jsxs)(Co.Fragment,{children:[e.showBadge&&(0,Co.jsx)(hl,{name:f.tribute.name}),(0,Co.jsxs)("div",{className:(0,To.A)(n("header"),e.className),"data-qa":"header-block",children:[!t&&!e.titleFullWidth&&(0,Co.jsx)("div",{className:"header-aside",children:(0,Co.jsx)("div",{className:"icon-slot icon-slot-24",children:(0,Co.jsx)("div",{className:"p-abs centered",children:(e.forceShowBackButton||l)&&(0,Co.jsx)(Qc,{type:"header",disabled:o,onClick:e.backButtonClickHandler||C})})})}),t&&!S&&(0,Co.jsx)("div",{className:"header-company",children:E?(0,Co.jsx)("img",{src:E,alt:y.logoAltText||y.companyName,className:"header-company-logo",height:"32","data-qa":"campaign-logo-image"}):(0,Co.jsx)("p",{className:"header-company-name",title:y.companyName,children:y.companyName})}),(e.children||e.title)&&(0,Co.jsx)("div",{className:(0,To.A)(n("header-main"),{"header-main-full":!t&&e.titleFullWidth}),children:e.title?(0,Co.jsx)("h2",{className:(0,To.A)("title-2",t?"text-ellipsis":"text-line-clamp-2"),"data-testid":e.titleTestId,"data-qa":e.titleQa,children:e.title}):e.children}),!t&&!e.titleFullWidth&&(0,Co.jsx)("div",{className:"header-aside",children:(0,Co.jsx)("div",{className:"icon-slot icon-slot-24"})}),A&&(0,Co.jsx)(kc,{className:"p-abs bottom-left mb-minus-1 z-index-1"})]})]})},gl={minHeight:"200px"},yl=e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(Ar.COMMENT),s=(0,Ho.t)(),a=(0,ko.P)(),r=tc(),o=(0,h.useRef)(null);(0,rl.f)({ref:o,autoFocus:!0,mode:al.Q.ALL});const c=(0,h.useCallback)((e=>{e.preventDefault(),i.submitComment()}),[i]),l=(0,h.useCallback)((e=>{i.setComment(e.target.value)}),[i]);return(0,Co.jsxs)("form",{"data-testid":"comment-form",onSubmit:c,className:"flow-screen","data-qa":"active-screen-comment",children:[(0,Co.jsx)(il,{autoFocus:a,children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("commentScreen.title")}`})}),(0,Co.jsx)(pl,{title:s.translate("commentScreen.title"),showBadge:t}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-8 pb-10":!a}),children:(0,Co.jsx)("div",{className:(0,To.A)("fixed-container",{"grow-1 d-flex flex-column":!a}),children:(0,Co.jsxs)("div",{className:(0,To.A)({"grow-1 d-flex flex-column":!a}),children:[(0,Co.jsx)("label",{htmlFor:`comment-${r}`,className:"sr-only","data-qa":"comment-label",children:s.translate("commentScreen.textareaPlaceholder")}),(0,Co.jsx)("textarea",{ref:o,id:`comment-${r}`,className:(0,To.A)("form-control",{"grow-1":!a}),style:gl,onChange:l,value:n.comment,placeholder:s.translate("commentScreen.textareaPlaceholder"),"data-qa":"comment","data-testid":"comment-input",maxLength:el.MAX_LENGTH})]})})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)("button",{type:"submit",className:"btn btn-primary","data-qa":"save-comment","data-tracking-element-name":"nextButton",children:s.translate("commentScreen.button")})})]})};var fl;function Sl(e,t,n){switch(n){case oe.ONCE:return e.translate("payButton.label.once",{amount:t});case oe.DAILY:return e.translate("payButton.label.daily",{amount:t});case oe.WEEKLY:return e.translate("payButton.label.weekly",{amount:t});case oe.BIWEEKLY:return e.translate("payButton.label.biweekly",{amount:t});case oe.EVERY_4_WEEKS:return e.translate("payButton.label.every4weeks",{amount:t});case oe.MONTHLY:return e.translate("payButton.label.monthly",{amount:t});case oe.BIMONTHLY:return e.translate("payButton.label.bimonthly",{amount:t});case oe.QUARTERLY:return e.translate("payButton.label.quarterly",{amount:t});case oe.SEMIANNUAL:return e.translate("payButton.label.semiannual",{amount:t});case oe.ANNUAL:return e.translate("payButton.label.annual",{amount:t});default:throw new Error(`Unknown frequency "${n}"`)}}function El(e,t){switch(t){case oe.ONCE:return e.translate("donateForm.giveOnce");case oe.DAILY:return e.translate("donateForm.daily");case oe.WEEKLY:return e.translate("donateForm.weekly");case oe.EVERY_4_WEEKS:return e.translate("donateForm.every4weeks");case oe.BIWEEKLY:return e.translate("donateForm.biweekly");case oe.MONTHLY:return e.translate("donateForm.monthly");case oe.BIMONTHLY:return e.translate("donateForm.bimonthly");case oe.QUARTERLY:return e.translate("donateForm.quarterly");case oe.SEMIANNUAL:return e.translate("donateForm.semiannual");case oe.ANNUAL:return e.translate("donateForm.annual");default:throw new U(t)}}function Al(){return Al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Al.apply(this,arguments)}var Cl,vl,Nl=function(e,t){return h.createElement("svg",Al({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),fl||(fl=h.createElement("polyline",{points:"20 6 9 17 4 12"})))},bl=(0,h.forwardRef)(Nl),Pl=(0,h.memo)(bl);function Dl(){return Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dl.apply(this,arguments)}var _l=function(e,t){return h.createElement("svg",Dl({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Cl||(Cl=h.createElement("line",{x1:18,y1:6,x2:6,y2:18})),vl||(vl=h.createElement("line",{x1:6,y1:6,x2:18,y2:18})))},Tl=(0,h.forwardRef)(_l),xl=(0,h.memo)(Tl),Ol=n(4379);const kl=e=>{let{errorTitle:t,errorMessage:n,dataQa:i,dataTestId:s}=e;return(0,Co.jsxs)(Co.Fragment,{children:[t&&(0,Co.jsx)("p",{className:"subtitle-5 text-red-80 text-ellipsis","data-qa":i+"-error-title","data-testid":s+"-error-title",dangerouslySetInnerHTML:{__html:t}}),n&&(0,Co.jsx)("p",{className:(0,To.A)("text-ellipsis",t?"body-3 text-color mt-1":"subtitle-5 text-red-80"),"data-qa":i+"-error-message","data-testid":s+"-error-message",dangerouslySetInnerHTML:{__html:n}})]})},Il=(0,h.memo)(kl),wl=e=>{const{children:t,setRef:n,className:i,role:s,dataQa:a,dataTestId:r}=e;return(0,Co.jsx)("div",{ref:n,className:(0,To.A)("text-red-80 bg-red-10 p-3 border border-red-20 border-radius-5",i),role:null!=s?s:"alert","data-qa":a,"data-testid":r,children:t})},Rl=(0,h.memo)(wl),Ml=(0,h.forwardRef)(((e,t)=>{const{buttonType:n,type:i,processingState:s,className:a,spinnerColorDefault:r,children:o,errorTitle:c,errorMessage:l,disabled:u,testMode:d,dataQa:m,dataTestId:p,trackingElement:g,serverErrors:y,onClick:f}=e,S=(0,Ho.t)(),E=(0,ko.P)(),A=(0,h.useRef)(null),C=(0,h.useRef)(null),v=(0,wo.wf)(),N="link"===n,b=s===Pr.IDLE,P=s===Pr.PENDING,D=s===Pr.SUCCESS,_=s===Pr.ERROR,T=!b&&!_||u,x=_&&(!!c||!!l),[O,k]=(0,h.useState)(_),[I,w]=(0,h.useState)(x);(0,h.useImperativeHandle)(t,(()=>C.current),[]);const R=!(null==y?void 0:y.email),M=(0,Ol.D)((()=>{k(!1),w(!1)})),L=()=>{O&&k(!1),I&&w(!1)};return function(e){const{document:t}=(0,bo.M)();(0,h.useEffect)((()=>{const n=()=>{e()};return t.addEventListener("stripeElementEvent",n),t.addEventListener("click",n),()=>{t.removeEventListener("click",n),t.removeEventListener("stripeElementEvent",n)}}),[t,e])}(L),function(e){const{document:t}=(0,bo.M)();(0,h.useEffect)((()=>{const n=t=>{"Tab"===t.key&&e()};return t.addEventListener("keydown",n),()=>{t.removeEventListener("keydown",n)}}),[t,e])}(L),(0,h.useEffect)((()=>{R&&(k(_),w(x))}),[_,x,R]),(0,h.useEffect)((()=>{O?M.set([],Pe):M.clear()}),[O,M]),(0,Co.jsxs)(Co.Fragment,{children:[E&&(0,Co.jsx)(xo.A,{nodeRef:A,in:I,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)(Rl,{setRef:A,className:"mb-3",role:O?"alert":"none",children:(0,Co.jsx)(Il,{errorTitle:c,errorMessage:l,dataQa:m,dataTestId:p})})}),(0,Co.jsx)(Nc.S,{ref:C,content:(0,Co.jsx)(Il,{errorTitle:c,errorMessage:l,dataQa:m,dataTestId:p}),trigger:"manual",manualOpen:!E&&I,className:E?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",rootContainer:v,children:(0,Co.jsxs)("button",{type:null!=i?i:"button",className:(0,To.A)(N?"btn-link p-rel max-w-100":"btn",a,{"w-100":N&&!b,"btn-testmode":!N&&d,"btn-loading":P||D||O,"is-success":D,"has-error":O}),disabled:T,"aria-disabled":T,"aria-busy":P,"data-qa":m,"data-tracking-element-name":g,"data-testid":p,onClick:f,children:[N?(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("span",{className:(0,To.A)("text-truncate",{invisible:P||D||O}),"data-testid":"link-children-container",children:o}),(P||D)&&(0,Co.jsxs)("span",{className:"p-abs centered max-w-100 d-flex items-center justify-center",children:[(0,Co.jsx)("span",{className:"spinner spinner-md spinner-primary shrink-0 me-1"}),(0,Co.jsx)("span",{className:"text-truncate",children:S.translate("payButton.processingShort")})]}),O&&(0,Co.jsx)("span",{className:"p-abs centered text-truncate text-red-80 max-w-100",children:S.translate("payButton.error")})]}):(0,Co.jsxs)(Co.Fragment,{children:[o,P&&(0,Co.jsx)("span",{className:"p-abs centered",children:(0,Co.jsx)("span",{className:(0,To.A)("spinner spinner-lg",r?"spinner-default":"spinner-white")})}),(D||O)&&(0,Co.jsxs)("span",{className:"btn-state",children:[D&&(0,Co.jsx)(Pl,{className:"icon-stroke icon-stroke-2","data-testid":"pay-button-success-icon"}),O&&(0,Co.jsx)(xl,{className:"icon-stroke icon-stroke-2","data-testid":"pay-button-error-icon"})]})]}),(0,Co.jsx)("span",{className:"sr-only",role:"status","aria-live":"polite",children:P&&S.translate("payButton.processing")}),(0,Co.jsx)("span",{className:"sr-only",role:"status","aria-live":"polite",children:D&&S.translate("payButton.done")})]})})]})}));Ml.displayName="_PayButton";const Ll=(0,h.memo)(Ml),Ul={4:4,8:8,12:12,16:14,18:16,20:18,24:20,28:24,32:26,36:28,40:32,48:36,56:40,64:48,80:56},Fl=e=>{let{className:t,size:n,sizeMin:i,isBreakpoint:s,notAdaptive:a}=e;const[r,o]=(0,h.useState)(n);(0,h.useEffect)((()=>{o(s&&!a?Ul[n]:n)}),[n,s,a]);const c=Object.assign({width:`${r}px`,height:`${r}px`},i&&{lineHeight:`${i}px`});return(0,Co.jsx)("div",{className:(0,To.A)("opacity-0",t),style:c,"aria-hidden":"true","data-testid":"spacer-base",children:""})},jl=e=>{const{className:t,size:n,sizeMin:i}=e;return(0,Co.jsx)(Fl,{className:t,size:n,sizeMin:i})};var Bl,Hl=n(1986);function ql(){return ql=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ql.apply(this,arguments)}var Gl=function(e,t){return h.createElement("svg",ql({width:14,height:10,viewBox:"0 0 14 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Bl||(Bl=h.createElement("path",{d:"M12.3333 1L5 8.33333L1.66667 5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))},Vl=(0,h.forwardRef)(Gl),Kl=(0,h.memo)(Vl);const Yl=e=>{var{setRef:t,innerRef:n,className:i,customLabelClasses:s,customControlClasses:a,disabled:r,error:o,checked:c,checkboxValue:u,children:d,hint:m,dataQa:p,dataTestId:g,trackingElement:y,onChange:f}=e,S=(0,l.Tt)(e,["setRef","innerRef","className","customLabelClasses","customControlClasses","disabled","error","checked","checkboxValue","children","hint","dataQa","dataTestId","trackingElement","onChange"]);const E=(0,h.useRef)(null);return(0,h.useImperativeHandle)(t,(()=>E.current),[]),(0,Co.jsxs)("div",{ref:n,className:(0,To.A)("ui-checkbox",{"ui-checkbox-disabled":r},i),children:[(0,Co.jsxs)("label",{className:(0,To.A)("ui-checkbox-label",s),"data-qa":p+"-label",children:[(0,Co.jsxs)("span",{className:(0,To.A)("ui-checkbox-control",a),children:[(0,Co.jsx)("input",Object.assign({ref:E,type:"checkbox",className:(0,To.A)("ui-checkbox-input",{"has-error":o}),disabled:r,checked:c,value:u,"aria-invalid":o,"data-qa":p,"data-tracking-element-name":y,"data-testid":g,onChange:()=>{r||f(!c)}},S)),(0,Co.jsx)("span",{className:"ui-checkbox-icon","aria-hidden":!0,children:c&&(0,Co.jsx)(Kl,{})})]}),d&&(0,Co.jsx)("span",{className:"ui-checkbox-text",children:d})]}),m&&(0,Co.jsx)("div",{className:"ui-checkbox-hint",children:m})]})},zl=["top","bottom"],Wl=e=>{let{anonymousChecked:t,locked:n,className:i,dataTestId:s,onToggle:a}=e;const r=(0,Ho.t)(),o=(0,zo.Q)(),c=(0,ko.P)(),l=(0,wo.wf)();return(0,Co.jsxs)("div",{className:(0,To.A)("d-flex",i),children:[(0,Co.jsx)(Yl,{checked:t,disabled:n,onChange:a,dataQa:"anonymously-checkbox",trackingElement:"anonymousCheckbox",dataTestId:s,children:(0,Co.jsx)("span",{className:"text-truncate",children:r.translate("privacyScreen.donateAnonymously.label")})}),(0,Co.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Co.jsx)(Nc.S,{content:!n&&r.translate("privacyScreen.donateAnonymously.tooltipLabel"),trigger:"click",className:c?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:o?"left-start":"right-start",fallbackPlacements:zl,rootContainer:l,children:(0,Co.jsx)("button",{type:"button",className:"btn-icon p-abs centered text-gray-60 font-size-18",disabled:n,"aria-label":r.translate("privacyScreen.donateAnonymously.helpAriaLabel"),"data-qa":"anonymous-checkbox-help-button",children:(0,Co.jsx)(Hl.A,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":o}),"aria-hidden":!0})})})})]})},$l=(0,h.memo)(Wl);var Xl=n(2762),Ql=n(6780);const Zl=e=>{var t,{label:n,labelOptional:i,labelSrOnly:s,labelFloating:a,id:r,className:o,value:c,formGroupClass:u,formLabelClass:d,dataQa:m,dataTestId:p,options:g=[],groupedOptions:y,children:f,autoFocus:S,hasCustomValue:E,customPlaceholder:A,error:C,setRef:v,autoScroll:N}=e,b=(0,l.Tt)(e,["label","labelOptional","labelSrOnly","labelFloating","id","className","value","formGroupClass","formLabelClass","dataQa","dataTestId","options","groupedOptions","children","autoFocus","hasCustomValue","customPlaceholder","error","setRef","autoScroll"]);const P=(0,h.useRef)(null),D=""===(null===(t=null==g?void 0:g[0])||void 0===t?void 0:t.value);return(0,h.useImperativeHandle)(v,(()=>P.current),[]),(0,rl.f)({ref:P,autoFocus:S,mode:al.Q.DESKTOP}),(0,Ql.Q)(P,{shouldScroll:N,shouldFocus:!0}),(0,Co.jsxs)(Xl.s,{htmlFor:r,label:n,labelOptional:i,labelSrOnly:s,labelFloating:a,formGroupClass:u,formLabelClass:(0,To.A)(d,{"has-error":C}),formControlValue:c,dataQa:m+"-label",children:[(0,Co.jsxs)("select",Object.assign({id:r,ref:P,className:(0,To.A)("form-control form-control-select",o,{"has-label-floating":a,"has-error":C}),"aria-invalid":C,value:c,"data-qa":m,"data-testid":p},b,{children:[!D&&(0,Co.jsx)("option",{value:"",disabled:!0}),g&&g.map((e=>{let{value:t,label:n}=e;return(0,Co.jsx)("option",{value:t,children:n},t)})),y&&Object.entries(y).map((e=>{let[t,n]=e;return(0,Co.jsx)("optgroup",{label:t,children:n.map((e=>{let{value:t,label:n}=e;return(0,Co.jsx)("option",{value:t,children:n},t)}))},t)}))]})),(E||!a&&A)&&(0,Co.jsx)("span",{className:(0,To.A)("form-control-placeholder p-abs bottom-left bottom-right text-truncate pointer-events-none z-index-4",{"text-gray-60":!c,"has-label-floating":a}),children:c||A}),f]})};var Jl=n(6007),eu=n(1660);const tu={minWidth:"100px",maxWidth:"170px",width:"auto"},nu=e=>{let{validation:t,customerTitle:n,className:i,autoFocus:s,locked:a,dataTestId:r,onChange:o}=e;const c=(0,Ho.t)(),l=tc(),u=!t.customerTitle.isValid,d=t.customerTitle.fields.title.errors.required,m=n.list.map((e=>({value:e,label:e}))),p=(0,h.useRef)(null);return(0,eu.FM)(p,(e=>!e.validation.customerTitle.isValid)),(0,Co.jsxs)("div",{className:(0,To.A)("p-rel",i),style:tu,children:[(0,Co.jsx)(Zl,{id:`title-${l}`,label:c.translate("privacyScreen.customerTitle.label"),labelFloating:!0,formGroupClass:"p-abs top-left bottom-right",value:n.title,options:m,customPlaceholder:c.translate("privacyScreen.customerTitle.placeholder"),autoFocus:s,disabled:a,error:u,"aria-describedby":`customer-title-${l}-error`,dataTestId:r,onChange:e=>o(e.target.value),dataQa:"customer-title-select",setRef:p,children:d&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-10",children:c.translate("privacyScreen.customerTitle.error.required")}),(0,Co.jsx)("p",{id:`customer-title-${l}-error`,className:"sr-only",children:c.translate("privacyScreen.customerTitle.error.required")})]})}),(0,Co.jsxs)("span",{className:"invisible form-control-placeholder has-label-floating d-flex","aria-hidden":!0,children:[c.translate("privacyScreen.customerTitle.placeholder"),(0,Co.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 ms-2"})]})]})},iu=(0,h.memo)(nu);var su;!function(e){e[e.NAME_MIN_LENGTH=1]="NAME_MIN_LENGTH",e[e.NAME_MAX_LENGTH=100]="NAME_MAX_LENGTH",e[e.EMAIL_MAX_LENGTH=320]="EMAIL_MAX_LENGTH",e[e.ON_BEHALF_OF_MAX_LENGTH=60]="ON_BEHALF_OF_MAX_LENGTH"}(su||(su={}));var au=n(9196);const ru=["top","bottom"],ou=e=>{let{className:t,isDisabled:n}=e;const i=(0,Ho.t)(),s=(0,zo.Q)(),a=(0,ko.P)(),r=(0,wo.wf)();return(0,Co.jsx)(Nc.S,{content:!n&&i.translate("privacyScreen.emailInput.tooltipLabel"),trigger:"click",className:a?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:s?"left-start":"right-start",fallbackPlacements:ru,maxWidth:"260px",rootContainer:r,"data-qa":"privacy-email-consent-tooltip",children:(0,Co.jsx)("button",{type:"button",className:(0,To.A)("btn-icon font-size-18 text-gray-60",t),disabled:n,"aria-label":i.translate("privacyScreen.emailInput.helpAriaLabel"),"data-testid":"privacy-email-consent-tooltip-trigger","data-qa":"email-consent-tooltip-trigger",children:(0,Co.jsx)(Hl.A,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":s}),"data-qa":"privacy-email-consent-tooltip-trigger","aria-hidden":!0})})})},cu=e=>{let{as:t,id:n,className:i,style:s,token:a,params:r,role:o,dataQa:c,dataTestId:l}=e;const u=(0,Ho.t)();Qe()&&!/<\/?[a-z][\s\S]*>/i.test(u.translate(a))&&console.warn('Use "intl.translate" for translations without HTML');const d=null!=t?t:"span";return(0,Co.jsx)(d,{id:n,className:i,style:s,dangerouslySetInnerHTML:{__html:u.safeTranslate(a,r)},role:o,"data-qa":c,"data-testid":l})},lu=(0,h.memo)(cu),uu=e=>{let{validation:t,emailConsent:n,className:i,email:s,serverError:a,locked:r,dataTestId:o,onChange:c}=e;const l=(0,Ho.t)(),u=tc(),d=!t.donorEmail.fields.email.isValid||a,m=t.donorEmail.fields.email.errors.required,p=t.donorEmail.fields.email.errors.email,g=(0,h.useRef)(null);return(0,eu.FM)(g,(e=>!e.validation.donorEmail.fields.email.isValid||Boolean(e.serverErrors.email))),(0,Co.jsxs)(au.t,{id:`personal-email-${u}`,setRef:g,type:"text",label:l.translate("privacyScreen.emailInput.label"),labelFloating:!0,className:(0,To.A)({"pe-10":n.isEnabled&&!d||!n.isEnabled&&d,"pe-16":n.isEnabled&&d}),formGroupClass:i,formLabelClass:(0,To.A)({"pe-6":n.isEnabled&&!d||!n.isEnabled&&d,"pe-12":n.isEnabled&&d}),placeholder:l.translate("privacyScreen.emailInput.placeholder"),value:s,maxLength:su.EMAIL_MAX_LENGTH,inputMode:"email",autoComplete:"email",name:"email",error:d,disabled:r,"aria-required":!0,"aria-describedby":`personal-email-${u}-error`,onChange:e=>c(e.target.value),dataQa:"personal-email",dataTestId:o,children:[(0,Co.jsxs)("div",{className:"p-abs centered-right d-flex items-center z-index-5 me-4",children:[d&&(0,Co.jsxs)(Jl.U,{className:"shrink-0",dataQa:"personal-email",children:[m&&l.translate("privacyScreen.emailInput.error.required"),!m&&p&&l.translate("privacyScreen.emailInput.error.invalid"),a&&(0,Co.jsx)(lu,{token:"privacyScreen.emailInput.error.server"})]}),n.isEnabled&&(0,Co.jsx)(ou,{className:(0,To.A)("shrink-0",{"ms-2":d}),isDisabled:r})]}),d&&(0,Co.jsxs)("p",{id:`personal-email-${u}-error`,className:"sr-only",children:[m&&l.translate("privacyScreen.emailInput.error.required"),!m&&p&&l.translate("privacyScreen.emailInput.error.invalid"),a&&(0,Co.jsx)(lu,{token:"privacyScreen.emailInput.error.server"})]})]})},du=(0,h.memo)(uu),hu=e=>e.fields.firstName.errors.required?"privacyScreen.firstNameInput.error.required":e.fields.firstName.errors.characters?"privacyScreen.firstNameInput.error.characters":e.fields.firstName.errors.minLength?"privacyScreen.firstNameInput.error.minLength":"privacyScreen.firstNameInput.error.required",mu=e=>{let{validation:t,className:n,firstName:i,locked:s,autoFocus:a,dataTestId:r,onChange:o}=e;const c=(0,Ho.t)(),l=tc(),u=(0,h.useRef)(null),d=!t.donorName.fields.firstName.isValid;return(0,eu.FM)(u,(e=>!e.validation.donorName.fields.firstName.isValid)),(0,Co.jsx)(au.t,{id:`personal-first-name-${l}`,setRef:u,label:c.translate("privacyScreen.firstNameInput.label"),labelFloating:!0,className:(0,To.A)({"pe-10":d}),formLabelClass:(0,To.A)({"pe-6":d}),formGroupClass:n,placeholder:c.translate("privacyScreen.firstNameInput.placeholder"),value:i,maxLength:su.NAME_MAX_LENGTH,autoComplete:"given-name",autoFocus:a,name:"firstName",disabled:s,error:d,"aria-required":!0,"aria-describedby":`personal-first-name-${l}-error`,onChange:e=>o(e.target.value),dataQa:"personal-first-name",dataTestId:r,children:d&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate(hu(t.donorName))}),(0,Co.jsx)("p",{id:`personal-first-name-${l}-error`,className:"sr-only",children:c.translate(hu(t.donorName))})]})})},pu=(0,h.memo)(mu),gu=["top","bottom"],yu=e=>{let{generalConsent:t,locked:n,className:i,dataTestId:s,onToggle:a,onShowConsent:r}=e;const o=(0,Ho.t)(),c=(0,zo.Q)(),l=(0,ko.P)(),u=(0,wo.wf)(),d=(0,No.n)(),{checkboxText:m}=d.campaign.config.consentText.general,{additionalInfoText:p}=d.campaign.config.consentText.general;return(0,h.useEffect)((()=>{r()}),[r]),(0,Co.jsxs)("div",{className:(0,To.A)("d-flex",i),children:[(0,Co.jsx)(Yl,{checked:t.isAccepted,disabled:n,onChange:a,dataQa:"general-consent-checkbox",trackingElement:"generalConsentCheckbox",dataTestId:s,children:(0,Co.jsx)("span",{className:"text-truncate",dir:"auto",children:m?(0,Co.jsx)("span",{dangerouslySetInnerHTML:{__html:m},"data-qa":"general-consent-text"}):o.translate("privacyScreen.generalConsent.label")})}),p&&(0,Co.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Co.jsx)(Nc.S,{content:!n&&(0,Co.jsx)("p",{dangerouslySetInnerHTML:{__html:p},dir:"auto"}),trigger:"click",className:l?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:c?"left-start":"right-start",fallbackPlacements:gu,maxWidth:"260px",maxHeight:"220px",rootContainer:u,"data-qa":"general-consent-checkbox-text-popover",children:(0,Co.jsx)("button",{type:"button",className:"btn-icon p-abs centered text-gray-60 font-size-18",disabled:n,"aria-label":o.translate("privacyScreen.generalConsent.helpAriaLabel"),"data-qa":"general-consent-checkbox-help-button","data-testid":"general-consent-checkbox-help-button",children:(0,Co.jsx)(Hl.A,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":c}),"aria-hidden":!0})})})})]})},fu=(0,h.memo)(yu),Su=e=>e.fields.lastName.errors.required?"privacyScreen.lastNameInput.error.required":e.fields.lastName.errors.characters?"privacyScreen.lastNameInput.error.characters":e.fields.lastName.errors.minLength?"privacyScreen.lastNameInput.error.minLength":"privacyScreen.lastNameInput.error.required",Eu=e=>{let{validation:t,className:n,lastName:i,locked:s,dataTestId:a,onChange:r}=e;const o=(0,Ho.t)(),c=tc(),l=(0,h.useRef)(null),u=!t.donorName.fields.lastName.isValid;return(0,eu.FM)(l,(e=>!e.validation.donorName.fields.lastName.isValid)),(0,Co.jsx)(au.t,{id:`personal-last-name-${c}`,setRef:l,label:o.translate("privacyScreen.lastNameInput.label"),labelFloating:!0,className:(0,To.A)({"pe-10":u}),formLabelClass:(0,To.A)({"pe-6":u}),formGroupClass:n,placeholder:o.translate("privacyScreen.lastNameInput.placeholder"),value:i,maxLength:su.NAME_MAX_LENGTH,autoComplete:"family-name",name:"lastName",disabled:s,error:u,"aria-required":!0,"aria-describedby":`personal-last-name-${c}-error`,onChange:e=>r(e.target.value),dataQa:"personal-last-name",dataTestId:a,children:u&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:o.translate(Su(t.donorName))}),(0,Co.jsx)("p",{id:`personal-last-name-${c}-error`,className:"sr-only",children:o.translate(Su(t.donorName))})]})})},Au=(0,h.memo)(Eu),Cu=["top","bottom"],vu=e=>{let{validation:t,onBehalfOf:n,className:i,locked:s,dataTestIdCheckbox:a,dataTestIdInput:r,onToggleOnBehalfOf:o,onChangeCompanyName:c}=e;var l;const u=(0,Ho.t)(),d=(0,zo.Q)(),m=(0,ko.P)(),p=tc(),g=(0,wo.wf)(),y=!t.onBehalfOf.isValid,f=t.onBehalfOf.fields.onBehalfOf.errors.required,S=t.onBehalfOf.fields.onBehalfOf.errors.minLength,[E,A]=(0,h.useState)(!1),C=(0,h.useRef)(null);return(0,eu.FM)(C,(e=>!e.validation.onBehalfOf.isValid)),(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)("div",{className:(0,To.A)("d-flex",i),children:[(0,Co.jsx)(Yl,{checked:n.isActive,disabled:s,dataQa:"behalf-company-button",trackingElement:"showBehalfOfInput",dataTestId:a,onChange:()=>{o(),A(!0)},children:(0,Co.jsx)("span",{className:"text-truncate",children:u.translate("privacyScreen.donateAsOrganization.label")})}),(0,Co.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Co.jsx)(Nc.S,{content:!s&&u.translate("privacyScreen.donateAsOrganization.input.tooltipLabel"),trigger:"click",className:m?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:d?"left-start":"right-start",fallbackPlacements:Cu,maxWidth:"220px",rootContainer:g,children:(0,Co.jsx)("button",{type:"button",className:"btn-icon p-abs centered text-gray-60 font-size-18",disabled:s,"aria-label":u.translate("privacyScreen.donateAsOrganization.input.helpAriaLabel"),"data-qa":"donate-as-organization-help-button",children:(0,Co.jsx)(Hl.A,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":d}),"aria-hidden":!0})})})})]}),n.isActive&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(jl,{size:8,sizeMin:4}),(0,Co.jsx)(au.t,{id:`on-behalf-${p}`,setRef:C,label:u.translate("privacyScreen.donateAsOrganization.input.label"),labelFloating:!0,autoFocus:n.isActive&&E,autoFocusMode:al.Q.ALL,className:(0,To.A)({"pe-10":y}),formLabelClass:(0,To.A)({"pe-6":y}),formGroupClass:"shrink-0",placeholder:u.translate("privacyScreen.donateAsOrganization.input.placeholder"),value:null!==(l=n.companyName)&&void 0!==l?l:"",maxLength:su.ON_BEHALF_OF_MAX_LENGTH,autoComplete:"organization",disabled:s,error:y,"aria-required":!0,"aria-describedby":`on-behalf-${p}-error`,dataQa:"behalf-company-field",dataTestId:r,onChange:e=>c(e.target.value),children:y&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:[f&&u.translate("privacyScreen.donateAsOrganization.input.error.required"),!f&&S&&u.translate("privacyScreen.donateAsOrganization.input.error.minLength")]}),(0,Co.jsxs)("p",{id:`on-behalf-${p}-error`,className:"sr-only",children:[f&&u.translate("privacyScreen.donateAsOrganization.input.error.required"),!f&&S&&u.translate("privacyScreen.donateAsOrganization.input.error.minLength")]})]})})]})]})},Nu=(0,h.memo)(vu),bu=e=>{var t;const n=(0,ko.P)(),i=(0,Ho.t)(),s=(0,Mc.Y)(),a=(0,h.useRef)(null);return(0,eu.FM)(a,(e=>!e.validation.isAccepted.isValid)),(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Yl,{setRef:a,className:e.className,checked:null!==(t=e.termsAndConditions.isAccepted)&&void 0!==t&&t,error:!e.validation.isAccepted.isValid,disabled:e.locked,"aria-required":!0,"aria-describedby":`terms-checkbox-${s}-error`,onChange:e.onToggle,dataQa:"accept-terms-checkbox",trackingElement:"termsChecked",dataTestId:e.dataTestId,children:(0,Co.jsx)("span",{className:(0,To.A)({"text-line-clamp-2":!n}),dir:"auto","data-qa":"accept-terms-text",children:e.termsAndConditions.text?(0,Co.jsx)("span",{dangerouslySetInnerHTML:{__html:e.termsAndConditions.text},"data-qa":"accept-terms-link"}):(0,Co.jsx)(lu,{token:"privacyScreen.terms.label"})})}),e.validation.isAccepted.fields.isAccepted.errors.required&&(0,Co.jsx)("p",{id:`terms-checkbox-${s}-error`,className:"sr-only",children:i.translate("privacyScreen.terms.error.required")})]})},Pu=(0,h.memo)(bu);function Du(e,t){const[n,i]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{if(!t)return;i(!0);const e=setTimeout((()=>{i(!1)}),400);return()=>clearTimeout(e)}),[e,t]),n}const _u=(0,h.lazy)((()=>Promise.all([n.e(339),n.e(513)]).then(n.bind(n,8513)))),Tu=(0,h.lazy)((()=>Promise.all([n.e(840),n.e(965)]).then(n.bind(n,7965)))),xu=e=>{let{showBadge:t}=e;const{controller:n,state:i}=Jo(Ar.PRIVACY),s=(0,ko.P)(),a=(0,Ho.t)(),r=Du(i.shakeKey,0!==i.shakeKey),o=i.onBehalfOf.isEnabled||i.showAnonymous||i.termsAndConditions.isEnabled||i.generalConsent.isEnabled,c=(0,eu.pv)(),u=(0,h.useCallback)((e=>(0,l.sH)(void 0,void 0,void 0,(function*(){e.preventDefault(),yield n.leave(),c()}))),[n,c]),d=(0,h.useCallback)((e=>n.changeCustomerTitle(e)),[n]),m=(0,h.useCallback)((e=>n.changeFirstName(e)),[n]),p=(0,h.useCallback)((e=>n.changeLastName(e)),[n]),g=(0,h.useCallback)((e=>{n.clearEmailServerError(),n.changeEmail(e)}),[n]),y=(0,h.useCallback)((e=>n.changePhone(e)),[n]),f=(0,h.useCallback)((e=>n.changePlainPhone(e)),[n]),S=(0,h.useCallback)((e=>n.changeCountryCode(e)),[n]),E=(0,h.useCallback)((e=>n.changeCompanyName(e)),[n]),A=(0,h.useCallback)((()=>n.toggleOnBehalfOf()),[n]),C=(0,h.useCallback)((()=>n.toggleAnonymousChecked()),[n]),v=(0,h.useCallback)((e=>n.toggleGeneralConsentChecked(e)),[n]),N=(0,h.useCallback)((()=>n.toggleTermsAndConditionsAccepted()),[n]),b=(0,h.useCallback)((()=>n.setGeneralConsentShown()),[n]),P=(0,h.useCallback)((e=>n.changeBirthday(e)),[n]);return(0,Co.jsxs)("form",{onSubmit:u,className:"flow-screen","data-qa":"active-screen-privacy","data-testid":"form",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite","data-testid":"status",children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("privacyScreen.title")}`})}),(0,Co.jsxs)(pl,{showBadge:t,children:[i.isApplePayAlertVisible&&s&&(0,Co.jsx)("div",{className:"fixed-container mb-5",children:(0,Co.jsxs)("div",{className:"py-2 px-3 border border-gray-20 bg-blue-10 border-radius-6 text-center",children:[(0,Co.jsx)("p",{className:"subtitle-5 text-ellipsis",children:a.translate("privacyScreen.alert.title")}),(0,Co.jsx)("p",{className:"body-3 text-ellipsis mt-0-5",children:a.translate("privacyScreen.alert.message")})]})}),(0,Co.jsx)("h2",{className:(0,To.A)("title-2",s?"text-ellipsis":"text-line-clamp-2"),"data-testid":"title",children:a.translate("privacyScreen.title")})]}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-5":!s,shake:r}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column","aria-label":a.translate("privacyScreen.fieldsetAriaLabel"),children:[(0,Co.jsxs)("div",{className:"group-stacked-vertical shrink-0",children:[(0,Co.jsxs)("div",{className:"group-stacked-vertical group-stacked-item","data-testid":"privacy-personal-information-container",children:[(0,Co.jsxs)("div",{className:(0,To.A)("group-stacked-item",{"group-stacked-horizontal":i.customerTitle.isEnabled}),children:[i.customerTitle.isEnabled&&(0,Co.jsx)(iu,{className:"group-stacked-item shrink-0",customerTitle:i.customerTitle,locked:i.locked,validation:i.validation,autoFocus:i.autoFocus.customerTitle,dataTestId:"privacy-customer-title-select",onChange:d}),(0,Co.jsx)(pu,{className:(0,To.A)({"group-stacked-item":i.customerTitle.isEnabled}),firstName:i.firstName,autoFocus:i.autoFocus.firstName,locked:i.locked,validation:i.validation,dataTestId:"privacy-first-name-input",onChange:m})]}),(0,Co.jsx)(Au,{className:"group-stacked-item",lastName:i.lastName,locked:i.locked,validation:i.validation,dataTestId:"privacy-last-name-input",onChange:p})]}),(0,Co.jsxs)("div",{className:(0,To.A)("group-stacked-item",{"group-stacked-vertical":i.showPhone||i.birthday.isEnabled}),children:[(0,Co.jsx)(du,{className:(0,To.A)({"group-stacked-item":i.showPhone||i.birthday.isEnabled}),email:i.email,emailConsent:i.emailConsent,locked:i.locked,validation:i.validation,serverError:Boolean(i.serverErrors.email),dataTestId:"privacy-email-input",onChange:g}),i.showPhone&&(0,Co.jsx)(h.Suspense,{fallback:(0,Co.jsx)("span",{"data-testid":"privacy-phone-input-fallback"}),children:(0,Co.jsx)(_u,{className:(0,To.A)({"group-stacked-item":i.showPhone}),phone:i.phone,phoneRequired:i.phoneRequired,userCountryCode:i.userCountryCode,showPhoneLegalText:i.showPhoneLegalText,phoneLegalText:i.phoneLegalText,locked:i.locked,validation:i.validation,dataTestId:"privacy-phone-input",onChange:y,onChangeCountryCode:S,onChangePlain:f})}),i.birthday.isEnabled&&(0,Co.jsx)(h.Suspense,{fallback:null,children:(0,Co.jsx)(Tu,{birthday:i.birthday.value,className:(0,To.A)({"group-stacked-item":!0}),locked:i.locked,validation:i.validation,dataTestId:"privacy-birthday",onChange:P})})]})]}),o&&(0,Co.jsx)(jl,{size:16,sizeMin:8}),i.onBehalfOf.isEnabled&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Nu,{className:"shrink-0",onBehalfOf:i.onBehalfOf,locked:i.locked,validation:i.validation,dataTestIdCheckbox:"privacy-on-behalf-on-checkbox",dataTestIdInput:"privacy-on-behalf-on-input",onToggleOnBehalfOf:A,onChangeCompanyName:E}),i.onBehalfOf.isActive?(0,Co.jsx)(jl,{size:16,sizeMin:8}):(0,Co.jsx)(jl,{size:8,sizeMin:4})]}),i.showAnonymous&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)($l,{className:"shrink-0",anonymousChecked:i.anonymousChecked,locked:i.locked,dataTestId:"privacy-anonymous-checkbox",onToggle:C}),(0,Co.jsx)(jl,{size:8,sizeMin:4})]}),i.generalConsent.isEnabled&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(fu,{className:"shrink-0",generalConsent:i.generalConsent,locked:i.locked,dataTestId:"general-consent-checkbox",onToggle:v,onShowConsent:b}),(0,Co.jsx)(jl,{size:8,sizeMin:4})]}),i.termsAndConditions.isEnabled&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Pu,{className:"shrink-0",termsAndConditions:i.termsAndConditions,locked:i.locked,validation:i.validation,dataTestId:"privacy-terms-checkbox",onToggle:N}),(0,Co.jsx)(jl,{size:16,sizeMin:8})]})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",processingState:i.processingState,serverErrors:i.serverErrors,onClick:u,errorTitle:i.payErrorMessage||a.translate("common.errorOccurredText"),errorMessage:i.additionalPayErrorMessage,dataQa:"privacy-continue",trackingElement:i.isPaymentScreen?"payButton":"nextButton",dataTestId:"pay-button",children:i.isPaymentScreen?Sl(a,i.donation.formattedAmount,i.donation.frequency):a.translate("privacyScreen.button")})})]})},Ou=e=>{const{state:t}=Jo(Ar.PRIVACY);return(0,Co.jsx)(eu.rp,{state:{validation:t.validation,serverErrors:t.serverErrors},children:(0,Co.jsx)(xu,Object.assign({},e))})};var ku=n(3144),Iu=n(8706);const wu=e=>{const[t,n]=(0,h.useState)(!1),[i,s]=(0,h.useState)(!1),[a,r]=(0,h.useState)(!1),[o,c]=(0,h.useState)(!1),l=(0,h.useRef)(null),u=t||i||a||o,d=(0,h.useCallback)((()=>{if(!l.current)return;const e=l.current.clientWidth<l.current.scrollWidth,t=l.current.clientHeight<l.current.scrollHeight,i=Math.ceil(l.current.offsetWidth+l.current.scrollLeft),a=Math.ceil(l.current.offsetHeight+l.current.scrollTop),o=0===l.current.scrollTop,u=i>=l.current.scrollWidth,d=a>=l.current.scrollHeight,h=0===l.current.scrollLeft;n(t&&!o),s(e&&!u),r(t&&!d),c(e&&!h)}),[l]);return(0,h.useEffect)((()=>{if(!l.current)throw new Error("ScrollContainerRef is undefined");const e=(t=d,new ResizeObserver((e=>e.map(t))));var t;return null==e||e.observe(l.current),()=>null==e?void 0:e.disconnect()}),[l,d]),(0,Co.jsx)("div",{className:(0,To.A)({"scroll-wrap":u},e.className),children:(0,Co.jsxs)("div",{ref:l,className:(0,To.A)("scroll-container custom-scrollbar",e.scrollContainerClass),onScroll:()=>{d()},children:[e.children,u&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("span",{className:(0,To.A)("shadow-top",{"is-active":t})}),(0,Co.jsx)("span",{className:(0,To.A)("shadow-right",{"is-active":i})}),(0,Co.jsx)("span",{className:(0,To.A)("shadow-bottom",{"is-active":a})}),(0,Co.jsx)("span",{className:(0,To.A)("shadow-left",{"is-active":o})})]})]})})},Ru=(0,h.memo)(wu),Mu=(0,h.createContext)(null);var Lu;!function(e){e.CHECKBOX="checkbox",e.MULTIOPTION="multioption",e.RADIO="radio",e.DROPDOWN="dropdown",e.LINE="line",e.MULTILINE="multiline",e.DATE="date"}(Lu||(Lu={}));const Uu=e=>e.type===Lu.CHECKBOX,Fu=e=>e.type===Lu.DROPDOWN,ju=e=>e.type===Lu.MULTILINE,Bu=e=>e.type===Lu.RADIO,Hu=e=>e.type===Lu.LINE,qu=e=>e.type===Lu.MULTIOPTION,Gu=e=>e.type===Lu.DATE;var Vu=n(5251);const Ku=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:r,hasError:o,type:c,onChange:l}=e;const u=(0,Ho.t)(),d=(0,Mc.Y)(),m=(0,h.useCallback)((()=>{l(!a)}),[l,a]),p=(0,h.useRef)(null);return(0,Vu.FM)(p,(e=>!!e[t])),(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)(Yl,{setRef:p,className:n,checked:!!a,error:o,onChange:m,dataQa:"question-"+c,"aria-required":r,"aria-describedby":`question-${c}-${d}-error`,"data-testid":"question-checkbox-single",children:[(0,Co.jsx)("span",{dangerouslySetInnerHTML:{__html:i},dir:"auto"}),!r&&(0,Co.jsxs)("span",{className:"text-gray-60",children:[" (",u.translate("common.optional"),")"]})]}),o&&(0,Co.jsx)("p",{id:`question-${c}-${d}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})},Yu=(0,h.memo)(Ku),zu=e=>{let{question:t,required:n}=e;const i=(0,Mc.Y)(),s=(0,Ho.t)();return(0,Co.jsx)(au.t,{id:`date-${i}`,type:"text",label:(0,Co.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:t}}),labelOptional:n?"":s.translate("common.optional"),dataTestId:"question-date",dataQa:"question-date-fallback"})},Wu={marginBottom:"13px"},$u=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,options:r,required:o,hasError:c,type:l,onChange:u}=e;const d=(0,Ho.t)(),m=tc(),p=(0,h.useCallback)((e=>{u(e.target.value)}),[u]),g=r.map((e=>({value:e,label:e}))),y=(0,h.useRef)(null);return(0,Vu.FM)(y,(e=>!!e[t])),(0,Co.jsx)(Zl,{setRef:y,id:`dropdown-${m}`,label:(0,Co.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),labelOptional:o?"":d.translate("common.optional"),options:g,className:(0,To.A)({"pe-16":c}),formLabelClass:(0,To.A)({"pe-12":c}),formGroupClass:n,error:c,value:a||"","aria-required":o,"aria-describedby":`question-${l}-${m}-error`,onChange:p,dataQa:"question-"+l,dataTestId:"question-dropdown",children:c&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs bottom-right z-index-5 me-10",style:Wu,children:d.translate("questionsScreen.error.required",{question:s})}),(0,Co.jsx)("p",{id:`question-${l}-${m}-error`,className:"sr-only",children:d.translate("questionsScreen.error.required",{question:s})})]})})},Xu=(0,h.memo)($u);var Qu;!function(e){e[e.ANSWER_MAX_LENGTH=500]="ANSWER_MAX_LENGTH"}(Qu||(Qu={}));const Zu={marginTop:"13px"},Ju=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:r,hasError:o,type:c,onChange:l}=e;const u=(0,Ho.t)(),d=tc(),m=(0,h.useRef)(null);return(0,Vu.FM)(m,(e=>!!e[t])),(0,Co.jsxs)("div",{className:n,children:[(0,Co.jsxs)("label",{htmlFor:`multiline-${d}`,className:"label-3 max-w-100","data-qa":"question-"+c+"-label",children:[(0,Co.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!r&&(0,Co.jsxs)("span",{className:"text-gray-60",children:[" (",u.translate("common.optional"),")"]})]}),(0,Co.jsxs)("div",{className:"p-rel",children:[(0,Co.jsx)("textarea",{ref:m,id:`multiline-${d}`,className:(0,To.A)("form-control mt-3",{"has-error":o}),rows:7,value:a||"",maxLength:Qu.ANSWER_MAX_LENGTH,"aria-required":r,"aria-describedby":`question-${c}-${d}-error`,onChange:e=>{l(e.target.value)},"data-qa":"question-"+c,"data-testid":"question-multiline"}),o&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs top-right z-index-5 me-4",style:Zu,dataQa:"question-multiline",children:u.translate("questionsScreen.error.required",{question:s})}),(0,Co.jsx)("p",{id:`question-${c}-${d}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})]})]})},ed=(0,h.memo)(Ju),td=e=>{var{children:t,setRef:n,innerRef:i,className:s,customLabelClasses:a,checkedValues:r,checkboxValue:o,disabled:c,error:u,hint:d,dataQa:m,onChange:p}=e,g=(0,l.Tt)(e,["children","setRef","innerRef","className","customLabelClasses","checkedValues","checkboxValue","disabled","error","hint","dataQa","onChange"]);const y=r.includes(o),f=(0,h.useCallback)((()=>{if(c)return;const e=!y,t=new Set([...r]);e?t.add(o):t.delete(o),p([...t])}),[p,y,c,r,o]);return(0,Co.jsx)(Yl,Object.assign({setRef:n,innerRef:i,className:s,customLabelClasses:a,checkboxValue:o,checked:y,disabled:c,error:u,hint:d,onChange:f,dataQa:m},g,{children:t}))},nd=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,options:r,required:o,hasError:c,type:l,onChange:u}=e;const d=(0,Ho.t)(),m=tc(),p=(0,h.useCallback)((e=>{u(e)}),[u]),g=(0,h.useRef)(null);return(0,Vu.FM)(g,(e=>!!e[t])),(0,Co.jsxs)("div",{className:n,role:"group","aria-labelledby":`checkbox-group-${m}`,"data-testid":"question-multioption",children:[(0,Co.jsxs)("p",{id:`checkbox-group-${m}`,className:"label-3",children:[(0,Co.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!o&&(0,Co.jsxs)("span",{className:"text-gray-60",children:[" (",d.translate("common.optional"),")"]})]}),r.map(((e,t)=>{const n=0===t;return(0,Co.jsx)(td,{setRef:n?g:void 0,className:t?"mt-2":"mt-3",checkedValues:a,checkboxValue:e,error:c,"aria-required":o,"aria-describedby":`question-${l}-${m}-error`,onChange:p,dataQa:"question-"+l,children:e},`${e}-${t}`)})),c&&(0,Co.jsx)("p",{id:`question-${l}-${m}-error`,className:"sr-only",children:d.translate("questionsScreen.error.required",{question:s})})]})},id=(0,h.memo)(nd),sd={marginBottom:"13px"},ad=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:r,hasError:o,type:c,onChange:l}=e;const u=(0,Ho.t)(),d=tc(),m=(0,h.useRef)(null);return(0,Vu.FM)(m,(e=>!!e[t])),(0,Co.jsx)(au.t,{id:`oneline-${d}`,setRef:m,error:o,className:(0,To.A)({"pe-10":o}),formGroupClass:n,label:(0,Co.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),labelOptional:r?"":u.translate("common.optional"),value:a||"",maxLength:Qu.ANSWER_MAX_LENGTH,"aria-required":r,"aria-describedby":`question-${c}-${d}-error`,onChange:e=>{l(e.target.value)},dataQa:"question-"+c,"data-testid":"question-oneline",children:o&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs bottom-right z-index-5 me-4",style:sd,children:u.translate("questionsScreen.error.required",{question:s})}),(0,Co.jsx)("p",{id:`question-${c}-${d}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})})},rd=(0,h.memo)(ad),od=e=>{var{setRef:t,children:n,className:i,customLabelClasses:s,customInputClasses:a,disabled:r,radioName:o,radioValue:c,checked:u,error:d,hint:m,dataQa:p,trackingElement:g,onChange:y,onClick:f}=e,S=(0,l.Tt)(e,["setRef","children","className","customLabelClasses","customInputClasses","disabled","radioName","radioValue","checked","error","hint","dataQa","trackingElement","onChange","onClick"]);const E=(0,h.useRef)(null);return(0,h.useImperativeHandle)(t,(()=>E.current),[]),(0,Co.jsxs)("div",{className:(0,To.A)("ui-radio",{"ui-radio-disabled":r},i),children:[(0,Co.jsxs)("label",{className:(0,To.A)(["ui-radio-label",s]),"data-qa":p+"-label",children:[(0,Co.jsxs)("span",{className:"ui-radio-control",children:[(0,Co.jsx)("input",Object.assign({type:"radio",ref:E,className:(0,To.A)("ui-radio-input",{"has-error":d},a),name:o,value:c,checked:u,disabled:r,"aria-invalid":d,"data-qa":p,"data-tracking-element-name":g,onChange:()=>{r||y(c)},onClick:()=>{f&&f()}},S)),(0,Co.jsx)("span",{className:"ui-radio-icon"})]}),n&&(0,Co.jsx)("span",{className:"ui-radio-text",children:n})]}),m&&(0,Co.jsx)("div",{className:"ui-radio-hint",children:m})]})},cd=e=>{let{className:t,id:n,question:i,questionText:s,answer:a,options:r,required:o,hasError:c,type:l,onChange:u}=e;const d=(0,Ho.t)(),m=(0,Mc.Y)(),p=(0,h.useRef)(null);return(0,Vu.FM)(p,(e=>!!e[n])),(0,Co.jsxs)("div",{className:t,role:"radiogroup","aria-labelledby":`radio-group-${m}`,"data-testid":"question-radio",children:[(0,Co.jsxs)("p",{id:`radio-group-${m}`,className:"label-3",children:[(0,Co.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!o&&(0,Co.jsxs)("span",{className:"text-gray-60",children:[" (",d.translate("common.optional"),")"]})]}),r.map(((e,t)=>{const i=0===t;return(0,Co.jsx)(od,{setRef:i?p:void 0,className:t?"mt-2":"mt-3",checked:e===a,radioValue:e,radioName:n,error:c,"aria-required":o,"aria-describedby":`question-${l}-${m}-error`,onChange:u,dataQa:"question-"+l,children:e},`${e}-${t}`)})),c&&(0,Co.jsx)("p",{id:`question-${l}-${m}-error`,className:"sr-only",children:d.translate("questionsScreen.error.required",{question:s})})]})},ld=(0,h.memo)(cd),ud=(0,h.lazy)((()=>Promise.all([n.e(840),n.e(97)]).then(n.bind(n,7097)))),dd=e=>{const{controller:t}=Jo(Ar.QUESTIONS),n=function(){const e=(0,h.useContext)(Po);if(!e)throw new Error("SentryService is not provided");return e}(),i=(0,h.useCallback)(((n,i)=>{t.answerQuestion(e.id,n,i)}),[t,e.id]),s=Du(e.shakeKey,e.hasError),a=(0,h.useMemo)((()=>e.question.replace(/(<([^>]+)>)/gi,"")),[e.question]);return Object.values(Lu).includes(e.type)?(0,Co.jsxs)("div",{className:"py-3",children:[Uu(e)&&(0,Co.jsx)(Yu,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,To.A)({shake:s}),type:e.type}),Fu(e)&&(0,Co.jsx)(Xu,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,To.A)({shake:s}),type:e.type}),ju(e)&&(0,Co.jsx)(ed,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,To.A)({shake:s}),type:e.type}),qu(e)&&(0,Co.jsx)(id,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,To.A)({shake:s}),type:e.type}),Hu(e)&&(0,Co.jsx)(rd,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,To.A)({shake:s}),type:e.type}),Bu(e)&&(0,Co.jsx)(ld,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,To.A)({shake:s}),type:e.type}),Gu(e)&&Qe()&&(0,Co.jsx)(h.Suspense,{fallback:(0,Co.jsx)(zu,{question:e.question,required:e.required}),children:(0,Co.jsx)(ud,{id:e.id,answer:e.answer,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,To.A)({shake:s}),type:e.type})})]}):(n.captureException(new Error(`Unknown type of question: "${e.type}"`)),null)},hd=(0,h.memo)(dd),md={borderTop:"0"},pd=e=>{let{showBadge:t}=e;const{state:n,controller:i}=Jo(Ar.QUESTIONS),s=(0,Ho.t)(),a=(0,h.useRef)(null),r=(0,h.useRef)(null),o=(0,ko.P)(),c=(0,Fo.$)(),l=Mo(),[u,d]=(0,h.useState)("next"),m=(0,Vu.pv)(),p=(0,h.useContext)(Mu)||null,g=(0,No.n)().getAskPageConfig().show,y=!o&&!c&&g&&!1,f=(0,h.useCallback)((e=>{e.preventDefault(),(0,ku.flushSync)((()=>{d("next")})),i.leave(),m()}),[i,m]),S=(0,h.useCallback)((()=>{(0,ku.flushSync)((()=>{d("previous")})),i.back()}),[i]),E=(0,h.useMemo)((()=>n.isMeasuring?n.questions:n.questions.filter((e=>{let{page:t}=e;return t===n.page}))),[n.isMeasuring,n.page,n.questions]);(0,h.useEffect)((()=>{if(!n.isMeasuring)return;if(!a.current)throw new Error("bodyRef was not provided");if(!r.current)throw new Error("questionsContainerRef was not provided");const e=[].slice.call(r.current.children),t=a.current.getBoundingClientRect(),s=o?455:t.height-20;setTimeout((()=>{var t;const n=i.completeMeasurement(function(e){const{height:t,children:n}=e,i=new Map;let s=1,a=0;return n.map((e=>e.offsetHeight)).forEach(((e,n)=>{a+e>t&&n>0&&(s+=1,a=0),a+=e,i.set(n,s)})),i}({height:s,children:e}));p&&(null===(t=p.updateQuestionsScreenPageCount)||void 0===t||t.call(p,n))}))}),[n.isMeasuring,o,i,r,p]);const A=(0,h.useCallback)((e=>h.cloneElement(e,{classNames:`rtg-${u}`})),[u]),C={minHeight:o?"200px":void 0};return(0,Co.jsxs)("form",{onSubmit:f,className:"flow-screen","data-testid":"questions-form",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("questionsScreen.title")}`})}),(0,Co.jsx)(pl,{backButtonClickHandler:S,forceShowBackButton:i.showBackButton.header,title:s.translate("questionsScreen.title"),showBadge:t}),(0,Co.jsx)(Fc,{ref:a,children:(0,Co.jsx)(Iu.A,{childFactory:A,children:(()=>{const e=(0,h.createRef)();return(0,Co.jsx)(xo.A,{classNames:`rtg-${u}`,nodeRef:e,addEndListener:t=>{jo(e,t)},mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)("div",{ref:e,className:l("flow-slide"),style:md,children:(0,Co.jsx)(Ru,{className:(0,To.A)(o?"grow-1":"h-100"),scrollContainerClass:(0,To.A)("px-body",o?"my-minus-3":"h-100",{"pt-8":!o}),children:(0,Co.jsx)("div",{ref:r,className:(0,To.A)("fixed-container",{"opacity-0":n.isMeasuring,"my-minus-3":!o}),style:C,children:E.map(((e,t)=>(0,Co.jsx)(hd,{id:e.key,type:e.type,answer:e.answer,options:e.options,question:e.question,required:e.required,hasError:!!n.questionErrors[e.key],shakeKey:n.shakeKey},e.key)))})})})},o||n.isShowcase||y?null:n.page)})()})}),(0,Co.jsx)(Zc,{className:(0,To.A)({"pt-7":!o}),backButtonClickHandler:S,forceShowBackButton:i.showBackButton.footer,children:(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",processingState:Pr.IDLE,dataQa:"questions-button",trackingElement:"nextButton",children:s.translate("questionsScreen.button")})})]})},gd=(0,h.memo)(pd),yd=e=>{let{showBadge:t}=e;const{state:n}=Jo(Ar.QUESTIONS);return(0,Co.jsx)(Vu.rp,{state:n.questionErrors,children:(0,Co.jsx)(gd,{showBadge:t})})},fd=e=>{var t,n;const i=(0,Mc.Y)();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",viewBox:"0 0 64 67",height:null!==(t=e.height)&&void 0!==t?t:67,width:null!==(n=e.width)&&void 0!==n?n:64,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","data-qa":"thank-you-gift-icon",children:[(0,Co.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36.4912",width:"34.2456",x:"14.8772",y:"12.5615",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:"-1.12281",dy:"-2.24561"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"2.24561"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_5232_86317"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:"1.12281",dy:"2.24561"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"2.24561"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0"}),(0,Co.jsx)("feBlend",{in2:"effect1_innerShadow_5232_86317",mode:"normal",result:"effect2_innerShadow_5232_86317"})]}),(0,Co.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"13.2564",width:"51.4444",x:"5.71532",y:"10.8599",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5232_86317",stdDeviation:"1.12281"})]}),(0,Co.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"19.8524",x2:"31.8565",y1:"12.6606",y2:"36.1232",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#eb5a68"}),(0,Co.jsx)("stop",{offset:".376986",stopColor:"#b31d2b"})]}),(0,Co.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"44.4768",x2:"31.9006",y1:"12.6606",y2:"36.124",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#eb5a68"}),(0,Co.jsx)("stop",{offset:".372516",stopColor:"#b31d2b"})]}),(0,Co.jsxs)("linearGradient",{id:`e-${i}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fcc9ce"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#ed6774"})]}),(0,Co.jsx)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.9891",x2:"32.4227",xlinkHref:`#e-${i}`,y1:"11.5166",y2:"42.4181"}),(0,Co.jsx)("linearGradient",{id:`g-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.9893",x2:"32.4228",xlinkHref:`#e-${i}`,y1:"11.5167",y2:"42.4182"}),(0,Co.jsxs)("linearGradient",{id:`h-${i}`,children:[(0,Co.jsx)("stop",{offset:".3",stopColor:"#eb5a68"}),(0,Co.jsx)("stop",{offset:".79",stopColor:"#f28a94"})]}),(0,Co.jsx)("linearGradient",{id:`i-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.8777",x2:"-4.71206",xlinkHref:`#h-${i}`,y1:"67.5719",y2:"8.6199"}),(0,Co.jsxs)("linearGradient",{id:`j-${i}`,children:[(0,Co.jsx)("stop",{offset:".295"}),(0,Co.jsx)("stop",{offset:".365",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`k-${i}`,gradientUnits:"userSpaceOnUse",x1:"35.8861",x2:"17.5942",xlinkHref:`#j-${i}`,y1:"30.9642",y2:"67.0163"}),(0,Co.jsxs)("linearGradient",{id:`l-${i}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#eb5a68"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#c61333"})]}),(0,Co.jsx)("linearGradient",{id:`m-${i}`,gradientUnits:"userSpaceOnUse",x1:"60.5078",x2:"31.9223",xlinkHref:`#l-${i}`,y1:"21.2402",y2:"67.6003"}),(0,Co.jsx)("linearGradient",{id:`n-${i}`,gradientUnits:"userSpaceOnUse",x1:"27.8678",x2:"46.1597",xlinkHref:`#j-${i}`,y1:"30.9642",y2:"67.0163"}),(0,Co.jsxs)("linearGradient",{id:`o-${i}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#c7cdd6"})]}),(0,Co.jsx)("linearGradient",{id:`p-${i}`,gradientUnits:"userSpaceOnUse",x1:"13.3492",x2:"23.8365",xlinkHref:`#o-${i}`,y1:"29.9469",y2:"76.1566"}),(0,Co.jsx)("linearGradient",{id:`q-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.3141",x2:"16.4147",xlinkHref:`#j-${i}`,y1:"31.6311",y2:"61.1672"}),(0,Co.jsxs)("linearGradient",{id:`r-${i}`,children:[(0,Co.jsx)("stop",{offset:".147453",stopColor:"#c7cdd6"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#8791a1"})]}),(0,Co.jsx)("linearGradient",{id:`s-${i}`,gradientUnits:"userSpaceOnUse",x1:"50.7762",x2:"41.6339",xlinkHref:`#r-${i}`,y1:"26.3883",y2:"81.8752"}),(0,Co.jsx)("linearGradient",{id:`t-${i}`,gradientUnits:"userSpaceOnUse",x1:"32.4406",x2:"47.3405",xlinkHref:`#j-${i}`,y1:"31.6316",y2:"61.1676"}),(0,Co.jsx)("linearGradient",{id:`u-${i}`,gradientUnits:"userSpaceOnUse",x1:"11.0808",x2:"31.6822",xlinkHref:`#e-${i}`,y1:"-4.89231",y2:"35.2353"}),(0,Co.jsx)("linearGradient",{id:`v-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.3158",x2:"19.6686",xlinkHref:`#h-${i}`,y1:"42.5929",y2:"4.03227"}),(0,Co.jsx)("linearGradient",{id:`w-${i}`,gradientUnits:"userSpaceOnUse",x1:"62.7539",x2:"53.6777",xlinkHref:`#l-${i}`,y1:"18.7192",y2:"48.9663"}),(0,Co.jsx)("linearGradient",{id:`x-${i}`,gradientUnits:"userSpaceOnUse",x1:"11.1055",x2:"12.4558",xlinkHref:`#o-${i}`,y1:"24.0242",y2:"41.3512"}),(0,Co.jsxs)("linearGradient",{id:`y-${i}`,gradientUnits:"userSpaceOnUse",x1:"27.4497",x2:"35.6674",y1:"13.7356",y2:"30.8671",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#f7f7f8"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#e7e8ed"})]}),(0,Co.jsx)("linearGradient",{id:`z-${i}`,gradientUnits:"userSpaceOnUse",x1:"52.0873",x2:"51.7335",xlinkHref:`#r-${i}`,y1:"24.0242",y2:"48.622"}),(0,Co.jsxs)("linearGradient",{id:`A-${i}`,gradientUnits:"userSpaceOnUse",x1:"18.4049",x2:"18.4049",y1:"3",y2:"19.8421",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#f4f4f4"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#8e8e8e"})]}),(0,Co.jsxs)("linearGradient",{id:`B-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.3246",x2:"27.665",y1:"13.9444",y2:"18.0337",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#f7f7f8"}),(0,Co.jsx)("stop",{offset:".986153",stopColor:"#e7e8ed"})]}),(0,Co.jsxs)("linearGradient",{id:`C-${i}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#e7e8ed",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`D-${i}`,gradientUnits:"userSpaceOnUse",x1:"18.4049",x2:"18.4049",xlinkHref:`#C-${i}`,y1:"3",y2:"19.8421"}),(0,Co.jsxs)("linearGradient",{id:`E-${i}`,gradientUnits:"userSpaceOnUse",x1:"53.187",x2:"35.2061",y1:"7.29677",y2:"20.7711",children:[(0,Co.jsx)("stop",{offset:".511878",stopColor:"#f7f7f8"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#e7e8ed"})]}),(0,Co.jsx)("linearGradient",{id:`F-${i}`,gradientUnits:"userSpaceOnUse",x1:"44.2279",x2:"44.2279",xlinkHref:`#C-${i}`,y1:"3",y2:"19.8421"}),(0,Co.jsxs)("linearGradient",{id:`G-${i}`,gradientUnits:"userSpaceOnUse",x1:"17.5667",x2:"15.4906",y1:"3.68776",y2:"18.806",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#8791a1"})]}),(0,Co.jsxs)("linearGradient",{id:`H-${i}`,gradientUnits:"userSpaceOnUse",x1:"43.9769",x2:"45.9796",y1:"4.09851",y2:"20.0863",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Co.jsx)("stop",{offset:".985772",stopColor:"#8791a1"})]}),(0,Co.jsxs)("linearGradient",{id:`I-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.3176",x2:"31.7338",y1:"13.1053",y2:"23.6817",children:[(0,Co.jsx)("stop",{offset:".483074",stopColor:"#f7f7f8"}),(0,Co.jsx)("stop",{offset:".62425",stopColor:"#e0e3e8"})]}),(0,Co.jsx)("clipPath",{id:`J-${i}`,children:(0,Co.jsx)("path",{d:"m16 14.8071h32v32h-32z"})}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m31.8777 66.9999-28.63161-14.5809v-31.1788l28.63161 14.581zm0 0 28.6316-14.5809v-31.1788l-28.6316 14.581z",fill:"#eb5a68",fillRule:"evenodd"}),(0,Co.jsx)("path",{d:"m31.8777 6.36865-28.63161 14.87175 28.63161 14.8719z",fill:`url(#c-${i})`}),(0,Co.jsx)("path",{d:"m31.8789 6.36865v29.74365l28.6316-14.8719z",fill:`url(#d-${i})`}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m56.286 20.3363-24.4085-12.67823-24.83214 12.89833-1.27583-.6268 26.10797-13.56095 25.6625 13.32965z",fill:`url(#f-${i})`,fillRule:"evenodd"}),(0,Co.jsxs)("g",{clipPath:`url(#J-${i})`,children:[(0,Co.jsx)("g",{filter:`url(#a-${i})`,children:(0,Co.jsx)("path",{d:"m32 14.8071c-8.8457 0-16 7.1543-16 16s7.1543 16 16 16 16-7.1543 16-16-7.1543-16-16-16z",fill:"#00c07b"})}),(0,Co.jsx)("path",{d:"m24.8008 30.6167 4.9694 4.5714 9.1106-8.381",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3.36842"})]}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m31.8777 36.1123-28.63161-14.8719 8.87671-4.6107 1.3345.5962-7.7288 4.0145 26.1492 13.5825 26.1491-13.5825-8.3542-4.3394 1.2892-.6198 9.5475 4.9592z",fill:`url(#g-${i})`,fillRule:"evenodd"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m20.2934 30.0943 1.2311-.65-7.903-4.1049-1.352.5871z",fill:"#f7f7f8",fillRule:"evenodd"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m43.4175 30.0943-1.231-.65 7.9029-4.1049 1.352.5871z",fill:"#e7e8ed",fillRule:"evenodd"}),(0,Co.jsx)("path",{d:"m3.24609 52.419 28.63161 14.5809v-31.1787l-28.63161-14.581z",fill:`url(#i-${i})`}),(0,Co.jsx)("path",{d:"m3.24609 52.419 28.63161 14.5809v-31.1787l-28.63161-14.581z",fill:`url(#k-${i})`,fillOpacity:".15"}),(0,Co.jsx)("path",{d:"m60.5078 52.419-28.6316 14.5809v-31.1787l28.6316-14.581z",fill:`url(#m-${i})`}),(0,Co.jsx)("path",{d:"m60.5078 52.419-28.6316 14.5809v-31.1787l28.6316-14.581z",fill:`url(#n-${i})`,fillOpacity:".15"}),(0,Co.jsxs)("g",{clipRule:"evenodd",fillRule:"evenodd",children:[(0,Co.jsx)("path",{d:"m12.4062 25.9058v31.1787l8.0169 4.0827v-31.1788z",fill:`url(#p-${i})`}),(0,Co.jsx)("path",{d:"m12.4062 25.9058v31.1787l8.0169 4.0827v-31.1788z",fill:`url(#q-${i})`,fillOpacity:".15"}),(0,Co.jsx)("path",{d:"m43.332 29.9889 8.0169-4.0827v31.1788l-8.0169 4.0826z",fill:`url(#s-${i})`}),(0,Co.jsx)("path",{d:"m43.332 29.9889 8.0169-4.0827v31.1788l-8.0169 4.0826z",fill:`url(#t-${i})`,fillOpacity:".15"})]}),(0,Co.jsx)("path",{d:"m31.8583 3.01103-30.8583 15.70827 30.8772 15.7193 30.8772-15.7193-30.8772-15.7193z",fill:"#ff7787"}),(0,Co.jsx)("path",{d:"m31.8583 3.01103-30.8583 15.70827 30.8772 15.7193 30.8772-15.7193-30.8772-15.7193z",fill:`url(#u-${i})`}),(0,Co.jsx)("path",{d:"m1 18.7192 30.8772 15.7193v7.7308l-30.8772-15.7193z",fill:`url(#v-${i})`}),(0,Co.jsx)("path",{d:"m62.7539 18.7192-30.8772 15.7193v7.7308l30.8772-15.7193z",fill:`url(#w-${i})`}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m18.9651 27.865v7.7308l-7.8596-4.0012v-7.7308z",fill:`url(#x-${i})`,fillRule:"evenodd"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m52.6452 23.8653-20.8771-10.7647-20.6626 10.7632 7.8881 4.0158 12.8831-6.9152 12.8909 6.9114z",fill:`url(#y-${i})`,fillRule:"evenodd"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m52.6487 23.8638-7.8596 4.0012v7.7308l7.8596-4.0012z",fill:"#dcdcdc",fillRule:"evenodd"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m52.6487 23.8638-7.8596 4.0012v7.7308l7.8596-4.0012z",fill:`url(#z-${i})`,fillRule:"evenodd"}),(0,Co.jsx)("g",{filter:`url(#b-${i})`,children:(0,Co.jsx)("path",{d:"m49.9488 13.2769c-4.3469-.932-8.9614 2.1424-12.0886 4.226-1.1296.7525-.8417-.6342-2.4368-1.5531-.8574-.494-2.0912-.682-2.7686-.682s-2.5509-.1428-3.6965-.0001c-1.1682.1454-1.3144-.0005-2.3578.6821-1.1577.7572-1.4491 1.0373-2.3579.4318-3.1273-2.0835-7.212-3.8651-11.559-2.9331-4.66947 1.0012-5.50769 5.8324-4.10835 7.4342 1.15945 1.3272 9.26715 1.7666 18.81105-1.6018.4096.3177.5721 1.6842 2.2457 1.6842h3.9298c1.0046 0 1.3548-1.2644 1.6843-1.6842 10.1052 3.3684 17.9649 2.4405 19.0877 1.1228 1.4351-1.6842.2846-6.1256-4.385-7.1268z",fill:"#000",fillOpacity:".2"})}),(0,Co.jsx)("path",{d:"m8.53922 17.602-.0107-.0233-.01278-.0223c-.04401-.0766-.11625-.3094-.16425-.7507-.04525-.416-.06276-.9509-.04494-1.5718.03562-1.2409.21119-2.7881.56318-4.3502.35259-1.56479.87677-3.12019 1.59737-4.3916.7235-1.27647 1.614-2.2134 2.6756-2.63601 1.4668-.58388 3.0048-.26502 4.5925.65633 1.5937.92477 3.1627 2.41663 4.6197 4.03203 1.0289 1.14061 1.978 2.31475 2.8334 3.37285.3573.442.6982.8637 1.0217 1.2543.5414.6536 1.0403 1.2273 1.4757 1.6401.2175.2063.4346.3874.6464.5199.0555.0348.1151.069.1781.1004v3.0556c-7.1028.9234-12.0212.9338-15.2291.5701-1.6418-.1861-2.8186-.4684-3.60498-.7666-.39337-.1492-.67542-.2973-.86554-.4297-.19738-.1374-.25889-.2322-.27136-.2594z",fill:`url(#A-${i})`}),(0,Co.jsx)("path",{d:"m8.53922 17.602-.0107-.0233-.01278-.0223c-.04401-.0766-.11625-.3094-.16425-.7507-.04525-.416-.06276-.9509-.04494-1.5718.03562-1.2409.21119-2.7881.56318-4.3502.35259-1.56479.87677-3.12019 1.59737-4.3916.7235-1.27647 1.614-2.2134 2.6756-2.63601 1.4668-.58388 3.0048-.26502 4.5925.65633 1.5937.92477 3.1627 2.41663 4.6197 4.03203 1.0289 1.14061 1.978 2.31475 2.8334 3.37285.3573.442.6982.8637 1.0217 1.2543.5414.6536 1.0403 1.2273 1.4757 1.6401.2175.2063.4346.3874.6464.5199.0555.0348.1151.069.1781.1004v3.0556c-7.1028.9234-12.0212.9338-15.2291.5701-1.6418-.1861-2.8186-.4684-3.60498-.7666-.39337-.1492-.67542-.2973-.86554-.4297-.19738-.1374-.25889-.2322-.27136-.2594z",fill:`url(#B-${i})`}),(0,Co.jsx)("path",{d:"m8.53922 17.602-.0107-.0233-.01278-.0223c-.04401-.0766-.11625-.3094-.16425-.7507-.04525-.416-.06276-.9509-.04494-1.5718.03562-1.2409.21119-2.7881.56318-4.3502.35259-1.56479.87677-3.12019 1.59737-4.3916.7235-1.27647 1.614-2.2134 2.6756-2.63601 1.4668-.58388 3.0048-.26502 4.5925.65633 1.5937.92477 3.1627 2.41663 4.6197 4.03203 1.0289 1.14061 1.978 2.31475 2.8334 3.37285.3573.442.6982.8637 1.0217 1.2543.5414.6536 1.0403 1.2273 1.4757 1.6401.2175.2063.4346.3874.6464.5199.0555.0348.1151.069.1781.1004v3.0556c-7.1028.9234-12.0212.9338-15.2291.5701-1.6418-.1861-2.8186-.4684-3.60498-.7666-.39337-.1492-.67542-.2973-.86554-.4297-.19738-.1374-.25889-.2322-.27136-.2594z",stroke:`url(#D-${i})`,strokeWidth:"1.12281"}),(0,Co.jsx)("path",{d:"m54.0936 17.602.0107-.0233.0128-.0223c.044-.0766.1162-.3094.1642-.7507.0453-.416.0628-.9509.045-1.5718-.0357-1.2409-.2112-2.7881-.5632-4.3502-.3526-1.56479-.8768-3.12019-1.5974-4.3916-.7235-1.27647-1.614-2.2134-2.6756-2.63601-1.4668-.58388-3.0048-.26502-4.5925.65633-1.5937.92477-3.1627 2.41663-4.6197 4.03203-1.0288 1.14061-1.978 2.31475-2.8334 3.37285-.3573.442-.6982.8637-1.0217 1.2543-.5414.6536-1.0403 1.2273-1.4757 1.6401-.2175.2063-.4346.3874-.6464.5199-.0555.0348-.1151.069-.1781.1004v3.0556c7.1029.9234 12.0212.9338 15.2291.5701 1.6418-.1861 2.8187-.4684 3.605-.7666.3934-.1492.6754-.2973.8655-.4297.1974-.1374.2589-.2322.2714-.2594z",fill:`url(#E-${i})`,stroke:`url(#F-${i})`,strokeWidth:"1.12281"}),(0,Co.jsx)("path",{d:"m29.2967 15.1805c-2.0277.0002-9.6025-14.366635-16.34-11.86944-4.28745 1.99784 11.8259 12.73594 16.34 11.86944z",fill:`url(#G-${i})`}),(0,Co.jsx)("path",{d:"m32.916 15.6102c2.0278.0002 10.0262-15.015105 16.7637-12.26819 4.2875 2.19762-12.2495 13.22129-16.7637 12.26819z",fill:`url(#H-${i})`}),(0,Co.jsx)("path",{d:"m27.0681 15.2551c.0812-1.4123 1.5826-2.2921 2.9958-2.2285 1.0001.045 2.0417-.0083 2.9589-.0938 1.4353-.1338 2.7454.9841 2.6123 2.4194-.1709 1.8432-.4993 3.9703-1.1142 4.2884-1.1145.5766-2.8135-.4244-5.6803 0-1.6957.251-1.8937-2.2776-1.7725-4.3855z",fill:`url(#I-${i})`})]})},Sd=(0,h.memo)(fd);var Ed;function Ad(){return Ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ad.apply(this,arguments)}var Cd,vd=function(e,t){return h.createElement("svg",Ad({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Ed||(Ed=h.createElement("path",{clipRule:"evenodd",d:"m21.999 12c0 5.5228-4.4771 10-10 10-5.52282 0-9.99998-4.4772-9.99998-10 0-5.52285 4.47716-10 9.99998-10 5.5229 0 10 4.47715 10 10zm-4.1446-2.84096c.2929-.29289.2929-.76777 0-1.06066-.2928-.29289-.7677-.29289-1.0606 0l-6.83456 6.83452-2.81739-2.8173c-.2929-.2929-.76777-.2929-1.06066 0s-.29289.7678.00001 1.0607l3.34772 3.3476c.29289.2929.76778.2929 1.06068 0z",fill:"currentColor",fillRule:"evenodd"})))},Nd=(0,h.forwardRef)(vd),bd=(0,h.memo)(Nd);function Pd(){return Pd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pd.apply(this,arguments)}var Dd=function(e,t){return h.createElement("svg",Pd({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Cd||(Cd=h.createElement("path",{d:"M7 0L8.48492 5.51508L14 7L8.48492 8.48492L7 14L5.51508 8.48492L0 7L5.51508 5.51508L7 0Z",fill:"currentColor"})))},_d=(0,h.forwardRef)(Dd),Td=(0,h.memo)(_d);const xd=e=>{let{className:t,hasTribute:n}=e;const i=(0,Ho.t)(),s=(0,ko.P)(),a=(0,Fo.$)(),r=Mo(),o=(0,No.n)().getAskPageConfig().show,c=!a&&o&&!1;return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)("div",{className:(0,To.A)(r("thank-you-badge"),"p-rel d-flex items-center justify-center bg-green-10 px-8",t,{"thank-you-badge-animated":c}),"data-qa":"thank-you-badge",children:[(0,Co.jsx)(Td,{className:"star star-1 star-v1","aria-hidden":!0}),(0,Co.jsx)(Td,{className:"star star-2 star-sm-v1","aria-hidden":!0}),(0,Co.jsx)(Td,{className:"star star-3 star-v2","aria-hidden":!0}),(0,Co.jsx)(Td,{className:"star star-4 star-sm-v2","aria-hidden":!0}),(0,Co.jsx)(bd,{className:"shrink-0 icon-fill font-size-20 text-green-90 me-2","aria-hidden":!0}),(0,Co.jsx)("p",{className:"body-2 text-truncate",children:i.translate("common.thankYouBadge")})]}),c&&(0,Co.jsx)("div",{className:(0,To.A)(r("fake-progress"),{"has-tribute":n&&!s})})]})},Od=(0,h.memo)(xd),kd=e=>{let{className:t}=e;const{controller:n}=Jo(Ar.THANK_YOU),i=(0,Ho.t)(),s=(0,ko.P)(),a=wa();return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Od,{className:"shrink-0"}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",s?"pt-10":"pt-8",t),children:(0,Co.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Co.jsxs)("div",{className:(0,To.A)("grow-1 d-flex flex-column",{"justify-center":!s}),children:[(0,Co.jsx)(Sd,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Co.jsx)("h2",{className:(0,To.A)("title-1 text-center mt-4",s?"text-ellipsis":"text-line-clamp-3"),"data-qa":"sharing-disable-thank-you-title",children:n.thankYouTitle}),(0,Co.jsx)("p",{className:(0,To.A)("thank-you-description text-center mt-2",s?"text-ellipsis":"text-line-clamp-5"),dangerouslySetInnerHTML:{__html:n.descriptionUpsell?n.descriptionUpsell:n.descriptionSharing},"data-qa":"sharing-disable-thank-you-text"})]})})}),(0,Co.jsx)(Zc,{className:(0,To.A)("pt-8",t),children:(0,Co.jsx)("div",{className:"d-flex justify-center",children:(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{a.emit(Na.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:i.translate("thankYouScreen.button")})})})]})},Id=(0,h.memo)(kd);var wd,Rd;function Md(){return Md=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Md.apply(this,arguments)}var Ld,Ud,Fd,jd=function(e,t){return h.createElement("svg",Md({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),wd||(wd=h.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"})),Rd||(Rd=h.createElement("polyline",{points:"22,6 12,13 2,6"})))},Bd=(0,h.forwardRef)(jd),Hd=(0,h.memo)(Bd);function qd(){return qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qd.apply(this,arguments)}var Gd,Vd=function(e,t){return h.createElement("svg",qd({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Ld||(Ld=h.createElement("circle",{cx:12,cy:12,r:1})),Ud||(Ud=h.createElement("circle",{cx:19,cy:12,r:1})),Fd||(Fd=h.createElement("circle",{cx:5,cy:12,r:1})))},Kd=(0,h.forwardRef)(Vd),Yd=(0,h.memo)(Kd);function zd(){return zd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zd.apply(this,arguments)}var Wd,$d=function(e,t){return h.createElement("svg",zd({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Gd||(Gd=h.createElement("path",{d:"m24 12c0-6.6288-5.3712-12-12-12s-12 5.3712-12 12c0 5.6256 3.8736 10.3488 9.1008 11.6448v-7.9776h-2.4768v-3.6672h2.4768v-1.5792c0-4.0848 1.848-5.976 5.856-5.976.7584 0 2.0736.1488 2.6064.2976v3.3216c-.2832-.0288-.7728-.0432-1.3872-.0432-1.968 0-2.7264.744-2.7264 2.6832v1.296h3.9216l-.672 3.6672h-3.2448v8.2464c5.9424-.72 10.5456-5.7792 10.5456-11.9136z",fill:"#0866ff"})))},Xd=(0,h.forwardRef)($d),Qd=(0,h.memo)(Xd);function Zd(){return Zd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zd.apply(this,arguments)}var Jd,eh=function(e,t){return h.createElement("svg",Zd({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Wd||(Wd=h.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},h.createElement("path",{d:"m2.66641 23.9977h18.66489c1.4726 0 2.6664-1.1938 2.6664-2.6664v-18.66489c0-1.47262-1.1938-2.66641-2.6664-2.66641h-18.66489c-1.47262 0-2.66641 1.19379-2.66641 2.66641v18.66489c0 1.4726 1.19379 2.6664 2.66641 2.6664z",fill:"#007ebb"}),h.createElement("path",{d:"m20.6642 20.6647h-3.5611v-6.0654c0-1.663-.6319-2.5923-1.9481-2.5923-1.4319 0-2.18.9671-2.18 2.5923v6.0654h-3.43196v-11.55446h3.43196v1.55636s1.0319-1.90937 3.4838-1.90937c2.4508 0 4.2054 1.49657 4.2054 4.59187zm-15.21543-13.06743c-1.16899 0-2.11625-.95469-2.11625-2.13213s.94726-2.13213 2.11625-2.13213c1.16898 0 2.11568.95469 2.11568 2.13213s-.9467 2.13213-2.11568 2.13213zm-1.7721 13.06743h3.57861v-11.55446h-3.57861z",fill:"#fff"}))))},th=(0,h.forwardRef)(eh),nh=(0,h.memo)(th);function ih(){return ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ih.apply(this,arguments)}var sh,ah,rh,oh=function(e,t){return h.createElement("svg",ih({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Jd||(Jd=h.createElement("path",{d:"m13.9139 10.4273 7.4524-8.6629h-1.766l-6.4709 7.52184-5.16835-7.52184h-5.96105l7.81552 11.3743-7.81552 9.0844h1.76609l6.83351-7.9433 5.4581 7.9433h5.9611l-8.1054-11.7958zm-2.4189 2.8117-.7919-1.1327-6.30067-9.01241h2.71261l5.08476 7.27331.7918 1.1326 6.6096 9.4543h-2.7127l-5.3935-7.7147z",fill:"#000"})))},ch=(0,h.forwardRef)(oh),lh=(0,h.memo)(ch);!function(e){e.FACEBOOK="Facebook",e.TWITTER="Twitter",e.LINKEDIN="Linkedin",e.EMAIL="Email",e.MORE="More",e.LINK="Link"}(sh||(sh={})),function(e){e.PAGE="page_thankyou",e.MODAL="modal_thankyou",e.HEADER="top_sharing_button"}(ah||(ah={})),function(e){e.SHARE_MORE_OPTIONS_ABORTED="shareMoreOptionsAborted"}(rh||(rh={}));const uh=(0,h.createContext)(null);function dh(){const e=(0,h.useContext)(uh);if(!e)throw new Error("Tracker is not provided");return e}const hh={width:"44px",height:"44px"},mh=e=>{let{as:t,type:n,href:i,label:s,icon:a,className:r,trackingElement:o,dataQa:c,onClick:l}=e;const u=null!=t?t:"button";return(0,Co.jsx)(u,{href:null!=i?i:void 0,type:null!=n?n:void 0,className:(0,To.A)("btn btn-default d-flex justify-center items-center py-0",r),style:hh,"aria-label":s,onClick:()=>null==l?void 0:l(),"data-tracking-element-name":o,"data-qa":c,children:a})},ph=e=>{const{state:t,controller:n}=Jo(Ar.THANK_YOU),i=(0,Ho.t)(),s=(0,ko.P)(),a=(0,Fo.$)(),r=dh(),{share:o,isAvailable:c}=((e,t)=>{const[n,i]=(0,h.useState)(!1),[s,a]=(0,h.useState)(!1),[r,o]=(0,h.useState)(null);(0,h.useEffect)((()=>{let t=!1;"function"==typeof navigator.share&&void 0!==navigator.canShare&&(t=navigator.canShare(e)),i(t)}),[e]);const c=(0,h.useCallback)((()=>(0,l.sH)(void 0,void 0,void 0,(function*(){if(n){a(!0);try{yield navigator.share(e)}catch(e){if(o(null==e?void 0:e.message),"AbortError"!==e.name||!t)throw e;t.customTrack({type:rh.SHARE_MORE_OPTIONS_ABORTED})}finally{a(!1)}}else o("Web Share API is not available or disabled.")}))),[n,e,t]);return(0,h.useMemo)((()=>({isAvailable:n,share:c,isSharing:s,errorMessage:r})),[n,c,s,r])})({text:t.sharing.sharingText,url:n.getSharingLink(sh.MORE)},r),u=s&&c;return(0,Co.jsx)("div",{className:(0,To.A)("text-center",e.className),role:"group","aria-label":i.translate("sharing.ariaLabel"),children:(0,Co.jsxs)("div",{className:"d-flex justify-center item-center",children:[t.sharing.showFacebook&&(0,Co.jsx)(mh,{type:"button",label:i.translate("sharing.facebookAriaLabel"),icon:(0,Co.jsx)(Qd,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>n.share(sh.FACEBOOK,ah.MODAL),trackingElement:"shareOnFacebook",dataQa:"share-via-facebook"}),t.sharing.showTwitter&&(0,Co.jsx)(mh,{type:"button",label:i.translate("sharing.twitterAriaLabel"),icon:(0,Co.jsx)(lh,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>n.share(sh.TWITTER,ah.MODAL),trackingElement:"shareOnTwitter",dataQa:"share-via-twitter"}),t.sharing.showLinkedin&&(0,Co.jsx)(mh,{type:"button",label:i.translate("sharing.linkedinAriaLabel"),icon:(0,Co.jsx)(nh,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>n.share(sh.LINKEDIN,ah.MODAL),trackingElement:"shareOnLinkedin",dataQa:"share-via-linkedin"}),t.sharing.showEmail&&(0,Co.jsx)(mh,{as:"a",href:a?void 0:n.getSharingLink(sh.EMAIL),label:i.translate("sharing.emailAriaLabel"),icon:(0,Co.jsx)(Hd,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",trackingElement:"shareOnEmail",dataQa:"share-via-email"}),u&&(0,Co.jsx)(mh,{type:"button",label:i.translate("sharing.moreOptionsAriaLabel"),icon:(0,Co.jsx)(Yd,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:o,trackingElement:"shareOnMoreOptions",dataQa:"share-via-more-options"})]})})},gh=(0,h.memo)(ph),yh=e=>{let{className:t}=e;const{controller:n}=Jo(Ar.THANK_YOU),i=(0,Ho.t)(),s=(0,ko.P)(),a=wa();return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Od,{className:"shrink-0"}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",s?"pt-10":"pt-8",t),children:(0,Co.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Co.jsxs)("div",{className:(0,To.A)("grow-1 d-flex flex-column",{"justify-center":!s}),children:[(0,Co.jsx)(Sd,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Co.jsx)("h2",{className:(0,To.A)("title-1 text-center",s?"text-ellipsis mt-6":"text-line-clamp-3 mt-4"),"data-qa":"thank-you-header-title",children:n.thankYouTitle}),(0,Co.jsx)("p",{className:(0,To.A)("thank-you-description text-center mt-2",s?"text-ellipsis":"text-line-clamp-5"),dangerouslySetInnerHTML:{__html:n.descriptionUpsell?n.descriptionUpsell:n.descriptionSharing},"data-qa":"thank-you-header-label"})]})})}),(0,Co.jsxs)(Zc,{className:(0,To.A)(s?"pt-12":"pt-8",t),children:[(0,Co.jsx)("p",{className:(0,To.A)("subtitle-4 text-center",s?"text-ellipsis":"text-line-clamp-2"),children:i.translate("sharing.label")}),(0,Co.jsx)(gh,{className:"mt-4"}),(0,Co.jsx)("div",{className:"d-flex justify-center mt-13",children:(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{a.emit(Na.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:i.translate("thankYouScreen.button")})})]})]})},fh=(0,h.memo)(yh),Sh=e=>{var t,n;const i=tc();return(0,Co.jsxs)("svg",{className:(0,To.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:48,viewBox:"0 0 48 48",width:null!==(n=e.width)&&void 0!==n?n:48,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.4762",width:"45",x:"1.5",y:"-9.47619",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feMorphology",{in:"SourceAlpha",operator:"erode",radius:"14.4762",result:"effect1_innerShadow_8986_17764"}),(0,Co.jsx)("feOffset",{dy:"-14.4762"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"12.0635"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.439937 0 0 0 0 0.429167 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_8986_17764"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-9.65079"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"4.8254"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.941667 0 0 0 0 0.0293161 0 0 0 0 0.0117708 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"effect1_innerShadow_8986_17764",mode:"normal",result:"effect2_innerShadow_8986_17764"})]}),(0,Co.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"14",width:"14",x:"29.5",y:"26",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:"-1",dy:"-1"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.843137 0 0 0 0 0 0 0 0 0 0.14902 0 0 0 0.75 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_8986_17764"})]}),(0,Co.jsxs)("linearGradient",{id:`c-${i}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ef5350"}),(0,Co.jsx)("stop",{offset:".766418",stopColor:"#f00703"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#d90400"})]}),(0,Co.jsx)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"13.5",x2:"26",xlinkHref:`#c-${i}`,y1:"9",y2:"40"}),(0,Co.jsxs)("radialGradient",{id:`e-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(8.99996281 14.49996639 -14.49996639 8.99996281 32.5 30)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Co.jsx)("stop",{offset:".674662",stopColor:"#e7e7e7"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#c4c4c4"})]}),(0,Co.jsx)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"33.9667",x2:"38.7609",xlinkHref:`#c-${i}`,y1:"28.3684",y2:"38.4087"}),(0,Co.jsx)("g",{filter:`url(#a-${i})`,children:(0,Co.jsx)("path",{d:"m24 43c41.6475-22.8943 15.6537-49.10252 0-33.05744-15.65373-16.04526-41.6475 10.16294 0 33.05744z",fill:`url(#d-${i})`})}),(0,Co.jsx)("circle",{cx:"37",cy:"33.5",fill:`url(#e-${i})`,r:"9.5"}),(0,Co.jsx)("g",{filter:`url(#b-${i})`,children:(0,Co.jsx)("path",{d:"m38.5 28.5c0-.8284-.6716-1.5-1.5-1.5s-1.5.6716-1.5 1.5v3.5h-3.5c-.8284 0-1.5.6716-1.5 1.5s.6716 1.5 1.5 1.5h3.5v3.5c0 .8284.6716 1.5 1.5 1.5s1.5-.6716 1.5-1.5v-3.5h3.5c.8284 0 1.5-.6716 1.5-1.5s-.6716-1.5-1.5-1.5h-3.5z",fill:`url(#f-${i})`})})]})},Eh=(0,h.memo)(Sh),Ah=e=>{let{className:t}=e;const n=(0,ko.P)(),i=wa();return(0,Co.jsxs)("button",{type:"button",className:(0,To.A)("btn btn-default h-auto d-flex items-center text-start text-wrap-normal px-6 py-4",t),onClick:()=>{i.emit(Na.SHOULD_HIDE,{shouldReopen:!0,tributeSelected:!0})},"data-qa":"tribute-make-another","data-tracking-element-name":"makeAnotherTribute",children:[(0,Co.jsx)(Eh,{className:"shrink-0 me-5",width:32,height:32,ariaHidden:!0}),(0,Co.jsx)(lu,{className:(0,To.A)("body-1 grow-1",n?"text-ellipsis":"text-line-clamp-2"),token:"thankYouScreen.makeAnotherTribute.button"})]})},Ch=(0,h.memo)(Ah),vh=e=>{var t,n;const i=(0,Mc.Y)();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:48,viewBox:"0 0 48 48",width:null!==(n=e.width)&&void 0!==n?n:48,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("linearGradient",{id:`a-${i}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#afd9ff"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#afd9ff",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`b-${i}`,gradientUnits:"userSpaceOnUse",x1:"50.5",x2:"31.9257",xlinkHref:`#a-${i}`,y1:"32",y2:"6.87716"}),(0,Co.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"16",x2:"20",y1:"39.5",y2:"40.5",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#8fbcff"}),(0,Co.jsx)("stop",{offset:".208333",stopColor:"#8fbcff",stopOpacity:".813559"}),(0,Co.jsx)("stop",{offset:".234375",stopColor:"#8fbcff",stopOpacity:"0"})]}),(0,Co.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"67.2852",x2:"2.79451",y1:"17.1454",y2:"39.9202",children:[(0,Co.jsx)("stop",{offset:".442708",stopColor:"#fff",stopOpacity:"0"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fff"})]}),(0,Co.jsx)("linearGradient",{id:`e-${i}`,gradientUnits:"userSpaceOnUse",x1:"25.5",x2:"40",xlinkHref:`#a-${i}`,y1:"20.5",y2:"27"}),(0,Co.jsx)("path",{d:"m4.88359 25.1745h.00002l.05609-.0474h.00001l.03057-.0259c3.24586-2.7466 4.28803-3.6284 39.39632-18.14832l-33.4844 25.29342c-4.27204 1.4893-7.23131 1.0342-8.7118-.4983-.40047-.6047-.53429-1.5383-.16141-2.6895.37824-1.1677 1.27292-2.5289 2.8746-3.884z",fill:"#8fbcff",stroke:`url(#b-${i})`}),(0,Co.jsx)("path",{d:"m47.7789 5.00045-36.6327 27.66835 3.9702 10.7136 2.3144-11.4342z",fill:"#5a9bfc"}),(0,Co.jsx)("path",{d:"m24.7306 34.3642-8.8354 7.6768 1.9178-9.4742z",fill:"#2169d6",stroke:`url(#c-${i})`}),(0,Co.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",fill:"#6ca7ff"}),(0,Co.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",fill:`url(#d-${i})`,fillOpacity:".4"}),(0,Co.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",stroke:`url(#e-${i})`})]})},Nh=(0,h.memo)(vh),bh=()=>{const{state:e}=Jo(Ar.THANK_YOU),t=(0,ko.P)();return(0,Co.jsxs)("a",{href:e.tributeDonorPortalLink,className:"btn btn-default h-auto d-flex items-center text-start text-wrap-normal px-6 py-4",target:"_blank",rel:"noreferrer","data-qa":"tribute-send-card","data-tracking-element-name":"completeDedication",children:[(0,Co.jsx)(Nh,{className:"shrink-0 me-5",width:32,height:32,ariaHidden:!0}),(0,Co.jsx)(lu,{className:(0,To.A)("body-1 grow-1",t?"text-ellipsis":"text-line-clamp-2"),token:"thankYouScreen.sendCard.button"})]})},Ph=(0,h.memo)(bh),Dh=e=>{let{className:t}=e;const{controller:n}=Jo(Ar.THANK_YOU),i=(0,Ho.t)(),s=(0,ko.P)(),a=wa();return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Od,{className:"shrink-0",hasTribute:!0}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",s?"pt-10":"pt-8",t),children:(0,Co.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Co.jsxs)("div",{className:(0,To.A)("grow-1 d-flex flex-column",{"justify-center":!s}),children:[(0,Co.jsx)(Sd,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Co.jsx)("h2",{className:(0,To.A)("title-1 text-center",s?"text-ellipsis mt-6":"text-line-clamp-3 mt-4"),children:n.thankYouTitle}),(0,Co.jsx)("p",{className:(0,To.A)("thank-you-description text-center mt-2",s?"text-ellipsis":"text-line-clamp-4"),dangerouslySetInnerHTML:{__html:n.descriptionTribute}})]})})}),(0,Co.jsxs)(Zc,{className:(0,To.A)(s?"pt-12":"pt-8",t),children:[(0,Co.jsx)(Ph,{}),(0,Co.jsx)(Ch,{className:"mt-3"}),(0,Co.jsx)("div",{className:"d-flex justify-center mt-8",children:(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{a.emit(Na.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:i.translate("thankYouScreen.button")})})]})]})},_h=(0,h.memo)(Dh),Th={[br.SHARING]:fh,[br.TRIBUTE]:_h,[br.DEFAULT]:Id},xh=e=>{const{state:t}=Jo(Ar.THANK_YOU),n=(0,ko.P)(),i=(0,Fo.$)(),s=Th[t.variant],a=(0,No.n)().getAskPageConfig().show,r=!n&&!i&&a&&!1;return(0,Co.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-thank-you",children:[n&&!a&&(0,Co.jsx)(pl,{}),(0,Co.jsx)(s,{className:(0,To.A)({"thank-you-screen-fade-in":r})})]})},Oh=(0,h.memo)(xh);var kh;function Ih(){return Ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ih.apply(this,arguments)}var wh=function(e,t){return h.createElement("svg",Ih({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),kh||(kh=h.createElement("path",{clipRule:"evenodd",d:"m2 14c0-6.62742 5.37258-12 12-12 6.6274 0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12-6.62742 0-12-5.3726-12-12zm12-14c-7.73199 0-14 6.26801-14 14 0 7.732 6.26801 14 14 14 7.732 0 14-6.268 14-14 0-7.73199-6.268-14-14-14zm-4.10223 5.74899c-.14294-.53346-.69128-.85004-1.22475-.7071-.53346.14294-.85005.69128-.7071 1.22474l.87766 3.27549c-1.42369 1.64968-2.03436 3.95478-1.42697 6.22158s2.2888 3.9578 4.34659 4.6746l.8777 3.2758c.143.5335.6913.85 1.2248.7071s.85-.6913.7071-1.2247l-.6378-2.3802c.6039.0055 1.2181-.0698 1.8287-.2334.3343-.0896.6565-.2027.965-.3371l.5933 2.214c.1429.5335.6913.8501 1.2247.7071.5335-.1429.8501-.6913.7071-1.2247l-.7558-2.8206c.8423-.7407 1.4859-1.6767 1.8788-2.7157.1953-.5166-.0651-1.0937-.5817-1.2891-.5166-.1953-1.0937.0651-1.2891.5817-.3369.8912-.9339 1.6736-1.7219 2.232-.452.3203-.9684.5679-1.538.7206-.8223.2203-1.649.214-2.417.0207-1.6417-.4133-3.01255-1.6788-3.48064-3.4257-.4681-1.747.08637-3.5283 1.30144-4.7071.5685-.55143 1.2813-.97021 2.1035-1.19054.5697-.15263 1.1407-.19634 1.6923-.14497.9617.08956 1.8698.46873 2.6072 1.07201.4275.3497 1.0575.2867 1.4072-.1408.3497-.42746.2867-1.05748-.1408-1.40719-.8597-.70339-1.885-1.19215-2.9848-1.41247l-.7557-2.82032c-.1429-.53347-.6913-.85005-1.2248-.70711-.5334.14294-.85.69128-.7071 1.22475l.5932 2.21369c-.3345.03787-.67.10099-1.0043.19056-.6106.1636-1.1801.40556-1.7004.71221z",fill:"currentColor",fillRule:"evenodd"})))},Rh=(0,h.forwardRef)(wh),Mh=(0,h.memo)(Rh);const Lh=e=>{const{className:t,prevContent:n,content:i,disabled:s,onAddComment:a,onHighlight:r}=e,o=(0,Ho.t)(),[c,l]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{if(n===i||!i)return void l(!1);r(),l(!0);const e=window.setTimeout((()=>{l(!1)}),400);return()=>{window.clearTimeout(e)}}),[i,n,r]),(0,Co.jsx)("div",{className:t,children:(0,Co.jsxs)("button",{type:"button",className:(0,To.A)("comment-btn body-3",{"is-highlighted":c}),dir:"auto",disabled:s,onClick:()=>a(),"data-qa":"comment-link","data-tracking-element-name":"navigateToComment",children:[(0,Co.jsx)("span",{className:"comment-highlight"}),i?(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("span",{className:"comment-btn-title",children:o.translate("donateForm.comment.commentAdded")}),(0,Co.jsx)("span",{className:"comment-btn-link",title:i,dir:"auto",children:i})]}):(0,Co.jsx)(Co.Fragment,{children:(0,Co.jsx)("span",{className:"comment-btn-link",children:o.translate("donateForm.comment.label")})})]})})},Uh=(0,h.memo)(Lh);var Fh=n(6994),jh=n(2599);class Bh{constructor(e){let{digits:t,withoutFraction:n,getCurrencyFormat:i,locale:s,donationType:a,setZeroOnBlur:r}=e;this.digits=t,this.withoutFraction=n,this.locale=s,this.donationType=a,this.getCurrencyFormat=i,this.setZeroOnBlur=r,this.groupSeparator=this.getCurrencyFormat().groupSeparator,this.decimalSeparator=this.getCurrencyFormat().decimalSeparator}get alternativeDecimalSeparator(){return"."===this.decimalSeparator?",":"."}parseAmountOrNull(e){return Number.isNaN(e)?null:e}formatValue(e){let{value:t,minimumFractionDigits:n=0,currencySymbol:i=""}=e;const s=null===t?"":Za(t/Math.pow(10,this.digits),n,this.digits,this.locale);return`${i}${this.removeFractionZeroes(s,n)}`}convertStringToNumber(e,t){const n=this.toJsFloatFormat(e),i=this.parsePrice(n,t);return Math.round(Number.parseFloat(i)*Math.pow(10,this.digits))}handleKeyDown(e,t,n){if(!(this.withoutFraction?Bh.DIGITS_REG_EXP:Bh.DIGITS_WITH_DOT_COMMA_REG_EXP).test(e.key)&&e.key&&1===e.key.length&&!e.ctrlKey&&!e.metaKey)return e.preventDefault();const i=t.value;if(i.includes(this.decimalSeparator)&&(","===e.key||"."===e.key))return e.preventDefault();const s=i.split(this.decimalSeparator),a=s[0],r=a?a.length:0,o=s[1];if((o?o.length:0)>=this.digits&&e.key&&1===e.key.length&&t.selectionStart&&t.selectionStart===t.selectionEnd&&t.selectionStart>r&&!e.ctrlKey&&!e.metaKey)return e.preventDefault();n()}handlePaste(e,t){e.preventDefault(),t((e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||window.clipboardData).getData("text"))}handleChange(e,t,n,i,s){let a=e.target.value;if(t){const e=this.getCommaPosition(n,a);-1!==e&&(a=a.substring(0,e)+this.decimalSeparator+a.substring(e+1))}const r=new RegExp(`\\${this.decimalSeparator}$`);(a.match(r)||n.match(r)&&!a.includes(this.decimalSeparator))&&i(a);const o=new RegExp(`[${this.decimalSeparator}][0-9]{0,${this.digits}}$`),c="0"===a[a.length-1]&&e.target.selectionStart===a.length,l="0"===n[n.length-1]&&n.length>a.length&&n.length===Number(e.target.selectionStart)+1;a.match(o)&&(c||l)&&i(a),s(a)}handleBlur(e,t){this.setZeroOnBlur&&""===e.target.value&&(e.target.value="0"),t(e)}getInputMode(){return this.withoutFraction?"numeric":"decimal"}calculateInitialCursorPosition(e,t){const n=e.slice(0,t),i=[...n].filter((e=>e===this.groupSeparator)).length;return n.length-i}calculateFormattedCursorPosition(e,t){let n=0,i=0;for(;i<t&&n<e.length;)e[n]!==this.groupSeparator&&i++,n++;return n}limitCryptoAmount(e){const t=e.split("."),n=t[0];if(n.length>Bh.CRYPTO_MAXIMUM_INTEGER_LENGTH&&(e=e.replace(/^([0-9]*)/,n.slice(0,Bh.CRYPTO_MAXIMUM_INTEGER_LENGTH))),e.includes(".")){const n=t[1];n.length>Bh.CRYPTO_MAXIMUM_FRACTION_LENGTH&&(e=e.replace(/[.]([0-9]*)/,n.slice(0,Bh.CRYPTO_MAXIMUM_FRACTION_LENGTH)))}return e}parsePrice(e,t){let n=e||"";if(n=n.replace(/[^\d.]/g,""),this.donationType===Ae.MONEY){const e=(0,jh.Bm)(t);n=n.slice(0,e+2)}return this.donationType===Ae.CRYPTO&&(n=this.limitCryptoAmount(n)),Number.parseFloat(n).toFixed(this.withoutFraction?0:this.digits)}getCommaPosition(e,t){const n=e.length>=t.length?e:t,i=e.length>=t.length?t:e,s=n.split("");for(const e in s)if(s[e]===this.alternativeDecimalSeparator&&s[e]!==i.charAt(Number(e)))return Number(e);return-1}toJsFloatFormat(e){return e.replace(new RegExp(`\\${this.groupSeparator}`,"g"),"").replace(new RegExp(`\\${this.decimalSeparator}`,"g"),".")}removeFractionZeroes(e,t){const n=new RegExp(`\\${this.decimalSeparator}0+$`);return 0!==t?e.replace(n,""):e}}Bh.DIGITS_WITH_DOT_COMMA_REG_EXP=/[0-9.,]/,Bh.DIGITS_REG_EXP=/[0-9]/,Bh.CRYPTO_MAXIMUM_FRACTION_LENGTH=8,Bh.CRYPTO_MAXIMUM_INTEGER_LENGTH=9;const Hh=(0,h.forwardRef)((function(e,t){var{className:n,placeholder:i,disabled:s,trackingElement:a,withoutFraction:r,digits:o,donationType:c,value:u,dataQa:d,currency:m,onChange:p,onFocus:g,onBlur:y,onClick:f}=e,S=(0,l.Tt)(e,["className","placeholder","disabled","trackingElement","withoutFraction","digits","donationType","value","dataQa","currency","onChange","onFocus","onBlur","onClick"]);const[E,A]=(0,h.useState)(!1),[C,v]=(0,h.useState)(null),N=(0,Ho.t)(),b=function(e){let{withoutFraction:t,digits:n,donationType:i,intl:s}=e;return(0,h.useMemo)((()=>new Bh({withoutFraction:t,getCurrencyFormat:()=>s.getCurrencyFormat(),locale:s.locale,digits:n,donationType:i})),[n,i,s,t])}({withoutFraction:r,digits:o,intl:N,donationType:c}),P=(0,h.useMemo)((()=>b.alternativeDecimalSeparator),[b]),D=(0,h.useMemo)((()=>b.getInputMode()),[b]),_=(0,h.useRef)(null),T=(0,h.useCallback)((e=>b.formatValue({value:e,minimumFractionDigits:E?0:o})),[b,E,o]),[x,O]=(0,h.useState)(T(u)),[k,I]=(0,h.useState)(m),w=(0,h.useRef)(!1),R=(0,h.useCallback)(((e,t)=>b.convertStringToNumber(e,t)),[b]);(0,h.useEffect)((()=>{R(x,k)!==u&&(I(m),O(T(u)))}),[u,T,R,x,m,k]),(0,h.useEffect)((()=>{if(null===_.current||null===C)return;const e=b.calculateFormattedCursorPosition(x,C);_.current.selectionStart=e,_.current.selectionEnd=e}),[C,x,b]);const M=(0,h.useCallback)((e=>{const t=R(e,m);p(b.parseAmountOrNull(t))}),[R,p,b,m]);return(0,h.useImperativeHandle)(t,(()=>_.current)),(0,Co.jsx)("input",Object.assign({ref:_,className:n,autoComplete:"off",value:x,onChange:e=>{E||A(!0),b.handleChange(e,w.current,x,O,(t=>{var n;const i=b.calculateInitialCursorPosition(t,null!==(n=e.target.selectionStart)&&void 0!==n?n:0);v(i),M(t)}))},onPaste:e=>{b.handlePaste(e,(e=>{M(e)}))},onKeyDown:e=>{_.current&&b.handleKeyDown(e,_.current,(()=>{w.current=e.key===P}))},onFocus:()=>{g&&g()},onBlur:e=>{y&&b.handleBlur(e,(()=>{y()}))},onClick:()=>{f&&f()},disabled:s,inputMode:D,placeholder:i,"data-qa":d,"data-tracking-element-name":a,"data-testid":"price-input"},S))})),qh=(0,h.memo)(Hh),Gh=(0,h.forwardRef)(((e,t)=>{const[n,i]=(0,h.useState)(!1),{onAmountChange:s,onAmountInputBlur:a,onAmountInputFocus:r,currencyService:o,withoutFraction:c=!0,qaActiveAttribute:u,qaDisabledAttribute:d,trackingElement:m,placeholder:p,donationType:g,isCustomAmount:y,isPDUPriceInput:f,className:S,canModifyAmount:E,showCurrencySymbol:A,useSpaceAfterCurrencySymbol:C,showDisabledInput:v,disabled:N,currency:b,currencyCodeNode:P,canSelectCurrency:D,amount:_,hasError:T,errorLabel:x}=e,O=(0,l.Tt)(e,["onAmountChange","onAmountInputBlur","onAmountInputFocus","currencyService","withoutFraction","qaActiveAttribute","qaDisabledAttribute","trackingElement","placeholder","donationType","isCustomAmount","isPDUPriceInput","className","canModifyAmount","showCurrencySymbol","useSpaceAfterCurrencySymbol","showDisabledInput","disabled","currency","currencyCodeNode","canSelectCurrency","amount","hasError","errorLabel"]),k=(0,Ho.t)(),I=(0,ko.P)(),w=(0,Mc.Y)(),R=Mo(),M=(0,h.useCallback)((e=>{s(e)}),[s]),L=(0,h.useCallback)((()=>{a&&a(),i(!1)}),[a]),U=(0,h.useCallback)((()=>{r&&r(),i(!0)}),[r]),F=/\s/.test(k.formatCurrency(null!=_?_:0,{currency:b,display:"short"})),j=C&&F,B=o.getDigits(b),H=Za((_||0)/Math.pow(10,B),0,2);return(0,Co.jsxs)("div",{className:(0,To.A)(S,{"text-color":g===Ae.CRYPTO,"text-white":v,"has-error":T,focus:n,disabled:!E}),"data-qa":"input-wrapper",children:[A&&o.getSymbol(b)&&(null!==_||f)&&(0,Co.jsxs)("div",{className:(0,To.A)("shrink-0 self-center text-sans-serif",{"label-3 text-gray-80 me-1":!f&&!y}),"aria-hidden":"true","data-qa":"currency-symbol",children:[o.getSymbol(b),j&&(0,Co.jsx)(Co.Fragment,{children:""})]}),(0,Co.jsxs)("label",{className:(0,To.A)("grow-1",{"p-rel":f}),"data-qa":u+"-label",children:[(0,Co.jsxs)("span",{className:"sr-only",children:[k.translate("donateForm.donationAmountField.label")," ",b]}),f&&(0,Co.jsx)("span",{className:"price-control invisible","aria-hidden":"true","data-qa":u+"-value",children:H}),E?(0,Co.jsx)(qh,Object.assign({ref:t,className:(0,To.A)(R("price-control"),{"p-abs top-left bottom-right":f,"body-1":null===_&&!y&&!f||null===_&&y&&I,"body-3":null===_&&y&&!I,disabled:N}),digits:o.getDigits(b),value:_,onChange:M,onBlur:L,onFocus:U,withoutFraction:c,pattern:"[\\d,.\\s]*",placeholder:"string"==typeof p?p:k.translate("donateForm.donationAmountField.placeholder"),disabled:v||N,"aria-invalid":T,"aria-describedby":`price-control-${w}-error`,dataQa:u,trackingElement:m,donationType:g,currency:b},O)):(0,Co.jsx)("span",{className:R("price-control"),"data-qa":d,children:k.formatCurrency(_||0,{currency:b,display:"floatcents",withoutPrefix:!0})})]}),T&&x&&(0,Co.jsxs)(Co.Fragment,{children:[!f&&(0,Co.jsx)(Jl.U,{className:"shrink-0 self-center me-1","data-testId":"price-control-error",children:(0,Co.jsx)("p",{dangerouslySetInnerHTML:{__html:x}})}),(0,Co.jsx)("p",{id:`price-control-${w}-error`,className:"sr-only",dangerouslySetInnerHTML:{__html:x},"data-testid":"amount-input-error"})]}),f?P:(0,Co.jsxs)("div",{className:"shrink-0 self-center p-rel",children:[P,(0,Co.jsxs)("span",{className:(0,To.A)("currency-select-label d-flex items-center",{"ps-2 pe-1-5 border-radius-6":D,"px-2-5":!D,"py-2":!y,"py-1":y}),"data-qa":"selected-currency","aria-hidden":"true",children:[b,D&&(0,Co.jsx)(Fh.A,{className:"currency-select-arrow icon-stroke font-size-16 shrink-0"})]})]})]})}));Gh.displayName="_CurrencyInputSection";const Vh=(0,h.memo)(Gh),Kh=e=>{let{goal:t,className:n,disabled:i}=e;const s=(t?null==t?void 0:t.name:"").trim().split(" "),a=s.slice(0,-1).join(" "),r=s.length>1?` ${s.pop()}`:s.pop();return(0,Co.jsxs)("span",{className:(0,To.A)("text-decor",n,{"pointer-events-none":i}),"data-qa":"selected-goal",children:[a,(0,Co.jsxs)("span",{className:"text-nowrap",children:[r,(0,Co.jsx)("span",{className:"icon-slot icon-slot-14 d-inline-block font-size-14","aria-hidden":!0,children:(0,Co.jsx)(Fh.A,{className:"icon-stroke p-abs centered mt-0-5"})})]})]})},Yh=(0,h.memo)(Kh),zh=(0,h.forwardRef)(((e,t)=>{var n;const{goal:i,goals:s,goalKey:a,isEditable:r,disabled:o,changeGoal:c,hasError:l,isDesignationRequired:u}=e,d=(0,Ho.t)(),h=dh(),m=(0,ko.P)(),p=tc(),g=e=>{c(e.target.value),h.trackClick("goalSelector",e.target)},y=s.map((e=>({value:e.key,label:e.name})));return(0,Co.jsx)(Co.Fragment,{children:u?(0,Co.jsx)(Zl,{setRef:t,id:`designation-${p}`,label:d.translate("donateForm.designation.label"),labelFloating:!0,error:l,className:(0,To.A)({"pe-16":l}),formLabelClass:(0,To.A)({"pe-12":l}),formGroupClass:(0,To.A)(e.className,{shake:e.shake}),value:null!=a?a:"",disabled:o,"aria-required":!0,"aria-describedby":`designation-${p}-error`,onChange:g,dataQa:"goal-selector","data-tracking-element-name":"goalSelect",options:y,children:l&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-10",dataQa:"goal-select",children:d.translate("donateForm.designation.error.required")}),(0,Co.jsx)("p",{id:`designation-${p}-error`,className:"sr-only",children:d.translate("donateForm.designation.error.required")})]})}):(0,Co.jsx)("div",{className:(0,To.A)("designation self-start",e.className),"data-qa":"goal-component",children:r?(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("select",{id:`designation-${p}`,className:"designation-select p-abs top-left bottom-right max-w-100 font-size-16 text-noselect p-0 border-0 m-0 overflow-hidden cursor-pointer z-index-1",value:null!=a?a:"",disabled:o,"aria-hidden":"true",onChange:g,"data-qa":"goal-selector","data-tracking-element-name":"goalSelect",children:s.map((e=>(0,Co.jsx)("option",{value:e.key,children:e.name},e.key)))}),(0,Co.jsxs)("label",{htmlFor:`designation-${p}`,className:(0,To.A)("designation-label",m?"text-ellipsis":"text-line-clamp-2"),"data-qa":"goal-selector-label",children:[d.translate("donateForm.designation.label"),(0,Co.jsx)(Yh,{goal:i,className:"designation-text ms-1",disabled:o})]})]}):(0,Co.jsxs)("p",{className:m?"text-ellipsis":"text-line-clamp-2",children:[d.translate("donateForm.designation.label"),(0,Co.jsx)("span",{className:"ms-1","data-qa":"selected-goal",children:null!==(n=null==i?void 0:i.name)&&void 0!==n?n:""})]})})})}));zh.displayName="DesignationSection";const Wh=(0,h.memo)(zh),$h={background:"rgba(255, 255, 255, 0.9)"},Xh=["top","bottom"],Qh=e=>{const{className:t,label:n,labelOptional:i,labelFloating:s,selectedOption:a,options:r,value:o,placeholder:c,displayName:u,inputClasses:d,loading:m,showIcons:p,showArrow:g,hint:y,hintAriaLabel:f,allowClear:S,maxLength:E,hasError:A,errorLabel:C,disabled:v,SelectedIconToRender:N,ListItemToRender:b,filterRegex:P,autoComplete:D="new-password",dataQa:_,trackingElement:T,autoFocus:x,autoFocusMode:O,onChange:k,onSelect:I,onBlur:w,onClear:R,onFocus:M}=e,L=(0,l.Tt)(e,["className","label","labelOptional","labelFloating","selectedOption","options","value","placeholder","displayName","inputClasses","loading","showIcons","showArrow","hint","hintAriaLabel","allowClear","maxLength","hasError","errorLabel","disabled","SelectedIconToRender","ListItemToRender","filterRegex","autoComplete","dataQa","trackingElement","autoFocus","autoFocusMode","onChange","onSelect","onBlur","onClear","onFocus"]),U=(0,ko.P)(),F=(0,Ho.t)(),j=(0,zo.Q)(),B=(0,wo.wf)(),[H,q]=(0,h.useState)(!1),[G,V]=(0,h.useState)(!1),[K,Y]=(0,h.useState)(null),z=H&&!!r.length,W=(0,h.useRef)(null),$=(0,h.useRef)(null),X=(0,h.useRef)(null),Q=(0,h.useRef)(null),Z=e=>{const t=I(e);V(!1),t||J()},J=()=>{if(q(!1),!$.current)throw new Error("inputRef was not provided");$.current.blur(),w&&w()},ee=tc();(0,h.useImperativeHandle)(e.inputRef,(()=>$.current),[]);const te=void 0!==u?u:o,ne=(null==o?void 0:o.length)>0;return(0,Co.jsxs)("div",{ref:W,className:(0,To.A)("search-select",t),children:[(0,Co.jsxs)(au.t,Object.assign({setRef:$,id:`search-select-${ee}`,label:n,labelFloating:s,labelOptional:i?F.translate("common.optional"):"",placeholder:c,customPrefix:p&&N&&(0,Co.jsx)(N,{option:a,value:o,options:r,disabled:v}),className:(0,To.A)("search-select-input",d,{"search-select-input-active":z,"search-select-input-offset-start":p,"search-select-input-offset-end":S,"search-select-input-with-arrow":g,"pe-10":A}),formLabelClass:(0,To.A)({"search-select-label-offset-start":p,"pe-6":S||A}),value:te,autoComplete:D,maxLength:E,disabled:v,error:A,role:"combobox","aria-autocomplete":"list","aria-controls":`${ee}-search-select-dropdown`,"aria-expanded":z,"aria-activedescendant":`search-select-option-${K}`,"aria-describedby":`search-select-${ee}-error`,dataQa:_,dataTestId:"search-input",dataTrackingElementName:T,onChange:e=>{return t=e.target.value,void(k&&k((n=t,void 0===P?n:n.split("").filter((e=>P.test(e))).join(""))));var t,n},onFocus:()=>{q(!0),M&&M()},onBlur:()=>!G&&J(),onKeyDown:e=>{if(void 0!==P&&!P.test(e.key))return void e.preventDefault();if(!z)return;const{currentOptionIdx:t,needSelectOption:n,closeDropdown:i}=(0,Oo.t)(e,K,r.length);i?J():n&&null!==t?Z(r[t].id):null!==t&&Y(t)},autoFocus:x,autoFocusMode:O},L,{children:[(!!y||S)&&(0,Co.jsxs)("div",{className:"p-abs centered-right d-flex items-center me-4",children:[!!y&&(0,Co.jsx)(Co.Fragment,{children:(0,Co.jsx)(Nc.S,{content:!v&&y,trigger:"click",className:U?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:j?"left":"right",fallbackPlacements:Xh,maxWidth:"220px",rootContainer:B,children:(0,Co.jsx)("button",{type:"button",className:"btn-icon btn-icon-round font-size-18 text-gray-40 shrink-0 ms-1-5",disabled:v,"aria-label":f,"data-qa":"search-select-help-button",children:(0,Co.jsx)(Hl.A,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":j}),"aria-hidden":!0})})})}),(0,Co.jsx)(xo.A,{classNames:"rtg-clear-button",nodeRef:Q,in:ne,timeout:100,mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)("button",{ref:Q,type:"button",className:"btn-icon font-size-18 text-gray-60 shrink-0 ms-1-5",disabled:v,"aria-label":F.translate("common.clearButtonAriaLabel"),"data-qa":"search-select-clear-button",onClick:R,children:(0,Co.jsx)(xl,{className:"icon-stroke icon-stroke-2 d-block","aria-hidden":!0})})})]}),A&&C&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:(0,Co.jsx)("p",{dangerouslySetInnerHTML:{__html:C}})}),(0,Co.jsx)("p",{id:`search-select-${ee}-error`,className:"sr-only",dangerouslySetInnerHTML:{__html:C}})]})]})),z&&(0,Co.jsxs)("ul",{ref:X,id:`${ee}-search-select-dropdown`,className:"search-select-dropdown custom-scrollbar",role:"listbox","data-testid":"menu",children:[m&&(0,Co.jsx)("li",{className:"p-abs top-left bottom-right d-flex items-center justify-center z-index-2",style:$h,"aria-label":F.translate("common.loading"),role:"status","aria-live":"polite",children:(0,Co.jsx)("span",{className:"spinner spinner-lg spinner-primary","aria-hidden":!0})}),r.map(((e,t)=>(0,Co.jsx)("li",{id:`search-select-option-${t}`,className:(0,To.A)("search-select-option",{"search-select-option-highlighted":t===K}),role:"option","aria-selected":t===K,"data-testid":"menuitem","data-tracking-element-name":T,"data-qa":_+"-item",onMouseDown:()=>V(!0),onClick:()=>Z(e.id),onMouseMove:()=>Y(t),children:b?(0,Co.jsx)(b,{option:e,showIcons:!0}):e.value},e.id)))]})]})};Qh.displayName="_SearchManualSelect";const Zh=(0,h.memo)(Qh),Jh=e=>{const{options:t,selectedOption:n,className:i,label:s,labelOptional:a,labelFloating:r,placeholder:o,shouldSearchById:c,displayName:u,clearOnFocus:d,isDynamicOptions:m,showArrow:p=!0,showIcons:g,SelectedIconToRender:y,ListItemToRender:f,disabled:S,hasError:E,trackingElement:A,dataQa:C,filterRegex:v,autoFocus:N,autoFocusMode:b,onChange:P,onSelect:D,onBlur:_}=e,T=(0,l.Tt)(e,["options","selectedOption","className","label","labelOptional","labelFloating","placeholder","shouldSearchById","displayName","clearOnFocus","isDynamicOptions","showArrow","showIcons","SelectedIconToRender","ListItemToRender","disabled","hasError","trackingElement","dataQa","filterRegex","autoFocus","autoFocusMode","onChange","onSelect","onBlur"]),[x,O]=(0,h.useState)((null==n?void 0:n.id)||""),[k,I]=(0,h.useState)(u),w=void 0!==u;(0,h.useEffect)((()=>{(null==n?void 0:n.id)&&O(null==n?void 0:n.id),w&&I(u)}),[u,w,n]);const R=(0,h.useCallback)((e=>(D(e),!1)),[D]),M=(0,h.useCallback)((e=>{O(e),P&&P(e),w&&I(e)}),[w,P]),L=(0,h.useMemo)((()=>{if(!t.length)return[];if(m)return t;const e=t.find((e=>{let{id:t}=e;return t===(null==n?void 0:n.id)}));if(x===(null==e?void 0:e.id))return[...t];const i=x.toLowerCase();return c?t.filter((e=>{let{id:t,value:n}=e;return n.toLowerCase().includes(i)||t.toLowerCase().includes(i)})):t.filter((e=>{let{value:t}=e;return t.toLowerCase().includes(i)}))}),[t,m,x,c,n]),U=(0,h.useCallback)((()=>{(null==n?void 0:n.id)?O(n.id):O(""),w&&I(u),null==_||_()}),[u,w,n,_]),F=(0,h.useCallback)((()=>{d&&w&&I("")}),[d,w]);return(0,Co.jsx)(Zh,Object.assign({options:L,value:x,onChange:M,onSelect:R,onBlur:U,onFocus:F,className:i,placeholder:o,label:s,labelOptional:a,labelFloating:r,displayName:k,isDynamicOptions:m,showArrow:p,showIcons:g,SelectedIconToRender:y,ListItemToRender:f,selectedOption:n,disabled:S,hasError:E,trackingElement:A,dataQa:C,filterRegex:v,autoFocus:N,autoFocusMode:b},T))};Jh.displayName="_SearchFilterSelect";const em=(0,h.memo)(Jh),tm=e=>{let{inHonorOfMaxLength:t,className:n,isActive:i,sharingEnabled:s,labelType:a,name:r,disabled:o,onInputFocusChange:c,onToggleTribute:l,onChangeTributeName:d}=e;const m=(0,Ho.t)(),p=(0,Fo.$)(),g=(0,zo.Q)(),y=(0,ko.P)(),f=tc(),S=(0,wo.wf)(),[E,A]=(0,h.useState)(!1),[C,v]=(0,h.useState)(!1),N=i&&!p&&C,b=(0,No.n)(),P=e=>{v(e),c&&c(e)};return(0,Co.jsxs)("div",{className:n,children:[(0,Co.jsx)(Yl,{className:"body-3",customLabelClasses:"line-height-20",checked:null!=i&&i,disabled:o,dataQa:"tribute-give-checkbox",trackingElement:"tributeCheckbox",onChange:()=>{A(!0),l()},children:(0,Co.jsx)("span",{className:"text-truncate body-3","data-qa":"tribute-label",children:{[u.dR.IN_HONOR_MEMORY]:b.allowLegacyTributeLabel?m.translate("donateForm.tribute.label.inHonorMemory"):m.translate("donateForm.tribute.label.dedication"),[u.dR.DEDICATION]:m.translate("donateForm.tribute.label.dedication")}[a]})}),i&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Nc.S,{content:m.translate("donateForm.tribute.tooltipLabel"),trigger:"manual",manualOpen:N&&!y&&s,className:y?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:g?"right":"left",maxWidth:"220px",rootContainer:S,"data-qa":"tribute-hint",children:(0,Co.jsx)("div",{children:(0,Co.jsx)(au.t,{id:`tribute-${f}`,label:m.translate("donateForm.tribute.inputPlaceholder"),labelFloating:!0,formGroupClass:y?"mt-3":"mt-2",autoFocus:E,autoFocusMode:al.Q.ALL,placeholder:m.translate("donateForm.tribute.inputPlaceholder"),value:null!=r?r:"",maxLength:t,disabled:o,onFocus:()=>P(!0),onBlur:()=>P(!1),onChange:e=>d(e.target.value),dataQa:"tribute-name"})})}),s&&y&&(0,Co.jsx)("p",{className:"body-3 text-ellipsis mt-1-5","data-qa":"tribute-hint",children:m.translate("donateForm.tribute.tooltipLabel")})]})]})},nm=(0,h.memo)(tm);var im,sm;function am(){return am=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},am.apply(this,arguments)}var rm=function(e,t){return h.createElement("svg",am({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),im||(im=h.createElement("circle",{cx:11,cy:11,r:8})),sm||(sm=h.createElement("line",{x1:21,y1:21,x2:16.65,y2:16.65})))},om=(0,h.forwardRef)(rm),cm=(0,h.memo)(om);const lm=(0,h.forwardRef)(((e,t)=>{if(void 0!==e.options){const n=e.options.find((t=>{let{id:n,value:i}=t;return n===e.name||i===e.name}));let i="";return n&&(i=n.id.toLowerCase()),i?(0,Co.jsx)("span",{ref:t,className:(0,To.A)(`crypto-icon crypto-icon-${i} crypto-icon-${e.size}`,e.className),style:e.style,"aria-hidden":e.ariaHidden}):(0,Co.jsx)(cm,{className:"icon-stroke font-size-20 text-gray-60","aria-hidden":!0})}const n=e.name.toLowerCase();return(0,Co.jsx)("span",{ref:t,className:(0,To.A)(`crypto-icon crypto-icon-${n} crypto-icon-${e.size}`,e.className),style:e.style,"aria-hidden":e.ariaHidden})}));lm.displayName="RawCryptoIcon";const um=(0,h.memo)(lm),dm=e=>(0,Co.jsxs)(Co.Fragment,{children:[e.showIcons&&(0,Co.jsx)(um,{name:e.option.id,size:"sm",className:"shrink-0 me-2",ariaHidden:!0}),(0,Co.jsx)("span",{className:"text-ellipsis",children:e.option.value})]}),hm=e=>(0,Co.jsx)("div",{className:"search-select-input-icon","aria-hidden":!0,children:(0,Co.jsx)(um,{name:e.value,size:"md",options:e.options})}),mm=(0,h.memo)(hm);var pm=n(2766);const{useAddFieldToScroll:gm,useScrollToFieldsTrigger:ym,ScrollToFieldsProvider:fm}=(0,pm.J)(),Sm=()=>{const{state:e,controller:t}=Jo(Cr.CRYPTO_CURRENCY),n=(0,Ho.t)(),i=(0,ko.P)(),s=tc(),a=(0,Fo.$)(),r=(0,h.useRef)(null),o=(0,h.useRef)(null);(0,rl.f)({ref:r,autoFocus:!0,mode:al.Q.DESKTOP});const c=(0,h.useRef)(null),l=(0,No.n)(),u=Du(e.designationShakeKey,0!==e.designationShakeKey),d=cc(),[m,p]=(0,h.useState)(!1),[g,y]=(0,h.useState)(!1),[f,S]=(0,h.useState)(!1),E=(0,h.useCallback)((()=>f?n.translate("donateForm.donationAmountField.error.crypto.required"):m?n.translate("donateForm.donationAmountField.error.crypto.min",{amount:n.formatCurrency(e.minAmount,{currency:"USD",display:"round"})}):g?n.translate("donateForm.donationAmountField.error.crypto.max",{amount:n.formatCurrency(e.maxAmount,{currency:"USD",display:"round"})}):""),[n,g,m,f,e.maxAmount,e.minAmount]),A=(0,h.useMemo)((()=>m||g||f),[m,g,f]),C=(0,h.useMemo)((()=>e.currencies.map((e=>{let{name:t,code:n}=e;return{id:n,value:t}}))),[e.currencies]),v=(0,h.useMemo)((()=>({id:e.currencyCode,value:e.currencyName})),[e.currencyCode,e.currencyName]),N=(0,h.useCallback)((e=>{t.changeCryptoCurrency(e)}),[t]),b=(0,h.useCallback)((e=>{t.changeAmount(e)}),[t]),P=(0,h.useCallback)((()=>{t.validateAmount(),p(!a&&e.errors.amount.min),y(!a&&e.errors.amount.max),S(!a&&e.errors.amount.required)}),[t,a,e.errors.amount.min,e.errors.amount.max,e.errors.amount.required]);(0,h.useEffect)((()=>{o.current&&(p(!a&&e.errors.amount.min),y(!a&&e.errors.amount.max),S(!a&&e.errors.amount.required))}),[o,a,e.errors.amount.min,e.errors.amount.max,e.errors.amount.required]);const D=(0,h.useCallback)((()=>t.toggleTribute()),[t]),_=(0,h.useCallback)((e=>{t.changeTributeName(e)}),[t]),T=(0,h.useCallback)((e=>t.changeGoal(e)),[t]),x=(0,h.useCallback)((()=>t.savePrevComment()),[t]),O=(0,h.useCallback)((()=>t.addComment()),[t]),[k,I]=(0,h.useState)(!1),w=(0,Ol.D)((e=>I(e))),R=ym();gm(r,(e=>e.amount.min||e.amount.max||e.amount.required)),gm(c,(e=>e.designation.required));const M=!l.preselectDesignation;return(0,Co.jsxs)("form",{onSubmit:n=>{if(n.preventDefault(),R(),!e.livemode)return w.set([!0]),void w.set([!1],3e3);t.leave()},className:"flow-screen",children:[(0,Co.jsx)(il,{autoFocus:i,children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("cryptoCurrencyScreen.title")}`})}),(0,Co.jsx)(pl,{className:"border-bottom-0",titleFullWidth:!0,children:(0,Co.jsxs)("div",{className:(0,To.A)("d-flex items-center justify-center",i?"pt-3 pb-2":"pt-6 pb-4"),children:[(0,Co.jsx)(Mh,{className:"icon-fill shrink-0 font-size-28 text-green-80 me-2","aria-hidden":!0}),(0,Co.jsx)("h2",{className:"title-1 text-truncate","data-qa":"crypto-donation-header",children:n.translate("cryptoCurrencyScreen.title")})]})}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pb-8":!i}),children:(0,Co.jsxs)("div",{className:(0,To.A)("fixed-container",{"grow-1 d-flex flex-column":!i}),children:[(0,Co.jsx)(em,{className:"search-select-crypto",label:n.translate("cryptoCurrencyScreen.selectCurrency.label"),labelFloating:!0,selectedOption:v,options:C,onSelect:N,displayName:e.currencyName,shouldSearchById:!0,clearOnFocus:!0,showIcons:!0,SelectedIconToRender:mm,ListItemToRender:dm,disabled:e.locked,dataQa:"currency"}),(0,Co.jsxs)("div",{className:(0,To.A)("mt-3",{shake:A}),children:[(0,Co.jsx)("div",{ref:o,children:(0,Co.jsx)(Vh,{ref:r,className:(0,To.A)("group-price-control",{"has-error":A,disabled:e.locked}),currency:e.currencyCode,amount:e.amount,canModifyAmount:!0,withoutFraction:!1,disabled:e.locked,currencyService:d,donationType:Ae.CRYPTO,hasError:A,errorLabel:E(),"aria-required":!0,"aria-invalid":A,"aria-describedby":`price-control-${s}-error`,qaActiveAttribute:"amount",onAmountChange:b,onAmountInputBlur:P})}),(0,Co.jsx)("p",{className:"body-3 text-sans-serif d-flex items-center text-gray-60 mt-2",children:e.amount?(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)("span",{className:"text-truncate",children:["",n.formatCurrency(e.amountInDefaultFiat,{currency:e.defaultFiatCurrency})]}),(0,Co.jsx)("span",{className:"shrink-0 ms-1",children:e.defaultFiatCurrency})]}):(0,Co.jsx)("span",{children:""})})]}),e.designation.shouldShowDesignation&&M&&(0,Co.jsx)(Wh,{className:"mt-5",goal:e.designation.goal,goals:a?[]:e.designation.goals,shake:u,hasError:e.errors.designation.required,disabled:e.locked,changeGoal:T,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable,isDesignationRequired:M,ref:c}),e.tribute.show&&(0,Co.jsx)(nm,{className:"mt-5",inHonorOfMaxLength:e.tribute.inHonorOfMaxLength,isActive:e.tribute.isActive,sharingEnabled:e.tribute.sharingEnabled,labelType:e.tribute.labelType,name:e.tribute.name,disabled:e.locked,onToggleTribute:D,onChangeTributeName:_}),e.designation.shouldShowDesignation&&!M&&(0,Co.jsx)(Wh,{className:(0,To.A)({"mt-auto":!i&&e.tribute.show,"mt-5":!i&&!e.tribute.show,"mt-6":i}),goal:e.designation.goal,goals:e.designation.goals,shake:u,disabled:e.locked,hasError:e.errors.designation.required,changeGoal:T,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable}),e.comment.isEnabled&&(0,Co.jsx)(Uh,{className:(0,To.A)({"mt-5":!e.designation.shouldShowDesignation&&!e.tribute.show||i&&!(e.designation.shouldShowDesignation&&!M),"mt-3":e.designation.shouldShowDesignation&&!M,"mt-auto":!i&&(e.designation.shouldShowDesignation&&M||e.tribute.show&&!e.designation.shouldShowDesignation)}),prevContent:e.comment.prevContent,content:e.comment.content,disabled:e.locked,onAddComment:O,onHighlight:x})]})}),(0,Co.jsx)(Zc,{children:e.isCryptoAccountConnected?(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",processingState:e.processingState,errorTitle:e.errors.payment.title,errorMessage:e.errors.payment.message,disabled:k,testMode:k,dataQa:"donate-button",trackingElement:"payButton",children:k?n.translate("cryptoCurrencyScreen.testModeButton"):n.translate("cryptoCurrencyScreen.button")}):(0,Co.jsx)("p",{className:"label-2 text-center text-red-80 text-ellipsis",dangerouslySetInnerHTML:{__html:n.translate("cryptoCurrencyScreen.connectionInfo")}})})]})};var Em=n(5777),Am=n.n(Em);const Cm=["bottom-end"],vm=()=>{const e=(0,Ho.t)(),t=(0,ko.P)(),n=(0,zo.Q)(),i=Mo(),s=(0,wo.wf)(),{countdown:a,isActive:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=(0,h.useRef)(Date.now()+e),i=(0,h.useRef)(null),[s,a]=(0,h.useState)(e),[r,o]=(0,h.useState)(!0),c=(0,xc.Q)(),l=(0,h.useCallback)((()=>{i.current&&(clearInterval(i.current),o(!1))}),[i]),u=(0,h.useCallback)((()=>{const e=n.current-Date.now();a(e)}),[n]);return(0,h.useEffect)((()=>{if(c)return o(!0),u(),i.current=setInterval(u,t),l}),[u,c,t,l]),(0,h.useEffect)((()=>{s<t&&l()}),[t,l,s]),{countdown:s,isActive:r}}(9e5),[o,c]=(0,h.useMemo)((()=>function(e){const t=new Date(e),[,n,i]=t.toISOString().slice(11,-5).split(":");return[n,i]}(a)),[a]),l=a<6e4;return(0,Co.jsx)(Co.Fragment,{children:r&&(0,Co.jsx)(Nc.S,{content:e.translate("cryptoWalletScreen.cryptoTimer.tooltipLabel"),trigger:"click",className:t?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:n?"left-start":"right-start",fallbackPlacements:Cm,maxWidth:"220px",rootContainer:s,children:(0,Co.jsxs)("button",{type:"button",className:(0,To.A)(i("crypto-timer"),{"crypto-timer-danger":l}),"aria-label":e.translate("cryptoWalletScreen.cryptoTimer.ariaLabel",{minutes:o,seconds:c}),"data-qa":"crypto-timer",children:[o,":",c]})})})},Nm=(0,h.memo)(vm),bm={src:"",height:40,width:40,excavate:!0},Pm={width:"168px",height:"168px"},Dm={[Cr.CRYPTO_CURRENCY]:()=>{const{state:e}=Jo(Cr.CRYPTO_CURRENCY);return(0,Co.jsx)(fm,{state:e.errors,children:(0,Co.jsx)(Sm,{})})},[Cr.CRYPTO_WALLET]:e=>{const{showBadge:t}=e,{state:n}=Jo(Cr.CRYPTO_WALLET),i=(0,ko.P)(),s=(0,Ho.t)(),a=Mo(),r=(0,bo.M)(),[o,c]=(0,h.useState)(!1),l=(0,Ol.D)((e=>c(e))),u=n.protocol?` (${n.protocol}) `:" ",d=`${n.networkName}${u}`;return(0,Co.jsxs)("div",{className:"flow-screen",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("cryptoWalletScreen.title")}`})}),(0,Co.jsx)(pl,{showBadge:t,children:(0,Co.jsxs)("div",{className:a("crypto-timer-holder"),children:[(0,Co.jsx)("h2",{className:(0,To.A)("title-2",i?"text-ellipsis":"text-line-clamp-2"),children:s.translate("cryptoWalletScreen.title")}),(0,Co.jsx)(Nm,{})]})}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"py-6":!i}),children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(0,Co.jsx)("p",{className:(0,To.A)("text-center",i?"text-ellipsis":"text-line-clamp-4"),"data-qa":"crypto-wallet-screen",children:s.translate("cryptoWalletScreen.description")}),(0,Co.jsxs)("p",{className:"text-center text-ellipsis mt-5",children:[(0,Co.jsx)("span",{className:"subtitle-1 d-inline-block text-sans-serif",children:n.formattedAmount}),(0,Co.jsx)("span",{className:"subtitle-2 d-inline-block ms-1-5",children:n.currencyCode})]}),(0,Co.jsxs)("div",{className:"p-rel d-flex items-center justify-center bg-white border border-gray-20 border-radius-base mx-auto mt-2",style:Pm,"aria-hidden":!0,children:[(0,Co.jsx)(Am(),{value:n.walletAddress,renderAs:"svg",size:122,level:"H",imageSettings:bm}),(0,Co.jsx)(um,{name:n.currencyCode,size:"lg",className:"qr-code-icon"})]}),(0,Co.jsxs)("button",{type:"button",className:"btn btn-default h-auto d-flex items-baseline text-left px-0 py-2-5 mt-8","aria-label":s.translate("cryptoWalletScreen.copyButtonAriaLabel"),disabled:o,"data-qa":"crypto-wallet-copy-button",onClick:()=>{if(l.set([!0]),l.set([!1],2e3),navigator.clipboard)navigator.clipboard.writeText(n.walletAddress);else{const e=r.document.createElement("textarea");e.value=n.walletAddress,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",r.document.body.appendChild(e),e.select(),r.document.execCommand("copy"),r.document.body.removeChild(e)}},children:[(0,Co.jsx)("span",{className:"btn-copy-address label-3 grow-1 text-nowrap ps-3 pe-2 overflow-x-auto","aria-hidden":!0,children:n.walletAddress}),(0,Co.jsxs)("span",{className:(0,To.A)("btn-copy-text caption-1 shrink-0 d-flex items-center p-rel pe-3",o?"text-green-80":"text-primary"),children:[o&&(0,Co.jsx)("span",{className:"shrink-0 icon-slot icon-slot-18 me-1","aria-hidden":!0,children:(0,Co.jsx)("span",{className:"p-abs centered font-size-18 text-green-80",children:(0,Co.jsx)(Pl,{className:"icon-stroke icon-stroke-2 d-block"})})}),(0,Co.jsx)("span",{className:"p-rel","aria-live":o?"polite":"off",children:o?s.translate("cryptoWalletScreen.copyButtonCopied"):s.translate("cryptoWalletScreen.copyButton")})]})]}),(0,Co.jsxs)("p",{className:"body-4 mt-2 text-center text-truncate",dir:"ltr",children:[(0,Co.jsx)("span",{className:"font-weight-500",children:d}),s.translate("cryptoWalletScreen.network")]})]})}),(0,Co.jsx)(Zc,{className:(0,To.A)({"pt-8":i}),children:(0,Co.jsx)("p",{className:(0,To.A)("body-3 text-center",i?"text-ellipsis":"text-line-clamp-2"),children:s.translate("cryptoWalletScreen.message")})})]})},[Ar.COMMENT]:yl,[Ar.PRIVACY]:Ou,[Ar.THANK_YOU]:Oh,[Ar.QUESTIONS]:yd,[Ar.BLOCKED]:Jc};class _m{constructor(e){this.intl=e}get default(){return{state:this.intl.translate("mailingAddressScreen.addressForm.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.postcode")}}get[u.tg.UNITED_KINGDOM](){return{state:this.intl.translate("mailingAddressScreen.addressForm.GB.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.GB.postcode")}}get[u.tg.CANADA](){return{state:this.intl.translate("mailingAddressScreen.addressForm.CA.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.CA.postcode")}}get[u.tg.IRELAND](){return{state:this.intl.translate("mailingAddressScreen.addressForm.IE.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.IE.postcode")}}get[u.tg.DENMARK](){return{state:this.intl.translate("mailingAddressScreen.addressForm.DK.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.DK.postcode")}}}var Tm;!function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(Tm||(Tm={}));class xm{get default(){return{state:"State",postcode:"Zip code"}}get[Tm.UNITED_KINGDOM](){return Object.assign(Object.assign({},this.default),{state:"County",postcode:"Postcode"})}get[Tm.CANADA](){return Object.assign(Object.assign({},this.default),{state:"Province",postcode:"Postal code"})}get[Tm.IRELAND](){return Object.assign(Object.assign({},this.default),{state:"Province",postcode:"Eircode"})}get[Tm.DENMARK](){return Object.assign(Object.assign({},this.default),{state:"Region",postcode:"Postcode"})}}const Om=[Tm.UNITED_KINGDOM,Tm.CANADA,Tm.IRELAND,Tm.DENMARK];class km{constructor(e){this.addressLabelsProvider=e}get default(){return this.addressLabelsProvider.default}getByCountry(e){if(t=e,Om.some((e=>t===e)))switch(e){case Tm.UNITED_KINGDOM:return this.addressLabelsProvider[Tm.UNITED_KINGDOM];case Tm.CANADA:return this.addressLabelsProvider[Tm.CANADA];case Tm.IRELAND:return this.addressLabelsProvider[Tm.IRELAND];case Tm.DENMARK:return this.addressLabelsProvider[Tm.DENMARK];default:throw new Error(`Unhandled custom country case: ${e}`)}var t;return this.default}}const Im=e=>{const{onChange:t,onSearch:n,onSelect:i,onClear:s,value:a,options:r,className:o,inputClasses:c,loading:u,placeholder:d,label:m,labelOptional:p,disabled:g,debounce:y=500,allowClear:f,hint:S,hintAriaLabel:E,hasError:A,errorLabel:C,dataQa:v,dataTestId:N,trackingElement:b,maxLength:P,selectedOption:D,ListItemToRender:_,SelectedIconToRender:T,showIcons:x,labelFloating:O,autoComplete:k,inputRef:I,autoFocus:w,autoFocusMode:R}=e,M=(0,l.Tt)(e,["onChange","onSearch","onSelect","onClear","value","options","className","inputClasses","loading","placeholder","label","labelOptional","disabled","debounce","allowClear","hint","hintAriaLabel","hasError","errorLabel","dataQa","dataTestId","trackingElement","maxLength","selectedOption","ListItemToRender","SelectedIconToRender","showIcons","labelFloating","autoComplete","inputRef","autoFocus","autoFocusMode"]),{set:L,clear:U}=(0,Ol.D)((e=>{n(e)})),F=(0,h.useCallback)((e=>{t(e),U(),L([e],y)}),[t,L,U,y]);return(0,Co.jsx)(Zh,Object.assign({inputRef:I,options:r,value:a,onChange:F,onSelect:i,className:o,inputClasses:c,placeholder:d,label:m,labelOptional:p,disabled:g,loading:u,hint:S,hintAriaLabel:E,allowClear:f,onClear:s,selectedOption:D,dataQa:v,dataTestId:N,hasError:A,errorLabel:C,trackingElement:b,ListItemToRender:_,SelectedIconToRender:T,showIcons:x,maxLength:P,labelFloating:O,autoComplete:k,autoFocus:w,autoFocusMode:R},M))};Im.displayName="_Autocomplete";const wm=(0,h.memo)(Im),Rm=e=>{let{className:t}=e;const{state:n,controller:i}=Jo(Ar.MAILING_ADDRESS),s=(0,Ho.t)(),a=tc(),r=!n.validation.fields.countryCode.isValid,o=s.translate("mailingAddressScreen.addressForm.country"),c=n.countries.map((e=>{let{countryCode:t,countryName:n}=e;return{value:t,label:n}}));return(0,Co.jsx)(Zl,{id:`country-${a}`,label:o,labelFloating:!0,className:(0,To.A)({"pe-16":r}),formLabelClass:(0,To.A)({"pe-12":r}),formGroupClass:t,value:n.countryCode,disabled:n.locked,error:r,dataQa:"country-selector",onChange:e=>i.changeSelectedCountry(e.target.value),options:c,autoComplete:"country-name","aria-required":!0,"aria-describedby":`country-${a}-error`,children:r&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-10",children:i.getAriaErrorMessage(o)}),(0,Co.jsx)("p",{id:`country-${a}-error`,className:"sr-only",children:i.getAriaErrorMessage(o)})]})})},Mm=(0,h.memo)(Rm),Lm=e=>{let{setSelectRef:t,setInputRef:n,label:i,className:s}=e;const{state:a,controller:r}=Jo(Ar.MAILING_ADDRESS),o=r.getStates(a.countryCode),c=tc(),l=!a.validation.fields.region.isValid,u=Array.isArray(o)?o.map((e=>{let{code:t,name:n}=e;return{value:t,label:n}})):[],d={};if(o&&!Array.isArray(o))for(const[e,t]of Object.entries(o))d[e]=t.map((e=>{let{code:t,name:n}=e;return{value:t,label:n}}));return(0,Co.jsx)(Co.Fragment,{children:o?(0,Co.jsx)(Zl,{id:`select-region-${c}`,setRef:t,label:i,labelFloating:!0,className:(0,To.A)({"pe-16":l}),formLabelClass:(0,To.A)({"pe-12":l}),formGroupClass:s,value:a.region,hasCustomValue:Boolean(a.region),customPlaceholder:i,options:u,groupedOptions:d,disabled:a.locked,error:l,"aria-required":!0,"aria-describedby":`region-${c}-error`,onChange:e=>r.changeRegion(e.target.value),dataQa:"state-selector",autoComplete:"address-level1",children:l&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right me-10 z-index-5",children:r.getAriaErrorMessage(i)}),(0,Co.jsx)("p",{id:`region-${c}-error`,className:"sr-only",children:r.getAriaErrorMessage(i)})]})}):(0,Co.jsx)(au.t,{id:`input-region-${c}`,setRef:n,label:i,labelFloating:!0,className:(0,To.A)({"pe-10":l}),formLabelClass:(0,To.A)({"pe-6":l}),formGroupClass:s,value:a.region,placeholder:i,autoComplete:"address-level1",disabled:a.locked,error:l,"aria-required":!0,"aria-describedby":`region-${c}-error`,onChange:e=>r.changeRegion(e.target.value),dataQa:"state-field",children:l&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right me-4 z-index-5",children:r.getAriaErrorMessage(i)}),(0,Co.jsx)("p",{id:`region-${c}-error`,className:"sr-only",children:r.getAriaErrorMessage(i)})]})})})},Um=(0,h.memo)(Lm),{useAddFieldToScroll:Fm,useScrollToFieldsTrigger:jm,ScrollToFieldsProvider:Bm}=(0,pm.J)(),Hm=e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(Ar.MAILING_ADDRESS),s=(0,Ho.t)(),a=(0,ko.P)(),r=(0,Fo.$)(),o=tc(),c=jm(),l=(0,h.useCallback)((e=>{e.preventDefault(),c(),i.leave()}),[i,c]),u=(0,h.useMemo)((()=>function(e){return function(e){const t=e||new xm;return new km(t)}(new _m(e))}(s)),[s]),d=(0,h.useMemo)((()=>u.getByCountry(n.countryCode)),[u,n.countryCode]),m=Du(n.shakeKey,0!==n.shakeKey),p=i.isOnBehalfOf?s.translate("mailingAddressScreen.onBehalfOfTitle"):s.translate("mailingAddressScreen.title"),g=n.isAlternativeLabels?s.translate("mailingAddressScreen.addressForm.zipFirst.line1"):s.translate("mailingAddressScreen.addressForm.line1"),y=n.isAlternativeLabels?s.translate("mailingAddressScreen.addressForm.zipFirst.line2"):s.translate("mailingAddressScreen.addressForm.line2"),f=!n.validation.fields.postal.isValid,S=!n.validation.fields.line1.isValid,E=!n.validation.fields.line2.isValid,A=!n.validation.fields.city.isValid,C=(0,h.useCallback)((e=>{r||i.search(e)}),[i,r]),v=(0,h.useCallback)((e=>i.changeLine1(e)),[i]),N=(0,h.useCallback)((e=>i.changeLine2(e.target.value)),[i]),b=(0,h.useCallback)((e=>i.changePostalCode(e)),[i]),P=(0,h.useCallback)((e=>i.changePostalCode(e.target.value)),[i]),D=(0,h.useCallback)((e=>i.changeCity(e.target.value)),[i]),_=(0,h.useCallback)(((e,t)=>{const n=i.getPlaceById(e),s=i.shouldFindSubplaces(n);return s?i.retrieveSubplaces(n,t):i.retrieveDetails(n),s}),[i]),T=(0,h.useCallback)((e=>_(e,"line1")),[_]),x=(0,h.useCallback)((e=>_(e,"postal")),[_]),O=(0,h.useMemo)((()=>n.places.map((e=>{let{description:t,innerId:n}=e;return{id:n,value:t}}))),[n.places]),k=(0,h.useRef)(null),I=(0,h.useRef)(null),w=(0,h.useRef)(null),R=(0,h.useRef)(null),M=(0,h.useRef)(null),L=(0,h.useRef)(null);(0,rl.f)({ref:n.isLayoutPostalCodeFirst?I:k,autoFocus:!0,mode:al.Q.DESKTOP});const U=n.isLayoutPostalCodeFirst;return Fm(I,(e=>U&&!e.fields.postal.isValid)),Fm(k,(e=>!e.fields.line1.isValid)),Fm(w,(e=>!e.fields.city.isValid)),Fm(R,(e=>!e.fields.region.isValid)),Fm(M,(e=>!e.fields.region.isValid)),Fm(L,(e=>!U&&!e.fields.postal.isValid)),(0,Co.jsxs)("form",{className:"flow-screen",onSubmit:l,"data-qa":"active-screen-mailing-address","data-testid":"active-screen-mailing-address",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:p})}),(0,Co.jsx)(pl,{title:p,showBadge:t}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"py-8":!a,shake:m}),children:(0,Co.jsxs)("div",{className:"fixed-container",children:[i.isOnBehalfOf&&(0,Co.jsx)("p",{className:(0,To.A)("text-center mb-5",a?"text-ellipsis":"text-line-clamp-3"),children:s.translate("mailingAddressScreen.onBehalfOfSubtitle")}),(0,Co.jsxs)("div",{role:"group","aria-label":s.translate("mailingAddressScreen.addressGroupAriaLabel"),children:[n.isLayoutPostalCodeFirst&&(0,Co.jsx)("div",{className:"mb-4",children:(0,Co.jsx)(wm,{labelFloating:!0,inputRef:I,inputClasses:"text-sans-serif",options:O,value:n.postal,onChange:b,onSelect:x,onSearch:C,hasError:f,errorLabel:s.translate("mailingAddressScreen.addressForm.error.valid",{field:d.postcode}),placeholder:d.postcode,label:d.postcode,disabled:n.locked,loading:n.isLoadingPlaces,dataQa:"post-code",maxLength:Gi.ZIP,autoComplete:"postal-code","aria-required":!0})}),(0,Co.jsxs)("div",{className:"group-stacked-vertical",children:[(0,Co.jsxs)("div",{className:"group-stacked-vertical group-stacked-item",children:[(0,Co.jsx)(wm,{inputRef:k,labelFloating:!0,label:g,className:"group-stacked-item",value:n.line1,placeholder:g,options:O,maxLength:Gi.STREET,loading:n.isLoadingPlaces,disabled:n.locked,hasError:S,errorLabel:i.getAriaErrorMessage(g),"aria-required":!0,onChange:v,onSelect:T,onSearch:C,dataQa:"street",dataTestId:"street",autoComplete:"address-line1"}),(0,Co.jsx)(au.t,{id:`address-line2-${o}`,label:y,labelFloating:!0,className:(0,To.A)({"pe-10":E}),formLabelClass:(0,To.A)({"pe-6":E}),formGroupClass:"group-stacked-item",value:n.line2,onChange:N,error:E,disabled:n.locked,autoComplete:"address-line2",placeholder:y,dataQa:"apartment-field",maxLength:Gi.APARTMENT,"aria-describedby":`line-2-${o}-error`,children:E&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:i.getAriaErrorMessage(y)}),(0,Co.jsx)("p",{id:`line-2-${o}-error`,className:"sr-only",children:i.getAriaErrorMessage(y)})]})})]}),(0,Co.jsx)(au.t,{label:s.translate("mailingAddressScreen.addressForm.city"),labelFloating:!0,id:`city-${o}`,setRef:w,className:(0,To.A)({"pe-10":A}),formLabelClass:(0,To.A)({"pe-6":A}),formGroupClass:"group-stacked-item",value:n.city,placeholder:s.translate("mailingAddressScreen.addressForm.city"),autoComplete:"address-level2",maxLength:Gi.CITY,disabled:n.locked,error:A,"aria-required":!0,"aria-describedby":`city-${o}-error`,onChange:D,dataQa:"city",dataTestId:"city",children:A&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:i.getAriaErrorMessage(s.translate("mailingAddressScreen.addressForm.city"))}),(0,Co.jsx)("p",{id:`city-${o}-error`,className:"sr-only",children:i.getAriaErrorMessage(s.translate("mailingAddressScreen.addressForm.city"))})]})})]}),(0,Co.jsxs)("div",{className:"group-stacked-vertical mt-4",children:[!n.isLayoutPostalCodeFirst&&(0,Co.jsxs)("div",{className:"group-stacked-horizontal group-stacked-item",children:[n.isRegionEnabled&&(0,Co.jsx)(Um,{label:d.state,className:"group-stacked-item w-50 me-1",setInputRef:R,setSelectRef:M}),(0,Co.jsx)(au.t,{id:`postal-${o}`,setRef:L,label:d.postcode,labelFloating:!0,className:(0,To.A)("text-sans-serif",{"pe-10":f}),formLabelClass:(0,To.A)({"pe-6":f}),formGroupClass:(0,To.A)("group-stacked-item",n.isRegionEnabled?"w-50 ms-1":"w-100"),value:n.postal,onChange:P,error:f,disabled:n.locked,autoComplete:"postal-code",placeholder:d.postcode,dataQa:"zip-code",maxLength:Gi.ZIP,"aria-required":!0,"aria-describedby":`postcode-${o}-error`,children:f&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:s.translate("mailingAddressScreen.addressForm.error.valid",{field:d.postcode})}),(0,Co.jsx)("p",{id:`postcode-${o}-error`,className:"sr-only",children:s.translate("mailingAddressScreen.addressForm.error.valid",{field:d.postcode})})]})})]}),(0,Co.jsx)(Mm,{className:"group-stacked-item"})]})]})]})}),(0,Co.jsxs)(Zc,{children:[(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",processingState:n.processingState,errorTitle:n.hasServerValidationError?s.translate("mailingAddressScreen.validationError.title"):n.payErrorMessage||s.translate("common.errorOccurredText"),errorMessage:n.additionalPayErrorMessage,dataQa:"mailing-continue",trackingElement:n.isPaymentScreen&&n.isRequired?"payButton":"nextButton",dataTestId:"mailing-continue-button",children:n.isPaymentScreen&&n.isRequired?Sl(s,n.formattedAmount,n.frequency):s.translate("mailingAddressScreen.button.continue")}),!n.isRequired&&(0,Co.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:n.locked,onClick:()=>i.skip(),"data-qa":"skip-button","data-tracking-element-name":"skipButton","data-testid":"mailing-skip-button",children:s.translate("mailingAddressScreen.button.skip")})})]})]})},qm=(0,h.memo)(Hm),Gm=e=>{let{disabled:t,onClose:n,onSave:i,processingState:s,serverErrors:a}=e;const r=(0,Ho.t)();return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",disabled:t,onClick:i,trackingElement:"remindMeLaterConfirmButton",processingState:s,serverErrors:a,errorTitle:r.translate("common.errorOccurredText"),dataQa:"remind-me-later-confirm-button",children:r.translate("remindMeScreen.button.confirm")}),(0,Co.jsx)("button",{type:"button",className:"btn btn-default mt-2",disabled:t,onClick:n,"data-tracking-element-name":"remindMeLaterCloseButton","data-qa":"remind-me-later-no-thanks-button",children:r.translate("remindMeScreen.button.close")})]})},Vm=(0,h.memo)(Gm),Km=e=>{let{onTermsAcceptionChange:t,checked:n,isValid:i,className:s,locked:a,text:r,setRef:o}=e;const c=(0,Ho.t)(),l=(0,ko.P)(),u=(0,h.useRef)(null);return(0,h.useImperativeHandle)(o,(()=>u.current),[]),(0,Co.jsx)(Yl,{setRef:u,className:s,checked:n,error:!i,disabled:a,onChange:t,dataQa:"remind-me-later-accept-terms-checkbox",children:(0,Co.jsx)("span",{className:(0,To.A)({"text-line-clamp-2":!l}),dir:"auto",children:void 0===r||""===r?c.translate("remindMeScreen.termsText"):(0,Co.jsx)("span",{dangerouslySetInnerHTML:{__html:r}})})})},Ym=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||24,width:e.width||22,fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("radialGradient",{id:`a-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(2.74225404 11.29096326 -11.5614986 2.80795938 12 10.9506)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#4cadf4"}),(0,Co.jsx)("stop",{offset:".816847",stopColor:"#44b8f0"}),(0,Co.jsx)("stop",{offset:".861287",stopColor:"#409ff2"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#1f6fef"})]}),(0,Co.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-2.81274751 -9.14752313 9.64618176 -2.96607873 12 11.4004)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:".561045",stopColor:"#4dd0f0",stopOpacity:"0"}),(0,Co.jsx)("stop",{offset:".868337",stopColor:"#4dd0f0",stopOpacity:".754177"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#4dd0f0",stopOpacity:"0"})]}),(0,Co.jsxs)("radialGradient",{id:`c-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-4.76432055 -9.71917643 20.58418864 -10.09032748 13.0442 14.6319)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:".0102742",stopColor:"#4c9ef6"}),(0,Co.jsx)("stop",{offset:".885024",stopColor:"#4b9ef6",stopOpacity:"0"})]}),(0,Co.jsxs)("radialGradient",{id:`d-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(3.31321384 4.86948528 -10.57415853 7.19469231 8.68678 7.00844)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:".173971",stopColor:"#4bcdf0"}),(0,Co.jsx)("stop",{offset:".885024",stopColor:"#4ccef1",stopOpacity:"0"})]}),(0,Co.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"11.9996",x2:"13.77",y1:"6.09863",y2:"23.2126",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Co.jsxs)("radialGradient",{id:`f-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 6.71448 -11.4928 0 11.9996 11.1869)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff",stopOpacity:"0"}),(0,Co.jsx)("stop",{offset:".91",stopColor:"#fff"})]}),(0,Co.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#a-${t})`,r:"11"}),(0,Co.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#b-${t})`,fillOpacity:".3",r:"11"}),(0,Co.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#c-${t})`,r:"11"}),(0,Co.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#d-${t})`,fillOpacity:".8",r:"11"}),(0,Co.jsx)("path",{d:"m11.2885 8.33683.7111.71934.7112-.71934c2.0415-2.06503 4.4425-1.26364 5.1381.30145.3554.79955.3807 1.98542-.4866 3.44802-.8318 1.4027-2.4787 3.034-5.3627 4.6715-2.88397-1.6375-4.53087-3.2689-5.36268-4.6716-.8673-1.4626-.84197-2.64841-.48661-3.44797.69559-1.56507 3.09662-2.36647 5.13819-.3014z",stroke:"#fff",strokeWidth:"2"}),(0,Co.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:"#6bb1d4",fillOpacity:".6"}),(0,Co.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:`url(#e-${t})`,fillOpacity:".8"}),(0,Co.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:`url(#f-${t})`}),(0,Co.jsx)("path",{d:"m11.644 7.98531.3556.35967.3556-.35967c2.2525-2.27841 5.0915-1.48313 5.9506.4499.4334.97502.4199 2.33219-.5134 3.90609-.9147 1.5424-2.71 3.2801-5.7928 4.9898-3.08277-1.7097-4.8781-3.4474-5.79275-4.9898-.93333-1.574-.94679-2.93111-.51345-3.90614.85913-1.93302 3.69816-2.72829 5.9506-.44985z",stroke:"#3398f1"})]})},zm=(0,h.memo)(Ym),Wm=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||46,width:e.width||41,viewBox:"0 0 41 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"38",width:"40.3477",x:"0",y:"7",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:"-1",dy:"-1"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.722448 0 0 0 0 0.424883 0 0 0 0 0.0858854 0 0 0 0.59 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_35866_79093"})]}),(0,Co.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(4.80000386 4.99999715 -4.99583475 4.79600795 18.6719 3.5)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:".394249",stopColor:"#f3c352"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#d97922"})]}),(0,Co.jsxs)("linearGradient",{id:`c-${t}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`d-${t}`,gradientUnits:"userSpaceOnUse",x1:"17.6719",x2:"19.9748",xlinkHref:`#c-${t}`,y1:"2.66667",y2:"5.77561"}),(0,Co.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"1.17334",x2:"41.6738",y1:"34",y2:"34",children:[(0,Co.jsx)("stop",{offset:".135247",stopColor:"#f3c352"}),(0,Co.jsx)("stop",{offset:".249813",stopColor:"#ffd87c"}),(0,Co.jsx)("stop",{offset:".409209",stopColor:"#f3c352"}),(0,Co.jsx)("stop",{offset:".752403",stopColor:"#c57429"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#bf7c19"})]}),(0,Co.jsxs)("linearGradient",{id:`f-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.6738",x2:"32.1738",y1:"28.5",y2:"31.5",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#f3c352"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#f3c352",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"4.67334",x2:"28.1733",xlinkHref:`#c-${t}`,y1:"20.5",y2:"40.5"}),(0,Co.jsx)("path",{d:"m17.1719 5c0-1.933 1.567-3.5 3.5-3.5s3.5 1.567 3.5 3.5v5.5h-7z",fill:`url(#b-${t})`,stroke:`url(#d-${t})`}),(0,Co.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Co.jsx)("path",{d:"m20.6737 8c-8.8365 0-14.99999 7.1634-14.99999 16l-1 9.4441c0 1.9793-2.03499 3.6492-2.72998 5.5025l-.75 2c-.735473 1.9613.71437 4.0534 2.80899 4.0534h33.34198c2.0946 0 3.5445-2.0921 2.809-4.0534l-.75-2c-.695-1.8533-2.73-3.5232-2.73-5.5025l-1-9.4441c0-8.8366-6.1634-16-15-16z",fill:`url(#e-${t})`}),(0,Co.jsx)("path",{d:"m20.6737 8c-8.8365 0-14.99999 7.1634-14.99999 16l-1 9.4441c0 1.9793-2.03499 3.6492-2.72998 5.5025l-.75 2c-.735473 1.9613.71437 4.0534 2.80899 4.0534h33.34198c2.0946 0 3.5445-2.0921 2.809-4.0534l-.75-2c-.695-1.8533-2.73-3.5232-2.73-5.5025l-1-9.4441c0-8.8366-6.1634-16-15-16z",fill:`url(#f-${t})`,fillOpacity:".8"})]}),(0,Co.jsx)("path",{d:"m5.92232 24.0263.00139-.0131v-.0132c0-8.7202 6.07229-15.75 14.74999-15.75s14.75 7.0298 14.75 15.75v.0132l.0014.0131.9986 9.4313c.0046 1.0662.5526 2.0299 1.1461 2.9233.1312.1975.2644.3913.3959.5828.4816.7012.9414 1.3706 1.2039 2.0707l.75 2c.6742 1.7978-.6548 3.7156-2.5749 3.7156h-33.34198c-1.92007 0-3.249092-1.9178-2.57491-3.7156l.75-2c.26254-.7001.72236-1.3696 1.20396-2.0707.1315-.1915.26463-.3853.39581-.5828.59354-.8934 1.14152-1.8571 1.1461-2.9234z",stroke:`url(#g-${t})`,strokeOpacity:".6",strokeWidth:".5"})]})},$m=(0,h.memo)(Wm),Xm=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||80,width:e.width||80,fill:"none",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"67",width:"81",x:"-.972656",y:"30",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feMorphology",{in:"SourceAlpha",operator:"dilate",radius:"3",result:"effect1_dropShadow_35224_19304"}),(0,Co.jsx)("feOffset",{dy:"4"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.8696",width:"72.2329",x:"8.26211",y:"35.5863",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:"-.695652",dy:"-.695652"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("filter",{id:`c-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.8696",width:"72.2329",x:"-.432518",y:"35.5863",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:".695652",dy:"-.695652"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("filter",{id:`d-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"29.7837",width:"82.3188",x:"-1.13208",y:"58.664",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-.695652"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.0273",x2:"40.0273",y1:"44.5256",y2:"88.0038",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#2c3440"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#2c2d31"})]}),(0,Co.jsxs)("radialGradient",{id:`f-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 -24 33.5 0 39.5273 57)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#eba837"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#915b00",stopOpacity:"0"})]}),(0,Co.jsxs)("linearGradient",{id:`g-${t}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#151518"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#313b48"})]}),(0,Co.jsx)("linearGradient",{id:`h-${t}`,gradientUnits:"userSpaceOnUse",x1:"62",x2:"62",xlinkHref:`#g-${t}`,y1:"88",y2:"51"}),(0,Co.jsxs)("linearGradient",{id:`i-${t}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#cf8413"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#2d3541",stopOpacity:"0"})]}),(0,Co.jsx)("radialGradient",{id:`j-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(27.50001912 27.50001912 -27.50001912 27.50001912 49.5352 60)",gradientUnits:"userSpaceOnUse",r:"1",xlinkHref:`#i-${t}`}),(0,Co.jsxs)("radialGradient",{id:`k-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(20.50001554 20.50001554 -20.50001554 20.50001554 52.5273 57)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#f1bf51"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#cd8131",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`l-${t}`,gradientUnits:"userSpaceOnUse",x1:"18.0625",x2:"18.0625",xlinkHref:`#g-${t}`,y1:"88",y2:"51"}),(0,Co.jsx)("radialGradient",{id:`m-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-27.50001912 27.50001912 -27.50001912 -27.50001912 30.5273 60)",gradientUnits:"userSpaceOnUse",r:"1",xlinkHref:`#i-${t}`}),(0,Co.jsxs)("radialGradient",{id:`n-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-17.4999736 17.4999736 -17.4999736 -17.4999736 23.5273 55)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Co.jsx)("stop",{offset:".0001",stopColor:"#ffe24b"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Co.jsxs)("radialGradient",{id:`o-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 24.5 -24.5 0 40.0273 61.5)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#e4a946"}),(0,Co.jsx)("stop",{offset:".542849",stopColor:"#b37c20",stopOpacity:".7"}),(0,Co.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,Co.jsxs)("linearGradient",{id:`p-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.0273",x2:"40.0273",y1:"60.5",y2:"86.5",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ffd267"}),(0,Co.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,Co.jsxs)("linearGradient",{id:`q-${t}`,gradientUnits:"userSpaceOnUse",x1:"65.0273",x2:"65.0273",y1:"80",y2:"51",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#222832"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#31373f",stopOpacity:"0"})]}),(0,Co.jsx)("clipPath",{id:`r-${t}`,children:(0,Co.jsx)("rect",{height:"80",rx:"2",width:"80"})}),(0,Co.jsx)("clipPath",{id:`s-${t}`,children:(0,Co.jsx)("rect",{height:"80",rx:"1.3913",width:"80",x:".027344"})}),(0,Co.jsx)("g",{clipPath:`url(#r-${t})`,children:(0,Co.jsxs)("g",{clipPath:`url(#s-${t})`,children:[(0,Co.jsx)("path",{d:"m.027344 37.4531h80v50.5507h-80z",fill:`url(#e-${t})`}),(0,Co.jsx)("path",{d:"m.0273438 37.4531h79.9999562l-36.7516-26.4186c-1.9409-1.39512-4.5558-1.39513-6.4967 0z",fill:"#2c3440"}),(0,Co.jsx)("path",{d:"m6.48047 37.4591h67.09683l-30.3001-21.7809c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:"#222832"}),(0,Co.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Co.jsx)("rect",{fill:"#4a4a4d",height:"53",rx:"1.15942",width:"67",x:"6.02734",y:"33"}),(0,Co.jsx)("rect",{fill:`url(#f-${t})`,fillOpacity:".3",height:"53",rx:"1.15942",width:"67",x:"6.02734",y:"33"})]}),(0,Co.jsxs)("g",{filter:`url(#b-${t})`,children:[(0,Co.jsx)("path",{d:"m80.0312 37.4414-69.913 50.5507h69.913z",fill:`url(#h-${t})`}),(0,Co.jsx)("path",{d:"m80.0312 37.4414-69.913 50.5507h69.913z",fill:`url(#j-${t})`,fillOpacity:".3"}),(0,Co.jsx)("path",{d:"m79.7812 87.7421v-49.8114l-68.8906 49.8114z",stroke:`url(#k-${t})`,strokeOpacity:".5",strokeWidth:".5"})]}),(0,Co.jsxs)("g",{filter:`url(#c-${t})`,children:[(0,Co.jsx)("path",{d:"m.03125 37.4414 69.91305 50.5507h-69.91305z",fill:`url(#l-${t})`}),(0,Co.jsx)("path",{d:"m.03125 37.4414 69.91305 50.5507h-69.91305z",fill:`url(#m-${t})`,fillOpacity:".3"}),(0,Co.jsx)("path",{d:"m.28125 87.7421v-49.8114l68.89065 49.8114z",stroke:`url(#n-${t})`,strokeOpacity:".5",strokeWidth:".5"})]}),(0,Co.jsxs)("g",{filter:`url(#d-${t})`,children:[(0,Co.jsx)("path",{d:"m.0273438 87.9839h79.9999562l-36.7516-26.4186c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:"#1e2736"}),(0,Co.jsx)("path",{d:"m.0273438 87.9839h79.9999562l-36.7516-26.4186c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:`url(#o-${t})`,fillOpacity:".3"}),(0,Co.jsx)("path",{d:"m36.9249 61.7683-36.121461 25.9656h78.447861l-36.1215-25.9656c-1.8537-1.3325-4.3512-1.3325-6.2049 0z",stroke:`url(#p-${t})`,strokeWidth:".5"})]}),(0,Co.jsx)("path",{d:"m.027344 51h80v29h-80z",fill:`url(#q-${t})`})]})})]})},Qm=(0,h.memo)(Xm),Zm=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||61,width:e.width||60,viewBox:"0 0 60 61",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"62",width:"62",x:"0",y:"1",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_35868_79127",stdDeviation:"4.5"})]}),(0,Co.jsx)("clipPath",{id:`b-${t}`,children:(0,Co.jsx)("path",{d:"m0 0h60v61h-60z"})}),(0,Co.jsx)("g",{clipPath:`url(#b-${t})`,children:(0,Co.jsx)("g",{filter:`url(#a-${t})`,children:(0,Co.jsx)("path",{d:"m26.6492 13.8261c0-2.1131 1.7248-3.8261 3.8524-3.8261 2.1277 0 3.8525 1.713 3.8525 3.8261v3.3681c6.3974 1.7208 10.5959 7.6973 10.5959 14.8058l.9631 9.0335c0 1.1458.718-1.6428 1.4332-.6092.4665.6741.9319 1.3466 1.1961 2.0464l.7223 1.913c.7084 1.876 5.2393 9.6163 3.2219 9.6163l-15.3115-5.7391c-.4673 3.2448-2.962 3.8261-6.3584 3.8261s-6.5212-.5813-6.9886-3.8261l-14.19963 5.2608c-2.01735 0 1.40523-7.262 2.11353-9.138l.7224-1.913c.2642-.6998.7296-1.3723 1.1961-2.0464.7152-1.0336 1.4331 1.755 1.4331.6092l.9632-9.0335c0-7.1072 4.1969-13.0828 10.5924-14.8049z",fill:"#252525",fillOpacity:".7"})})})]})},Jm=(0,h.memo)(Zm),ep=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||14,width:e.width||14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("radialGradient",{id:`a-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-2.50005399 6.4999748 -9.01804898 -3.46856872 7 7)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#f3c352"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#e38937"})]}),(0,Co.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-1.99995166 7.00001393 -7.00001393 -1.99995166 5.5 14)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:".0899711",stopColor:"#f3c352",stopOpacity:"0"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#b25b0a"})]}),(0,Co.jsxs)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"4.5",x2:"9.5",y1:"19.5",y2:"8",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ffeab4"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#eaaf6a",stopOpacity:"0"})]}),(0,Co.jsx)("circle",{cx:"7",cy:"7",fill:`url(#a-${t})`,r:"7"}),(0,Co.jsx)("circle",{cx:"7",cy:"7",fill:`url(#b-${t})`,fillOpacity:".7",r:"7"}),(0,Co.jsx)("circle",{cx:"7",cy:"7",r:"6.75",stroke:`url(#c-${t})`,strokeOpacity:".6",strokeWidth:".5"})]})},tp=(0,h.memo)(ep),{useAddFieldToScroll:np,useScrollToFieldsTrigger:ip,ScrollToFieldsProvider:sp}=(0,pm.J)(),ap={maxWidth:"260px"},rp=()=>{const{state:e,controller:t}=Jo(Ar.REMIND_ME),n=(0,Ho.t)(),i=(0,ko.P)(),s=Zo(),a=(0,h.useRef)(null),r=(0,h.useRef)(null),o=!e.email.isValid||e.serverErrors.email,c=Du(e.shakeKey,0!==e.shakeKey),u=wa(),d=(0,h.useId)(),m=ip(),p=(0,h.useCallback)((()=>{t.updateIsTermsAndConditionsAccepted(!e.termsAndConditions.isAccepted)}),[t,e]),g=(0,h.useCallback)((e=>{t.clearEmailServerError(),t.updateEmail(e.target.value)}),[t]),y=(0,h.useCallback)((()=>(0,l.sH)(void 0,void 0,void 0,(function*(){(yield t.save())&&u.emit(Na.SHOULD_HIDE,{isManualCall:!0}),m()}))),[t,u,m]),f=(0,h.useCallback)((()=>{t.saveOnClose(),s.getCurrentFlow().isCurrentScreenLast()?u.emit(Na.SHOULD_HIDE,{isManualCall:!0}):t.leave()}),[t,u,s]);return np(a,(e=>{var t;return!e.validation.email.isValid||Boolean(null===(t=e.serverErrors)||void 0===t?void 0:t.email)})),np(r,(e=>!e.validation.termsAndConditions.isValid)),(0,Co.jsxs)("div",{className:"flow-screen dark-mode-screen","data-qa":"remind-me-later-screen",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("remindMeScreen.title")}`})}),(0,Co.jsx)(pl,{backButtonClickHandler:()=>{t.resetToDefaultState(),s.getCurrentFlow().prev()},children:(0,Co.jsx)("h2",{className:(0,To.A)(i?"title-1 text-ellipsis":"title-2 text-line-clamp-2"),children:n.translate("remindMeScreen.title")})}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body py-8",{shake:c}),children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(0,Co.jsxs)("div",{className:"bell-wrap","aria-hidden":!0,children:[(0,Co.jsx)(Qm,{className:"d-block mx-auto"}),(0,Co.jsx)(Jm,{className:"bell-shadow"}),(0,Co.jsx)(tp,{className:"bell-tongue"}),(0,Co.jsx)($m,{className:"bell"}),(0,Co.jsx)(zm,{className:"bell-heart"})]}),(0,Co.jsx)("p",{className:(0,To.A)("text-center mx-auto mt-6",i?"text-ellipsis":"text-line-clamp-5"),style:ap,children:n.translate("remindMeScreen.description")}),(0,Co.jsxs)("div",{className:(0,To.A)(i?"mt-6":"mt-8",{shake:o}),children:[(0,Co.jsx)(au.t,{id:d,setRef:a,name:"email",autoComplete:"email",autoFocus:!0,label:n.translate("remindMeScreen.emailInput.label"),labelFloating:!0,placeholder:n.translate("remindMeScreen.emailInput.placeholder"),className:(0,To.A)({"pe-10":o}),formLabelClass:(0,To.A)({"pe-6":o}),error:o,value:e.email.value,onChange:g,disabled:e.locked,dataQa:"remind-me-later-email-input","data-testid":"remind-me-later-email-input",inputMode:"email","aria-required":!0,"aria-describedby":`${d}-error`,children:o&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:[!e.email.isValid&&n.translate("remindMeScreen.emailInput.error.required"),e.serverErrors.email&&(0,Co.jsx)(lu,{token:"remindMeScreen.emailInput.error.server"})]}),(0,Co.jsxs)("p",{id:`${d}-error`,className:"sr-only",children:[!e.email.isValid&&n.translate("remindMeScreen.emailInput.error.required"),e.serverErrors.email&&(0,Co.jsx)(lu,{token:"remindMeScreen.emailInput.error.server"})]})]})}),e.isTermsAndConditionsEnabled&&(0,Co.jsx)(Km,{className:"mt-4",text:e.termsAndConditions.text,checked:e.termsAndConditions.isAccepted,isValid:e.termsAndConditions.isValid,onTermsAcceptionChange:p,setRef:r})]})]})}),(0,Co.jsx)(Zc,{backButtonClass:"text-white-hover-white",children:(0,Co.jsx)(Vm,{disabled:e.locked,onClose:f,onSave:y,processingState:e.processingState,serverErrors:e.serverErrors})})]})};var op=n(4367);const cp={isEmpty:!0,error:null,isFocused:!1,isReady:!1};function lp(){const[e,t]=(0,h.useState)(cp);return{stripeElementState:e,setStripeElementState:t}}const up={boxShadow:"0 0 0 4px rgba(51, 113, 230, 0.5)"},dp=e=>{let{className:t,firstNumber:n,secondNumber:i,firstNumberHighlighted:s,secondNumberHighlighted:a}=e;const r=tc();return(0,Co.jsxs)("div",{className:(0,To.A)("check-image",t),"aria-hidden":"true",children:[(0,Co.jsxs)("svg",{className:"d-block",width:266,height:104,viewBox:"0 0 266 104",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Co.jsx)("rect",{width:"266",height:"104",rx:"4",fill:"#F5FAFF"}),(0,Co.jsx)("rect",{width:"266",height:"104",rx:"4",fill:`url(#${r}-paint0_linear_12221_26907)`}),(0,Co.jsx)("rect",{x:"4.5",y:"4.5",width:"257",height:"95",rx:"0.5",stroke:`url(#${r}-paint1_linear_12221_26907)`}),(0,Co.jsx)("path",{d:"M213.213 36.3C213.513 40.8 213.813 45.2 214.113 49.7C214.313 51.9 214.513 54.1 214.513 56.2C214.513 56.6 214.513 57.5 214.213 57.2C212.813 55.8 212.013 53 211.313 51.2C210.413 49.1 209.913 47 210.013 44.6C210.113 41 212.713 37.4 216.513 36.4C218.513 35.9 220.013 37 220.113 39C220.313 41.2 218.713 43.5 217.313 45.1C217.013 45.5 210.613 51.6 213.013 52.3C214.613 52.7 217.113 51.6 218.313 50.7C219.113 50.1 218.613 50.4 218.513 51.2C218.313 52.4 218.913 57.7 221.013 56.7C222.613 55.9 225.513 51.3 223.413 49.7C222.713 49.2 222.013 49.5 221.413 49.9C220.213 50.7 220.313 51.6 221.213 52.6C222.413 53.8 224.313 55.1 226.013 54C228.413 52.5 229.813 49.8 230.413 47.2C231.013 44.9 229.213 48 229.013 48.7C228.813 49.3 228.613 50.2 228.913 50.8C229.713 52.3 232.213 48.8 232.513 48.4C233.013 47.7 233.513 46.8 233.913 46.1C234.113 45.7 234.813 44.8 234.413 44.9C233.313 45.4 232.813 47.4 232.713 48.4C232.613 49.2 232.213 50.8 233.013 51.5C234.813 52.9 237.313 47.7 237.813 46.7C238.013 46.4 238.313 45.7 238.413 45.3C238.513 45 238.313 44.8 238.113 45.1C237.513 46 236.213 49.7 238.213 50C239.113 50.1 239.613 49.3 240.013 48.7C241.813 46.3 243.013 43.5 244.413 41C246.013 38.2 247.513 35.2 249.913 33",stroke:"#A6C2DD",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Co.jsx)("path",{d:"M20 14.5H48C50.2 14.5 52 16.3 52 18.5C52 20.7 50.2 22.5 48 22.5H20C17.8 22.5 16 20.7 16 18.5C16 16.3 17.8 14.5 20 14.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Co.jsx)("path",{d:"M59 14.5H68C70.2 14.5 72 16.3 72 18.5C72 20.7 70.2 22.5 68 22.5H59C56.8 22.5 55 20.7 55 18.5C55 16.3 56.8 14.5 59 14.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Co.jsx)("path",{d:"M19 32.5H118C119.7 32.5 121 33.8 121 35.5C121 37.2 119.7 38.5 118 38.5H19C17.3 38.5 16 37.2 16 35.5C16 33.8 17.3 32.5 19 32.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Co.jsx)("path",{d:"M227 16.5H247C248.7 16.5 250 17.8 250 19.5C250 21.2 248.7 22.5 247 22.5H227C225.3 22.5 224 21.2 224 19.5C224 17.8 225.3 16.5 227 16.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Co.jsx)("path",{d:"M19 42.5H100C101.7 42.5 103 43.8 103 45.5C103 47.2 101.7 48.5 100 48.5H19C17.3 48.5 16 47.2 16 45.5C16 43.8 17.3 42.5 19 42.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Co.jsxs)("defs",{children:[(0,Co.jsxs)("linearGradient",{id:`${r}-paint0_linear_12221_26907`,x1:"38.3423",y1:"21.9516",x2:"46.3388",y2:"103.855",gradientUnits:"userSpaceOnUse",children:[(0,Co.jsx)("stop",{stopColor:"#F2F9FF",stopOpacity:"0.5"}),(0,Co.jsx)("stop",{offset:"0.629481",stopColor:"#D1E1F0",stopOpacity:"0.5"})]}),(0,Co.jsxs)("linearGradient",{id:`${r}-paint1_linear_12221_26907`,x1:"43.314",y1:"64.3826",x2:"226.883",y2:"215.125",gradientUnits:"userSpaceOnUse",children:[(0,Co.jsx)("stop",{stopColor:"#CDE3FA"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#9CBBDA"})]})]})]}),(0,Co.jsxs)("div",{className:"check-image-numbers d-flex items-center text-sans-serif",dir:"ltr",children:[(0,Co.jsx)("p",{className:(0,To.A)("body-4 px-1 py-0-5 border-radius-2 me-3",{"text-white bg-primary":s}),style:s?up:void 0,children:n}),(0,Co.jsx)("p",{className:(0,To.A)("body-4 px-1 py-0-5 border-radius-2",{"text-white bg-primary":a}),style:a?up:void 0,children:i})]})]})},{ScrollToFieldsProvider:hp,useAddFieldToScroll:mp,useScrollToFieldsTrigger:pp,useFakeStripeElement:gp}=(0,pm.J)(),yp=e=>{let{transitionEntered:t,showBadge:n,stripeElementState:i,setStripeElementState:s}=e;const{state:a,controller:r}=Jo(cn.AU_BECS),o=(0,ko.P)(),c=(0,Ho.t)(),u=(0,Fo.$)(),d=(0,op.j)(),m=(0,bo.M)(),[p,g]=(0,h.useState)(),y=(0,h.useRef)(null),f=Du(a.shakeKey,0!==a.shakeKey),S=(0,h.useRef)(!1),E=pp(),A=gp({scrollIntoView:e=>{var t;return null===(t=y.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==p?void 0:p.getElement(_r.AU_BANK_ACCOUNT))||void 0===e?void 0:e.focus()}});return mp(A,(e=>Boolean(e.error)||e.isEmpty)),(0,h.useEffect)((()=>{(0,l.sH)(void 0,void 0,void 0,(function*(){if(u)return;if(!y.current)throw new Error("auBankAccountContainerRef is not provided");const{stripeElements:e}=yield r.initiateAuBECS(y.current,{onAuBankAccountElementReady:()=>{s((e=>Object.assign(Object.assign({},e),{isReady:!0})))}});g(e)}))}),[r,u,s]),(0,h.useEffect)((()=>{if(!i.isReady||!p||!t)return;const e=p.getElement(_r.AU_BANK_ACCOUNT);if(!e){if(u)return;throw new Error("auBankAccount element is not initialized")}const n=()=>{S.current?m.document.dispatchEvent(new Event("stripeElementEvent")):S.current=!0,s((e=>Object.assign(Object.assign({},e),{isFocused:!0})))},a=()=>{s((e=>Object.assign(Object.assign({},e),{isFocused:!1})))},r=e=>{s((t=>{var n,i;return Object.assign(Object.assign({},t),{error:null!==(i=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==i?i:null})}))};return e.on("focus",n),e.on("blur",a),e.on("change",r),d||S.current||e.focus(),()=>{e.off("focus",n),e.off("blur",a),e.off("change",r)}}),[r,t,p,u,m,s,i.isReady,d]),(0,Co.jsxs)("form",{className:"flow-screen",onSubmit:e=>{e.preventDefault(),E(),r.leave()},children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("auBECSScreen.title")}`})}),(0,Co.jsx)(pl,{title:c.translate("auBECSScreen.title"),showBadge:n,titleQa:"au-becs-title"}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-5 pb-8":!o}),children:(0,Co.jsxs)("div",{className:(0,To.A)("fixed-container",{"grow-1 d-flex flex-column":!o}),children:[(0,Co.jsx)("p",{className:(0,To.A)("text-center",o?"text-ellipsis":"text-line-clamp-4"),children:c.translate("auBECSScreen.description")}),(0,Co.jsx)(dp,{className:(0,To.A)("mx-auto",o?"mt-7":"mt-5"),firstNumber:"000-000",secondNumber:"000123456",firstNumberHighlighted:i.isFocused,secondNumberHighlighted:i.isFocused}),(0,Co.jsxs)("div",{className:(0,To.A)("p-rel",o?"mt-7":"mt-5",{shake:f,"pointer-events-none":a.locked}),children:[(0,Co.jsx)("div",{ref:y,className:"StripeElement"}),i.error&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:i.error}),(0,Co.jsx)("p",{role:"alert",className:"sr-only",children:i.error})]})]}),(0,Co.jsx)("div",{className:o?"mt-5":"grow-1 min-h-0 p-rel mt-4",children:(0,Co.jsx)("div",{className:(0,To.A)({"p-abs top-left bottom-right scroll-box":!o}),children:(0,Co.jsx)(lu,{className:(0,To.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!o,"pointer-events-none":a.locked}),as:"p",token:"auBECSScreen.legalInformation",params:{link:"https://stripe.com/au/legal/becs-dd-service-agreement"}})})})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",errorTitle:a.payErrorMessage,processingState:a.processingState,dataQa:"au-becs-continue-button",trackingElement:"nextButton",children:a.isPaymentScreen?Sl(c,a.formattedAmount,a.frequency):c.translate("auBECSScreen.button")})})]})};function fp(e){const[t,n]=(0,h.useState)(!1);return(0,h.useLayoutEffect)((()=>{const{current:t}=e;if(!t)return;const i=()=>{const e=t.offsetWidth<t.scrollWidth||t.offsetHeight<t.scrollHeight;n(e)},s=new ResizeObserver(i);return t&&(s.observe(t),i()),()=>s.disconnect()}),[e]),t}const Sp=e=>{var t,n;const i=(0,Mc.Y)();return(0,Co.jsxs)("svg",{className:(0,To.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",viewBox:"0 0 64 64",height:null!==(t=e.height)&&void 0!==t?t:64,width:null!==(n=e.width)&&void 0!==n?n:64,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"24.0263",width:"26",x:"14",y:"23.5",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1.5"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.753923 0 0 0 0 0.0394018 0 0 0 0 0.468114 0 0 0 0.16 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_5614_10321"})]}),(0,Co.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"15.5483",width:"14.1826",x:"14.085",y:"22.9985",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5614_10321",stdDeviation:"2"})]}),(0,Co.jsxs)("filter",{id:`c-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"15.5483",width:"14.1826",x:"25.5386",y:"22.9985",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5614_10321",stdDeviation:"2"})]}),(0,Co.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"39.4602",x2:"43.2501",y1:"9.34783",y2:"49.635",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#d4e8ff"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#aed0f9"})]}),(0,Co.jsxs)("linearGradient",{id:`e-${i}`,gradientUnits:"userSpaceOnUse",x1:"14.1589",x2:"26.5091",y1:"19.2105",y2:"52.5764",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ef505a"}),(0,Co.jsx)("stop",{offset:".766418",stopColor:"#e61446"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#d60443"})]}),(0,Co.jsxs)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"20.9333",x2:"28.7525",y1:"27.4211",y2:"45.932",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff1f3"}),(0,Co.jsx)("stop",{offset:".71",stopColor:"#ffe0e7"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fed4e1"})]}),(0,Co.jsxs)("radialGradient",{id:`g-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(0 15.1591 -13.8222 0 27 28.1364)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff",stopOpacity:".7"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Co.jsxs)("linearGradient",{id:`h-${i}`,gradientUnits:"userSpaceOnUse",x1:"2.65798",x2:"2.65798",y1:"0",y2:"8.18031",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Co.jsx)("path",{d:"m28 9c-8.8366 0-16 7.1634-16 16v8c0 8.8366 7.1634 16 16 16h18c3.4031 0 6.5581-1.0625 9.1514-2.8738 3.0372.8662 5.5406.5697 7.9294-.4701.7855-.3419.6816-1.4562-.0809-1.8466-1.5753-.8065-2.6265-1.7568-3.2995-2.5406 1.4596-2.4131 2.2996-5.2429 2.2996-8.2689v-8c0-8.8366-7.1634-16-16-16z",fill:`url(#d-${i})`}),(0,Co.jsx)("path",{d:"m18.0005 15c-8.83654 0-15.99998 7.1634-15.99998 16v8c0 3.0319.84333 5.8669 2.30821 8.2831-.67348.7811-1.72144 1.7247-3.28728 2.5264-.76252.3904-.86638 1.5047-.080911 1.8466 2.384981 1.0381 4.884101 1.3353 7.914641.4743 2.59212 1.8088 5.74482 2.8696 9.14532 2.8696h18c8.8366 0 16-7.1634 16-16v-8c0-8.8366-7.1634-16-16-16z",fill:`url(#e-${i})`}),(0,Co.jsxs)("g",{filter:`url(#a-${i})`,children:[(0,Co.jsx)("path",{d:"m25.5002 47.1028c.9081.5647 2.0915.5647 2.9996 0 21.9195-13.6308 7.3499-28.6137-1.4998-19.1112-8.8497-9.5026-23.4193 5.4802-1.4998 19.1112z",fill:`url(#f-${i})`}),(0,Co.jsx)("path",{d:"m25.5002 47.1028c.9081.5647 2.0915.5647 2.9996 0 21.9195-13.6308 7.3499-28.6137-1.4998-19.1112-8.8497-9.5026-23.4193 5.4802-1.4998 19.1112z",fill:`url(#g-${i})`,fillOpacity:".4"})]}),(0,Co.jsx)("g",{filter:`url(#b-${i})`,children:(0,Co.jsx)("ellipse",{cx:"2.65798",cy:"4.09016",fill:`url(#h-${i})`,rx:"2.65798",ry:"4.09016",transform:"matrix(.754153 -.656699 .575342 .817913 16.8184 29.1728)"})}),(0,Co.jsx)("g",{filter:`url(#c-${i})`,children:(0,Co.jsx)("ellipse",{cx:"2.65798",cy:"4.09016",fill:`url(#h-${i})`,rx:"2.65798",ry:"4.09016",transform:"matrix(-.754153 -.656699 -.575342 .817913 36.9878 29.1728)"})})]})},Ep=(0,h.memo)(Sp);var Ap,Cp,vp=n(7710);function Np(){return Np=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Np.apply(this,arguments)}!function(e){e.HIGH="high",e.LOW="low"}(Ap||(Ap={}));var bp=function(e,t){return h.createElement("svg",Np({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Cp||(Cp=h.createElement("g",{fill:"currentColor"},h.createElement("path",{clipRule:"evenodd",d:"m15.0393 2.44995c-.6707-.24772-1.4079-.24772-2.0786 0l-8.30715 3.06797c-.39274.14504-.65355.51939-.65355.93807v7.54411c0 3.6861 1.95965 6.6874 4.28911 8.8073 1.16017 1.0557 2.38789 1.8689 3.45309 2.4137 1.1081.5668 1.9145.779 2.2578.779s1.1497-.2122 2.2578-.779c1.0652-.5448 2.2929-1.358 3.4531-2.4137 2.3294-2.1199 4.2891-5.1212 4.2891-8.8073v-7.54411c0-.41868-.2608-.79303-.6536-.93807zm-2.7715-1.876139c1.1179-.412868 2.3465-.412868 3.4644 0l8.3071 3.067969c1.1783.43514 1.9607 1.55819 1.9607 2.81421v7.54411c0 4.4389-2.3618 7.9375-4.943 10.2865-1.2952 1.1786-2.6702 2.092-3.8885 2.7151-1.1754.6012-2.3332.9984-3.1685.9984s-1.9931-.3972-3.1685-.9984c-1.21831-.6231-2.59328-1.5365-3.88847-2.7151-2.58125-2.349-4.94303-5.8476-4.94303-10.2865v-7.54411c0-1.25602.78243-2.37907 1.96066-2.81421z",fillRule:"evenodd"}),h.createElement("path",{d:"m18.2906 11.75h-.2535v-1.1855c0-2.19278-1.7415-4.02451-3.9182-4.06361-.0595-.00107-.1783-.00107-.2378 0-2.1767.0391-3.91819 1.87083-3.91819 4.06361v1.1855h-.25354c-.39069 0-.70937.4028-.70937.9003v5.9463c0 .4969.31868.9035.7094.9035h8.5812c.3907 0 .7094-.4066.7094-.9035v-5.9463c0-.4974-.3187-.9003-.7094-.9003zm-3.4867 3.8674v1.7967c0 .2058-.1723.3799-.3784.3799h-.8509c-.2061 0-.3785-.1741-.3785-.3799v-1.7967c-.1999-.1966-.3162-.4684-.3162-.7691 0-.5698.4408-1.0594 1.0013-1.082.0594-.0024.1783-.0024.2377 0 .5605.0226 1.0013.5122 1.0013 1.082 0 .3007-.1164.5725-.3163.7691zm1.5623-3.8674h-4.7323v-1.1855c0-1.30621 1.0623-2.38623 2.3661-2.38623s2.3662 1.08002 2.3662 2.38623z"}))))},Pp=(0,h.forwardRef)(bp),Dp=(0,h.memo)(Pp);const _p=(0,h.createContext)(null);function Tp(){const e=(0,h.useContext)(_p);if(!e)throw new Error("Experiments is not provided");return e}const{useAddFieldToScroll:xp,useScrollToFieldsTrigger:Op,ScrollToFieldsProvider:kp}=(0,pm.J)(),Ip=e=>{let{hint:t,donation:n,currency:i,disabled:s,errors:a,onSelect:r}=e;const o=(0,Ho.t)(),c=Mo(),l=(0,h.useMemo)((()=>t.default),[t.default]),u=(0,h.useRef)(null),d=a.amount.min&&l;return xp(u,(()=>d)),(0,rl.f)({ref:u,mode:al.Q.ALL,autoFocus:l,preventScroll:!0}),(0,Co.jsxs)("div",{className:(0,To.A)("amount-hint",{"amount-hint-checked":l}),children:[(0,Co.jsx)("input",{type:"radio",id:`${t.id}-hint`,className:(0,To.A)("amount-hint-radio",{"has-error":d}),value:t.id,title:o.formatCurrency(t.amount,{currency:i,display:"short"})+", "+t.description,name:"hintOptions",checked:l,disabled:s,"aria-invalid":d,"aria-describedby":`${t.id}-hint-error`,"data-qa":"suggested-amount-hint-button",onChange:()=>r(t),ref:u}),(0,Co.jsxs)("label",{htmlFor:`${t.id}-hint`,className:c("amount-hint-label"),"data-qa":"suggested-amount-hint-label",children:[(0,Co.jsxs)("span",{className:"label-2 d-flex p-rel z-index-2",children:[(0,Co.jsx)("span",{className:"text-truncate me-2",children:o.formatCurrency(t.amount,{currency:i,display:"short"})}),(0,Co.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 ms-auto","aria-hidden":!0,children:d&&(0,Co.jsx)(Jl.U,{className:"p-abs centered","data-testid":"min-amount-tooltip-trigger",dataQa:"suggested-amount-hint",children:(0,Co.jsx)(lu,{as:"p",token:"donateForm.donationAmountField.error.min",params:{amount:o.formatCurrency(n.minAmount,{currency:n.currency,display:"round"})}})})})]}),(0,Co.jsx)("span",{className:"p-rel text-truncate z-index-2",children:t.description})]}),d&&(0,Co.jsx)(lu,{as:"p",id:`${t.id}-hint-error`,className:"sr-only",token:"donateForm.donationAmountField.error.min",params:{amount:o.formatCurrency(n.minAmount,{currency:n.currency,display:"round"})}})]})},wp=(0,h.memo)(Ip),Rp=e=>{const{disabled:t,onShowCustomAmount:n}=e,i=(0,Ho.t)(),s=Mo();return(0,Co.jsx)("button",{type:"button",className:s("custom-amount-btn"),disabled:t,onClick:()=>n(),"data-qa":"suggested-amount-custom-button",children:i.translate("donateForm.amountHint.customAmount")})},Mp=(0,h.memo)(Rp),Lp=e=>{let{currency:t,disabled:n,onChange:i,list:s}=e;const a=(0,Ho.t)(),r=cc(),o=tc();return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)("label",{className:"sr-only",htmlFor:`currency-${o}`,"data-qa":"currency-selector-label",children:[a.translate("donateForm.donationCurrency")," ",t]}),(0,Co.jsx)("select",{id:`currency-${o}`,className:"currency-select p-abs top-left bottom-right max-w-100 text-noselect p-0 border-0 m-0 overflow-hidden cursor-pointer z-index-1",value:t,onChange:e=>{i(e.target.value)},"data-qa":"currency-selector","data-tracking-element-name":"changeCurrency",disabled:n,children:s.map(((e,t)=>(0,Co.jsx)("optgroup",{children:e.map(((e,t)=>(0,Co.jsxs)("option",{value:e,children:[e,"  ",r.getName(e)]},t)))},t)))})]})},Up=(0,h.memo)(Lp),Fp=e=>{let{donation:t,disabled:n,autofocusMode:i,flowType:s,className:a,style:r,useSpaceAfterCurrencySymbol:o,isCustomAmount:c,placeholder:l,guessedCurrenciesList:u,allCurrenciesList:d,showError:m,errors:p}=e;const{controller:g}=Jo(cn.DONATE),y=(0,Fo.$)(),f=(0,zo.Q)(),S=(0,ko.P)(),E=(0,Ho.t)(),A=cc(),C=(0,wo.wf)(),v=(0,h.useRef)(null),N=(0,h.useRef)(null);(0,rl.f)({ref:N,autoFocus:t.canModifyAmount,mode:i}),xp(N,(e=>e.amount.required||e.amount.min||e.amount.max));const b=(e=>{const t=(0,No.n)();return(0,h.useMemo)((()=>t.company.allowCentsForCharges?e>0:null!==t.queryParams.amount&&!Number.isInteger(t.queryParams.amount)),[t,e])})(A.getDigits(t.currency)),[P,D]=(0,h.useState)(!1),[_,T]=(0,h.useState)(!1),[x,O]=(0,h.useState)(!1),[k,I]=(0,h.useState)(!1),w=(0,h.useCallback)((()=>k?E.translate("donateForm.donationAmountField.error.required"):_?E.translate("donateForm.donationAmountField.error.min",{amount:E.formatCurrency(t.minAmount,{currency:t.currency,display:"round"})}):x?E.translate("donateForm.donationAmountField.error.max",{amount:E.formatCurrency(t.maxAmount,{currency:t.currency,display:"floatcents"})}):""),[E,x,_,k,t.currency,t.maxAmount,t.minAmount]),R=(0,h.useCallback)((e=>{g.changeAmount(e)}),[g]),M=(0,h.useCallback)((e=>{g.changeCurrency(e),g.validateAmount()}),[g]),L=(0,h.useMemo)((()=>[u,d]),[u,d]),U=(0,h.useMemo)((()=>(0,Co.jsx)(Up,{currency:t.currency,disabled:n,onChange:M,list:L})),[L,M,t.currency,n]),F=(0,h.useCallback)((()=>{g.validateAmount(p.amount.required),T(!y&&p.amount.min),O(!y&&p.amount.max),I(!y&&p.amount.required)}),[g,y,p.amount.min,p.amount.max,p.amount.required]);return(0,h.useEffect)((()=>{v.current&&(T(!y&&p.amount.min),O(!y&&p.amount.max),I(!y&&p.amount.required),D(!S&&g.shouldShowAverageDonationHintTooltip))}),[p.amount.max,p.amount.min,p.amount.required,y,v,g.shouldShowAverageDonationHintTooltip,S]),(0,Co.jsx)("div",{ref:v,className:a,style:r,children:(0,Co.jsx)(Nc.S,{content:(0,Co.jsx)(lu,{token:"donateForm.donationAmountField.hint.average",params:{amount:E.formatCurrency(g.amountAverageDonationHint,{currency:t.currency,display:"round"})}}),trigger:"manual",manualOpen:!n&&!!N.current&&P,className:S?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:f?"left":"right",maxWidth:"220px",rootContainer:C,children:(0,Co.jsx)("div",{children:(0,Co.jsx)(Vh,{ref:N,className:(0,To.A)("group-price-control",{"group-price-control-custom-amount":c}),showCurrencySymbol:!0,useSpaceAfterCurrencySymbol:o,currency:t.currency,amount:t.amount,canModifyAmount:t.canModifyAmount,withoutFraction:!b,canSelectCurrency:t.canModifyAmount&&t.canSelectCurrency,currencyCodeNode:t.canModifyAmount&&t.canSelectCurrency&&U,currencyService:A,hasError:m,errorLabel:w(),"aria-required":!0,qaActiveAttribute:"amount",qaDisabledAttribute:"disabled-amount",trackingElement:"amountInput",onAmountChange:R,onAmountInputBlur:F,donationType:s,isCustomAmount:c,placeholder:l,disabled:n})})})})},jp=(0,h.memo)(Fp),Bp={marginLeft:"-1px",marginRight:"-1px",marginBottom:"-1px"},Hp=e=>{const{controller:t}=Jo(cn.DONATE),n=(0,h.useCallback)((e=>{t.changeCurrentHint(e)}),[t]),i=(0,h.useMemo)((()=>e.donation.hintOptions),[e.donation.hintOptions]),s=(0,h.useCallback)((()=>{t.changeAmount(null)}),[t]);return(0,Co.jsxs)("div",{className:(0,To.A)("border border-gray-20 border-radius-base",e.className,{shake:e.shake}),children:[i&&i.map(((t,i)=>(0,Co.jsx)(wp,{hint:t,donation:e.donation,currency:e.donation.currency,disabled:e.disabled,errors:e.errors,onSelect:n},i))),e.showFrequencyCustomAmountInput?(0,Co.jsx)(jp,{donation:e.donation,errors:e.errors,tribute:e.tribute,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,useSpaceAfterCurrencySymbol:!0,isCustomAmount:!0,style:Bp,disabled:e.disabled,animationEnded:e.animationEnded,autofocusMode:e.autofocusMode}):(0,Co.jsx)(Mp,{disabled:e.disabled,onShowCustomAmount:s})]})},qp=(0,h.memo)(Hp),Gp={background:"#FFFAE8",border:"1px solid #E2D29A"},Vp=e=>{const{controller:t}=Jo(cn.DONATE),n=(0,Ho.t)(),i=(0,ko.P)(),s=Mo();return(0,Co.jsxs)(Co.Fragment,{children:[i&&t.shouldShowAverageDonationHint&&(0,Co.jsx)("div",{className:(0,To.A)("mb-3 body-3 py-2 px-4 border-radius-8 text-ellipsis",{shake:e.shake}),style:Gp,children:(0,Co.jsx)(lu,{token:"donateForm.donationAmountField.hint.average",params:{amount:n.formatCurrency(t.amountAverageDonationHint,{currency:e.donation.currency,display:"round"})}})}),e.donation.canModifyAmount&&(0,Co.jsx)("div",{className:(0,To.A)("amount-options",{shake:e.shake}),"aria-label":n.translate("donateForm.suggestionAriaLabel"),children:e.donation.amountOptions.map(((i,a)=>(0,Co.jsxs)("div",{className:"amount-option","data-qa":"suggested-amount-button",children:[(0,Co.jsx)("input",{type:"radio",id:`${i}-option`,className:"amount-option-radio",title:n.formatCurrency(i,{currency:e.donation.currency,display:"shortlabel"}),name:"amountOptions",value:i,checked:i===e.donation.amount,disabled:e.disabled,"aria-label":n.translate("donateForm.suggestionAmountAriaLabel",{amount:n.formatCurrency(i,{currency:e.donation.currency,display:"shortlabel"})}),onChange:e=>(e=>{t.changeAmount(e),t.validateAmount()})(Number.parseInt(e.target.value)),"data-tracking-element-name":"suggestionButton","data-qa":"suggested-amount-radio"}),(0,Co.jsx)("label",{htmlFor:`${i}-option`,className:s("amount-option-label"),"aria-hidden":"true","data-qa":"suggested-amount-label",children:(0,Co.jsx)("span",{className:"text-truncate",children:n.formatCurrency(i,{currency:e.donation.currency,display:"shortlabel"})})})]},a)))}),(0,Co.jsx)(jp,{donation:e.donation,errors:e.errors,tribute:e.tribute,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,disabled:e.disabled,className:(0,To.A)({"mt-2-5":e.donation.canModifyAmount,shake:e.shake}),animationEnded:e.animationEnded,autofocusMode:e.autofocusMode})]})},Kp=(0,h.memo)(Vp),Yp=e=>{let{isActive:t,endDate:n,disabled:i,className:s,toggleDailyDonation:a}=e;const r=(0,Ho.t)(),o=r.formatDate(n,{type:Ha.SHORT_WITH_YEAR});return(0,Co.jsx)(Yl,{className:(0,To.A)("body-3",s),customLabelClasses:"line-height-20",checked:t,disabled:i,onChange:a,dataQa:"daily-donation-checkbox",dataTestId:"daily-donation-checkbox",trackingElement:"dailyDonationCheckbox",children:(0,Co.jsx)("span",{className:"body-3 text-truncate","data-qa":"daily-donation-label",children:r.translate("donateForm.dailyDonation.label",{endDate:o})})})},zp=(0,h.memo)(Yp),Wp=e=>{const{index:t,onAnimationEnd:n}=e,i=(0,h.useRef)(null),[s,a]=(0,h.useState)(!1);(0,h.useEffect)((()=>{a(!0)}),[]);const r=(0,h.useCallback)((()=>{n(t)}),[t,n]);return(0,Co.jsx)(xo.A,{nodeRef:i,classNames:"rtg-flying-heart",in:s,timeout:2500,onEntered:r,children:(0,Co.jsx)("span",{ref:i,className:"flying-heart",children:(0,Co.jsx)(ul,{className:"d-block",width:14,height:14})})})},$p=(0,h.memo)(Wp),Xp=e=>{let{heartTrigger:t}=e;const[n,i]=(0,h.useState)([]);(0,h.useEffect)((()=>{null!==t&&i((e=>{const t=(e[e.length-1]||0)+1,n=[...e,t];return n.length===e.length?e:n}))}),[t]);const s=(0,h.useCallback)((e=>{i((t=>t.filter((t=>t!==e))))}),[]);return(0,Co.jsx)(Co.Fragment,{children:n.map((e=>(0,Co.jsx)($p,{index:e,onAnimationEnd:s},e)))})},Qp=(0,h.memo)(Xp),Zp=e=>{const{state:t,controller:n}=Jo(cn.DONATE),i=(0,Ho.t)(),s=Mo(),[a,r]=(0,h.useState)(null),o=e=>{n.validateAmount(),n.changeFrequency(e),e===t.rightButtonFrequency&&r((a||0)+1)},c=(0,h.useMemo)((()=>t.donation.frequency===t.rightButtonFrequency),[t.donation.frequency,t.rightButtonFrequency]);return(0,Co.jsxs)("div",{className:(0,To.A)("frequency d-flex items-center",e.className),"aria-label":i.translate("donateForm.frequencyAriaLabel"),children:[(0,Co.jsx)("button",{type:"button",className:(0,To.A)(s("frequency-btn"),{"frequency-btn-selected":t.donation.frequency===t.leftButtonFrequency}),"aria-current":t.donation.frequency===t.leftButtonFrequency,disabled:e.disabled,onClick:()=>o(t.leftButtonFrequency),"data-qa":"less-frequent-button","data-tracking-element-name":"onceRepeat",children:(0,Co.jsx)("span",{className:"text-truncate","data-testid":"left-button-label",children:t.leftButtonLabel})}),(0,Co.jsxs)("button",{type:"button",className:(0,To.A)(s("frequency-btn"),{"frequency-btn-selected":c}),"aria-current":t.donation.frequency===t.rightButtonFrequency,disabled:e.disabled,onClick:()=>o(t.rightButtonFrequency),"data-qa":"more-frequent-button","data-tracking-element-name":"monthlyPlan",children:[(0,Co.jsxs)("span",{className:"p-rel shrink-0 text-fuchsia-80 me-1","aria-hidden":!0,children:[(0,Co.jsx)(ul,{className:"d-block",width:14,height:14}),(0,Co.jsx)(Qp,{heartTrigger:a})]}),(0,Co.jsx)("span",{className:"text-truncate mx-0-5","data-testid":"right-button-label",children:t.rightButtonLabel})]}),(0,Co.jsx)("div",{className:"frequency-frame p-abs top-left bottom-right"})]})},Jp=(0,h.memo)(Zp);var eg,tg,ng;function ig(){return ig=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ig.apply(this,arguments)}var sg=function(e,t){return h.createElement("svg",ig({fill:"none",height:31,viewBox:"0 0 22 31",width:22,xmlns:"http://www.w3.org/2000/svg",ref:t},e),eg||(eg=h.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},h.createElement("path",{d:"m.507812 24.6719c-.026481-.0459-.052961-.0918-.098827-.0653l.026481.0459s.045865-.0265.072346.0194z"}),h.createElement("path",{d:"m.185395 24.0017c.045867-.0265.045867-.0265 0 0 .118215-.0071.118214-.0071.045866-.0265 0 0 .000001 0-.045866.0265z"}),h.createElement("path",{d:"m.179981 24.0035.019687-.0735z"}))),tg||(tg=h.createElement("path",{d:"m16.9661 23.931c-5.446 2.8727-8.22466 5.3799-8.22466 5.3799s-.80873-4.5387-.05829-9.6647",stroke:"#222832",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),ng||(ng=h.createElement("path",{d:"m9.35452 27.0478c22.14548-34.0478 3.64548-27.04779997-.35409-21.0478",stroke:"#222832",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})))},ag=(0,h.forwardRef)(sg),rg=(0,h.memo)(ag);const og=e=>{let{className:t}=e;const n=(0,Ho.t)(),i=(0,zo.Q)();return(0,Co.jsxs)("div",{className:(0,To.A)("frequency-hint-top d-flex items-center justify-center px-2 pt-1 mx-minus-3",t),children:[(0,Co.jsx)("p",{className:"frequency-hint-top-text text-truncate","data-qa":"recurring-frequency-hint-label",children:n.translate("frequencyHint.label")}),(0,Co.jsx)("span",{className:(0,To.A)("icon-slot icon-slot-12 shrink-0 mt-1-5",{"icon-flip-horizontal":i}),"aria-hidden":!0,children:(0,Co.jsx)(rg,{className:"p-abs top-left",width:19,height:27})})]})},cg=(0,h.memo)(og);var lg=n(2459);const ug=e=>{const{amount:t,currency:n,trackingElement:i,className:s,onClick:a}=e,r=(0,Ho.t)();return(0,Co.jsx)("button",{type:"button",className:(0,To.A)("btn btn-default",s),"data-tracking-element-name":i,"data-qa":"keep-one-time-button","data-testid":"keep-one-time-button",onClick:a,children:r.translate("upsellScreen.button.keepOneTime",{amount:r.formatCurrency(t,{currency:n,display:"floatcents"})})})},dg=(0,h.memo)(ug),hg=e=>{const{questionText:t,descriptionText:n}=e,i=(0,ko.P)();return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("p",{className:(0,To.A)("text-center",i?"text-ellipsis":"text-line-clamp-6"),dangerouslySetInnerHTML:{__html:t},"data-testid":"upsell-question"}),n&&(0,Co.jsx)("p",{className:(0,To.A)("text-center mt-3",i?"text-ellipsis":"text-line-clamp-4"),dangerouslySetInnerHTML:{__html:n},"data-testid":"upsell-description"})]})},mg=(0,h.memo)(hg),pg=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:(0,To.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:"73",viewBox:"0 0 72 73",width:"72",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","data-qa":"gift-box-icon",children:[(0,Co.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"72.3115",width:"71.1349",x:"0",y:"0",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:"6",dy:"2"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.591667 0 0 0 0 0.175035 0 0 0 0 0.199399 0 0 0 0.25 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17614"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17614",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"61.6255",width:"61.1349",x:"2",y:"6.54346",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:"3",dy:"3"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"1.5"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17614"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17614",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"33.358",x2:"55.1048",y1:"36.8415",y2:"38.8628",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ff6375"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#f2394e"})]}),(0,Co.jsxs)("linearGradient",{id:`d-${t}`,gradientUnits:"userSpaceOnUse",x1:"57.652",x2:"32.9253",y1:"47.3215",y2:"61.3441",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#db3448"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#f2394e"})]}),(0,Co.jsxs)("linearGradient",{id:`e-${t}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ccc"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`f-${t}`,gradientUnits:"userSpaceOnUse",x1:"2.7417",x2:"29.5784",xlinkHref:`#e-${t}`,y1:"5.62305",y2:"16.674"}),(0,Co.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"57.6504",x2:"30.8137",xlinkHref:`#e-${t}`,y1:"5.31152",y2:"16.3625"}),(0,Co.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Co.jsx)("g",{filter:`url(#b-${t})`,children:(0,Co.jsx)("path",{d:"m2 20.4733 27.5499-13.92.0169-.00984 27.5667 13.92894.0014.0009v6.8919l-2.4122 1.2362v20.6755l-25.1553 12.8922-25.15525-12.8922v-20.6755l-2.41215-1.2362z",fill:`url(#c-${t})`})}),(0,Co.jsx)("path",{d:"m4.41235 49.2779 25.15525 12.8921v-27.5674l-25.15525-12.8922z",fill:"#ff6375"}),(0,Co.jsx)("path",{d:"m54.723 49.2779-25.1553 12.8921v-27.5674l25.1553-12.8922z",fill:"#fb4d62"}),(0,Co.jsx)("path",{d:"m4.41235 30.3253 25.15525 12.8921v-8.6148l-25.15525-12.8922z",fill:"#db3448",fillOpacity:".75"}),(0,Co.jsx)("path",{d:"m54.723 30.3253-25.1553 12.8921v-8.6148l25.1553-12.8922z",fill:"#db3448",fillOpacity:".5"}),(0,Co.jsx)("path",{d:"m29.5499 6.5533-27.5499 13.92 27.5668 14.1274 27.5667-14.1283-27.5667-13.92894z",fill:"#ff7787"}),(0,Co.jsx)("path",{d:"m2 20.4731 27.5674 14.1284v6.8918l-27.5674-14.1283z",fill:"#fb4d62"}),(0,Co.jsx)("path",{d:"m57.1345 20.4731-27.5674 14.1284v6.8918l27.5674-14.1283z",fill:"#ff6375"}),(0,Co.jsx)("path",{d:"m12.3378 53.3394v-27.5674l7.2364 3.7086v27.5675z",fill:"#dcdcdc"}),(0,Co.jsx)("path",{d:"m47.1403 25.5949-7.2149 3.6978-10.1245-5.0269-10.2267 5.2146-7.223-3.7014 17.3508-8.8229z",fill:"#f4f4f4"}),(0,Co.jsx)("path",{d:"m47.142 25.5952-7.2365 3.7087v27.5674l7.2365-3.7087z",fill:"#dcdcdc"}),(0,Co.jsx)("path",{d:"m29.5676 62.3113-25.15525-12.8921v-.6892l25.15525 12.8921 25.1553-12.8921v.6892z",fill:`url(#d-${t})`,fillOpacity:".2"}),(0,Co.jsx)("path",{d:"m45.8044 17.4261c-3.6871-.6226-7.6011 1.431-10.2537 2.8227-.9582.5027-1.7518.9191-2.3105 1.0917-.3618-.1451-.8792-.236-1.4538-.236h-3.9611c-.5567 0-1.0598.0853-1.4196.2226-.5213-.2107-1.1855-.5592-1.9564-.9637-2.6526-1.3917-6.5666-3.4453-10.2537-2.8227-3.9608.6687-4.65037 4.4568-3.9609 4.9658.4446.4109 4.6365.4646 15.7653-.1146.3474.2122.5804.9196 2 .9196h3.7864c.8521 0 1.9341-.7195 2.2136-1 11.2947.5993 15.3177.4941 15.7653.0804.6894-.509-.0001-4.2971-3.9609-4.9658z",fill:"#db3448",fillOpacity:".5"}),(0,Co.jsx)("path",{d:"m10.469 20.0297-.004-.0098-.0047-.0094c-.0642-.1276-.1269-.3985-.1665-.8141-.0386-.4048-.0529-.9172-.0381-1.5046.0295-1.1746.1748-2.6343.4655-4.1076.291-1.4746.7256-2.9523 1.3292-4.16833.6061-1.22108 1.3661-2.14551 2.2897-2.56537 1.2648-.5749 2.5766-.25259 3.9015.62535 1.3277.87973 2.6251 2.29152 3.8183 3.80205.8432 1.0675 1.6238 2.1702 2.3226 3.1573.2902.4098.5662.7997.8267 1.1588.4409.6078.84 1.1311 1.1842 1.5038.1718.1861.3371.3425.4931.454.0795.0568.1653.1084.2555.1443v3.2766c-5.8992.8884-9.9813.9034-12.6427.5588-1.3471-.1744-2.3223-.4399-2.9824-.7258-.33-.1429-.5757-.2885-.7487-.426-.1748-.1391-.2631-.2601-.2992-.35z",fill:"#f4f4f4",stroke:`url(#f-${t})`,strokeWidth:".5"}),(0,Co.jsx)("path",{d:"m49.9231 19.7182.004-.0098.0047-.0094c.0642-.1276.1269-.3985.1665-.8141.0386-.4048.0528-.9172.0381-1.5046-.0295-1.1746-.1748-2.6343-.4655-4.1076-.291-1.4746-.7257-2.9523-1.3292-4.16835-.6061-1.22108-1.3661-2.14551-2.2897-2.56537-1.2648-.5749-2.5766-.25259-3.9015.62535-1.3277.87973-2.6251 2.29151-3.8183 3.80207-.8432 1.0674-1.6238 2.1702-2.3226 3.1573-.2902.4098-.5662.7996-.8267 1.1588-.4409.6078-.84 1.1311-1.1842 1.5038-.1719.1861-.3371.3424-.4931.454-.0795.0568-.1654.1083-.2555.1443v3.2766c5.8992.8884 9.9813.9033 12.6427.5588 1.3471-.1744 2.3223-.44 2.9824-.7258.33-.1429.5757-.2885.7486-.426.1749-.1391.2632-.2601.2993-.35z",fill:"#f4f4f4",stroke:`url(#g-${t})`,strokeWidth:".5"}),(0,Co.jsx)("path",{d:"m27.3922 17.498c-1.6553.0001-7.6553-13.37515-13.1553-10.87509-3.5 2.00014 9.4703 11.74249 13.1553 10.87509z",fill:"#dcdcdc"}),(0,Co.jsx)("path",{d:"m32.9999 17.1864c1.6553.0002 7.6553-13.37507 13.1553-10.87501 3.5 2.00013-9.4703 11.74251-13.1553 10.87501z",fill:"#dcdcdc"}),(0,Co.jsx)("path",{d:"m26.5256 18.0437c.2721-.9838 1.2851-1.3759 2.3057-1.3805.3098-.0014.6782-.0249 1.1217-.0812.5022-.0638.9385-.1108 1.309-.1455.9169-.0858 1.7218.5308 1.8747 1.4389.2481 1.4727.4432 3.5148-.3104 3.8119-1.1972.4719-3.5916-.2431-5.7466 0-1.3613.1535-1.0028-2.0209-.5541-3.6436z",fill:"#f4f4f4"})]})]})},gg=(0,h.memo)(pg),yg=e=>{const{text:t,trackingElement:n,withGiftBoxIcon:i,withHeartIcon:s,autoFocus:a,onClick:r}=e,o=(0,zo.Q)(),c=(0,h.useRef)(null);return(0,rl.f)({ref:c,autoFocus:a,mode:al.Q.DESKTOP}),(0,Co.jsxs)("div",{className:"p-rel",children:[(0,Co.jsxs)("button",{ref:c,type:"button",className:(0,To.A)("btn btn-danger",{"px-10":i,"d-flex items-center justify-center":s}),"data-tracking-element-name":n,"data-qa":"upsell-high","data-testid":"upsell-high",onClick:r,children:[s&&(0,Co.jsx)(ul,{className:"icon-fill shrink-0 font-size-18 text-white me-2","aria-hidden":!0}),(0,Co.jsx)("span",{className:"text-truncate",children:t})]}),i&&(0,Co.jsx)(gg,{className:(0,To.A)("p-abs top-left z-index-2 ms-minus-5 mt-minus-3",{"icon-flip-horizontal":o}),"aria-hidden":!0})]})},fg=(0,h.memo)(yg),Sg=e=>{const{text:t,trackingElement:n,autoFocus:i,className:s,onClick:a}=e,r=(0,h.useRef)(null);return(0,rl.f)({ref:r,autoFocus:i,mode:al.Q.DESKTOP}),(0,Co.jsx)("button",{type:"button",ref:r,className:(0,To.A)("btn btn-primary",s),"data-tracking-element-name":n,"data-qa":"upsell-low","data-testid":"upsell-low",onClick:a,children:t})},Eg=(0,h.memo)(Sg),Ag=e=>{const t=(0,Ho.t)();return(0,Co.jsx)("div",{className:"px-body py-7",children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(0,Co.jsx)(mg,{questionText:e.questionText,descriptionText:e.descriptionText}),(0,Co.jsxs)("div",{role:"group",className:"mt-7","aria-label":t.translate("upsellScreen.buttonGroupAriaLabel"),children:[e.amountUpsellHigh&&(0,Co.jsx)(fg,{text:e.upsellHighText,trackingElement:"oldUpsellHighMonthlyUpsellCurtainExperiment",withGiftBoxIcon:!0,autoFocus:e.transitionEntered,onClick:e.onUpsellHighClick}),e.amountUpsellLow&&(0,Co.jsx)(Eg,{className:"mt-3",text:e.upsellLowText,autoFocus:e.transitionEntered&&!e.amountUpsellHigh,trackingElement:"oldUpsellLowMonthlyUpsellCurtainExperiment",onClick:e.onUpsellLowClick}),(0,Co.jsx)(dg,{className:"mt-3",amount:e.currentAmount,currency:e.currentCurrency,trackingElement:"oldUpsellKeepUpsellCurtainExperiment",onClick:e.onKeepOneTimeClick})]})]})})},Cg=(0,h.memo)(Ag),vg=e=>{const{amount:t,currency:n,trackingElement:i,onClick:s}=e,a=(0,Ho.t)();return(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate","data-tracking-element-name":i,"data-qa":"keep-one-time-link","data-testid":"keep-one-time-link",onClick:s,children:a.translate("upsellScreen.button.keepOneTimeLink",{amount:a.formatCurrency(t,{currency:n,display:"floatcents"})})})},Ng=(0,h.memo)(vg),bg=e=>{const t=(0,Ho.t)();return(0,Co.jsx)("div",{className:"px-body py-7",children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(0,Co.jsx)(mg,{questionText:e.questionShortText}),(0,Co.jsxs)("div",{role:"group",className:"mt-7","aria-label":t.translate("upsellScreen.buttonGroupAriaLabel"),children:[e.amountUpsellHigh&&(0,Co.jsx)(fg,{text:e.upsellHighText,trackingElement:"oldUpsellHighMonthlyUpsellCurtainExperiment",withHeartIcon:!0,autoFocus:e.transitionEntered,onClick:e.onUpsellHighClick}),e.amountUpsellLow&&(0,Co.jsx)(Eg,{className:"mt-2",text:e.upsellLowText,autoFocus:e.transitionEntered&&!e.amountUpsellHigh,trackingElement:"oldUpsellLowMonthlyUpsellCurtainExperiment",onClick:e.onUpsellLowClick}),(0,Co.jsx)("div",{className:"d-flex justify-center mt-4",children:(0,Co.jsx)(Ng,{amount:e.currentAmount,currency:e.currentCurrency,trackingElement:"oldUpsellKeepUpsellCurtainExperiment",onClick:e.onKeepOneTimeClick})})]})]})})},Pg=(0,h.memo)(bg),Dg=e=>{const{show:t,variant:n,testMode:i,onClose:s}=e,a=(0,l.Tt)(e,["show","variant","testMode","onClose"]),r=(0,ko.P)(),o=pc("lg"),c=(0,h.useRef)(null),u=(0,h.useRef)(null),d=(0,h.useRef)(null),m=(0,h.useRef)(null),p=Uo({rootElRef:u,trapStartRef:d,trapStopRef:m}),g=(0,lg.uh)({onSwipedDown:()=>{s()},touchEventOptions:{passive:!1},preventScrollOnSwipe:!0,trackMouse:!0}),y=(0,No.n)().getAskPageConfig().show,f=n===Dn.TEST_1?Cg:Pg;return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(xo.A,{nodeRef:c,in:t&&!!n,classNames:"rtg-upsell-backdrop",timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)("div",{ref:c,className:(0,To.A)("upsell-curtain-backdrop top-left bottom-right",r?"p-fixed":"p-abs",{"border-radius-16":!r&&o||!y&&!r,"border-bottom-radius-16":!r&&!o&&y}),onClick:s})}),(0,Co.jsx)(xo.A,{nodeRef:u,in:t&&!!n,classNames:"rtg-upsell-curtain",timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:e=>(0,Co.jsx)("div",Object.assign({},g,{children:(0,Co.jsxs)("div",{ref:u,className:(0,To.A)("upsell-curtain bottom-left w-100 bg-white",r?"p-fixed max-h-95 overflow-y-auto border-top-radius-16":"p-abs border-radius-16",{"pb-10":i&&r}),onFocus:p.handleFocus,onBlur:p.handleBlur,"data-qa":"upsell-curtain-block",children:[(0,Co.jsx)("span",{ref:p.trapStartRef,tabIndex:0,"aria-hidden":"true"}),(0,Co.jsx)(f,Object.assign({},a,{transitionEntered:"entered"===e})),(0,Co.jsx)("span",{ref:p.trapStopRef,tabIndex:0,"aria-hidden":"true"})]})}))})]})},_g=(0,h.memo)(Dg),Tg=()=>{const{state:e,controller:t}=Jo(cn.DONATE),n=(0,Ho.t)(),i=(0,ko.P)(),s=(0,Fo.$)(),a=(0,bo.M)(),r=(0,No.n)(),o=(0,h.useRef)(null),c=(0,h.useRef)(null),l=Tp(),u=Op(),[d,m]=(0,h.useState)(!0),p=Du(e.amountShakeKey,0!==e.amountShakeKey),g=Du(e.designationShakeKey,0!==e.designationShakeKey),y=!r.preselectDesignation,f=e.designation.shouldShowDesignation&&y,S=e.designation.shouldShowDesignation&&!y,E=l.get(Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT),A=l.get(Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT),C=!!e.donation.canModifyAmount&&e.donation.hintOptions,v=!C,N=e.donation.showDonationEndDate&&e.donation.donationEndDate,b=r.infrastructureParams.livemode,P=A.isTestGroup||E.isTestGroup1();xp(c,(e=>e.designation.required));const D=(0,h.useCallback)((()=>{t.toggleTribute()}),[t]),_=(0,h.useCallback)((e=>{t.changeTributeName(e)}),[t]),T=(0,h.useCallback)((()=>{t.addComment()}),[t]),x=(0,h.useCallback)((e=>{t.setIsTributeInputFocused(e)}),[t]),O=(0,h.useCallback)((e=>t.changeGoal(e)),[t]),k=(0,h.useCallback)((()=>t.savePrevComment()),[t]),I=(0,h.useCallback)((()=>{m(!0)}),[]),w=(0,h.useCallback)((()=>{m(!1)}),[]),R=(0,h.useCallback)((()=>{t.closeUpsellCurtain()}),[t]),M=(0,h.useCallback)((e=>{t.toggleDonationEndDateActive(e)}),[t]);return(0,h.useEffect)((()=>{var t;return i&&e.upsellCurtainShown&&(null===(t=null==a?void 0:a.document)||void 0===t||t.body.classList.add("overflow-hidden")),()=>{var e;null===(e=null==a?void 0:a.document)||void 0===e||e.body.classList.remove("overflow-hidden")}}),[e,a,i]),(0,h.useEffect)((()=>{if(e.upsellCurtainShown)return l.get(Sn.UPSELL_CURTAIN_EXPERIMENT).onBackDropClose(R)}),[l,e.upsellCurtainShown,R]),(0,h.useEffect)((()=>{A.exposure(),E.exposure()}),[A,E]),(0,Co.jsxs)("form",{onSubmit:e=>{u(),e.preventDefault(),t.leave()},className:"flow-screen","data-qa":"fiat-donate-form",children:[(0,Co.jsx)(il,{autoFocus:i,children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("donateForm.title")}`})}),(0,Co.jsx)(pl,{className:"border-bottom-0",titleFullWidth:!0,children:(0,Co.jsxs)("div",{className:(0,To.A)("d-flex items-center justify-center",i?"pt-3 pb-2":"py-3"),children:[(0,Co.jsx)(Dp,{className:"icon-fill shrink-0 font-size-28 text-green-80 me-2","aria-hidden":!0}),(0,Co.jsx)("h2",{className:"title-1 text-truncate",children:n.translate("donateForm.title")})]})}),(0,Co.jsx)(Fc,{className:"px-body",children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[P&&(0,Co.jsx)(cg,{className:"mb-3"}),e.donation.canModifyFrequency&&(0,Co.jsx)(Jp,{className:i?"mb-4":"mb-3",disabled:t.isLocked}),(0,Co.jsx)(vp.A,{children:(0,Co.jsx)(xo.A,{nodeRef:o,timeout:150,onEntered:I,onExited:w,classNames:C?"rtg-amount-hints":"rtg-amount-suggestions",children:(0,Co.jsxs)("div",{ref:o,children:[C&&(0,Co.jsx)(qp,{donation:e.donation,tribute:e.tribute,errors:e.errors,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,showFrequencyCustomAmountInput:e.showFrequencyCustomAmountInput,shake:p,disabled:t.isLocked,animationEnded:d,autofocusMode:al.Q.ALL}),v&&(0,Co.jsx)(Kp,{donation:e.donation,tribute:e.tribute,errors:e.errors,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,shake:p,disabled:t.isLocked,animationEnded:d,autofocusMode:al.Q.DESKTOP})]})},C?"amount-hints":"amount-suggestions")}),!f&&!N&&(0,Co.jsx)(jl,{size:i?12:8,sizeMin:4}),f&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(jl,{size:12,sizeMin:4}),(0,Co.jsx)(Wh,{goal:e.designation.goal,goals:e.designation.goals,shake:g,hasError:e.errors.designation.required,changeGoal:O,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable,isDesignationRequired:y,disabled:t.isLocked,ref:c})]}),N&&e.donation.donationEndDate&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(jl,{size:12,sizeMin:4}),(0,Co.jsx)(zp,{endDate:e.donation.donationEndDate,isActive:e.donation.isDonationEndDateActive,toggleDailyDonation:M,disabled:t.isLocked})]}),e.tribute.show&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(jl,{size:12,sizeMin:4}),(0,Co.jsx)(nm,{inHonorOfMaxLength:e.tribute.inHonorOfMaxLength,isActive:e.tribute.isActive,sharingEnabled:e.tribute.sharingEnabled,labelType:e.tribute.labelType,name:e.tribute.name,disabled:t.isLocked,onToggleTribute:D,onChangeTributeName:_,onInputFocusChange:x})]}),(0,Co.jsx)(jl,{size:12,sizeMin:4,className:e.tribute.show||N||f?i?"mt-3":"mt-auto":void 0}),S&&(0,Co.jsx)(Wh,{goal:e.designation.goal,goals:e.designation.goals,shake:g,hasError:e.errors.designation.required,changeGoal:O,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable,disabled:t.isLocked}),e.comment.isEnabled&&(0,Co.jsxs)(Co.Fragment,{children:[S&&(0,Co.jsx)(jl,{size:12,sizeMin:4}),(0,Co.jsx)(Uh,{prevContent:e.comment.prevContent,content:e.comment.content,onAddComment:T,onHighlight:k,disabled:t.isLocked})]}),!i&&(0,Co.jsx)(jl,{size:20,sizeMin:16})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{type:"submit",className:"btn btn-primary",disabled:t.isLocked,processingState:e.processingState,trackingElement:"nextButton",dataQa:"donate-button",children:e.donateButtonLabel})}),(0,Co.jsx)(_g,{show:e.upsellCurtainShown,variant:t.upsellCurtainExperiment.variantName,currentAmount:e.preDonationUpsell.upsell.fromAmount,currentCurrency:e.preDonationUpsell.currency,amountUpsellHigh:e.preDonationUpsell.highAmount,amountUpsellLow:e.preDonationUpsell.lowAmount,upsellHighText:e.preDonationUpsell.highButtonText,upsellLowText:e.preDonationUpsell.lowButtonText,questionText:e.preDonationUpsell.questionText,questionShortText:e.preDonationUpsell.questionShortText,descriptionText:e.preDonationUpsell.descriptionText,testMode:!b&&!s,onUpsellHighClick:()=>t.confirmUpsell(Ap.HIGH),onUpsellLowClick:()=>t.confirmUpsell(Ap.LOW),onKeepOneTimeClick:()=>t.confirmUpsell(null),onClose:R})]})};var xg;!function(e){e.CONTINUE="continue",e.UPSELL_PAY_LATER="upsell_pay_later"}(xg||(xg={}));const Og=e=>{const{controller:t}=Jo(cn.DOUBLE),n=(0,Ho.t)();return(0,Co.jsx)("div",{className:(0,To.A)("d-flex justify-center",e.className),children:(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:e.locked,onClick:()=>t.skip(),"data-qa":"skip-to-the-next-step","data-tracking-element-name":"skipButton",children:n.translate("doubleDonationScreen.button.skip")})})},kg=(0,h.memo)(Og),Ig=e=>{const t=(0,Ho.t)(),n=(0,h.useCallback)((()=>{e.onLeave()}),[e]),i=(0,h.useCallback)((()=>{e.onAcceptUpsell()}),[e]);return(0,Co.jsx)("div",{className:(0,To.A)(e.className),children:e.isAlreadyPaidAmountNotMatched?(0,Co.jsx)(Ll,{className:"btn-primary",processingState:e.processingState,onClick:n,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:t.translate("doubleDonationScreen.button.continue")}):(0,Co.jsxs)(Co.Fragment,{children:[e.buttonType===xg.CONTINUE&&(0,Co.jsx)(Ll,{className:"btn-primary",processingState:e.processingState,onClick:n,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:t.translate("doubleDonationScreen.button.continue")}),e.buttonType===xg.UPSELL_PAY_LATER&&(0,Co.jsxs)("div",{className:"d-block",children:[(0,Co.jsx)(Ll,{className:"btn-primary",processingState:e.processingState,onClick:i,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:e.changeAmountButtonLabel}),(0,Co.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:e.locked,onClick:n,"data-qa":"skip-to-the-next-step","data-tracking-element-name":"skipButton",children:e.noChangeAmountButtonLabel})})]}),e.showSkipButton&&(0,Co.jsx)(kg,{locked:e.locked,className:"mt-5"})]})})},wg=(0,h.memo)(Ig),Rg=e=>{const{controller:t}=Jo(cn.DOUBLE),n=(0,Ho.t)(),i=(0,Fo.$)(),s=(0,h.useMemo)((()=>e.isIntegrationEnabled?e.companies.map((e=>({id:e.id.toString(),value:e.company_name}))):[]),[e.companies,e.isIntegrationEnabled]),a=(0,h.useCallback)((n=>{i||e.isIntegrationEnabled&&t.getDTDCompanies(n)}),[t,i,e.isIntegrationEnabled]),r=(0,h.useCallback)((e=>{t.changeEmployerName(e)}),[t]),o=(0,h.useCallback)((()=>{t.changeEmployerName(""),t.resetEmployerDTD()}),[t]),c=(0,h.useCallback)((e=>t.setEmployerDTD(Number(e))),[t]);return(0,Co.jsx)(wm,{className:(0,To.A)("search-select-double",{"search-select-double-active":e.showEmployerMatchedBlock||e.showDTDUpsell}),labelFloating:!0,labelOptional:!0,label:n.translate("doubleDonationScreen.matchInput.label"),options:s,value:e.employer.name,autoComplete:"organization",onSearch:a,onSelect:c,onChange:r,placeholder:n.translate("doubleDonationScreen.matchInput.placeholder"),onClear:o,disabled:e.locked,hint:(0,Co.jsx)(lu,{token:"doubleDonationScreen.tooltipLabel",params:{link:"https://doublethedonation.com/privacy-policy/"}}),hintAriaLabel:n.translate("doubleDonationScreen.helpAriaLabel"),allowClear:!0,dataQa:"company-field",trackingElement:"selectEmployer",autoFocus:e.autoFocus,autoFocusMode:al.Q.DESKTOP})},Mg=(0,h.memo)(Rg),Lg=e=>{const t=(0,Ho.t)(),n=(0,h.useRef)(null),i=(0,ko.P)(),s=Bo(n);return(0,Co.jsx)(xo.A,{classNames:i?"rtg-dtd-description-mobile":"rtg-dtd-description",nodeRef:n,in:e.showDTDDescription,addEndListener:s,mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsxs)("div",{ref:n,children:[(0,Co.jsx)(lu,{className:(0,To.A)("text-center",i?"text-ellipsis":"text-line-clamp-4"),as:"p",token:"doubleDonationScreen.description.desktop"}),(0,Co.jsx)("p",{className:(0,To.A)("font-weight-500 text-center mt-1-5",i?"text-ellipsis":"text-line-clamp-4"),children:t.translate("doubleDonationScreen.callToAction")}),(0,Co.jsx)(jl,{size:16})]})})},Ug=(0,h.memo)(Lg);var Fg,jg,Bg;function Hg(){return Hg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hg.apply(this,arguments)}var qg,Gg=function(e,t){return h.createElement("svg",Hg({fill:"none",height:100,viewBox:"0 0 100 100",width:100,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Fg||(Fg=h.createElement("circle",{cx:50,cy:50,fill:"#c4c4c4",r:50})),jg||(jg=h.createElement("circle",{cx:50,cy:50,fill:"#fff",r:49.5,stroke:"#c7cdd6"})),Bg||(Bg=h.createElement("path",{clipRule:"evenodd",d:"m23 92.0905v-19.1493c0-2.1476 1.7185-3.9412 3.8729-3.9412h2.1271v-13.127c0-2.1175 1.7054-3.873 3.8279-3.873h1.1721v-10.984c0-2.2061 1.7927-4.016 4-4.016h1.2055l1.4179-6.1095.002-.0079c.4286-1.7193 1.9819-2.8826 3.7361-2.8826h4.1385v-11c0-.8284.6716-1.5 1.5-1.5s1.5.6716 1.5 1.5v11h4.2669c1.7542 0 3.3075 1.1633 3.7362 2.8826l.0041.0165 1.3019 6.1009h1.1909c2.2073 0 4 1.8099 4 4.016v10.984h2.1721c2.1225 0 3.8279 1.7555 3.8279 3.873v13.127h2.1271c2.1544 0 3.8729 1.7936 3.8729 3.9412v18.4895c-.6557.444-1.3226.8729-2 1.2861v-19.7756c0-1.0877-.8671-1.9412-1.8729-1.9412h-16.2542c-1.0058 0-1.8729.8535-1.8729 1.9412v26.7025c-.6628.0793-1.3295.1456-2 .1986v-43.9693c0-2.1175 1.7054-3.873 3.8279-3.873h6.1721v-10.984c0-1.1115-.9073-2.016-2-2.016h-24c-1.0927 0-2 .9045-2 2.016v10.984h7.1721c2.1225 0 3.8279 1.7555 3.8279 3.873v44.0385c-.6703-.0397-1.3371-.0926-2-.1584v-26.8119c0-1.0877-.8671-1.9412-1.8729-1.9412h-16.2542c-1.0058 0-1.8729.8535-1.8729 1.9412v20.3697c-.6769-.3916-1.3437-.7985-2-1.2204zm19.5677-60.7311-1.309 5.6406h17.5054l-1.2053-5.6483c-.2039-.7888-.9281-1.3517-1.7919-1.3517h-11.4054c-.8666 0-1.5927.5665-1.7938 1.3594zm.5594 37.6406h-12.1271v-13.127c0-1.0428.8397-1.873 1.8279-1.873h10.3442c.9882 0 1.8279.8302 1.8279 1.873v13.6198c-.5536-.3134-1.1914-.4928-1.8729-.4928zm26.8729 0v-13.127c0-1.0428-.8397-1.873-1.8279-1.873h-10.3442c-.9882 0-1.8279.8302-1.8279 1.873v13.6198c.5536-.3134 1.1914-.4928 1.8729-.4928zm-26-36v2h2v-2zm5 0v2h2v-2zm5 2v-2h2v2zm-20 26v-3h2v3zm0 5v-3h2v3zm6-5v-3h2v3zm0 2v3h2v-3zm19-5v3h2v-3zm0 5v3h2v-3zm6-5v3h2v-3zm0 8v-3h2v3zm-34 10v14.5268h-2v-14.5268zm5 19.3691v-19.3691h-2v19.3691zm31 0v-19.3691h-2v19.3691zm5-4.8423v-14.5268h-2v14.5268zm-32-47.5268v6.0193h2v-6.0193zm6 6.0193v-6.0193h2v6.0193zm6-6.0193v6.0193h2v-6.0193zm6 6.0193v-6.0193h2v6.0193z",fill:"#619fff",fillRule:"evenodd"})))},Vg=(0,h.forwardRef)(Gg),Kg=(0,h.memo)(Vg);function Yg(){return Yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yg.apply(this,arguments)}var zg,Wg,$g=function(e,t){return h.createElement("svg",Yg({fill:"none",height:26,viewBox:"0 0 26 26",width:26,xmlns:"http://www.w3.org/2000/svg",ref:t},e),qg||(qg=h.createElement("g",{stroke:"#428dff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4},h.createElement("path",{d:"m13 2v22"}),h.createElement("path",{d:"m2 13h22"}))))},Xg=(0,h.forwardRef)($g),Qg=(0,h.memo)(Xg);function Zg(){return Zg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zg.apply(this,arguments)}var Jg=function(e,t){return h.createElement("svg",Zg({fill:"none",height:100,viewBox:"0 0 100 100",width:100,xmlns:"http://www.w3.org/2000/svg",ref:t},e),zg||(zg=h.createElement("circle",{cx:50,cy:50,fill:"#fff",r:49.5,stroke:"#c7cdd6"})),Wg||(Wg=h.createElement("g",{fill:"#619fff"},h.createElement("path",{d:"m57.2608 62.7612c-2.0159 1.5341-4.5318 2.4449-7.2605 2.4449s-5.2446-.9108-7.2604-2.4449c-.4176-.3178-.8138-.6623-1.1859-1.0311-.146-.1447-.2884-.2931-.4268-.4451-.7192-.7894.3304-1.6178 1.2605-1.1484.0241.0122.0481.0252.072.0391.4596.2678.9347.5119 1.4236.7305 1.8681.8354 3.9383 1.2999 6.117 1.2999s4.2489-.4645 6.117-1.2999c.489-.2186.9641-.4627 1.4236-.7305.0239-.0139.048-.0269.0721-.0391.93-.4694 1.9796.359 1.2605 1.1484-.1385.152-.2808.3004-.4269.4451-.3721.3688-.7682.7133-1.1858 1.0311z"}),h.createElement("path",{d:"m39 50c0-1.6569 1.1123-3 2.4845-3h.031c1.3722 0 2.4845 1.3431 2.4845 3s-1.1123 3-2.4845 3h-.031c-1.3722 0-2.4845-1.3431-2.4845-3z"}),h.createElement("path",{d:"m58.4845 47c-1.3722 0-2.4845 1.3431-2.4845 3s1.1123 3 2.4845 3h.031c1.3722 0 2.4845-1.3431 2.4845-3s-1.1123-3-2.4845-3z"}),h.createElement("path",{clipRule:"evenodd",d:"m50 75c13.8071 0 25-11.1929 25-25s-11.1929-25-25-25-25 11.1929-25 25 11.1929 25 25 25zm23-25c0 12.7026-10.2974 23-23 23-12.7025 0-23-10.2974-23-23 0-12.7025 10.2975-23 23-23 12.7026 0 23 10.2975 23 23z",fillRule:"evenodd"}))))},ey=(0,h.forwardRef)(Jg),ty=(0,h.memo)(ey);const ny=()=>{const{state:e}=Jo(cn.DOUBLE);return(0,Co.jsxs)("div",{className:(0,To.A)("double-img shrink-0 mx-auto",{enabled:!e.showDTDDescription}),"aria-hidden":!0,children:[(0,Co.jsx)("div",{className:"double-img-user",children:(0,Co.jsx)(ty,{className:"d-block",width:80,height:80})}),(0,Co.jsx)("div",{className:"double-img-plus",children:(0,Co.jsx)(Qg,{className:"d-block",width:21,height:21})}),(0,Co.jsx)("div",{className:"double-img-company",children:(0,Co.jsx)(Kg,{className:"d-block",width:80,height:80})})]})},iy=(0,h.memo)(ny),sy={characterData:!0,childList:!0,subtree:!0},ay=e=>{let{currency:t,showDTDUpsell:n,isAlreadyPaidAmountNotMatched:i,showEmployerMatchedBlock:s,employer:a,minimumMatchedAmount:r,upsellTotal:o,DTDUpsellDoubledAmount:c,DTDDoubledAmount:l,isFeeCovered:u}=e;const d=(0,Ho.t)(),m=(0,ko.P)(),[p,g]=(0,h.useState)(!1),y=(0,h.useCallback)((e=>{const t=e.parentElement,n=e.firstChild;t&&n&&t.offsetHeight<=n.offsetHeight+44&&g(!0)}),[]),{mutableElementRef:f}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sy;const n=(0,h.useRef)(null);return(0,h.useEffect)((()=>{if(!(null==n?void 0:n.current)||!e)return;const i=new MutationObserver((()=>{e(n.current)}));return i.observe(n.current,t),()=>i.disconnect()}),[e,t,n]),{mutableElementRef:n}}(y),S=nl(n||s||i);return(0,Co.jsxs)("div",{ref:f,className:(0,To.A)("p-rel",{"grow-1":!m&&p}),children:[n&&!i&&(0,Co.jsxs)("div",{ref:S,className:(0,To.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs top-left top-right":!m&&!p,"p-abs top-left bottom-right scroll-box border-top-radius-0":!m&&p}),"aria-live":"polite","data-qa":"dtd-upsell-message","data-testid":"dtd-upsell-message",children:[(0,Co.jsx)("p",{className:"subtitle-4 text-ellipsis",children:d.translate("doubleDonationScreen.nameMatch",{name:a.name,amount:d.formatCurrency(r,{currency:t,display:"floatcents"})})}),(0,Co.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:d.translate("doubleDonationScreen.message",{withCosts:u?d.translate("doubleDonationScreen.withCosts"):"",amount:d.formatCurrency(o,{currency:t,display:"floatcents"}),doubleAmount:d.formatCurrency(c,{currency:t,display:"floatcents"})})})]}),s&&!i&&(0,Co.jsxs)("div",{ref:S,className:(0,To.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs top-left top-right":!m&&!p,"p-abs top-left bottom-right scroll-box border-top-radius-0":!m&&p}),"aria-live":"polite","data-qa":"dtd-employer-matched-message","data-testid":"dtd-employer-matched-message",children:[(0,Co.jsx)("p",{className:"subtitle-4 text-ellipsis",children:d.translate("doubleDonationScreen.matchedCompanyBlock.name",{name:a.name})}),(0,Co.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:d.translate("doubleDonationScreen.matchedCompanyBlock.message",{doubleAmount:d.formatCurrency(l,{currency:t,display:"floatcents"})})})]}),i&&(0,Co.jsxs)("div",{ref:S,className:(0,To.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs top-left top-right":!m&&!p,"p-abs top-left bottom-right scroll-box border-top-radius-0":!m&&p}),"aria-live":"polite","data-qa":"dtd-is-already-paid-amount-not-matched-message",children:[(0,Co.jsx)("p",{className:"subtitle-4 text-ellipsis",children:d.translate("doubleDonationScreen.smallDonationAmountExperiment.name",{name:a.name})}),(0,Co.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:d.translate("doubleDonationScreen.smallDonationAmountExperiment.message")})]})]})},ry=e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(cn.DOUBLE),s=(0,Ho.t)(),a=(0,ko.P)(),r=(0,h.useCallback)((()=>i.leave()),[i]),o=(0,h.useCallback)((()=>i.acceptUpsell()),[i]);return(0,Co.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-dtd",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("doubleDonationScreen.title")}`})}),(0,Co.jsx)(pl,{title:s.translate("doubleDonationScreen.title"),showBadge:t}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body d-flex flex-column",{"pt-6 pb-4":!a,"z-index-4":n.showDTDDescription,"overflow-hidden":!n.showDTDDescription}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Co.jsx)(iy,{}),(0,Co.jsxs)("div",{className:(0,To.A)("grow-1 d-flex flex-column",a?"mt-6":"mt-4"),children:[(0,Co.jsx)(Ug,{showDTDDescription:n.showDTDDescription}),(0,Co.jsx)(Mg,{isIntegrationEnabled:n.isIntegrationEnabled,companies:n.companies,showEmployerMatchedBlock:n.showEmployerMatchedBlock,showDTDUpsell:n.showDTDUpsell,employer:n.employer,locked:n.locked,autoFocus:!0}),(0,Co.jsx)(ay,{showDTDUpsell:n.showDTDUpsell,employer:n.employer,minimumMatchedAmount:n.minimumMatchedAmount,currency:n.currency,isFeeCovered:n.isFeeCovered,upsellTotal:n.upsellTotal,DTDUpsellDoubledAmount:n.DTDUpsellDoubledAmount,DTDDoubledAmount:n.DTDDoubledAmount,showEmployerMatchedBlock:n.showEmployerMatchedBlock,isAlreadyPaidAmountNotMatched:n.isAlreadyPaidAmountNotMatched})]})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(wg,{buttonType:n.buttonType,processingState:n.processingState,formattedTotal:n.formattedTotal,frequency:n.frequency,locked:n.locked,formattedUpsellTotal:n.formattedUpsellTotal,declineButtonLabel:n.declineButtonLabel,changeAmountButtonLabel:n.changeAmountButtonLabel,noChangeAmountButtonLabel:n.noChangeAmountButtonLabel,showSkipButton:n.showSkipButton,isAlreadyPaidAmountNotMatched:n.isAlreadyPaidAmountNotMatched,onLeave:r,onAcceptUpsell:o,additionalPayErrorMessage:n.additionalPayErrorMessage,payErrorMessage:n.payErrorMessage})})]})},oy=(0,h.memo)(ry);var cy;function ly(){return ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ly.apply(this,arguments)}var uy=function(e,t){return h.createElement("svg",ly({fill:"none",height:36,viewBox:"0 0 102 36",width:102,xmlns:"http://www.w3.org/2000/svg",ref:t},e),cy||(cy=h.createElement("path",{d:"m51.768 17.256c2.83-4.4504 1.4109-5.1346 1.2663-5.0523-2.7532 1.5572-4.8499 6.2447-4.6739 7.806.243 2.1494 1.9046-.3916 3.4076-2.7537zm10.7215-4.0841c-.5126.9186-.8436 1.928-.9748 2.9726-.0724.522-.1568 2.7897-.1381 3.0979.0289.5006.0924.9985.1902 1.4902.0673.2455.4869 1.128-.8596 1.3145-.7923.1094-.7768-1.881-.7923-2.2068-.0304-.6942.0842-3.1333.1576-3.4953.0774-.3703-.077.0221-.2228.2645-.3357.564-.7264 1.3271-1.1943 2.0785-.6145.988-1.9851 3.3414-3.8543 3.2013-.6993-.0531-1.4106-.1435-1.8169-2.0999-.1558-.7499-.0954-1.7357-.0794-2.3275-.0195-.1219-.0029-.2617-.1045-.2047-.662 1.5506-2.8121 6.1205-5.2416 5.0932-1.1252-.4744-1.6796-1.9326-.4375-4.7802 1.2101-2.7754 4.2625-6.2172 5.4784-6.4483 1.0837-.2066 1.1964.3414 1.1964.3414.0988-.2022.7744-.1785.9222.1116.1974.388.3292.4552.1974 1.4787-.0746.5903-.6208 4.2824-.5265 5.551.0434.5945.145 2.0594.7469 2.1299 1.0514.1264 2.3256-2.1189 2.4703-2.3535.2832-.4587 2.5518-4.2769 2.8311-4.8344.3005-.6011.4905-1.04.6844-1.4226s.7783-.4251 1.2878-.0762c.5094.3489.2543.8285.0799 1.1244zm-48.0051 1.8703c-1.3339.1442-3.7659 3.3812-4.267 4.5307-.51231 1.1738-.69726 2.3054-.0893 2.7775 1.2581.9807 2.5596-.6817 2.9421-1.0681.2367-.2379 1.8919-2.0504 2.3081-3.8913.2752-1.2155.4026-2.4881-.8939-2.3488zm.6951 14.367c-.092.1652-.1866.3288-.2838.491-.9827 1.6379-2.2719 3.0993-3.8704 4.1527-2.1651 1.4262-4.1985 1.9741-6.47046 1.9467-1.32108-.0153-2.59509-.23-3.681415-.9237-.89044-.5686-1.017386-1.4576-.747703-2.0445.374914-.8176 1.545208-.738 2.043118-.2688 1.24319 1.1703 1.98527 1.6241 3.58363 1.5464 1.31769-.0756 2.60043-.4542 3.74914-1.1067 6.61179-3.8762 6.55139-10.8443 6.81979-15.043.0284-.2553-.1098-.0696-.1565.0694-.3191.8933-.7141 1.7575-1.1806 2.5828-.6777 1.2294-1.6366 2.2796-2.7977 3.0641-.8373.5552-2.1971.8239-3.15466.1973-.34712-.2287-2.37703-1.4216-.65659-4.9754 1.08192-2.2361 3.35855-3.7871 3.87215-4.116 1.2558-.8052 2.1532-1.1881 3.0942-1.1155.4792.035.5483.2244.9046.2149.2028-.239.3147-.4146.6484-.5072.4479-.0718.9798.3049 1.1844 1.0188.2045.7139-.3282 1.8607-.4627 2.4122.0011-.0003.4742 7.1534-2.4369 12.4045zm7.5328-16.1178c-.8104.0153-.7441.6025-.914 1.1162-.1644.5122-1.561 5.1182-1.7384 5.944-.1773.8258-.2989 1.5674-.0425 2.7007.2609 1.1585 1.5837.8199 1.724.6166.6462-.9086.0738-1.1763.053-1.8109-.0166-.6632.1643-1.359.3008-2.257.0486-.3201.146-1.7758.1939-1.9734.0539-.2134.5102-1.8343 1.1675-2.8201.2814-.4226.5291-1.5382-.7443-1.5161zm2.2057-5.38681c-.1108-.22866-.7137-.94895-1.5005-.38979-1.1705.83202.1791 1.98174.3958 2.5458.2167.564 1.3867 1.0366 1.2159-.07625-.0249-.16006.2108-1.41755-.1112-2.07976zm12.9236 5.42541c-.381.0852-1.1413.2392-1.6197.3201-.7243.122-1.1189.5793-1.0916 1.0415.0273.4656.186.6849.8323.5617.5843-.1109 1.083-.6097 1.5944-.6119 0 0-1.056 4.4695-1.1251 5.0684-.069.599-.3814 2.2376.2602 3.1673 1.4273 2.0695 4.2821-.3026 4.5489-.561.196-.191 1.9995-1.7787 2.6109-3.052.3097-.6462-.2176-.7889-.5746-.9208-.357-.1318-1.1112.0961-1.2166.5686-.2296 1.0266-2.7272 3.7958-3.9633 3.2406-1.4568-.6555 1.1712-7.9999 1.1712-7.9999.3134-.1412 1.9007-.5519 3.4034-.9398 1.7337-.4459 7.0324-1.4963 5.8365-3.0855-.5853-.77741-2.098.4065-2.6106.6543-1.8366.8842-6.3321 2.1822-6.3321 2.1822s.5837-2.6403.7726-3.1604c.217-.59528 1.0174-.98477 1.1339-2.04454.1374-1.23265-1.3416-1.79394-2.0476-.44437-.146.27699-.3472 1.04148-.367 1.06054-.1896.18293-1.8222.83736-3.4274 1.60566-.5059.24211-3.3795 1.29101-3.3848 1.28421.0039-.022.8725-2.78682 1.879-5.09342.6696-1.53371 1.613-3.66866 3.2844-4.10205 1.5653-.40504.8273 1.23173 1.5316 1.65719.8933.53934 1.4413-.14085 1.5781-.79132.1073-.50946.0789-3.18283-2.6284-2.9156001-2.5762.2550351-4.629 4.2029701-7.1673 11.5801001-.0273.0295-2.0434 1.3369-3.7148 1.6729-.8265.1658-1.1922.2376-1.3015.5335-.0902.2374-.1095.496-.0556.7442.0539.2483.1788.4753.3593.6534.4763.5707 4.198-1.9023 4.194-1.8852-.0759.1007-3.1294 11.7808-3.1539 11.9171-.1759.9727-1.1604 3.5375-1.1071 4.7017.0295.599.2633 1.8456 1.1223 1.79 1.7988.1185 1.4519-2.4185 1.331-2.8837-.2519-.9624 1.0403-7.3241 2.2-12.0124.2364-.9563.7222-2.5254.8067-2.8986.0487-.2687.1595-.5223.3235-.7403.1641-.218.3768-.3943.621-.5147 0 0 6.4662-3.05997 6.5263-3.04229.0005.00671-1.0325 3.69459-1.0325 3.69459zm44.3013 5.8385c1.252 1.1886 2.4972.4351 3.1381-.0832 1.9657-1.5869 6.0185-8.8192 6.0185-8.8192.0231.242-1.6887 8.5367.5998 9.4564 1.4675.5884 4.8829-2.337 5.274-2.6078 2.2551-1.5627.8733-2.1342.4383-2.1342-1.1629-.0037-.9535.8416-1.2716 1.2212-.5246.6271-2.6332 2.8049-3.6656 2.2267-.556-.3128-.4188-2.1555-.3634-2.5802.3249-4.3903.4117-5.183.6665-6.19282.1427-.56129.8239-.5465 1.241-.62333 5.6306-1.04438 6.6405-.62318 7.3425-.96679.557-.27515.657-1.45962-.133-1.71435-.362-.11418-.82.16219-1.6491.47256-.8247.30595-4.9793 1.22823-5.5903 1.31923-.5628.08171-.6833.00214-.82-.17485-.1345-.17515.1245-2.23525.9316-3.9429.3512-.73904.3605-1.87-.7863-1.9575-.4716-.034-.8722.10076-1.0514.50427-.1784.40093-.522 4.05953-.6023 4.30313-.0813.24055-.5163.42836-.6124.84589-.0962.41754-.0292.67807-.3091.77197-.2829.0965-1.0576.17119-1.3763.24817-.3354.08202-.5344.72609-.5467 1.0985-.0123.37242.5862.15107.8748.10884.3295-.04817 1.1352-.45229.5619.24058-.2173.2648-4.1258 6.3984-5.6521 7.6614-1.7563 1.4514-1.6307-1.4025-1.5869-1.8886.2655-2.9104 1.5337-4.8629 1.7159-5.3263.1792-.4657.2547-1.84563-1.2425-1.54075-.1745.04422-.3349.13231-.4661.25598s-.2288.27885-.2838.45089c-.0025.00999-.0039.0202-.0044.03049-.1505 1.36019-2.7506 7.47449-.7896 9.33709zm2.2821-14.24048c.4614.90306 1.2496.58369 1.3838.35061.1347-.23125.2422-.27927.6244-.43385.7017-.28141-.5099-1.54576-1.6624-1.18904-.0741.03234-.1379.08452-.1844.15082s-.074.14418-.0794.2251c.0313.26464-.239.59437-.082.89681zm-14.1346 7.09688s.7563-.6542 1.0766-.6373c.1486.0073-.1106.4206.4091.6759.276.1372-.3019 1.9828-1.4444 3.7543-2.6238 4.0675-3.8678 3.8839-3.9757 2.6486-.2219-2.5774 3.1735-5.9166 3.9344-6.4415zm1.332 3.3348s-.0097.8764.0583 1.6257c.0607.6726.2897 2.0799.5257 2.5351.3657.7012 1.141.7012 1.7381.3576.7815-.4508.4119-1.2939.1143-1.5745-.2598-.2472-.8912-.5641-1.0824-1.6228-.1125-.6267-.0205-3.4508.1645-4.4388.1915-.9067.4776-1.7907.8535-2.63723.3113-.61662 2.1866-4.14733 2.2141-5.33256.0114-.51723-.5193-.94605-1.3865-.85642-.8672.08964-1.083.78676-1.0845 1.24378-.0021.45442-.9204 3.65448-.9679 3.80006-.0759.2186-.2264 1.52884-.6744 1.53173-.9977-.01753-1.9712.30954-2.7574.92654-.4321.3287-1.8994 1.4746-2.7465 2.6702-.3843.5411-2.1316 2.7961-1.9341 5.4879.18 2.4476 1.8859 2.0145 2.3753 1.936 2.2262-.359 3.7915-4.035 4.0182-4.4858.401-.8001.2654-.5849.5715-1.1665zm-8.7702-8.94233c-.1631.20122-.1224.8398.2328 1.16999.2674.24894.3048.29482.3134.49604.0152.37105.2512.39163.6146.38644.4444-.0064.8078-.31601.8527-.94605.045-.63004-.563-1.16892-1.0524-1.29027-.4894-.12134-.7495-.07942-.9611.18385z",fill:"#000"})))},dy=(0,h.forwardRef)(uy),hy=(0,h.memo)(dy);const my=()=>{const{state:e}=Jo(cn.GIFT_AID),t=(0,ko.P)(),n=(0,h.useRef)(null),i=fp(n);return(0,Co.jsx)("div",{className:"p-rel grow-1","data-qa":"legal-text",children:(0,Co.jsx)("div",{ref:n,className:(0,To.A)({"border-top border-gray-20":!i||t,"p-abs top-left bottom-right":!t,"scroll-box":i,"pointer-events-none":e.locked}),children:(0,Co.jsx)("p",{className:(0,To.A)("body-4 text-gray-80 text-ellipsis",i?"px-3 py-2-5":"pt-4-5"),dangerouslySetInnerHTML:{__html:e.legalText}})})})},py=(0,h.memo)(my),gy={boxShadow:"inset 0 0 0 1px #c7cdd6"},yy={boxShadow:"inset 0 -1px 0 0 #c7cdd6"},fy=e=>{let{className:t,email:n,name:i}=e;const s=(0,Ho.t)();return(0,Co.jsxs)("div",{className:t,children:[(0,Co.jsx)("p",{className:"text-center text-truncate",children:s.translate("idealConfirmationScreen.description")}),(0,Co.jsxs)("div",{className:"bg-white border-radius-8 mt-5",style:gy,children:[(0,Co.jsxs)("div",{className:"px-3 py-2",style:yy,children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("idealConfirmationScreen.email")}),(0,Co.jsx)("p",{className:"label-3 text-truncate",children:n})]}),(0,Co.jsxs)("div",{className:"px-3 py-2",children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("idealConfirmationScreen.name")}),(0,Co.jsx)("p",{className:"label-3 text-truncate",children:i})]})]})]})},Sy=(0,h.memo)(fy);var Ey;function Ay(){return Ay=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ay.apply(this,arguments)}var Cy,vy,Ny,by,Py,Dy,_y=function(e,t){return h.createElement("svg",Ay({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Ey||(Ey=h.createElement("g",{stroke:"currentColor",strokeWidth:1.4},h.createElement("g",{strokeLinecap:"round"},h.createElement("path",{d:"m12 12v5"}),h.createElement("path",{d:"m7 12v5"}),h.createElement("path",{d:"m17 12v5"})),h.createElement("path",{d:"m12 4-8 5h16z",strokeLinejoin:"round"}),h.createElement("path",{d:"m5 20h14",strokeLinecap:"round"}))))},Ty=(0,h.forwardRef)(_y),xy=(0,h.memo)(Ty);function Oy(){return Oy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Oy.apply(this,arguments)}var ky=function(e,t){return h.createElement("svg",Oy({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Cy||(Cy=h.createElement("path",{d:"m0 2.99597v21.02063c0 1.0062.82326 1.8294 1.82947 1.8294h12.55933c9.4949 0 13.6112-5.3146 13.6112-12.3672 0-7.01599-4.1163-12.3123-13.6112-12.3123h-12.55933c-1.00621 0-1.82947.82326-1.82947 1.82947z",fill:"#fff"})),vy||(vy=h.createElement("path",{d:"m8.40625 6.32564v15.53216h6.75985c6.1379 0 8.7998-3.4668 8.7998-8.3698 0-4.69257-2.6619-8.33321-8.7998-8.33321h-5.58899c-.64946 0-1.17086.53054-1.17086 1.17085z",fill:"#c06"})),Ny||(Ny=h.createElement("path",{d:"m14.3891 24.1721h-10.92187c-.96962 0-1.75629-.7867-1.75629-1.7563v-17.8099c0-.96962.78667-1.75629 1.75629-1.75629h10.92187c10.364 0 11.9099 6.66841 11.9099 10.63839 0 6.8879-4.2352 10.6841-11.9099 10.6841zm-10.92187-20.73706c-.64946 0-1.17086.5214-1.17086 1.17086v17.8099c0 .6494.5214 1.1708 1.17086 1.1708h10.92187c7.2996 0 11.3244-3.5857 11.3244-10.0986 0-8.74489-7.0983-10.05296-11.3244-10.05296z",fill:"#000"})),by||(by=h.createElement("g",{fill:"#fff"},h.createElement("path",{d:"m10.7856 11.3934c.2378 0 .4574.0366.6678.1098s.3842.1921.5397.3384c.1463.1555.2652.3476.3567.5672.0823.2287.1281.4939.1281.8049 0 .2745-.0366.5214-.1006.7501-.0732.2287-.1738.43-.3111.5946-.1372.1647-.311.2927-.5214.3933-.2103.0915-.4573.1464-.7409.1464h-1.60078v-3.7138h1.58248zm-.0549 3.0278c.1189 0 .2287-.0183.3476-.0549.1098-.0366.2104-.1006.2927-.1921.0824-.0915.1555-.2012.2104-.3476.0549-.1463.0824-.311.0824-.5214 0-.1829-.0183-.3567-.0549-.5031-.0366-.1463-.1006-.2836-.183-.3842-.0823-.1006-.1921-.1921-.3293-.247-.1372-.0548-.3018-.0823-.5031-.0823h-.5854v2.3417h.7226z"}),h.createElement("path",{d:"m15.7795 11.3934v.6861h-1.9576v.7958h1.8021v.6312h-1.8021v.9055h2.0033v.6861h-2.8174v-3.7138h2.7717z"}),h.createElement("path",{d:"m18.5784 11.3936 1.3904 3.7138h-.8507l-.2836-.8233h-1.3904l-.2927.8233h-.8233l1.3996-3.7138zm.0457 2.2776-.4665-1.3629h-.0092l-.4848 1.3629z"}),h.createElement("path",{d:"m21.2965 11.3936v3.0277h1.8112v.6861h-2.6253v-3.7138z"}))),Py||(Py=h.createElement("path",{d:"m5.35118 14.9607c.94471 0 1.71055-.7659 1.71055-1.7106s-.76584-1.7105-1.71055-1.7105-1.71056.7658-1.71056 1.7105.76585 1.7106 1.71056 1.7106z",fill:"#000"})),Dy||(Dy=h.createElement("path",{d:"m6.64143 21.8579c-1.43613 0-2.5887-1.1617-2.5887-2.5887v-2.0215c0-.7135.57629-1.299 1.29893-1.299.71349 0 1.29892.5763 1.29892 1.299v4.6102z",fill:"#000"})))},Iy=(0,h.forwardRef)(ky),wy=(0,h.memo)(Iy);const Ry=e=>{let{className:t}=e;const n=(0,Ho.t)();return(0,Co.jsxs)("div",{className:t,children:[(0,Co.jsxs)("div",{className:"d-flex items-center justify-center","aria-hidden":!0,children:[(0,Co.jsx)("div",{className:"ideal-img-logo",children:(0,Co.jsx)(wy,{className:"icon d-block"})}),(0,Co.jsx)("div",{className:"ideal-img-bank",children:(0,Co.jsx)(xy,{className:"icon-stroke d-block"})})]}),(0,Co.jsx)("p",{className:"text-center mt-8",children:n.translate("idealConfirmationScreen.returnInfoLabel")})]})},My=(0,h.memo)(Ry),Ly=e=>{let{className:t,locked:n}=e;const i=(0,ko.P)();return(0,Co.jsx)("div",{className:(0,To.A)("p-rel",t),children:(0,Co.jsx)("div",{className:(0,To.A)({"p-abs top-left bottom-right scroll-box":!i}),children:(0,Co.jsx)(lu,{className:(0,To.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!i,"pointer-events-none":n}),as:"p",token:"idealConfirmationScreen.legalInformation"})})})},Uy=(0,h.memo)(Ly);var Fy;!function(e){e.CARD="creditCard",e.APPLE_PAY="applePay",e.GOOGLE_PAY="googlePay",e.SEPA="sepa",e.PAYPAL="paypal",e.AU_BECS="auBecsDebit",e.UK_BACS="ukBacs",e.VENMO="venmo",e.ACSS="acss",e.IDEAL="ideal",e.US_BANK_ACCOUNT="usBankAccount",e.US_BANK_ACCOUNT_INSTANT="usBankAccountInstant",e.US_BANK_ACCOUNT_VERIFICATION="usBankAccountVerification"}(Fy||(Fy={}));const jy=()=>{const e=(0,Ho.t)(),t=Mo();return(0,Co.jsxs)("div",{className:(0,To.A)(t("payment-loader"),"p-abs top-left bottom-right d-flex flex-column items-center justify-center p-8 bg-white"),children:[(0,Co.jsx)("div",{className:"spinner spinner-primary spinner-xl"}),(0,Co.jsx)("p",{className:"mt-6 body-1 text-center text-ellipsis max-w-100",children:e.translate("paymentLoader.text")})]})};var By;!function(e){e.VISA="visa",e.MASTERCARD="mastercard",e.AMEX="amex",e.DISCOVER="discover",e.DINERS="diners",e.JCB="jcb",e.UNIONPAY="unionpay",e.UNKNOWN="unknown",e.UNKNOWN_ERROR="unknown-error"}(By||(By={}));const Hy={visa:By.VISA,mastercard:By.MASTERCARD,amex:By.AMEX,discover:By.DISCOVER,diners:By.DINERS,jcb:By.JCB,unionpay:By.UNIONPAY,unknown:By.UNKNOWN};var qy,Gy;function Vy(){return Vy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vy.apply(this,arguments)}var Ky=function(e,t){return h.createElement("svg",Vy({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),qy||(qy=h.createElement("rect",{x:9,y:9,width:13,height:13,rx:2,ry:2})),Gy||(Gy=h.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})))},Yy=(0,h.forwardRef)(Ky),zy=(0,h.memo)(Yy);const Wy=e=>{let{isBottomPlacement:t,locked:n}=e;const i=(0,Ho.t)(),s=(0,ko.P)(),a=(0,h.useRef)(null),r=(0,bo.M)();return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("div",{className:"ui-tooltip-stripes-top"}),(0,Co.jsx)("p",{className:"text-gray-80 mt-1",children:i.translate("creditCard.testModeTooltip.instructions")}),(0,Co.jsxs)("div",{className:"d-flex items-center mt-1",children:[(0,Co.jsxs)("p",{ref:a,className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-card-number",children:["4242",(0,Co.jsx)("span",{className:"text-transparent",children:"."}),"4242",(0,Co.jsx)("span",{className:"text-transparent",children:"."}),"4242",(0,Co.jsx)("span",{className:"text-transparent",children:"."}),"4242"]}),!s&&(0,Co.jsx)("button",{type:"button",className:"btn-icon text-gray-40 ms-1-5",disabled:n,"aria-label":i.translate("creditCard.testModeTooltip.copyAriaLabel"),"data-qa":"testmode-tooltip-copy-button",onClick:()=>{var e;if(!a.current)throw new Error("Number ref is not defined");null===(e=r.getSelection())||void 0===e||e.selectAllChildren(a.current);try{r.document.execCommand("copy"),setTimeout((()=>{var e;null===(e=r.getSelection())||void 0===e||e.removeAllRanges()}),2e3)}catch(e){}},children:(0,Co.jsx)(zy,{className:"icon-stroke icon-stroke-2 d-block","aria-hidden":!0})})]}),(0,Co.jsxs)("div",{className:"d-flex flex-wrap items-center gap-x-4 gap-y-1 mt-0-5",children:[(0,Co.jsxs)("p",{children:[(0,Co.jsx)("span",{className:"text-gray-80 me-1",children:i.translate("creditCard.testModeTooltip.expireDate")}),(0,Co.jsxs)("b",{className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-expire",children:["04/",((new Date).getFullYear()+2).toString().slice(-2)]})]}),(0,Co.jsxs)("p",{children:[(0,Co.jsx)("span",{className:"text-gray-80 me-1",children:i.translate("creditCard.testModeTooltip.cvc")}),(0,Co.jsx)("b",{className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-cvc",children:"000"})]})]})]})},$y=(0,h.memo)(Wy),{ScrollToFieldsProvider:Xy,useAddFieldToScroll:Qy,useScrollToFieldsTrigger:Zy,useFakeStripeElement:Jy}=(0,pm.J)(),ef=["top","bottom"],tf=e=>{const{isReady:t,locked:i,stripeElementsCardState:s,setStripeElementsCardState:a}=e,{state:r,controller:o}=Jo(cn.PAYMENT_OPTIONS),c=(0,Ho.t)(),u=(0,zo.Q)(),d=tc(),m=(0,ko.P)(),p=(0,op.j)(),g=(0,Fo.$)(),[y,f]=(0,h.useState)(),S=Du(r.shakeKey,0!==r.shakeKey),E=(0,h.useRef)(null),A=(0,h.useRef)(null),C=(0,h.useRef)(null),v=(0,wo.wf)(),N=[u?"right":"left","top-end"],[b,P]=(0,h.useState)(!1),[D,_]=(0,h.useState)(By.UNKNOWN),T=(0,h.useRef)(!1),x=(0,bo.M)(),O=Jy({scrollIntoView:e=>{var t;return null===(t=E.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==y?void 0:y.getElement(_r.CARD_NUMBER))||void 0===e?void 0:e.focus()}}),k=Jy({scrollIntoView:e=>{var t;return null===(t=A.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==y?void 0:y.getElement(_r.CARD_EXPIRY))||void 0===e?void 0:e.focus()}}),I=Jy({scrollIntoView:e=>{var t;return null===(t=C.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==y?void 0:y.getElement(_r.CARD_CVC))||void 0===e?void 0:e.focus()}});return Qy(O,(e=>Boolean(e.cardNumber.error)||e.cardNumber.isEmpty)),Qy(k,(e=>Boolean(e.cardExpiry.error)||e.cardExpiry.isEmpty)),Qy(I,(e=>Boolean(e.cardCvc.error)||e.cardCvc.isEmpty)),(0,h.useEffect)((()=>{(0,l.sH)(void 0,void 0,void 0,(function*(){if(g)return;if(!E.current||!A.current||!C.current)throw new Error("Card containers are not provided");const{stripeElements:e}=yield o.initiateCreditCard({source:Tr.PAYMENT_OPTIONS,onCardElementReady:e=>{a(e,(e=>Object.assign(Object.assign({},e),{isReady:!0})))},cardCvcContainer:C.current,cardExpiryContainer:A.current,cardNumberContainer:E.current,cardNumberOptions:{placeholder:"1234 1234 1234 1234",showIcon:!1},cardCvcOptions:{placeholder:"123"},stripeElementStyleOverride:Object.assign(Object.assign({},ir),{base:Object.assign(Object.assign({},ir.base),{"::placeholder":{color:"transparent"}}),invalid:Object.assign(Object.assign({},ir.invalid),{color:"#222832",":focus":{color:"#222832"},"::placeholder":{color:"transparent"}})})});f(e)}))}),[o,g,a]),(0,h.useEffect)((()=>{const e=null==y?void 0:y.getElement(_r.CARD_NUMBER),t=null==y?void 0:y.getElement(_r.CARD_EXPIRY),n=null==y?void 0:y.getElement(_r.CARD_CVC);e&&t&&n&&(e.update({disabled:i}),t.update({disabled:i}),n.update({disabled:i}))}),[i,y]),(0,h.useEffect)((()=>{if(!s.cardNumber.isReady||!y||!t)return;const e=y.getElement(_r.CARD_NUMBER),n=y.getElement(_r.CARD_EXPIRY),i=y.getElement(_r.CARD_CVC);if(!e||!n||!i){if(g)return;throw new Error("Card elements are not initialized")}const r={[_r.CARD_NUMBER]:!1,[_r.CARD_EXPIRY]:!1,[_r.CARD_CVC]:!1},c={[_r.CARD_NUMBER]:e,[_r.CARD_EXPIRY]:n,[_r.CARD_CVC]:i};function l(e){if(o.changeCardFilledFields(e.elementType,e.complete),e.elementType===_r.CARD_NUMBER&&(e.error?_(By.UNKNOWN_ERROR):_(Hy[e.brand]||By.UNKNOWN)),a(e.elementType,(t=>{var n;return Object.assign(Object.assign({},t),{isEmpty:e.empty,error:(null===(n=e.error)||void 0===n?void 0:n.message)||null})})),!e.complete)return void(r[e.elementType]=!1);r[e.elementType]=!0;const[t]=Object.entries(r).find((e=>{let[,t]=e;return!t}))||[];t&&c[t].focus()}const u=e=>{P(!0),T.current?x.document.dispatchEvent(new Event("stripeElementEvent")):T.current=!0};return e.on("focus",u),n.on("focus",u),i.on("focus",u),p||T.current||e.focus(),e.on("change",l),n.on("change",l),i.on("change",l),()=>{e.off("change",l),n.off("change",l),i.off("change",l),e.off("focus",u),n.off("focus",u),i.off("focus",u)}}),[o,x.document,g,a,y,s.cardNumber.isReady,t,p]),(0,Co.jsx)(Nc.S,{content:(0,Co.jsx)($y,{locked:r.locked}),trigger:"manual",manualOpen:t&&!i&&r.showTestModeTooltipInfo,className:m?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:u?"left":"right",fallbackPlacements:N,maxWidth:"220px",rootContainer:v,children:(0,Co.jsxs)("div",{className:(0,To.A)("group-stacked-vertical group-shadow",{shake:S}),"data-qa":"payment-information-block",role:"group","aria-label":c.translate("creditCard.ariaLabel"),children:[(0,Co.jsxs)(Xl.s,{htmlFor:`card-number-${d}`,label:c.translate("creditCard.numberInput.label"),labelFloating:!0,formGroupClass:(0,To.A)("group-stacked-item",{"pointer-events-none":r.locked||i}),formLabelClass:(0,To.A)({"has-value":!s[_r.CARD_NUMBER].isEmpty,"has-error":null!==s[_r.CARD_NUMBER].error}),dataQa:"card-number-label",children:[(0,Co.jsx)("div",{ref:E,id:`card-number-${d}`,className:"StripeElement has-label-floating"}),(0,Co.jsxs)("div",{className:"p-abs centered-right d-flex items-center z-index-5 me-2-5",children:[s[_r.CARD_NUMBER].error&&(0,Co.jsxs)(Co.Fragment,{children:[t&&(0,Co.jsx)(Jl.U,{className:"shrink-0 me-2",children:s[_r.CARD_NUMBER].error}),(0,Co.jsx)("p",{role:"alert",className:"sr-only",children:s[_r.CARD_NUMBER].error})]}),(0,Co.jsx)("img",{className:"shrink-0 pointer-events-none",src:n(534)(`./card-${D}.png`),width:30,height:20,alt:D,"aria-hidden":!0})]})]}),(0,Co.jsxs)("div",{className:"group-stacked-item group-stacked-horizontal",children:[(0,Co.jsxs)(Xl.s,{htmlFor:`expiration-${d}`,label:c.translate("creditCard.expirationDate.label"),labelFloating:!0,formGroupClass:(0,To.A)("group-stacked-item",{"pointer-events-none":r.locked||i}),formLabelClass:(0,To.A)({"has-value":!s[_r.CARD_EXPIRY].isEmpty,"has-error pe-6":null!==s[_r.CARD_EXPIRY].error}),dataQa:"expiration-label",children:[(0,Co.jsx)("div",{ref:A,id:`expiration-${d}`,className:"StripeElement has-label-floating"}),s[_r.CARD_EXPIRY].error&&(0,Co.jsxs)(Co.Fragment,{children:[t&&(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:s[_r.CARD_EXPIRY].error}),(0,Co.jsx)("p",{role:"alert",className:"sr-only",children:s[_r.CARD_EXPIRY].error})]})]}),(0,Co.jsxs)(Xl.s,{htmlFor:`cvc-${d}`,label:c.translate("creditCard.cvcCode.label"),labelFloating:!0,formGroupClass:(0,To.A)("group-stacked-item",{"pointer-events-none":r.locked||i}),formLabelClass:(0,To.A)({"has-value":!s[_r.CARD_CVC].isEmpty,"has-error pe-12":null!==s[_r.CARD_CVC].error}),dataQa:"cvc-label",children:[(0,Co.jsx)("div",{ref:C,id:`cvc-${d}`,className:"StripeElement has-label-floating"}),(0,Co.jsxs)("div",{className:"p-abs centered-right d-flex items-center z-index-5 me-4","data-qa":"cvc-wrapper",children:[s[_r.CARD_CVC].error&&(0,Co.jsxs)(Co.Fragment,{children:[t&&(0,Co.jsx)(Jl.U,{className:"shrink-0 me-2",children:s[_r.CARD_CVC].error}),(0,Co.jsx)("p",{role:"alert",className:"sr-only",children:s[_r.CARD_CVC].error})]}),(0,Co.jsx)(Nc.S,{content:!r.locked&&!i&&t&&!b&&c.translate("creditCard.cvcCode.tooltipLabel"),trigger:"click",className:m?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:u?"left-start":"right-start",fallbackPlacements:ef,rootContainer:v,children:(0,Co.jsx)("button",{type:"button",className:"btn-icon font-size-18 text-gray-60",disabled:r.locked||i,"aria-label":c.translate("creditCard.cvcCode.helpAriaLabel"),"data-qa":"cvc-help-button",onClick:()=>P(!1),children:(0,Co.jsx)(Hl.A,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":u}),"aria-hidden":!0})})})]})]})]})]})})},nf=(0,h.memo)(tf);function sf(e){switch(e){case Fy.CARD:case Fy.APPLE_PAY:case Fy.GOOGLE_PAY:case Fy.SEPA:case Fy.PAYPAL:case Fy.AU_BECS:case Fy.UK_BACS:case Fy.VENMO:case Fy.ACSS:case Fy.IDEAL:return e;case Fy.US_BANK_ACCOUNT:case Fy.US_BANK_ACCOUNT_INSTANT:case Fy.US_BANK_ACCOUNT_VERIFICATION:return Fy.US_BANK_ACCOUNT;default:throw new U(e)}}var af,rf,of,cf,lf;function uf(){return uf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},uf.apply(this,arguments)}var df,hf,mf,pf,gf,yf=function(e,t){return h.createElement("svg",uf({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),af||(af=h.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),rf||(rf=h.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),of||(of=h.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),cf||(cf=h.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),lf||(lf=h.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},ff=(0,h.forwardRef)(yf),Sf=(0,h.memo)(ff);function Ef(){return Ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ef.apply(this,arguments)}var Af,Cf,vf=function(e,t){return h.createElement("svg",Ef({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),df||(df=h.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),hf||(hf=h.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),mf||(mf=h.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),pf||(pf=h.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),gf||(gf=h.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},Nf=(0,h.forwardRef)(vf),bf=(0,h.memo)(Nf);function Pf(){return Pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pf.apply(this,arguments)}var Df,_f,Tf,xf,Of,kf=function(e,t){return h.createElement("svg",Pf({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Af||(Af=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1001 18.16C19.6901 17.26 19.9101 16.8 20.3601 15.79C17.0401 14.53 16.5101 9.8 19.7901 7.99C18.7901 6.73 17.3801 6 16.0501 6C15.0901 6 14.4301 6.25 13.8401 6.48C13.3401 6.67 12.8901 6.84 12.3301 6.84C11.7301 6.84 11.2001 6.65 10.6401 6.45C10.0301 6.23 9.39007 6 8.59007 6C7.10007 6 5.51007 6.91 4.50007 8.47C3.08007 10.67 3.33007 14.79 5.62007 18.31C6.44007 19.57 7.54007 20.98 8.97007 21C9.57007 21.01 9.96007 20.83 10.3901 20.64C10.8801 20.42 11.4101 20.18 12.3401 20.18C13.2701 20.17 13.7901 20.42 14.2801 20.64C14.7001 20.83 15.0801 21.01 15.6701 21C17.1201 20.98 18.2801 19.42 19.1001 18.16Z",fill:"black"})),Cf||(Cf=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8399 1C15.9999 2.1 15.5499 3.19 14.9599 3.95C14.3299 4.77 13.2299 5.41 12.1699 5.37C11.9799 4.31 12.4699 3.22 13.0699 2.49C13.7399 1.69 14.8699 1.07 15.8399 1Z",fill:"black"})))},If=(0,h.forwardRef)(kf),wf=(0,h.memo)(If);function Rf(){return Rf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Rf.apply(this,arguments)}var Mf,Lf,Uf,Ff,jf=function(e,t){return h.createElement("svg",Rf({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Df||(Df=h.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),_f||(_f=h.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),Tf||(Tf=h.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),xf||(xf=h.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),Of||(Of=h.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},Bf=(0,h.forwardRef)(jf),Hf=(0,h.memo)(Bf);function qf(){return qf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qf.apply(this,arguments)}var Gf,Vf,Kf,Yf,zf,Wf,$f,Xf,Qf,Zf=function(e,t){return h.createElement("svg",qf({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Mf||(Mf=h.createElement("path",{d:"M21 12.2069C21 11.6015 20.9464 11.0268 20.8544 10.4674H12.1953V13.9234H17.1532C16.931 15.0575 16.2797 16.0154 15.3141 16.6667V18.9656H18.272C20.0038 17.364 21 15.0039 21 12.2069Z",fill:"#4285F4"})),Lf||(Lf=h.createElement("path",{d:"M12.1958 21.1954C14.6786 21.1954 16.7552 20.3678 18.2725 18.9655L15.3146 16.6666C14.487 17.2184 13.4372 17.5555 12.1958 17.5555C9.79728 17.5555 7.7666 15.9387 7.03862 13.7547H3.98877V16.1226C5.49837 19.1264 8.60186 21.1954 12.1958 21.1954Z",fill:"#34A853"})),Uf||(Uf=h.createElement("path",{d:"M7.03837 13.7547C6.84679 13.203 6.74717 12.6129 6.74717 11.9999C6.74717 11.3869 6.85446 10.7968 7.03837 10.2451V7.87726H3.98852C3.36016 9.11865 3 10.5133 3 11.9999C3 13.4865 3.36016 14.8812 3.98852 16.1226L7.03837 13.7547Z",fill:"#FBBC05"})),Ff||(Ff=h.createElement("path",{d:"M12.1958 6.44432C13.5521 6.44432 14.7629 6.91176 15.7207 7.82365L18.3414 5.20293C16.7552 3.71632 14.6786 2.80443 12.1958 2.80443C8.60186 2.80443 5.49837 4.87342 3.98877 7.87729L7.03862 10.2451C7.7666 8.0612 9.79728 6.44432 12.1958 6.44432Z",fill:"#EA4335"})))},Jf=(0,h.forwardRef)(Zf),eS=(0,h.memo)(Jf);function tS(){return tS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tS.apply(this,arguments)}var nS,iS,sS,aS,rS=function(e,t){return h.createElement("svg",tS({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Gf||(Gf=h.createElement("path",{d:"M0 2.98816V21.0058C0 21.8683 0.705652 22.5739 1.56811 22.5739H12.3332C20.4717 22.5739 24 18.0185 24 11.9735C24 5.95974 20.4717 1.42004 12.3332 1.42004H1.56811C0.705652 1.42004 0 2.1257 0 2.98816Z",fill:"white"})),Vf||(Vf=h.createElement("path",{d:"M7.20551 5.84209V19.1554H12.9997C18.2607 19.1554 20.5423 16.1838 20.5423 11.9813C20.5423 7.95905 18.2607 4.8385 12.9997 4.8385H8.2091C7.65242 4.8385 7.20551 5.29325 7.20551 5.84209Z",fill:"#CC0066"})),Kf||(Kf=h.createElement("path",{d:"M12.3332 21.1391H2.97158C2.14048 21.1391 1.46619 20.4648 1.46619 19.6337V4.36806C1.46619 3.53696 2.14048 2.86267 2.97158 2.86267H12.3332C21.2166 2.86267 22.5416 8.57845 22.5416 11.9813C22.5416 17.8852 18.9115 21.1391 12.3332 21.1391ZM2.97158 3.36447C2.4149 3.36447 1.96798 3.81138 1.96798 4.36806V19.6337C1.96798 20.1903 2.4149 20.6373 2.97158 20.6373H12.3332C18.59 20.6373 22.0399 17.5637 22.0399 11.9813C22.0399 4.48567 15.9556 3.36447 12.3332 3.36447H2.97158V3.36447Z",fill:"black"})),Yf||(Yf=h.createElement("path",{d:"M9.24405 10.1858C9.44791 10.1858 9.63608 10.2172 9.81642 10.2799C9.99675 10.3426 10.1457 10.4446 10.279 10.57C10.4045 10.7033 10.5064 10.8679 10.5848 11.0561C10.6554 11.2521 10.6946 11.4795 10.6946 11.7461C10.6946 11.9813 10.6632 12.193 10.6083 12.389C10.5456 12.585 10.4593 12.7575 10.3417 12.8987C10.2241 13.0398 10.0752 13.1496 9.89482 13.2358C9.71449 13.3142 9.50279 13.3613 9.25973 13.3613H7.88763V10.178H9.24405V10.1858ZM9.19701 12.781C9.29894 12.781 9.39302 12.7654 9.49495 12.734C9.58904 12.7026 9.67529 12.6478 9.74585 12.5694C9.81642 12.4909 9.87914 12.3969 9.92618 12.2714C9.97323 12.146 9.99675 12.0048 9.99675 11.8245C9.99675 11.6677 9.98107 11.5187 9.94971 11.3933C9.91834 11.2678 9.86346 11.1502 9.79289 11.064C9.72233 10.9777 9.62824 10.8993 9.51063 10.8523C9.39303 10.8052 9.25189 10.7817 9.0794 10.7817H8.57761V12.7889H9.19701V12.781Z",fill:"white"})),zf||(zf=h.createElement("path",{d:"M13.525 10.1858V10.7739H11.8471V11.456H13.3917V11.997H11.8471V12.7732H13.5642V13.3613H11.1493V10.178H13.525V10.1858Z",fill:"white"})),Wf||(Wf=h.createElement("path",{d:"M15.9242 10.1858L17.116 13.3691H16.3868L16.1437 12.6634H14.952L14.7011 13.3691H13.9954L15.195 10.1858H15.9242V10.1858ZM15.9634 12.1381L15.5635 10.9698H15.5557L15.1401 12.1381H15.9634Z",fill:"white"})),$f||($f=h.createElement("path",{d:"M18.2529 10.1858V12.781H19.8053V13.3691H17.5551V10.1858H18.2529V10.1858Z",fill:"white"})),Xf||(Xf=h.createElement("path",{d:"M4.58673 13.2437C5.39648 13.2437 6.05292 12.5872 6.05292 11.7775C6.05292 10.9677 5.39648 10.3113 4.58673 10.3113C3.77698 10.3113 3.12054 10.9677 3.12054 11.7775C3.12054 12.5872 3.77698 13.2437 4.58673 13.2437Z",fill:"black"})),Qf||(Qf=h.createElement("path",{d:"M5.69227 19.1555C4.4613 19.1555 3.47339 18.1597 3.47339 16.9366V15.2038C3.47339 14.5923 3.96734 14.0905 4.58675 14.0905C5.19832 14.0905 5.70011 14.5844 5.70011 15.2038V19.1555H5.69227Z",fill:"black"})))},oS=(0,h.forwardRef)(rS),cS=(0,h.memo)(oS);function lS(){return lS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lS.apply(this,arguments)}var uS,dS,hS,mS,pS,gS=function(e,t){return h.createElement("svg",lS({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),nS||(nS=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.69207 19.9323C5.03411 19.9366 6.38045 19.9323 7.72248 19.928C7.82563 19.7521 7.84772 19.5591 7.86975 19.3671C7.87904 19.2859 7.88833 19.2048 7.90375 19.1253C8.01949 18.4432 8.12442 17.7589 8.2293 17.0755C8.27301 16.7905 8.31671 16.5056 8.36115 16.2212C8.48628 15.4229 8.61147 14.6245 8.7323 13.8262C8.75816 13.6622 8.80565 13.5069 8.85743 13.3516C8.85638 13.3478 8.85538 13.344 8.85439 13.3403C9.08728 12.9799 9.41037 12.8254 9.8493 12.8254C10.0894 12.8254 10.3296 12.8278 10.5697 12.8303C11.4297 12.8392 12.2893 12.8479 13.1461 12.7434C14.1214 12.6226 15.0621 12.3723 15.9338 11.9062C17.2758 11.1856 18.1906 10.0852 18.7646 8.69141C19.0365 8.02682 19.2522 7.34072 19.3428 6.6244C19.3479 6.61684 19.3515 6.60782 19.3553 6.59811C19.358 6.59129 19.3608 6.5841 19.3644 6.57692L19.3903 6.44748C19.3864 6.43578 19.379 6.42408 19.3712 6.40278C19.372 6.4032 19.3728 6.40357 19.3737 6.40399C19.4902 5.79989 19.529 5.19574 19.4211 4.5916C19.1881 3.29703 18.4761 2.34336 17.3067 1.75647C16.1803 1.18256 14.9505 1.02722 13.7121 1.01428C12.0904 0.995773 10.4666 0.999293 8.84374 1.00282C8.19504 1.00422 7.54651 1.00564 6.89829 1.00564C6.37184 1.00564 5.96623 1.35517 5.88852 1.86868C5.84823 2.13056 5.80841 2.39245 5.76864 2.65433C5.68905 3.1778 5.60946 3.70132 5.52604 4.22479C5.45285 4.67984 5.37918 5.13483 5.30547 5.58987C5.15762 6.50278 5.00982 7.41569 4.86581 8.32861C4.79251 8.79214 4.72353 9.25568 4.65455 9.71922C4.58545 10.1834 4.51634 10.6477 4.44291 11.1119C4.33948 11.7679 4.23153 12.4228 4.12368 13.077C4.02008 13.7054 3.91659 14.3333 3.81722 14.9611C3.7021 15.6916 3.5904 16.4231 3.47861 17.1553C3.37249 17.8505 3.26627 18.5462 3.15697 19.2419C3.09658 19.613 3.32958 19.9323 3.69207 19.9323Z",fill:"#012D8A"})),iS||(iS=h.createElement("path",{d:"M7.72489 19.9284C7.87159 19.6824 7.85433 19.3934 7.8975 19.1258C8.06146 18.1592 8.20386 17.1926 8.35491 16.2216C8.48004 15.4233 8.60517 14.625 8.726 13.8267C8.75192 13.6627 8.79935 13.5073 8.85113 13.352C9.08419 12.9895 9.4078 12.8298 9.84799 12.8342C10.9484 12.8342 12.0487 12.8903 13.1448 12.7522C14.1244 12.6314 15.0608 12.3811 15.9325 11.915C17.2745 11.1944 18.1893 10.094 18.7633 8.70017C19.0351 8.03563 19.2509 7.34947 19.3415 6.63315C19.3501 6.61589 19.3544 6.59863 19.3631 6.58567C19.3717 6.54254 19.3804 6.49937 19.389 6.45624C20.416 6.99995 20.9641 7.87162 21.1107 9.01087C21.2316 9.94729 21.0892 10.8578 20.8562 11.764C20.6706 12.4847 20.3858 13.1621 19.9802 13.7835C19.3199 14.8019 18.4008 15.5096 17.2573 15.9153C16.6617 16.1267 16.049 16.2475 15.4233 16.3209C14.9011 16.3813 14.379 16.3813 13.8568 16.3856C13.3304 16.3856 12.9938 16.6747 12.9204 17.1926C12.7608 18.2843 12.6011 19.3761 12.4112 20.4678C12.3465 20.839 12.2947 21.2144 12.23 21.5811C12.148 22.0299 11.8287 22.2975 11.3756 22.2975C10.2752 22.2975 9.17479 22.2975 8.07442 22.2975C7.65585 22.2975 7.45301 22.0559 7.52206 21.6502C7.60406 21.1497 7.68601 20.6534 7.76802 20.1528C7.78098 20.0709 7.80254 19.9888 7.72489 19.9284Z",fill:"#019AE0"})),sS||(sS=h.createElement("path",{d:"M19.3899 6.44723C19.3812 6.49036 19.3726 6.53354 19.364 6.57666C19.3554 6.59393 19.3511 6.61119 19.3424 6.62415C19.2518 7.34047 19.036 8.02657 18.7642 8.69116C18.1902 10.085 17.2754 11.1853 15.9334 11.906C15.0617 12.372 14.121 12.6223 13.1457 12.7432C12.0497 12.8769 10.9492 12.8251 9.84886 12.8251C9.40872 12.8251 9.08505 12.9805 8.85205 13.343C8.78301 13.1013 8.87792 12.864 8.9211 12.6353C9.05053 11.9448 9.14549 11.2458 9.24906 10.551C9.33102 10.003 9.42598 9.45496 9.51229 8.9069C9.62446 8.19488 9.73668 7.48716 9.85316 6.7752C9.88338 6.59393 9.90064 6.40405 9.96538 6.23144C10.1078 5.86465 10.4271 5.7136 10.7853 5.7136C12.4725 5.70069 14.1641 5.69633 15.8514 5.7136C16.5202 5.72225 17.1891 5.75678 17.8493 5.88621C18.3758 5.98978 18.8893 6.14949 19.3683 6.39545C19.3769 6.42131 19.3856 6.43427 19.3899 6.44723Z",fill:"#001F6B"})),aS||(aS=h.createElement("path",{d:"M19.3457 6.62828C19.3543 6.61102 19.3587 6.59376 19.3673 6.58085C19.3587 6.59376 19.3543 6.61102 19.3457 6.62828Z",fill:"#012D8A"})))},yS=(0,h.forwardRef)(gS),fS=(0,h.memo)(yS);function SS(){return SS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},SS.apply(this,arguments)}var ES,AS,CS=function(e,t){return h.createElement("svg",SS({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),uS||(uS=h.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),dS||(dS=h.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),hS||(hS=h.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),mS||(mS=h.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),pS||(pS=h.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},vS=(0,h.forwardRef)(CS),NS=(0,h.memo)(vS);function bS(){return bS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bS.apply(this,arguments)}var PS,DS=function(e,t){return h.createElement("svg",bS({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),ES||(ES=h.createElement("path",{d:"M18.6667 2H5.33333C3.49238 2 2 3.49238 2 5.33333V18.6667C2 20.5076 3.49238 22 5.33333 22H18.6667C20.5076 22 22 20.5076 22 18.6667V5.33333C22 3.49238 20.5076 2 18.6667 2Z",fill:"#008CFF"})),AS||(AS=h.createElement("path",{d:"M16.4377 7C16.8258 7.6 17 8.21869 17 9C17 11.4918 14.7315 14.7278 12.8903 17H8.6859L7 7.5459L10.6827 7.21803L11.5783 13.9449C12.4105 12.6721 13.4397 10.6721 13.4397 9.30951C13.4397 8.56295 13.3033 8.05541 13.09 7.63737L16.4377 7Z",fill:"white"})))},_S=(0,h.forwardRef)(DS),TS=(0,h.memo)(_S);function xS(){return xS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xS.apply(this,arguments)}var OS,kS=function(e,t){return h.createElement("svg",xS({fill:"none",height:20,viewBox:"0 0 20 20",width:20,xmlns:"http://www.w3.org/2000/svg",ref:t},e),PS||(PS=h.createElement("g",{stroke:"currentColor",strokeWidth:1.4},h.createElement("rect",{height:10.9,rx:2.15,width:16.3,x:1.85,y:4.55313}),h.createElement("path",{d:"m1.89999 8.25156h16.30001"}),h.createElement("path",{d:"m4.60001 12.7031h5.39999",strokeLinecap:"round"}))))},IS=(0,h.forwardRef)(kS),wS=(0,h.memo)(IS);function RS(){return RS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},RS.apply(this,arguments)}var MS=function(e,t){return h.createElement("svg",RS({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),OS||(OS=h.createElement("g",{fill:"currentColor"},h.createElement("path",{clipRule:"evenodd",d:"m12.5525 9.7447c-2.99092-.21639-9.77273 1.1855-9.77273 4.2535 0 2.0004 3.59111 4.9249 9.43923 5.0017.2308 0 6.8741-.2566 6.7717-7.3873-.0861-5.98915-5.0046-6.71876-6.438-6.90138l.0001-.70661c5.7145.36271 10.6447 3.82157 10.6447 7.99259 0 4.412-5.0276 8.0028-11.2092 8.0028s-11.183612-3.5911-11.183612-8.0028c0-4.41161 5.001722-8.00272 11.183612-8.00272.1894 0 .3776.00337.5645.01013z",fillRule:"evenodd"}),h.createElement("path",{d:"m6.83008 14.3939c0 3.9259 5.72712 4.9593 5.72712 4.9593v-4.9385-4.93856c-1.4874.40641-5.7268 1.78666-5.72712 4.91776z"}))))},LS=(0,h.forwardRef)(MS),US=(0,h.memo)(LS);function FS(e,t){return t?e.translate("paymentMethodScreen.creditDebitCard"):e.translate("paymentMethodScreen.creditCard")}var jS=e=>{let{setRef:t,option:n,isActive:i,disabled:s,onChoosePaymentOption:a}=e;const r=(0,Ho.t)(),o=(0,No.n)(),c=((e,t,n)=>{switch(e){case Fy.CARD:return{icon:(0,Co.jsx)(wS,{className:"icon-stroke-2 text-black",width:20,height:20}),label:FS(t,n)};case Fy.APPLE_PAY:return{icon:(0,Co.jsx)(wf,{width:20,height:20}),label:t.translate("paymentMethodScreen.applePay")};case Fy.GOOGLE_PAY:return{icon:(0,Co.jsx)(eS,{width:20,height:20}),label:t.translate("paymentMethodScreen.googlePayButton")};case Fy.PAYPAL:return{icon:(0,Co.jsx)(fS,{width:20,height:20}),label:t.translate("paymentMethodScreen.paypalButton")};case Fy.VENMO:return{icon:(0,Co.jsx)(TS,{width:20,height:20}),label:t.translate("paymentMethodScreen.venmoButton")};case Fy.ACSS:return{icon:(0,Co.jsx)(bf,{width:20,height:20}),label:t.translate("paymentMethodScreen.bankTransfer")};case Fy.IDEAL:return{icon:(0,Co.jsx)(cS,{width:20,height:20}),label:t.translate("paymentMethodScreen.idealButton")};case Fy.UK_BACS:return{icon:(0,Co.jsx)(US,{width:20,height:20}),label:t.translate("paymentMethodScreen.ukBacsButton")};case Fy.AU_BECS:return{icon:(0,Co.jsx)(Hf,{width:20,height:20}),label:t.translate("paymentMethodScreen.auBECSButton")};case Fy.SEPA:return{icon:(0,Co.jsx)(NS,{width:20,height:20}),label:t.translate("paymentMethodScreen.sepaButton")};case Fy.US_BANK_ACCOUNT_VERIFICATION:case Fy.US_BANK_ACCOUNT_INSTANT:case Fy.US_BANK_ACCOUNT:return{icon:(0,Co.jsx)(Sf,{width:20,height:20}),label:t.translate("paymentMethodScreen.bankTransfer")};default:throw new U(e)}})(n,r,o.featureConfig.creditDebitCardLabel),l=sf(n);return(0,Co.jsxs)("button",{ref:t,type:"button",className:(0,To.A)("payment-option-list-item btn-reset-default",{"payment-option-list-item-active":i}),"aria-current":i,"data-tracking-element-name":`payment-option-${n}`,"data-qa":`payment-option-list-${l}`,disabled:s,"data-testid":`payment-option-list-${n}`,onClick:()=>{a(n)},children:[(0,Co.jsx)("span",{className:"payment-option-list-item-icon p-rel me-2 z-index-1","aria-hidden":!0,children:c.icon}),(0,Co.jsx)("span",{className:(0,To.A)("p-rel text-truncate z-index-1",i?"label-2":"label-3"),children:c.label})]})};const BS=(e,t)=>{let{className:n,disabled:i,onClick:s}=e;const a=(0,Ho.t)();return(0,Co.jsx)("button",{ref:t,type:"button",className:(0,To.A)("btn-link link-2 text-nowrap text-ellipsis max-w-100",n),disabled:i,onClick:s,"data-tracking-element-name":"show-more-options","data-qa":"payment-option-more-button",children:a.translate("paymentMethodScreen.moreOptions")})};var HS=(0,h.forwardRef)(BS),qS=n(8677),GS=n.n(qS);const VS=e=>{let t=e;return{getSortedPaymentOptions:(e,n)=>{const i=[...t],s=t.indexOf(e);if(s<n)return t;const a=i.splice(s,1)[0];return i.splice(n-1,0,a),t=i,t}}};function KS(e,t){const{document:n}=(0,bo.M)();(0,h.useEffect)((()=>{const i=n=>{if(!e.current)return;const i=n.target;i&&!ze(i,(t=>t===e.current))&&t(n)};return n.addEventListener("click",i),()=>n.removeEventListener("click",i)}),[n,e,t])}const YS=e=>{let{availableOptions:t,buttonOptions:n,selectedOption:i,showAllOptions:s,locked:a,setShowAllOptions:r,onChoosePaymentOption:o,onChangeSelectedPaymentOption:c}=e;const l=(0,ko.P)(),u=(0,h.useRef)(null),d=(e=>{let{availableOptions:t,buttonOptions:n,selectedOption:i,maxVisibleOptions:s}=e;const a=t.filter((e=>n[e].visible)),[r,o]=(0,h.useState)(VS(a));return!GS()([...r.getSortedPaymentOptions(i,s)].sort(),[...a].sort())&&o(VS(a)),r})({availableOptions:t,buttonOptions:n,selectedOption:i,maxVisibleOptions:3}),m=(0,h.useCallback)((()=>{s&&!l&&r(!1)}),[s,r,l]),p=nl(s);KS(u,m);const g=t.filter((e=>n[e].visible)),y=l?g:d.getSortedPaymentOptions(i,3),f=s&&l||g.length<=3,S=y.slice(0,3),E=s?y:S,A=e=>{l||r(!1),o(e)};return(0,h.useEffect)((()=>{const e=s?[]:y.slice(3);c(E,e)})),(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)("div",{className:"p-rel",children:[!l&&(0,Co.jsx)("div",{className:"invisible border",children:S.map((e=>(0,Co.jsx)("div",{className:"payment-option-list-item"},e)))}),(0,Co.jsx)("div",{className:(0,To.A)("bg-white border-radius-8 border border-gray-20",{"p-abs top-left w-100":!l,"payment-option-list":s&&!l}),children:E.map(((e,t)=>(0,Co.jsx)(jS,{disabled:a,setRef:3===t?p:null,option:e,isActive:i===e,onChoosePaymentOption:A},e)))})]}),(0,Co.jsx)(HS,{ref:u,className:(0,To.A)("self-start mt-2",{"d-none":f,invisible:s&&!l}),disabled:a,onClick:()=>{r(!0)}})]})},zS=e=>{const t=(0,Ho.t)();return(0,Co.jsx)(Ll,{processingState:e.processingState,className:"btn-primary",disabled:e.disabled,dataQa:"acss-button",trackingElement:"paymentMethod-acss",onClick:e.onClick,children:t.translate("paymentMethodScreen.continue")})},WS=(0,h.memo)(zS);var $S;function XS(){return XS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},XS.apply(this,arguments)}var QS=function(e,t){return h.createElement("svg",XS({fill:"none",height:26,viewBox:"0 0 51 26",width:51,xmlns:"http://www.w3.org/2000/svg",ref:t},e),$S||($S=h.createElement("g",{fill:"currentColor"},h.createElement("path",{d:"m10.7677 6.37383c.5615-.70228.9425-1.64523.842-2.60882-.8219.04087-1.82492.54225-2.4056 1.24508-.52139.60186-.98286 1.5843-.86255 2.50749.92264.08003 1.84445-.46118 2.42615-1.14375z"}),h.createElement("path",{d:"m11.5996 7.69773c-1.3399-.07981-2.47913.76045-3.119.76045-.64022 0-1.62007-.72023-2.67985-.70082-1.37938.02026-2.65929.80017-3.35926 2.0406-1.43973 2.48144-.37995 6.16234 1.02012 8.18334.6799.9999 1.4993 2.1008 2.57898 2.0612 1.02012-.04 1.41996-.6605 2.65996-.6605 1.23909 0 1.59925.6605 2.67915.6405 1.1198-.02 1.8199-1.0003 2.4998-2.0012.78-1.1398 1.0993-2.2403 1.1193-2.3007-.02-.02-2.1593-.8407-2.1792-3.3016-.0201-2.0604 1.6796-3.04053 1.7596-3.10131-.9599-1.41967-2.4596-1.57974-2.9796-1.61996z"}),h.createElement("path",{d:"m23.2667 4.90918c2.9123 0 4.9402 2.00744 4.9402 4.93011 0 2.93311-2.0697 4.95101-5.0132 4.95101h-3.2244v5.1277h-2.3297v-15.00882zm-3.2974 7.92562h2.6731c2.0283 0 3.1827-1.092 3.1827-2.98508 0-1.89288-1.1544-2.97463-3.1723-2.97463h-2.6835z"}),h.createElement("path",{d:"m28.8154 16.8081c0-1.914 1.4666-3.0892 4.0671-3.2349l2.9953-.1767v-.8425c0-1.2169-.8218-1.945-2.1945-1.945-1.3004 0-2.1117.6239-2.3091 1.6018h-2.1218c.1248-1.9764 1.8096-3.43248 4.514-3.43248 2.6522 0 4.3475 1.40418 4.3475 3.59878v7.5408h-2.1531v-1.7994h-.0517c-.6344 1.217-2.0179 1.9866-3.4532 1.9866-2.1426 0-3.6405-1.3313-3.6405-3.297zm7.0624-.9881v-.8633l-2.694.1663c-1.3418.0937-2.1009.6866-2.1009 1.6227 0 .9567.7904 1.5809 1.997 1.5809 1.5704 0 2.7979-1.0818 2.7979-2.5066z"}),h.createElement("path",{d:"m40.1472 23.9432v-1.8202c.1661.0415.5405.0415.7279.0415 1.04 0 1.6017-.4368 1.9448-1.56 0-.0209.1978-.6657.1978-.6761l-3.9523-10.95245h2.4336l2.767 8.90345h.0413l2.767-8.90345h2.3714l-4.0984 11.51395c-.9357 2.6524-2.0174 3.5053-4.2849 3.5053-.1873 0-.7491-.0209-.9152-.052z"}))))},ZS=(0,h.forwardRef)(QS),JS=(0,h.memo)(ZS);const eE=e=>{const t=(0,Ho.t)();return(0,Co.jsxs)("button",{type:"button",className:"btn btn-apple-pay d-flex justify-center items-center",dir:"ltr","aria-label":t.translate("paymentMethodScreen.applePayButtonAriaLabel"),onClick:e.onClick,disabled:e.disabled,"data-tracking-element-name":"paymentMethod-applePay","data-qa":"apple-pay-button",children:[(0,Co.jsx)("span",{className:"text-truncate me-1-5",children:t.translate("paymentMethodScreen.applePayButton")}),(0,Co.jsx)(JS,{className:"shrink-0",width:50,height:26,"aria-hidden":!0})]})},tE=(0,h.memo)(eE),nE=e=>{const t=(0,Ho.t)();return(0,Co.jsx)(Ll,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"au-becs-button",trackingElement:"paymentMethod-auBECS",children:t.translate("paymentMethodScreen.continue")})},iE=(0,h.memo)(nE),sE=e=>{let{processingState:t,disabled:n,onClick:i}=e;const s=(0,Ho.t)(),a=Zy(),r=(0,h.useCallback)((()=>{a(),i()}),[i,a]);return(0,Co.jsx)(Ll,{className:"btn-primary",processingState:t,disabled:n,dataQa:"cc-button",trackingElement:"paymentMethod-creditCard",onClick:r,children:s.translate("paymentMethodScreen.donate")})},aE=(0,h.memo)(sE);var rE,oE,cE,lE,uE;function dE(){return dE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dE.apply(this,arguments)}var hE=function(e,t){return h.createElement("svg",dE({fill:"none",height:26,viewBox:"0 0 53 26",width:53,xmlns:"http://www.w3.org/2000/svg",ref:t},e),rE||(rE=h.createElement("g",{fill:"#fff"},h.createElement("path",{d:"m25.011 13.6095v5.8583h-1.8898v-14.48819h4.9134c1.1969 0 2.3307.44095 3.2126 1.25985.8819.7559 1.3228 1.88976 1.3228 3.08661 0 1.19683-.4409 2.26773-1.3228 3.08663s-1.9528 1.2598-3.2126 1.2598zm0-6.86611v5.03941h3.1496c.6929 0 1.3858-.252 1.8268-.7559 1.0078-.9449 1.0078-2.51973.0629-3.46461l-.0629-.06299c-.504-.50394-1.1339-.8189-1.8268-.75591z"}),h.createElement("path",{d:"m36.9168 9.26294c1.3858 0 2.4567.37795 3.2756 1.13386.8189.7559 1.1968 1.7638 1.1968 3.0236v6.0473h-1.7638v-1.3859h-.063c-.7559 1.1339-1.8267 1.7008-3.0866 1.7008-1.0708 0-2.0157-.3149-2.7716-.9449-.6929-.6299-1.1339-1.5118-1.1339-2.4567 0-1.0078.378-1.8267 1.1339-2.4566.7559-.63 1.8267-.8819 3.0866-.8819 1.1338 0 2.0157.1889 2.7086.6299v-.441c0-.6299-.2519-1.2598-.7559-1.6378-.5039-.4409-1.1338-.6929-1.8267-.6929-1.0709 0-1.8898.441-2.4567 1.3229l-1.6378-1.0079c1.0079-1.32284 2.3307-1.95276 4.0945-1.95276zm-2.3937 7.18106c0 .504.2519.9449.6299 1.1969.4409.315.9449.5039 1.4488.5039.7559 0 1.5118-.3149 2.0787-.8819.63-.5669.9449-1.2598.9449-2.0157-.5669-.441-1.3858-.6929-2.4567-.6929-.7559 0-1.3858.189-1.8897.5669-.504.315-.7559.7559-.7559 1.3228z"}),h.createElement("path",{d:"m51.5937 9.57788-6.2362 14.29922h-1.8897l2.3307-4.9764-4.0945-9.25983h2.0157l2.9607 7.11813h.0629l2.8977-7.11813h1.9527z"}))),oE||(oE=h.createElement("path",{d:"m17.5146 12.3496c0-.5669-.0629-1.1339-.1259-1.7008h-7.87405v3.2126h4.47245c-.189 1.0079-.7559 1.9528-1.6378 2.5197v2.0787h2.7087c1.5748-1.4488 2.4566-3.5905 2.4566-6.1102z",fill:"#4285f4"})),cE||(cE=h.createElement("path",{d:"m9.51486 20.4756c2.26774 0 4.15744-.7559 5.54334-2.0158l-2.7087-2.0787c-.7559.5039-1.7008.8189-2.83464.8189-2.14173 0-4.0315-1.4488-4.66142-3.4646h-2.77165v2.1417c1.44882 2.8347 4.28346 4.5985 7.43307 4.5985z",fill:"#34a853"})),lE||(lE=h.createElement("path",{d:"m4.85386 13.7354c-.37795-1.0078-.37795-2.1417 0-3.2126v-2.1417h-2.77165c-1.196852 2.3307-1.196852 5.1024 0 7.4961z",fill:"#fbbc04"})),uE||(uE=h.createElement("path",{d:"m9.51461 7.12126c1.19689 0 2.33069.44095 3.21259 1.25985l2.3937-2.3937c-1.5118-1.38583-3.5276-2.20473-5.5433-2.14174-3.1496 0-6.04724 1.76378-7.43307 4.59843l2.77165 2.1417c.56693-2.01572 2.4567-3.46454 4.59843-3.46454z",fill:"#ea4335"})))},mE=(0,h.forwardRef)(hE),pE=(0,h.memo)(mE);const gE=e=>{const{state:t}=Jo(cn.PAYMENT_OPTIONS),{onClick:n,disabled:i}=e,s=(0,Ho.t)(),[a,r]=(0,h.useState)(!1),o=(0,Ol.D)((e=>r(e))),c=(0,h.useCallback)((()=>t.livemode?i?void 0:n():(o.set([!0]),void o.set([!1],3e3))),[i,n,t.livemode,o]);return(0,Co.jsx)("button",{type:"button",className:(0,To.A)("btn p-rel d-flex justify-center items-center",a?"btn-testmode":"btn-google-pay"),disabled:i,"aria-label":s.translate("paymentMethodScreen.googlePayButtonContinueAriaLabel"),onClick:c,"data-tracking-element-name":"paymentMethod-googlePay","data-qa":"google-pay-button",children:a?(0,Co.jsx)("span",{role:"alert",children:s.translate("paymentMethodScreen.googlePay.notAvailableInTestMode.oneLine")}):(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("span",{className:"text-truncate me-1-5",children:s.translate("paymentMethodScreen.googlePayButtonContinue")}),(0,Co.jsx)(pE,{className:"shrink-0",width:62,height:31,"aria-hidden":!0})]})})},yE=(0,h.memo)(gE),fE=e=>{const t=(0,Ho.t)();return(0,Co.jsx)(Ll,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"ideal-button",trackingElement:"paymentMethod-ideal",children:t.translate("paymentMethodScreen.continue")})},SE=(0,h.memo)(fE);var EE,AE,CE;function vE(){return vE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vE.apply(this,arguments)}!function(e){e.SILVER="silver",e.WHITE="white",e.GOLD="gold"}(EE||(EE={}));var NE=function(e,t){return h.createElement("svg",vE({height:32,preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 101 32",width:101,xmlns:"http://www.w3.org/2000/svg",ref:t},e),AE||(AE=h.createElement("g",{fill:"#003087"},h.createElement("path",{d:"m12.237 2.8h-7.8c-.5 0-1 .4-1.1.9l-3.1 20c-.1.4.2.7.6.7h3.7c.5 0 1-.4 1.1-.9l.8-5.4c.1-.5.5-.9 1.1-.9h2.5c5.1 0 8.1-2.5 8.9-7.4.3-2.1 0-3.8-1-5-1.1-1.3-3.1-2-5.7-2zm.9 7.3c-.4 2.8-2.6 2.8-4.6 2.8h-1.2l.8-5.2c0-.3.3-.5.6-.5h.5c1.4 0 2.7 0 3.4.8.5.4.7 1.1.5 2.1z"}),h.createElement("path",{d:"m35.437 10h-3.7c-.3 0-.6.2-.6.5l-.2 1-.3-.4c-.8-1.2-2.6-1.6-4.4-1.6-4.1 0-7.6 3.1-8.3 7.5-.4 2.2.1 4.3 1.4 5.7 1.1 1.3 2.8 1.9 4.7 1.9 3.3 0 5.2-2.1 5.2-2.1l-.2 1c-.1.4.2.8.6.8h3.4c.5 0 1-.4 1.1-.9l2-12.8c.1-.2-.3-.6-.7-.6zm-5.1 7.2c-.4 2.1-2 3.6-4.2 3.6-1.1 0-1.9-.3-2.5-1s-.8-1.6-.6-2.6c.3-2.1 2.1-3.6 4.2-3.6 1.1 0 1.9.4 2.5 1 .5.7.7 1.6.6 2.6z"}),h.createElement("path",{d:"m55.337 10h-3.7c-.4 0-.7.2-.9.5l-5.2 7.6-2.2-7.3c-.1-.5-.6-.8-1-.8h-3.7c-.4 0-.8.4-.6.9l4.1 12.1-3.9 5.4c-.3.4 0 1 .5 1h3.7c.4 0 .7-.2.9-.5l12.5-18c.3-.3 0-.9-.5-.9z"}))),CE||(CE=h.createElement("g",{fill:"#009cde"},h.createElement("path",{d:"m67.737 2.8h-7.8c-.5 0-1 .4-1.1.9l-3.1 19.9c-.1.4.2.7.6.7h4c.4 0 .7-.3.7-.6l.9-5.7c.1-.5.5-.9 1.1-.9h2.5c5.1 0 8.1-2.5 8.9-7.4.3-2.1 0-3.8-1-5-1.2-1.2-3.1-1.9-5.7-1.9zm.9 7.3c-.4 2.8-2.6 2.8-4.6 2.8h-1.2l.8-5.2c0-.3.3-.5.6-.5h.5c1.4 0 2.7 0 3.4.8.5.4.6 1.1.5 2.1z"}),h.createElement("path",{d:"m90.937 10h-3.7c-.3 0-.6.2-.6.5l-.2 1-.3-.4c-.8-1.2-2.6-1.6-4.4-1.6-4.1 0-7.6 3.1-8.3 7.5-.4 2.2.1 4.3 1.4 5.7 1.1 1.3 2.8 1.9 4.7 1.9 3.3 0 5.2-2.1 5.2-2.1l-.2 1c-.1.4.2.8.6.8h3.4c.5 0 1-.4 1.1-.9l2-12.8c0-.2-.3-.6-.7-.6zm-5.2 7.2c-.4 2.1-2 3.6-4.2 3.6-1.1 0-1.9-.3-2.5-1s-.8-1.6-.6-2.6c.3-2.1 2.1-3.6 4.2-3.6 1.1 0 1.9.4 2.5 1 .6.7.8 1.6.6 2.6z"}),h.createElement("path",{d:"m95.337 3.3-3.2 20.3c-.1.4.2.7.6.7h3.2c.5 0 1-.4 1.1-.9l3.2-19.9c.1-.4-.2-.7-.6-.7h-3.6c-.4 0-.6.2-.7.5z"}))))},bE=(0,h.forwardRef)(NE),PE=(0,h.memo)(bE);const DE="paymentMethod-paypal",_E=e=>{let{disabled:t}=e;const{state:n,controller:i}=Jo(cn.PAYMENT_OPTIONS),s=(0,Ho.t)(),a=(0,h.useRef)(null),[r,o]=(0,h.useState)(!1),c=(0,Ol.D)((e=>o(e))),l=dh();(0,h.useEffect)((()=>{if(a.current&&n.livemode)return i.initiatePaypal({element:a.current,buttonColor:EE.GOLD,onClick:()=>{a.current&&l.trackClick(DE,a.current)}}),()=>i.closePaypalButton()}),[i,n.livemode,l]);const u=(0,h.useCallback)((()=>{n.livemode||(c.set([!0]),c.set([!1],3e3))}),[n.livemode,c]);return(0,Co.jsxs)("div",{className:(0,To.A)("btn p-rel px-1 d-flex items-center justify-center",{"btn-paypal-gold":!r,"btn-testmode":r,"focus-outline":!n.livemode,disabled:t}),role:n.livemode?void 0:"button",tabIndex:n.livemode?void 0:0,"aria-labelledby":"paypal-button",onClick:u,onKeyPress:u,"data-qa":"paypal-button",children:[(0,Co.jsx)("div",{ref:a,id:"paypal-button",className:"p-abs centered min-w-100 line-height-0","data-tracking-element-name":DE}),r?(0,Co.jsx)("p",{className:"text-truncate",role:"alert",children:s.translate("paymentMethodScreen.paypal.notAvailableInTestMode.oneLine")}):(0,Co.jsx)(PE,{width:69,height:22,"aria-hidden":!0})]})},TE=(0,h.memo)(_E),xE=e=>{const t=(0,Ho.t)();return(0,Co.jsx)(Ll,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"sepa-button",dataTestId:"sepa-button",trackingElement:"paymentMethod-sepa",children:t.translate("paymentMethodScreen.continue")})},OE=(0,h.memo)(xE),kE=e=>{const t=(0,Ho.t)();return(0,Co.jsx)(Ll,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"uk-bacs-button",trackingElement:"paymentMethod-ukBacs",children:t.translate("paymentMethodScreen.continue")})},IE=(0,h.memo)(kE),wE=e=>{const t=(0,Ho.t)();return(0,Co.jsx)(Ll,{processingState:e.processingState,className:"btn-primary",disabled:e.disabled,dataQa:"us-bank-account-button",trackingElement:"paymentMethod-usBankAccount",onClick:e.onClick,children:t.translate("paymentMethodScreen.continue")})},RE=(0,h.memo)(wE);var ME;function LE(){return LE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LE.apply(this,arguments)}var UE=function(e,t){return h.createElement("svg",LE({fill:"none",height:16,viewBox:"0 0 69 16",width:69,xmlns:"http://www.w3.org/2000/svg",ref:t},e),ME||(ME=h.createElement("g",{fill:"#fff"},h.createElement("path",{d:"m13.2779 1.96094c.4249.70637.6165 1.43393.6165 2.35299 0 2.93132-2.4861 6.73937-4.50383 9.41327h-4.60865l-1.84833-11.12446 4.03538-.38563.97724 7.91579c.91309-1.49731 2.03989-3.8503 2.03989-5.45453 0-.87811-.14946-1.47621-.38302-1.96868z"}),h.createElement("path",{d:"m18.5093 6.8563c.7426 0 2.6121-.34193 2.6121-1.41142 0-.51356-.3607-.76973-.7859-.76973-.7438 0-1.7198.89776-1.8262 2.18115zm-.085 2.11812c0 1.30588.7214 1.81828 1.6778 1.81828 1.0415 0 2.0387-.2562 3.3348-.91921l-.4882 3.33671c-.9132.4491-2.3364.7488-3.7178.7488-3.5041 0-4.7582-2.139-4.7582-4.81307 0-3.46585 2.04-7.14593 6.2457-7.14593 2.3156 0 3.6104 1.30579 3.6104 3.12403.0002 2.93122-3.7375 3.8292-5.9045 3.85039z"}),h.createElement("path",{d:"m35.9733 4.56799c0 .42779-.0645 1.04829-.1287 1.4538l-1.2109 7.70191h-3.9293l1.1045-7.06022c.021-.1915.0854-.57702.0854-.79092 0-.51355-.3188-.64169-.702-.64169-.5091 0-1.0193.23509-1.3591.40672l-1.2528 8.08621h-3.9515l1.8052-11.53109h3.42l.0433.92037c.8069-.53474 1.8693-1.11308 3.3767-1.11308 1.9972-.00022 2.6992 1.027 2.6992 2.56799z"}),h.createElement("path",{d:"m47.64 3.26231c1.1253-.81211 2.188-1.26231 3.6532-1.26231 2.0176 0 2.7194 1.02722 2.7194 2.5682 0 .4278-.0642 1.0483-.1284 1.45381l-1.2095 7.70189h-3.9304l1.1256-7.20942c.0207-.19271.0642-.4278.0642-.57691 0-.57823-.3188-.70648-.702-.70648-.488 0-.9759.2139-1.3381.40671l-1.2526 8.0862h-3.9294l1.1256-7.20941c.0207-.19271.0629-.4278.0629-.57691 0-.57823-.3189-.70648-.7008-.70648-.5101 0-1.0192.23509-1.359.40671l-1.2538 8.08619h-3.9502l1.805-11.53107h3.3783l.1061.96266c.7859-.57691 1.8475-1.15525 3.2705-1.15525 1.2322-.00044 2.039.53442 2.4434 1.26187z"}),h.createElement("path",{d:"m61.8319 6.62143c0-.94135-.2339-1.58316-.9343-1.58316-1.5507 0-1.8692 2.75949-1.8692 4.17113 0 1.0709.2977 1.7337.9979 1.7337 1.4657 0 1.8056-2.91014 1.8056-4.32167zm-6.7967 2.41755c0-3.63637 1.9112-7.03898 6.3087-7.03898 3.3135 0 4.5248 1.96867 4.5248 4.68599 0 3.59421-1.8907 7.31631-6.3942 7.31631-3.3349 0-4.4393-2.2037-4.4393-4.96332z"}))))},FE=(0,h.forwardRef)(UE),jE=(0,h.memo)(FE);const BE="paymentMethod-venmo",HE=e=>{let{disabled:t,onClick:n}=e;const{state:i,controller:s}=Jo(cn.PAYMENT_OPTIONS),a=(0,Ho.t)(),r=(0,h.useRef)(null),[o,c]=(0,h.useState)(!1),l=(0,Ol.D)((e=>c(e))),u=dh();(0,h.useEffect)((()=>{if(r.current)return s.initiateVenmo({element:r.current,onClick:()=>{r.current&&u.trackClick(BE,r.current)}}),()=>s.closeVenmoButton()}),[s,u]);const d=(0,h.useCallback)((()=>{if(!i.livemode)return l.set([!0]),void l.set([!1],3e3);t||n()}),[t,n,l,i.livemode]);return(0,Co.jsxs)("div",{className:(0,To.A)("btn p-rel px-1 d-flex items-center justify-center",o?"btn-testmode":"btn-venmo",{"focus-outline":!i.livemode,disabled:t}),role:i.livemode?void 0:"button",tabIndex:i.livemode?void 0:0,"aria-labelledby":"venmo-button",onClick:d,onKeyPress:d,children:[(0,Co.jsx)("div",{ref:r,id:"venmo-button",className:"p-abs centered min-w-100 line-height-0","data-tracking-element-name":BE}),o?(0,Co.jsx)("p",{className:"text-truncate",role:"alert",children:a.translate("paymentMethodScreen.venmo.notAvailableInTestMode.oneLine")}):(0,Co.jsx)(jE,{width:76,height:24,"aria-hidden":!0})]})},qE=(0,h.memo)(HE),GE={[Fy.CARD]:aE,[Fy.APPLE_PAY]:tE,[Fy.GOOGLE_PAY]:yE,[Fy.PAYPAL]:TE,[Fy.VENMO]:qE,[Fy.UK_BACS]:IE,[Fy.AU_BECS]:iE,[Fy.ACSS]:WS,[Fy.SEPA]:OE,[Fy.IDEAL]:SE,[Fy.US_BANK_ACCOUNT]:RE,[Fy.US_BANK_ACCOUNT_INSTANT]:RE,[Fy.US_BANK_ACCOUNT_VERIFICATION]:RE},VE=e=>{let{transitionEntered:t,option:n,show:i,disabled:s,processingState:a,errorMessage:r,errorTitle:o,onClick:c}=e;const l=(0,ko.P)(),u=(0,h.useRef)(null),d=(0,wo.wf)(),m=sf(n),p=(0,h.useCallback)((()=>{c(n)}),[c,n]),g=GE[n];return(0,Co.jsx)(Nc.S,{content:(0,Co.jsx)(Il,{errorTitle:o,errorMessage:r,dataQa:m,dataTestId:m}),trigger:"manual",manualOpen:t&&i&&Boolean(r),className:l?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",rootContainer:d,children:(0,Co.jsx)("div",{ref:u,className:(0,To.A)({"d-none":!i}),children:(0,Co.jsx)(g,{onClick:p,disabled:s,processingState:a})},n)})},KE=e=>{let{transitionEntered:t,availableOptions:n,buttonOptions:i,preSelectedPaymentOption:s,locked:a,onChoosePaymentOption:r,getProcessingState:o}=e;return(0,Co.jsx)(Co.Fragment,{children:n.map((e=>{const{errorTitle:n,error:c,visible:l}=i[e],u=s===e;return(0,Co.jsx)(VE,{option:e,errorTitle:n,errorMessage:c,show:l&&u,onClick:r,processingState:o(e),disabled:a,transitionEntered:t},e)}))})},YE=(0,h.memo)(KE);var zE=n(7766);const WE=e=>{let{currency:t,prefixCurrencySymbol:n,postfixCurrencySymbol:i,total:s,isRecurring:a,recurringLabel:r}=e;const o=(0,Ho.t)(),c=(0,h.useMemo)((()=>(0,zE.p)(t,o.locale)),[o.locale,t]);return(0,Co.jsxs)("div",{className:"d-flex",children:[(0,Co.jsx)("p",{className:"body-3 text-truncate me-4",children:o.translate("paymentMethodScreen.amountLabel")}),(0,Co.jsxs)("p",{className:"label-4 shrink-0 max-w-70 text-truncate ms-auto","data-qa":"donation-amount-label",children:[n&&(0,Co.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:n}),(0,Co.jsx)("span",{className:"d-inline-block text-sans-serif",children:o.formatCurrency(s,{currency:t,display:"trimzeroes",withoutPrefix:!0,withoutSuffix:!0})}),i&&(0,Co.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:i}),(0,Co.jsx)("span",{className:"d-inline-block text-sans-serif ms-0-5",children:c}),a&&(0,Co.jsx)("span",{className:"d-inline-block",children:r})]})]})};const $E=["top","top-end","bottom","bottom-end"],XE=e=>{let{includeFees:t,isFeeCovered:n,currency:i,processingFee:s,showIncludeFee:a,locked:r,paymentOption:o,transitionEntered:c,isPaymentLoader:l,dataQa:d,dataTestId:m,toggleCheckbox:p}=e;const g=(0,Ho.t)(),y=(0,zo.Q)(),f=(0,ko.P)(),S=pc("lg"),E=t!==u.XN.ONLY_NO,A=t===u.XN.ONLY_YES,C=(0,h.useRef)(null),v=(0,h.useRef)(null),N=(0,h.useRef)(null),b=(0,wo.wf)(),P=[y?"right":"left","top"],D=Bo(N),[_,T]=(0,h.useState)(!1),{showHelpTooltip:x,helpTooltipRef:O,handleHelpTooltipKeyDown:k,handleHelpTooltipChecked:I}=function(e){const t=(0,h.useRef)(null),[n,i]=(0,h.useState)(!1),s=()=>{i((e=>!e))},a=()=>{i(!1)};return KS(t,a),((e,t)=>{(0,h.useEffect)((()=>{const n=null==e?void 0:e.current;if(n)return n.addEventListener("blur",t),()=>{n.removeEventListener("blur",t)}}),[e,t])})(e,a),{helpTooltipRef:t,showHelpTooltip:n,handleHelpTooltipChecked:e=>{e.stopPropagation(),s()},handleHelpTooltipKeyDown:e=>{e.code!==Oo.J.ENTER&&e.code!==Oo.J.SPACE||(e.stopPropagation(),e.preventDefault(),s())}}}(v);(0,h.useEffect)((()=>{const e=o===Fy.CARD&&!S;T(!(!C.current||n||x||e))}),[n,x,o,S]);const w=(0,Co.jsxs)(Co.Fragment,{children:[A&&g.translate("paymentMethodScreen.transactionCostsInfo"),a&&(0,Co.jsx)(lu,{className:"fee-tooltip",token:"paymentMethodScreen.transactionCostsTooltipMessage",params:{processingFee:g.formatCurrency(s,{currency:i,display:"floatcents"})}})]});return(0,Co.jsx)(Co.Fragment,{children:E&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Nc.S,{content:g.translate("paymentMethodScreen.coverCostsQuestion"),trigger:"manual",manualOpen:c&&!l&&!r&&!f&&_,className:f?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:y?"left":"right",fallbackPlacements:P,maxWidth:"220px",rootContainer:b,"data-qa":"cover-fee-tooltip",children:(0,Co.jsxs)("div",{className:(0,To.A)("d-flex items-center",{"px-8 mx-minus-8":!f}),"data-qa":d,"data-testid":m,children:[A&&(0,Co.jsx)("p",{className:"body-3 text-truncate","data-qa":"fee-amount-text",children:g.translate("paymentMethodScreen.transactionCostsIncluded",{amount:g.formatCurrency(s,{currency:i,display:"floatcents"})})}),a&&(0,Co.jsx)(Yl,{innerRef:C,className:"body-3",customLabelClasses:"line-height-20",checked:n,disabled:r,onChange:p,dataQa:"cover-fee-checkbox",trackingElement:"coverFee",children:(0,Co.jsx)("span",{className:"body-3 text-truncate",children:g.translate("paymentMethodScreen.coverLabel")})}),(0,Co.jsx)(Nc.S,{ref:O,content:w,trigger:"manual",manualOpen:c&&!r&&x,className:f?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:y?"left":"right",fallbackPlacements:$E,maxWidth:"220px",rootContainer:b,"data-qa":"why-cover-fee-tooltip",children:(0,Co.jsx)("button",{ref:v,type:"button",className:"btn-icon shrink-0 font-size-18 text-gray-60 ms-2","aria-label":g.translate("paymentMethodScreen.transactionCostsHelpAriaLabel"),disabled:r,onClick:I,onKeyDown:k,"data-qa":"transaction-cost-tip","data-testid":"transaction-cost-tip",children:(0,Co.jsx)(Hl.A,{className:(0,To.A)("icon-stroke d-block",{"icon-flip-horizontal":y}),"aria-hidden":!0})})})]})}),(0,Co.jsx)(xo.A,{nodeRef:N,in:f&&a&&!n,mountOnEnter:!0,unmountOnExit:!0,addEndListener:D,classNames:"rtg-fee-accordion-mobile",children:(0,Co.jsx)("p",{ref:N,className:"body-3 text-ellipsis mt-2",role:"alert","data-qa":"cover-fee-tooltip",children:g.translate("paymentMethodScreen.coverCostsQuestion")})}),(0,Co.jsx)("hr",{className:"border-gray-15 mt-3 mb-2-5","aria-hidden":!0})]})})},QE=()=>{const e=(0,Ho.t)(),t=window.document.location.href.replace("http://","https://");return(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Uc,{className:"d-block mx-auto",ariaHidden:!0}),(0,Co.jsx)("p",{className:"text-center text-ellipsis mt-6",children:e.translate("paymentMethodScreen.creditCardIsUnavailableInfo.part-1")}),(0,Co.jsx)(lu,{className:"text-center text-ellipsis mt-2-5",as:"p",token:"paymentMethodScreen.creditCardIsUnavailableInfo.part-2",params:{link:t}})]})},ZE=(0,h.memo)(QE),JE=e=>{const{transitionEntered:t,showBadge:n,stripeElementsCardState:i,setStripeElementsCardState:s}=e,{state:a,controller:r}=Jo(cn.PAYMENT_OPTIONS),o=(0,ko.P)(),c=(0,Ho.t)(),l=function(){const e=lc(),[t,n]=(0,h.useState)(!1);return(0,h.useEffect)((()=>e.onStateUpdate((()=>{n(e.checkoutUIState.showPaymentLoader)}))),[e]),t}(),[u,d]=(0,h.useState)(!1),m=r.getFrequency(),p=r.getCurrency();(0,h.useEffect)((()=>{r.syncPaymentButtons()}),[r,m,p]);const g=(0,h.useCallback)((()=>{r.toggleFeeCovered()}),[r]),y=(0,h.useCallback)((e=>r.setPreSelectedPaymentOption(e)),[r]),f=(0,h.useCallback)((e=>r.choosePaymentOption(e)),[r]),S=(0,h.useCallback)(((e,t)=>r.changePaymentOption(e,t)),[r]),E=(0,h.useCallback)((e=>{switch(e){case Fy.ACSS:return a.processingACSSState;case Fy.US_BANK_ACCOUNT:case Fy.US_BANK_ACCOUNT_INSTANT:case Fy.US_BANK_ACCOUNT_VERIFICATION:return a.processingUSBankAccountState;case Fy.CARD:return a.processingCardState;case Fy.IDEAL:return a.processingIdealState;default:return Pr.IDLE}}),[a.processingACSSState,a.processingCardState,a.processingIdealState,a.processingUSBankAccountState]);return(0,Co.jsxs)("div",{className:"p-rel flow-screen","data-qa":"active-screen-payment-method",children:[(0,Co.jsx)(il,{autoFocus:o,children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("paymentMethodScreen.title")}`})}),(0,Co.jsx)(pl,{title:c.translate("paymentMethodScreen.title"),showBadge:n}),a.stripeElementsAvailable?(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-8 pb-5":!o}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Co.jsxs)("div",{className:"shrink-0",children:[(0,Co.jsx)("p",{className:"label-2 text-truncate mb-2",children:c.translate("paymentMethodScreen.description")}),!!a.preSelectedPaymentOption&&(0,Co.jsx)(YS,{availableOptions:a.availableOptions,buttonOptions:a.buttonOptions,locked:a.locked,selectedOption:a.preSelectedPaymentOption,onChoosePaymentOption:y,onChangeSelectedPaymentOption:S,showAllOptions:u,setShowAllOptions:d})]}),a.preSelectedPaymentOption===Fy.CARD&&(0,Co.jsx)(jl,{size:32,sizeMin:16}),(0,Co.jsx)("div",{className:(0,To.A)(a.preSelectedPaymentOption===Fy.CARD?"shrink-0":"d-none",{"opacity-20":u&&!o}),children:(0,Co.jsx)(nf,{isReady:!!t&&a.preSelectedPaymentOption===Fy.CARD,locked:u&&!o,stripeElementsCardState:i,setStripeElementsCardState:s})}),(0,Co.jsx)(jl,{size:32,sizeMin:16,className:"mt-auto"}),(0,Co.jsxs)("div",{className:(0,To.A)("shrink-0",{"opacity-20":u&&!o}),children:[(0,Co.jsx)(XE,{paymentOption:a.preSelectedPaymentOption,showIncludeFee:a.showIncludeFee,isFeeCovered:a.isFeeCovered,locked:a.locked||u&&!o,processingFee:a.processingFee,currency:a.currency,toggleCheckbox:g,includeFees:a.includeFees,transitionEntered:t,isPaymentLoader:l,dataQa:"transaction-costs-lpo"}),(0,Co.jsx)(WE,{prefixCurrencySymbol:a.prefixCurrencySymbol,postfixCurrencySymbol:a.postfixCurrencySymbol,currency:a.currency,total:a.total,isRecurring:a.isRecurring,recurringLabel:a.recurringLabel})]})]})}),(0,Co.jsx)(Zc,{className:(0,To.A)({"opacity-20":u&&!o}),children:a.isStripeAccountConnected?(0,Co.jsx)(YE,{preSelectedPaymentOption:a.preSelectedPaymentOption,availableOptions:a.availableOptions,buttonOptions:a.buttonOptions,locked:a.locked||u&&!o,onChoosePaymentOption:f,getProcessingState:E,transitionEntered:t}):(0,Co.jsx)("p",{className:"font-weight-600 text-center text-red-80 text-ellipsis",dangerouslySetInnerHTML:{__html:c.translate("paymentMethodScreen.stripe.connectionInfo")},"data-qa":"stripe-danger-text"})})]}):(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Fc,{className:(0,To.A)("px-body justify-center",{"pt-4 pb-6":o}),children:(0,Co.jsx)("div",{className:"fixed-container",children:(0,Co.jsx)(ZE,{})})}),(0,Co.jsx)(Zc,{className:(0,To.A)({"pt-10 pb-5":!o})})]}),l&&(0,Co.jsx)(jy,{})]})},{useAddFieldToScroll:eA,useScrollToFieldsTrigger:tA,ScrollToFieldsProvider:nA}=(0,pm.J)(),iA=()=>{const{state:e,controller:t}=Jo(cn.POST_DONATION_UPSELL),n=(0,Ho.t)(),i=(0,ko.P)(),s=(0,h.useRef)(null),a=tA();return(0,Co.jsxs)(Co.Fragment,{children:[i&&(0,Co.jsx)(xo.A,{nodeRef:s,in:e.confirmError,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)(Rl,{setRef:s,className:"text-center mb-3",role:e.confirmError?"alert":"none",children:(0,Co.jsx)(Il,{errorTitle:n.translate("postDonationUpsellScreen.error.serviceUnavailable"),dataQa:"post-donation-upsell-confirm-error"})})}),(0,Co.jsx)(Nc.S,{content:(0,Co.jsx)(Il,{errorTitle:n.translate("postDonationUpsellScreen.error.serviceUnavailable"),dataQa:"post-donation-upsell-confirm-error"}),trigger:"manual",manualOpen:!i&&e.confirmError,className:i?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",hasPortal:!1,children:(0,Co.jsx)("button",{type:"button",className:"btn pdu-confirm-btn",disabled:e.locked||e.confirmError,onClick:()=>{a(),t.accept()},"data-qa":"post-donation-upsell-confirm","data-tracking-element-name":"confirmButton",children:n.translate("postDonationUpsellScreen.button.confirm",{recurringType:t.periodLabel})})})]})},sA=(0,h.memo)(iA),aA=e=>{const{state:t,controller:n}=Jo(cn.POST_DONATION_UPSELL),i=(0,Ho.t)();return(0,Co.jsxs)("div",{className:e.className,children:[(0,Co.jsx)(sA,{}),(0,Co.jsx)("button",{type:"button",className:"btn pdu-skip-btn mt-2",disabled:t.locked,onClick:()=>n.leave(),"data-qa":"post-donation-not-this-time","data-tracking-element-name":"skipButton",children:i.translate("postDonationUpsellScreen.button.notThisTime")})]})},rA=(0,h.memo)(aA),oA=["bottom"],cA=e=>{let{className:t}=e;const{state:n,controller:i}=Jo(cn.POST_DONATION_UPSELL),s=(0,Ho.t)(),a=(0,zo.Q)(),r=(0,ko.P)(),o=(0,h.useRef)(null),c=(0,wo.wf)(),[l,u]=(0,h.useState)(!n.isShowcase&&n.errors.min),[d,m]=(0,h.useState)(!n.isShowcase&&n.errors.max),p=(0,h.useCallback)((()=>l?s.translate("postDonationUpsellScreen.error.minAmount",{amount:s.formatCurrency(n.recurringMinAmount,{currency:n.currency,display:"round"})}):d?s.translate("postDonationUpsellScreen.error.maxAmount",{amount:s.formatCurrency(n.upsellMaxAmount,{currency:n.currency,display:"round"})}):""),[s,d,l,n.currency,n.recurringMinAmount,n.upsellMaxAmount]);(0,rl.f)({ref:o,autoFocus:n.showAmountInput,mode:al.Q.ALL});const g=(0,h.useCallback)((e=>{i.changeAmount(e)}),[i]),y=cc(),f=(0,h.useMemo)((()=>y.getSymbol(n.currency)),[y,n.currency]),S=(0,h.useMemo)((()=>(0,zE.p)(n.currency,s.locale)),[s.locale,n.currency]),E=Du(n.shakeKey,0!==n.shakeKey),A=(0,h.useCallback)((()=>{u(!n.isShowcase&&n.errors.min),m(!n.isShowcase&&n.errors.max)}),[n.isShowcase,n.errors.min,n.errors.max]);(0,h.useEffect)((()=>{u(!n.isShowcase&&n.errors.min),m(!n.isShowcase&&n.errors.max)}),[n.isShowcase,n.errors.min,n.errors.max]);const C=(0,h.useCallback)((()=>{i.makeAmountInputVisible()}),[i]),v=(0,h.useMemo)((()=>(0,Co.jsx)(lu,{token:"postDonationUpsellScreen.description",params:{date:s.formatDate(n.startDate)}})),[s,n.startDate]);return eA(o,(e=>!e.isAmountValid)),(0,Co.jsxs)("div",{className:(0,To.A)("d-flex flex-column items-center text-center",t),children:[(0,Co.jsx)("h4",{className:(0,To.A)("subtitle-4 max-w-100",r?"text-ellipsis":"text-truncate"),children:s.translate("postDonationUpsellScreen.subtitle")}),(0,Co.jsx)("p",{className:(0,To.A)("pdu-question max-w-100 mt-1",r?"text-ellipsis":"text-line-clamp-5"),children:v}),(0,Co.jsx)("div",{className:"max-w-100 mt-3",children:(0,Co.jsx)(Nc.S,{content:(0,Co.jsx)("p",{dangerouslySetInnerHTML:{__html:p()}}),trigger:"manual",manualOpen:l||d,className:r?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:a?"left":"right",fallbackPlacements:oA,maxWidth:"300px",rootContainer:c,"data-qa":"min-amount-popover",children:(0,Co.jsx)("div",{children:(0,Co.jsx)(Vh,{ref:o,className:(0,To.A)("group-frequency-control",{"bg-white border-radius-base":n.showAmountInput,shake:E,disabled:n.locked&&n.showAmountInput}),currency:n.currency,amount:n.amount,onAmountChange:g,canModifyAmount:!0,currencyService:y,showCurrencySymbol:!0,currencyCodeNode:(0,Co.jsxs)("span",{className:(0,To.A)("subtitle-3 shrink-0 text-nowrap ms-1",{"text-gray-60":n.showAmountInput}),children:[!f&&S,"/",s.translate("widgetSubscriptionPeriodLabel.monthly.short")]}),isPDUPriceInput:!0,hasError:!n.isAmountValid,errorLabel:p(),onAmountInputBlur:A,showDisabledInput:!n.showAmountInput,qaActiveAttribute:"post-donation-amount-input",trackingElement:"postDonationInput",placeholder:"",disabled:n.locked&&n.showAmountInput,donationType:n.flowType})})})}),!n.showAmountInput&&(0,Co.jsx)("button",{type:"button",className:"btn-link link-3 text-white-hover-white text-truncate max-w-100 opacity-75",disabled:n.locked,onClick:C,"data-qa":"post-donation-another-amount",children:s.translate("postDonationUpsellScreen.amount.another")})]})},lA=(0,h.memo)(cA),uA=()=>{const{controller:e}=Jo(cn.POST_DONATION_UPSELL),t=(0,Ho.t)(),n=(0,ko.P)(),i=(0,Fo.$)(),s=Mo(),a=(0,No.n)().getAskPageConfig().show,r=!n&&!i&&a&&!1;return(0,h.useEffect)((()=>{e.setShowedInSession()}),[e]),(0,Co.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-post-donation-upsell",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:t.translate("common.screenAriaLabel",{screenTitle:`${t.translate("postDonationUpsellScreen.screenTitle")}`})}),n&&!a&&(0,Co.jsx)(pl,{}),(0,Co.jsx)(Od,{className:"shrink-0"}),(0,Co.jsxs)(Fc,{className:(0,To.A)("px-body",n?"pt-16 pb-8":"pt-7 pb-1",{"pdu-screen-fade-in":r}),children:[(0,Co.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Co.jsxs)("div",{className:(0,To.A)("grow-1 d-flex flex-column",{"justify-center":!n}),children:[(0,Co.jsx)(Sd,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Co.jsx)("h2",{className:(0,To.A)("title-1 text-center mt-4",n?"text-ellipsis":"text-line-clamp-2"),children:e.thankYouTitle}),(0,Co.jsx)("p",{className:(0,To.A)("text-center mt-2",n?"text-ellipsis":"text-line-clamp-2"),"data-qa":"post-donation-upsell-title-label",children:e.description})]})}),(0,Co.jsx)("div",{className:(0,To.A)(s("pdu-panel"),"shrink-0",n?"mt-12":"mt-4"),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column",children:[(0,Co.jsx)(lA,{className:"mb-6"}),(0,Co.jsx)(rA,{className:"mt-auto"})]})})]})]})},{ScrollToFieldsProvider:dA,useAddFieldToScroll:hA,useScrollToFieldsTrigger:mA,useFakeStripeElement:pA}=(0,pm.J)(),gA=e=>{let{transitionEntered:t,showBadge:n,stripeElementState:i,setStripeElementState:s}=e;const{state:a,controller:r}=Jo(cn.SEPA),o=(0,Ho.t)(),c=tc(),u=(0,ko.P)(),d=(0,Fo.$)(),m=(0,op.j)(),p=(0,h.useRef)(null),[g,y]=(0,h.useState)(),f=Du(a.shakeKey,0!==a.shakeKey),S={maxHeight:u?void 0:"150px"},E=(0,h.useRef)(!1),A=(0,bo.M)(),C=mA();(0,h.useEffect)((()=>{(0,l.sH)(void 0,void 0,void 0,(function*(){if(d)return;if(!p.current)throw new Error("ibanContainerRef is not provided");const e={onIbanElementReady:()=>{s((e=>Object.assign(Object.assign({},e),{isReady:!0})))}},{stripeElements:t}=yield r.initiateSepa(p.current,Object.assign(Object.assign({},e),{stripeElementStyleOverride:Object.assign(Object.assign({},ir),{base:Object.assign(Object.assign({},ir.base),{"::placeholder":{color:"transparent"}}),invalid:Object.assign(Object.assign({},ir.invalid),{color:"#222832",":focus":{color:"#222832"},"::placeholder":{color:"transparent"}})}),showIcon:!1}));y(t)}))}),[r,d,s]),(0,h.useEffect)((()=>{if(!i.isReady||!g||!t)return;const e=g.getElement(_r.IBAN);if(!e)throw new Error("iban element is not initialized");const n=()=>{E.current?A.document.dispatchEvent(new Event("stripeElementEvent")):E.current=!0},a=e=>{r.recalculatePaymentScreen(),s((t=>{var n,i;return Object.assign(Object.assign({},t),{isEmpty:e.empty,error:null!==(i=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==i?i:null})}))};return e.on("focus",n),e.on("change",a),m||E.current||e.focus(),()=>{e.off("focus",n),e.off("change",a)}}),[r,A.document,s,i.isReady,g,t,m]);const v=pA({focus:()=>{var e;return null===(e=null==g?void 0:g.getElement(_r.IBAN))||void 0===e?void 0:e.focus()},scrollIntoView:e=>{var t;return null===(t=p.current)||void 0===t?void 0:t.scrollIntoView(e)}});return hA(v,(e=>Boolean(e.error)||e.isEmpty)),(0,Co.jsxs)("form",{className:"flow-screen",onSubmit:e=>{e.preventDefault(),C(),r.leave()},children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:o.translate("common.screenAriaLabel",{screenTitle:`${o.translate("sepaScreen.title")}`})}),(0,Co.jsx)(pl,{title:o.translate("sepaScreen.title"),showBadge:n,titleQa:"sepa-title"}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"py-5":!u}),children:(0,Co.jsxs)("div",{className:(0,To.A)("fixed-container",{"grow-1 d-flex flex-column":!u}),children:[(0,Co.jsx)("p",{className:(0,To.A)("text-center",u?"text-ellipsis":"text-line-clamp-4"),children:o.translate("sepaScreen.description")}),(0,Co.jsxs)(Xl.s,{htmlFor:`iban-number-${c}`,label:o.translate("sepaScreen.ibanNumberLabel"),labelFloating:!0,formGroupClass:(0,To.A)("mt-5",{"pointer-events-none":a.locked,shake:f}),formLabelClass:(0,To.A)({"has-value":!i.isEmpty,"has-error pe-6":null!==i.error}),dataQa:"iban-number-label",children:[(0,Co.jsx)("div",{ref:p,id:`iban-number-${c}`,className:"StripeElement has-label-floating"}),i.error&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:i.error}),(0,Co.jsx)("p",{role:"alert",className:"sr-only",children:i.error})]})]}),(0,Co.jsx)("div",{className:u?"mt-5":"grow-1 min-h-0 p-rel mt-4",style:S,children:(0,Co.jsx)("div",{className:(0,To.A)({"p-abs top-left bottom-right scroll-box":!u}),children:(0,Co.jsx)("p",{className:(0,To.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!u,"pointer-events-none":a.locked}),children:o.translate("sepaScreen.legalInformation")})})})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",errorTitle:a.payErrorMessage,processingState:a.processingState,dataQa:"sepa-continue-button",trackingElement:"nextButton",children:a.isPaymentScreen?Sl(o,a.formattedAmount,a.frequency):o.translate("sepaScreen.button")})})]})};function yA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.filter((e=>"string"==typeof e||"number"==typeof e)).map((e=>"string"==typeof e?e.trim():e)).filter((e=>""!==e)).join(t)}var fA;function SA(){return SA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},SA.apply(this,arguments)}var EA=function(e,t){return h.createElement("svg",SA({fill:"none",height:28,viewBox:"0 0 87 28",width:87,xmlns:"http://www.w3.org/2000/svg",ref:t},e),fA||(fA=h.createElement("path",{clipRule:"evenodd",d:"m40.6994 5.87862h4.4869s4.4427-.08959 4.3979 3.94846c-.0443 3.00672-4.3073 3.45522-4.3073 3.45522h-4.577v-7.40368zm13.4235 14.49468c.126.5873.5508 1.2346 1.9681 1.3011 1.8843.0443 2.9614-.6739 2.9614-.6739v1.3911s-2.064.4943-3.0515.4943c-1.0318 0-4.0833-.225-4.0833-3.0516 0-2.288 2.513-3.0062 3.9484-3.0062 2.513.0896 3.7245.9874 3.6797 3.5448 0 .0369-4.1346.0093-5.4228.0004zm.0059-1.1228h3.4429s0-1.3011-1.6604-1.3011c-1.2489 0-1.6575.6735-1.7825 1.3011zm10.8913-1.4049c.4982-.5405 1.3346-.9732 2.7375-.9732 2.7823 0 3.2312 2.3333 3.1864 2.9614-.0448.6282-.2692 3.0063-3.4995 3.0063-1.2203 0-1.9671-.4165-2.4239-.9333v.7536h-2.1989v-8.0771h2.1989v3.2623zm1.8854 3.7382c1.3011-.0453 1.8844-1.1661 1.8844-1.7047 0-.5385-.3146-1.6604-1.975-1.6604-1.2882 0-1.6806.9732-1.7948 1.4487v.5853c.1133.4849.5076 1.3311 1.8854 1.3311zm18.9812-.224.0443 1.2568s-1.0318.224-1.7047.224-2.4239-.4037-2.4239-2.1094v-2.6026h-1.8391v-1.1662h1.8391v-1.3911h2.2442v1.3911h1.8401v1.1662h-1.8401v2.2443s0 1.1218.8979 1.1218c.8969 0 .9422-.1349.9422-.1349zm-6.8208-14.26972h2.6026v6.23702h2.1979v-6.23702h2.6479v-1.30154h-7.4484zm-.8979.31407.2693-1.30155s-1.1219-.49325-3.0959-.49325c-1.9297 0-5.0255 1.07708-5.0255 3.99375 0 2.8719 3.2755 3.8589 5.2948 3.8589s2.6922-.3141 2.6922-.3141l-.224-1.4359s-.8979.2692-2.4239.2692c-1.4807-.0448-3.0053-1.2114-3.0053-2.51249.0443-1.16667 1.3902-2.46822 3.1412-2.46822 1.3453 0 2.3771.40366 2.3771.40366zm-19.8338-1.57032s3.6797-.17919 3.6797 1.97447c0 1.84009-2.1084 1.97447-2.1084 1.97447s.5828.08959.8526.49323c.224.3589 1.7047 3.0516 1.7047 3.0516h-2.2442s-.3589-.449-.5385-.7626c-.1344-.314-.5386-.9874-.5386-.9874s-.3136-1.1219-1.3911-1.1219c-.0271 0-.4652-.0167-.8078-.0295v2.9014h-2.1537v-7.49377zm-1.3911 3.36561h1.1671s1.6151-.09009 1.7047-1.07708c.0453-.94219-1.5698-1.07707-1.5698-1.07707h-1.302zm9.0192 1.16666h3.5901v-1.39113h-3.5901v-1.70521h3.9047v-1.43593h-6.1021v7.49377h6.1473v-1.3464h-3.9494v-1.6151zm8.75 5.7433h2.199v-1.5261h-2.199zm0 6.5515h2.199v-5.6985h-2.199zm-23.9609-9.3333h2.1536v-7.49377h-2.1536zm-10.052 1.8848h4.4869s4.4427-.0905 4.3979 3.9485c-.0443 3.0063-4.3073 3.4557-4.3073 3.4557h-4.577v-7.4042zm2.1989 6.0131h1.4359s2.9615-.1797 2.9615-2.4683c0-2.2885-3.1411-2.513-3.1411-2.513h-1.2563zm0-9.3339h1.4359s2.9615-.2244 2.9615-2.46818c0-2.33333-3.1411-2.51252-3.1411-2.51252h-1.2563zm-22.3468-1.5521v15.0141s-8.7057-1.5708-8.7057-7.5386c.0005-4.7597 6.4447-6.8577 8.7057-7.4755zm0-.2801c-5.2323-.37853-17.0963 2.0739-17.0963 7.4411 0 3.4995 6.28226 8.6156 16.513 8.75.4036 0 12.0255-.449 11.8463-12.9234-.1506-10.47738-7.9924-12.31254-10.5-12.632021v-.6384659c9.9969.6345289 17.8593 6.6465569 17.8593 13.9433869 0 7.7182-8.7952 14-19.6093 14-10.81402 0-19.5645-6.2823-19.5645-14 0-7.71772 8.74999-14 19.5645-14 .3313 0 .6606.0059087.9875.017723v10.041677z",fill:"currentColor",fillRule:"evenodd"})))},AA=(0,h.forwardRef)(EA),CA=(0,h.memo)(AA);const vA={boxShadow:"inset 0 0 0 1px #c7cdd6"},NA={boxShadow:"inset 0 -1px 0 0 #c7cdd6"};function bA(e){/[0-9]/.test(e.key)||!e.key||1!==e.key.length||e.ctrlKey||e.metaKey||e.preventDefault()}const{useAddFieldToScroll:PA,useScrollToFieldsTrigger:DA,ScrollToFieldsProvider:_A}=(0,pm.J)(),TA=e=>{var t,n,i;const{showBadge:s}=e,{state:a,controller:r}=Jo(cn.UK_BACS),o=(0,ko.P)(),c=(0,Ho.t)(),l=tc(),u=DA(),d=(0,h.useRef)(null),m=(0,h.useRef)(null),p=(0,h.useRef)(null),g=(0,h.useRef)(null),y=a.errors.sortCode,f=a.errors.accountNumber,S=a.errors.accountHolderName,E=Du(a.shakeKey,0!==a.shakeKey),A=(0,tl.k)();PA(d,(e=>Boolean(e.sortCode))),PA(m,(e=>Boolean(e.accountNumber))),PA(p,(e=>Boolean(e.accountHolderName))),PA(g,(e=>Boolean(e.termsChecked))),(0,h.useEffect)((()=>{if(a.sortCode||a.accountNumber||a.accountHolderName)return;if(a.livemode||!A)return;if(!d.current||!m.current||!p.current)throw new Error("Input fields refs are not defined");const e=r.fillDemoData({sortCode:d,accountNumber:m,accountHolderName:p});return()=>{e()}}),[A,r,a.livemode]);const C=(0,h.useCallback)((e=>{const t=e.target.value;r.changeSortCode(t),m.current&&6===t.length&&m.current.focus()}),[r]),v=(0,h.useCallback)((e=>{const t=e.target.value;r.changeAccountNumber(t),p.current&&17===t.length&&p.current.focus()}),[r]);return(0,Co.jsxs)("form",{onSubmit:e=>{u(),e.preventDefault(),r.leave()},className:"flow-screen","data-qa":"uk-bacs-title",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("ukBacsScreen.title")}`})}),(0,Co.jsx)(pl,{showBadge:s,children:(0,Co.jsx)("h2",{className:(0,To.A)("title-2",{"py-2":o}),"aria-label":c.translate("ukBacsScreen.title"),children:(0,Co.jsx)("span",{className:"icon-slot d-block","aria-hidden":"true",children:(0,Co.jsx)("span",{className:"p-abs centered",children:(0,Co.jsx)(CA,{className:"d-block text-black",width:87,height:28})})})})}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body d-flex flex-column",{"pt-8":!o,shake:E}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Co.jsxs)("div",{className:"group-stacked-vertical",children:[(0,Co.jsx)(au.t,{id:`sort-code-${l}`,className:(0,To.A)("text-sans-serif",{"pe-10":y}),formLabelClass:(0,To.A)({"pe-6":y}),formGroupClass:"group-stacked-item",label:c.translate("ukBacsScreen.sortCode.label"),labelFloating:!0,setRef:d,autoFocus:!0,autoFocusMode:al.Q.ALL,name:"sortCode",error:y,placeholder:c.translate("ukBacsScreen.sortCode.label"),value:null!==(t=a.sortCode)&&void 0!==t?t:"",disabled:a.locked,"aria-required":!0,"aria-describedby":`sort-code-${l}-error`,onKeyPress:bA,onChange:C,dataQa:"sort-code",inputMode:"numeric",children:y&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("ukBacsScreen.sortCode.error")}),(0,Co.jsx)("p",{id:`sort-code-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.sortCode.error")})]})}),(0,Co.jsx)(au.t,{id:`account-number-${l}`,className:(0,To.A)("text-sans-serif",{"pe-10":f}),formLabelClass:(0,To.A)({"pe-6":f}),formGroupClass:"group-stacked-item",setRef:m,label:c.translate("ukBacsScreen.accountNumber.label"),labelFloating:!0,name:"ukBacsAccountNumber",error:f,placeholder:c.translate("ukBacsScreen.accountNumber.label"),value:null!==(n=a.accountNumber)&&void 0!==n?n:"",disabled:a.locked,"aria-required":!0,"aria-describedby":`account-number-${l}-error`,onKeyPress:bA,onChange:v,dataQa:"account-number",inputMode:"numeric",children:f&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("ukBacsScreen.accountNumber.error")}),(0,Co.jsx)("p",{id:`account-number-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.accountNumber.error")})]})})]}),(0,Co.jsx)(jl,{size:16}),(0,Co.jsx)(au.t,{id:`account-holder-name-${l}`,className:(0,To.A)("text-sans-serif",{"pe-10":S}),formLabelClass:(0,To.A)({"pe-6":S}),formGroupClass:"p-rel",label:c.translate("ukBacsScreen.accountHolderName.label"),labelFloating:!0,setRef:p,name:"ukBacsAccountHolderName",error:S,placeholder:c.translate("ukBacsScreen.accountHolderName.label"),minLength:1,value:null!==(i=a.accountHolderName)&&void 0!==i?i:"",disabled:a.locked,"aria-required":!0,"aria-describedby":`account-holder-name-${l}-error`,onChange:e=>r.changeAccountHolderName(e.target.value),dataQa:"account-holder-name",children:S&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("ukBacsScreen.accountHolderName.error")}),(0,Co.jsx)("p",{id:`account-holder-name-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.accountHolderName.error")})]})}),(0,Co.jsx)(jl,{size:16}),(0,Co.jsx)(Yl,{setRef:g,customLabelClasses:"line-height-18 text-gray-80",checked:a.termsChecked,error:a.errors.termsChecked,disabled:a.locked,"aria-required":!0,"aria-describedby":`terms-checkbox-${l}-error`,onChange:()=>r.toggleTermsChecked(),dataQa:"uk-bacs-legal-checkbox",children:(0,Co.jsx)("span",{className:(0,To.A)("body-4",{"text-line-clamp-8":!o}),"data-qa":"uk-bacs-legal-text-label",children:c.translate("ukBacsScreen.legalInformation.label",{companyName:a.companyName})})}),a.errors.termsChecked&&(0,Co.jsx)("p",{id:`terms-checkbox-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.legalInformation.error")}),!o&&(0,Co.jsx)(jl,{size:20})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",processingState:a.processingState,errorTitle:a.payErrorMessage||c.translate("common.errorOccurredText"),dataQa:"uk-bacs-continue-button",trackingElement:"nextButton",children:c.translate("ukBacsScreen.button")})})]})},xA=e=>{const t=(0,Mc.Y)();return(0,Co.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:"96",viewBox:"0 0 96 96",width:"96",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("linearGradient",{id:`a-${t}`,gradientUnits:"userSpaceOnUse",x1:"34",x2:"34",y1:"12",y2:"88",children:[(0,Co.jsx)("stop",{offset:".360343",stopColor:"#e6f0ff"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#c9deff"})]}),(0,Co.jsxs)("linearGradient",{id:`b-${t}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#8dbaf8"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#bfdaff",stopOpacity:"0"})]}),(0,Co.jsx)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"25",x2:"34",xlinkHref:`#b-${t}`,y1:"24",y2:"24"}),(0,Co.jsxs)("linearGradient",{id:`d-${t}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#739ad5"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#c1dafc"})]}),(0,Co.jsx)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"24.5",x2:"24.5",xlinkHref:`#d-${t}`,y1:"24",y2:"4"}),(0,Co.jsxs)("linearGradient",{id:`f-${t}`,children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#e8f4ff"}),(0,Co.jsx)("stop",{offset:".756988",stopColor:"#4880d3",stopOpacity:".24"})]}),(0,Co.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"25",x2:"25",xlinkHref:`#f-${t}`,y1:"4",y2:"24"}),(0,Co.jsx)("linearGradient",{id:`h-${t}`,gradientUnits:"userSpaceOnUse",x1:"67",x2:"76",xlinkHref:`#b-${t}`,y1:"24",y2:"24"}),(0,Co.jsx)("linearGradient",{id:`i-${t}`,gradientUnits:"userSpaceOnUse",x1:"66.5",x2:"66.5",xlinkHref:`#d-${t}`,y1:"24",y2:"4"}),(0,Co.jsx)("linearGradient",{id:`j-${t}`,gradientUnits:"userSpaceOnUse",x1:"67",x2:"67",xlinkHref:`#f-${t}`,y1:"4",y2:"24"}),(0,Co.jsx)("rect",{fill:"#a9cbff",height:"76",rx:"10",width:"92",x:"3",y:"16"}),(0,Co.jsx)("rect",{fill:`url(#a-${t})`,height:"76",rx:"8",width:"90",x:"1",y:"12"}),(0,Co.jsx)("path",{d:"m4.25439 86.4409c1.32765.9798 2.96908 1.559 4.74579 1.559h74.00002c4.4183 0 8-3.5817 8-8v-60c0-1.7767-.5792-3.4181-1.5591-4.7457.3599.843.5591 1.7711.5591 2.7457v62c0 3.866-3.134 7-7 7h-76.00002c-.97461 0-1.9027-.1991-2.74579-.559z",fill:"#dfecff"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m26.7465 16.6999c.7142-1.0714 1.2535-2.7243 1.2535-4.6999h6c0 2.9949-.8039 5.8421-2.2612 8.0281-1.4434 2.165-3.7668 3.9719-6.7388 3.9719v-6c.3417 0 1.0183-.2078 1.7465-1.3001z",fill:`url(#c-${t})`,fillRule:"evenodd"}),(0,Co.jsx)("path",{d:"m25 4c-2.2091 0-4 1.79086-4 4v4h10v-4c0-2.20914-1.7909-4-4-4z",fill:"#739ad5"}),(0,Co.jsx)("path",{d:"m25 4c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.55229.4477-1 1-1s1 .44771 1 1c0-2.20914-1.7909-4-4-4z",fill:`url(#e-${t})`}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m25 5c-1.6569 0-3 1.34315-3 3v12c0 1.6569 1.3431 3 3 3s3-1.3431 3-3v-12c0-.87072.5564-1.61147 1.3331-1.8861-.55-.67948-1.3908-1.1139-2.3331-1.1139zm5.5007 1.06318c-.6822-1.23036-1.9942-2.06318-3.5007-2.06318h-2c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.49577.3608-.90727.8341-.9863.054-.00901.1094-.0137.1659-.0137.5523 0 1 .44771 1 1 0-.70264-.1812-1.36297-.4993-1.93682z",fill:`url(#g-${t})`,fillRule:"evenodd"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m68.7465 16.6999c.7142-1.0714 1.2535-2.7243 1.2535-4.6999h6c0 2.9949-.8039 5.8421-2.2612 8.0281-1.4434 2.165-3.7668 3.9719-6.7388 3.9719v-6c.3417 0 1.0183-.2078 1.7465-1.3001z",fill:`url(#h-${t})`,fillRule:"evenodd"}),(0,Co.jsx)("path",{d:"m67 4c-2.2091 0-4 1.79086-4 4v4h10v-4c0-2.20914-1.7909-4-4-4z",fill:"#739ad5"}),(0,Co.jsx)("path",{d:"m67 4c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.55229.4477-1 1-1s1 .44771 1 1c0-2.20914-1.7909-4-4-4z",fill:`url(#i-${t})`}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m67 5c-1.6569 0-3 1.34315-3 3v12c0 1.6569 1.3431 3 3 3s3-1.3431 3-3v-12c0-.87072.5564-1.61147 1.3331-1.8861-.55-.67948-1.3908-1.1139-2.3331-1.1139zm5.5007 1.06318c-.6822-1.23036-1.9942-2.06318-3.5007-2.06318h-2c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.49577.3608-.90727.8341-.9863.054-.00901.1094-.0137.1659-.0137.5523 0 1 .44771 1 1 0-.70264-.1812-1.36297-.4993-1.93682z",fill:`url(#j-${t})`,fillRule:"evenodd"}),(0,Co.jsxs)("g",{fill:"#b5cbee",children:[(0,Co.jsx)("path",{d:"m14 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m32 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m50 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m68 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m14 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m32 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m50 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m68 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m14 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m32 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m50 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Co.jsx)("path",{d:"m68 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"})]}),(0,Co.jsx)("path",{d:"m13 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m31 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m49 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m67 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m13 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m31 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m49 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m67 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m13 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m31 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m49 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{d:"m67 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Co.jsx)("path",{clipRule:"evenodd",d:"m60.9768 43.2791c3.0364.9078 5.2846 3.9193 4.9987 8.0868-.2477 3.6099-2.1691 7.1112-4.3664 9.9483-2.2111 2.855-4.8174 5.1863-6.6657 6.4679-.5554.3851-1.3173.2462-1.7017-.3103-.3845-.5565-.2458-1.3198.3096-1.705 1.6427-1.139 4.0669-3.2973 6.1252-5.9551 2.0723-2.6756 3.6593-5.7102 3.8586-8.6139.215-3.1337-1.4195-5.0206-3.2578-5.5701-1.83-.5472-4.1921.1325-5.6767 2.9002l-.6216 1.1588-1.1097-.7034c-1.879-1.1909-3.5844-1.2975-4.8373-.8748-1.2631.4261-2.1695 1.4163-2.4702 2.6611-.5706 2.3615 1.0339 6.6752 9.5698 9.5163.6411.2134.9881.907.7751 1.5493-.2129.6423-.9052.99-1.5463.7766-8.919-2.9687-12.2139-8.1234-11.1761-12.4189.5034-2.0837 2.0281-3.7192 4.067-4.4071 1.7439-.5884 3.7908-.4654 5.8467.5253 2.0401-2.8813 5.1448-3.8493 7.8788-3.032z",fill:"#fa4e77",fillRule:"evenodd"})]})},OA=(0,h.memo)(xA),kA=e=>{var t;const{state:n}=Jo(cn.UPSELL),i=(0,zo.Q)(),s=(0,h.useRef)(null);return(0,rl.f)({ref:s,autoFocus:e.autoFocus,mode:al.Q.DESKTOP}),e.upsellScreenV3ExperimentEnabled?(0,Co.jsxs)(Ll,{ref:s,className:"btn-danger d-flex items-center justify-center",processingState:n.processingState.highMonthly,disabled:e.disabled,onClick:()=>e.onClick(Ap.HIGH),dataQa:"upsell-high",dataTestId:"upsell-high",trackingElement:"oldUpsellHighMonthlyUpsellV3Experiment",children:[(0,Co.jsx)(ul,{className:"icon-fill shrink-0 font-size-18 me-2","aria-hidden":!0}),(0,Co.jsx)("span",{className:"text-truncate",children:n.highButtonText})]}):(0,Co.jsxs)("div",{className:"p-rel",children:[(0,Co.jsx)(Ll,{ref:s,className:(0,To.A)("btn-danger",{"px-10":!n.isAnnualTribute}),processingState:n.processingState.highMonthly,disabled:e.disabled,onClick:()=>e.onClick(Ap.HIGH),dataQa:"upsell-high",dataTestId:"upsell-high",trackingElement:null!==(t=e.trackingElement)&&void 0!==t?t:"",children:n.highButtonText}),!n.isAnnualTribute&&(0,Co.jsx)(gg,{className:(0,To.A)("p-abs top-left z-index-2 ms-minus-5 mt-minus-3",{"icon-flip-horizontal":i}),ariaHidden:!0})]})},IA=(0,h.memo)(kA),wA=e=>{var t;const{state:n}=Jo(cn.UPSELL),i=(0,h.useRef)(null);return(0,rl.f)({ref:i,autoFocus:e.autoFocus,mode:al.Q.DESKTOP}),(0,Co.jsx)(Ll,{ref:i,className:(0,To.A)("btn-primary",e.className),onClick:()=>e.onClick(Ap.LOW),dataQa:"upsell-low-monthly",trackingElement:null!==(t=e.trackingElement)&&void 0!==t?t:"",dataTestId:"upsell-low",processingState:n.processingState.lowMonthly,disabled:e.disabled,children:n.lowButtonText})},RA=(0,h.memo)(wA),MA=e=>{const{amount:t,currency:n,trackingElement:i,onClick:s}=e,a=(0,Ho.t)();return(0,Co.jsx)("button",{type:"button",className:"btn-link text-truncate","data-tracking-element-name":i,"data-qa":"keep-one-time-link","data-testid":"keep-one-time-link",onClick:s,children:a.translate("upsellScreen.button.keepOneTimeLink",{amount:a.formatCurrency(t,{currency:n,display:"floatcents"})})})},LA=(0,h.memo)(MA),UA=e=>{const{state:t}=Jo(cn.UPSELL),n=(0,Ho.t)();return e.upsellScreenV3ExperimentEnabled?(0,Co.jsx)("div",{className:"d-flex justify-center mt-4",children:(0,Co.jsx)(LA,{amount:e.amount,currency:t.currency,onClick:()=>e.onClick(null),trackingElement:"oldUpsellKeepUpsellV3Experiment"})}):(0,Co.jsx)("button",{type:"button",className:(0,To.A)("btn btn-default",e.className),onClick:()=>e.onClick(null),"data-qa":"upsell-one-time","data-tracking-element-name":e.trackingElement,disabled:e.disabled,children:n.translate("upsellScreen.button.keepOneTime",{amount:n.formatCurrency(e.amount,{currency:t.currency,display:"floatcents"})})})},FA=(0,h.memo)(UA),jA=e=>{const{state:t}=Jo(cn.UPSELL),n=(0,ko.P)();return e.upsellScreenV3ExperimentEnabled?(0,Co.jsx)("p",{className:(0,To.A)("text-center",n?"text-ellipsis":"text-line-clamp-6"),dangerouslySetInnerHTML:{__html:t.questionShortText},"data-testid":"upsell-screen-question-text"}):(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)("p",{className:(0,To.A)("text-center",n?"text-ellipsis":"text-line-clamp-6"),dangerouslySetInnerHTML:{__html:t.questionText},"data-testid":"upsell-screen-question-text"}),(0,Co.jsx)("p",{className:(0,To.A)("text-center mt-2",n?"text-ellipsis":"text-line-clamp-4"),dangerouslySetInnerHTML:{__html:t.descriptionText},"data-testid":"upsell-screen-description-text"})]})},BA=(0,h.memo)(jA),HA=e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(cn.UPSELL),s=(0,Ho.t)(),a=(0,ko.P)(),{tryToExpose:r}=function(){const e=(0,h.useRef)(!1),t=Tp().get(Sn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT);return{tryToExpose:(0,h.useCallback)((n=>{e.current||n!==oe.ANNUAL&&(t.tryToExpose(n),e.current=!0)}),[t])}}(),o=(0,h.useCallback)((e=>{i.confirm(e)}),[i]);return(0,h.useEffect)((()=>{i.setShowed()}),[i]),function(e){const t=(0,h.useRef)(!1),n=Tp().get(Sn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT);(0,h.useEffect)((()=>{t.current||(t.current=!0,n.tryExposure({preDonationUpsellTargetFrequency:e}))}),[n,e])}(n.targetFrequency),(0,h.useEffect)((()=>{r(n.targetFrequency)}),[n.targetFrequency,r]),(0,Co.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-upsell",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${n.screenTitle}`})}),(0,Co.jsx)(pl,{title:n.screenTitle,titleTestId:"upsell-screen-title",showBadge:t}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"py-6":n.isAnnualTribute&&!a,"py-8":!n.isAnnualTribute&&!a}),children:(0,Co.jsxs)("div",{className:"fixed-container",children:[n.isAnnualTribute&&(0,Co.jsx)(OA,{className:"d-block mx-auto mt-2 mb-6",ariaHidden:!0}),(0,Co.jsx)(BA,{upsellScreenV3ExperimentEnabled:n.experiments.upsellScreenV3})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsxs)("div",{role:"group","aria-label":s.translate("upsellScreen.buttonGroupAriaLabel"),children:[n.highAmount&&(0,Co.jsx)(IA,{amount:n.highAmount,autoFocus:!!n.highAmount,trackingElement:"oldUpsellHighMonthly",onClick:o,upsellScreenV3ExperimentEnabled:n.experiments.upsellScreenV3,disabled:i.isLocked}),n.lowAmount&&(0,Co.jsx)(RA,{onClick:o,className:n.experiments.upsellScreenV3?"mt-2":"mt-3",amount:n.lowAmount,autoFocus:!n.highAmount,trackingElement:"oldUpsellLowMonthly",disabled:i.isLocked}),(0,Co.jsx)(FA,{onClick:o,className:"mt-3",amount:n.upsell.fromAmount,trackingElement:"oldUpsellKeep",upsellScreenV3ExperimentEnabled:n.experiments.upsellScreenV3,disabled:i.isLocked})]})})]})},qA=(0,h.memo)(HA),GA={boxShadow:"inset 0 0 0 1px #c7cdd6"},VA={boxShadow:"inset 0 -1px 0 0 #c7cdd6"},KA={letterSpacing:"-0.2em"},YA=e=>{const t=tc();return(0,Co.jsxs)("svg",{className:(0,To.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:e.height||128,viewBox:"0 0 158 128",width:e.width||158,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Co.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"98.4998",y:"59",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"73.4998",y:"59",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`c-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"6",width:"91",x:"33.4998",y:"103",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`d-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"6",width:"79",x:"39.4998",y:"97",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`e-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"30",width:"90",x:"34.4998",y:"19",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`f-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"96.4998",y:"92",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`g-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"96.4998",y:"54",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`h-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"71.4998",y:"92",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`i-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"71.4998",y:"54",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`j-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"48.4998",y:"59",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`k-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"46.4998",y:"92",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`l-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"46.4998",y:"54",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`m-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"82",x:"38.4998",y:"49",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dy:"-1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Co.jsxs)("filter",{id:`n-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"66.4238",width:"51.5996",x:"9.14014",y:"24.7031",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.06125 0 0 0 0 0.525 0 0 0 0 0.132596 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_16856_24583"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_16856_24583",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("filter",{id:`o-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"34.9189",width:"28.3767",x:"20.7512",y:"39.0498",children:[(0,Co.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Co.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Co.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Co.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Co.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Co.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.160784 0 0 0 0 0.619608 0 0 0 0 0.231373 0 0 0 1 0"}),(0,Co.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_16856_24583"}),(0,Co.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_16856_24583",mode:"normal",result:"shape"})]}),(0,Co.jsxs)("linearGradient",{id:`p-${t}`,gradientUnits:"userSpaceOnUse",x1:"7.07017",x2:"54.682",y1:"32.2054",y2:"71.3086",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#beffd2"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#beffd2",stopOpacity:".15"})]}),(0,Co.jsxs)("linearGradient",{id:`q-${t}`,gradientUnits:"userSpaceOnUse",x1:"18.1884",x2:"39.841",y1:"54.9202",y2:"81.3544",children:[(0,Co.jsx)("stop",{offset:"0",stopColor:"#ebfff1"}),(0,Co.jsx)("stop",{offset:"1",stopColor:"#ebfff1",stopOpacity:"0"})]}),(0,Co.jsx)("g",{filter:`url(#a-${t})`,children:(0,Co.jsx)("path",{d:"m98.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Co.jsx)("g",{filter:`url(#b-${t})`,children:(0,Co.jsx)("path",{d:"m73.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Co.jsx)("g",{filter:`url(#c-${t})`,children:(0,Co.jsx)("path",{d:"m33.4998 103h91v6h-91z",fill:"#c9cfd7"})}),(0,Co.jsx)("g",{filter:`url(#d-${t})`,children:(0,Co.jsx)("path",{d:"m39.4998 97h79v6h-79z",fill:"#dde0eb"})}),(0,Co.jsx)("g",{filter:`url(#e-${t})`,children:(0,Co.jsx)("path",{d:"m34.4998 43.2308 45-24.2308 45.0002 24.2308v5.7692h-90.0002z",fill:"#c9cfd7"})}),(0,Co.jsx)("path",{d:"m48.4998 43 31-16 31.0002 16z",fill:"#dde0eb"}),(0,Co.jsx)("g",{filter:`url(#f-${t})`,children:(0,Co.jsx)("path",{d:"m96.4998 94c0-1.1046.8954-2 2-2h11.0002c1.104 0 2 .8954 2 2v3h-15.0002z",fill:"#c9cfd7"})}),(0,Co.jsx)("g",{filter:`url(#g-${t})`,children:(0,Co.jsx)("path",{d:"m96.4998 57c0 1.1046.8954 2 2 2h11.0002c1.104 0 2-.8954 2-2v-3h-15.0002z",fill:"#c9cfd7"})}),(0,Co.jsx)("g",{filter:`url(#h-${t})`,children:(0,Co.jsx)("path",{d:"m71.4998 94c0-1.1046.8954-2 2-2h11c1.1045 0 2 .8954 2 2v3h-15z",fill:"#c9cfd7"})}),(0,Co.jsx)("g",{filter:`url(#i-${t})`,children:(0,Co.jsx)("path",{d:"m71.4998 57c0 1.1046.8954 2 2 2h11c1.1045 0 2-.8954 2-2v-3h-15z",fill:"#c9cfd7"})}),(0,Co.jsx)("g",{filter:`url(#j-${t})`,children:(0,Co.jsx)("path",{d:"m48.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Co.jsx)("g",{filter:`url(#k-${t})`,children:(0,Co.jsx)("path",{d:"m46.4998 94c0-1.1046.8954-2 2-2h11c1.1045 0 2 .8954 2 2v3h-15z",fill:"#c9cfd7"})}),(0,Co.jsx)("g",{filter:`url(#l-${t})`,children:(0,Co.jsx)("path",{d:"m46.4998 57c0 1.1046.8954 2 2 2h11c1.1045 0 2-.8954 2-2v-3h-15z",fill:"#c9cfd7"})}),(0,Co.jsx)("g",{filter:`url(#m-${t})`,children:(0,Co.jsx)("path",{d:"m38.4998 49h82.0002l-2.216 5h-77.568z",fill:"#dde0eb"})}),(0,Co.jsx)("path",{d:"m35.8866 19.5614c-.9308-.3612-1.963-.3612-2.8938 0l-28.21625 10.9479c-.7695.2985-1.27655 1.0392-1.27655 1.8645v25.0408c0 24.0092 24.3098 38.4147 30.9397 38.4147 6.63 0 30.9398-14.4055 30.9398-38.4147v-25.0408c0-.8253-.5071-1.566-1.2766-1.8645z",fill:"#3ac24f"}),(0,Co.jsxs)("g",{filter:`url(#n-${t})`,children:[(0,Co.jsx)("path",{clipRule:"evenodd",d:"m10.6401 35.6313v21.5716c0 9.4566 4.6827 17.33 10.5723 23.0788 2.9207 2.851 6.0022 5.0351 8.632 6.4779 1.3139.7208 2.4515 1.2217 3.3408 1.5298.7584.2627 1.1579.3229 1.2493.3367l.0054.0008.0054-.0008c.0915-.0138.4909-.074 1.2493-.3367.8893-.3081 2.0269-.809 3.3408-1.5298 2.6298-1.4428 5.7113-3.6269 8.6321-6.4779 5.8896-5.7488 10.5722-13.6222 10.5722-23.0788v-21.5716l-23.7998-9.4282z",fill:"#3bcb53",fillRule:"evenodd"}),(0,Co.jsx)("path",{d:"m34.4399 87.9681c-.155-.0285-.4945-.1033-1.0419-.2929-.8485-.294-1.9525-.7786-3.2409-1.4855-2.5788-1.4148-5.6126-3.5638-8.4907-6.3731-5.8068-5.668-10.3763-13.3839-10.3763-22.6137v-21.13l23.1498-9.1706 23.1498 9.1706v21.13c0 9.2298-4.5694 16.9457-10.3762 22.6137-2.8781 2.8093-5.9119 4.9583-8.4907 6.3731-1.2884.7069-2.3924 1.1915-3.2409 1.4855-.5475.1896-.887.2644-1.042.2929z",stroke:`url(#p-${t})`,strokeWidth:"1.3"})]}),(0,Co.jsxs)("g",{filter:`url(#o-${t})`,children:[(0,Co.jsx)("path",{d:"m44.8987 53.0362h-.618v-2.8197c0-5.2152-4.2452-9.5718-9.5513-9.6648-.1449-.0025-.4346-.0025-.5796 0-5.3061.093-9.5513 4.4496-9.5513 9.6648v2.8197h-.6181c-.9523 0-1.7292.9581-1.7292 2.1413v14.1425c0 1.1819.7769 2.1489 1.7293 2.1489h20.9182c.9524 0 1.7293-.967 1.7293-2.1489v-14.1425c0-1.1832-.7769-2.1413-1.7293-2.1413zm-8.4993 9.1982v4.2733c0 .4893-.4203.9034-.9226.9034h-2.0743c-.5024 0-.9226-.4141-.9226-.9034v-4.2733c-.4872-.4675-.7708-1.114-.7708-1.8292 0-1.3552 1.0745-2.5197 2.4408-2.5735.1448-.0057.4348-.0057.5796 0 1.3663.0538 2.4408 1.2183 2.4408 2.5735-.0001.7152-.2837 1.3617-.7709 1.8292zm3.8082-9.1982h-5.4782-.5796-5.4781v-2.8197c0-3.1066 2.5897-5.6753 5.7679-5.6753s5.768 2.5687 5.768 5.6753z",fill:"#beffd2"}),(0,Co.jsx)("path",{d:"m43.7807 53.0362v.5h.5.618c.5823 0 1.2293.6298 1.2293 1.6413v14.1425c0 1.0129-.6492 1.6489-1.2293 1.6489h-20.9182c-.5801 0-1.2293-.636-1.2293-1.6489v-14.1425c0-1.0116.647-1.6413 1.2292-1.6413h.6181.5v-.5-2.8197c0-4.9418 4.026-9.0766 9.0601-9.1649.1391-.0024.4229-.0024.5621 0 5.034.0883 9.06 4.2231 9.06 9.1649zm-6.1104 7.3691v-.0001c0-1.6134-1.2764-3.0083-2.9211-3.0731-.1579-.0063-.4611-.0063-.619 0-1.6447.0648-2.9211 1.4597-2.9211 3.0731 0 .7736.28 1.4858.7708 2.0312v4.0713c0 .7744.6531 1.4034 1.4226 1.4034h2.0743c.7695 0 1.4226-.629 1.4226-1.4034v-4.0713c.4907-.5454.7708-1.2576.7709-2.0311zm-9.4986-7.3691v.5h.5 5.4781.5796 5.4782.5v-.5-2.8197c0-3.3892-2.8202-6.1753-6.268-6.1753-3.4479 0-6.2679 2.7861-6.2679 6.1753z",stroke:`url(#q-${t})`})]})]})},zA=(0,h.memo)(YA);var WA;!function(e){e.INDIVIDUAL="individual",e.COMPANY="company"}(WA||(WA={}));const{useAddFieldToScroll:$A,useScrollToFieldsTrigger:XA,ScrollToFieldsProvider:QA}=(0,pm.J)(),ZA=e=>{var t,n,i;const{showBadge:s}=e,{state:a,controller:r}=Jo(cn.US_BANK_ACCOUNT),o=(0,ko.P)(),c=(0,Ho.t)(),l=tc(),u=a.errors.routingNumber,d=a.errors.accountNumber,m=a.errors.accountHolderName,p=XA(),g=Du(a.shakeKey,0!==a.shakeKey),y=(0,tl.k)(),f=(0,h.useRef)(null),S=(0,h.useRef)(null),E=(0,h.useRef)(null),[A,C]=(0,h.useState)(!1),[v,N]=(0,h.useState)(!1);$A(f,(e=>Boolean(e.routingNumber))),$A(S,(e=>Boolean(e.accountNumber))),$A(E,(e=>Boolean(e.accountHolderName))),(0,h.useEffect)((()=>{if(a.routingNumber||a.accountNumber||a.accountHolderName)return;if(a.livemode||!y)return;if(!f.current||!S.current||!E.current)throw new Error("Input fields refs are not defined");const e=r.fillDemoData({routingNumber:f.current,accountNumber:S.current,accountHolderName:E.current});return()=>{e()}}),[y,r,a.livemode]);const b=(0,h.useCallback)((e=>{const t=e.target.value;r.changeRoutingNumber(t),S.current&&9===t.length&&S.current.focus()}),[r]),P=(0,h.useCallback)((e=>{const t=e.target.value;r.changeAccountNumber(t),E.current&&17===t.length&&E.current.focus()}),[r]);return(0,Co.jsxs)("form",{onSubmit:e=>{p(),e.preventDefault(),r.leave()},className:"flow-screen","data-qa":"active-screen-routing-account",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("usBankAccountScreen.title")}`})}),(0,Co.jsx)(pl,{title:c.translate("usBankAccountScreen.title"),showBadge:s}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body d-flex flex-column",{"pt-5 pb-7":!o}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Co.jsx)("p",{className:(0,To.A)("shrink-0 text-center",o?"text-ellipsis":"text-line-clamp-3"),children:c.translate("usBankAccountScreen.description.desktop")}),(0,Co.jsx)(jl,{size:o?28:20,sizeMin:6}),(0,Co.jsx)(dp,{className:"shrink-0 mx-auto",firstNumber:"119562715",secondNumber:"891562828814208",firstNumberHighlighted:A,secondNumberHighlighted:v}),(0,Co.jsx)(jl,{size:o?28:20,sizeMin:6}),(0,Co.jsxs)("div",{className:(0,To.A)("group-stacked-vertical shrink-0",{shake:g}),children:[(0,Co.jsx)(au.t,{id:`routing-number-${l}`,className:(0,To.A)("text-sans-serif",{"pe-10":u}),formLabelClass:(0,To.A)({"pe-6":u}),formGroupClass:"group-stacked-item",label:c.translate("usBankAccountScreen.routingNumber.label"),labelFloating:!0,autoFocus:!0,autoFocusMode:al.Q.ALL,setRef:f,error:u,placeholder:c.translate("usBankAccountScreen.routingNumber.label"),value:null!==(t=a.routingNumber)&&void 0!==t?t:"",maxLength:9,disabled:a.locked,"aria-required":!0,"aria-describedby":`routing-number-${l}-error`,onChange:b,onKeyPress:bA,onFocus:()=>C(!0),onBlur:()=>C(!1),dataQa:"routing-number",inputMode:"numeric",children:u&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("usBankAccountScreen.routingNumber.error")}),(0,Co.jsx)("p",{id:`routing-number-${l}-error`,className:"sr-only",children:c.translate("usBankAccountScreen.routingNumber.error")})]})}),(0,Co.jsx)(au.t,{id:`account-number-${l}`,className:(0,To.A)("text-sans-serif",{"pe-10":d}),formLabelClass:(0,To.A)({"pe-6":d}),formGroupClass:"group-stacked-item",label:c.translate("usBankAccountScreen.accountNumber.label"),labelFloating:!0,setRef:S,error:d,placeholder:c.translate("usBankAccountScreen.accountNumber.label"),value:null!==(n=a.accountNumber)&&void 0!==n?n:"",maxLength:17,minLength:4,disabled:a.locked,"aria-required":!0,"aria-describedby":`account-number-${l}-error`,onKeyPress:bA,onChange:P,onFocus:()=>N(!0),onBlur:()=>N(!1),dataQa:"ach-account-number",inputMode:"numeric",children:d&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("usBankAccountScreen.accountNumber.error")}),(0,Co.jsx)("p",{id:`account-number-${l}-error`,className:"sr-only",children:c.translate("usBankAccountScreen.accountNumber.error")})]})})]}),(0,Co.jsx)(jl,{size:16,sizeMin:6}),(0,Co.jsx)(au.t,{id:`account-holder-name-${l}`,className:(0,To.A)({"pe-10":m}),formLabelClass:(0,To.A)({"pe-6":m}),formGroupClass:(0,To.A)("shrink-0",{shake:g}),label:c.translate("usBankAccountScreen.accountHolderName.label"),labelFloating:!0,setRef:E,error:m,placeholder:c.translate("usBankAccountScreen.accountHolderName.label"),minLength:1,value:null!==(i=a.accountHolderName)&&void 0!==i?i:"",disabled:a.locked,"aria-describedby":`account-holder-name-${l}-error`,onChange:e=>r.changeAccountHolderName(e.target.value),dataQa:"us-bank-account-holder-name",children:m&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsx)(Jl.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("usBankAccountScreen.accountHolderName.error")}),(0,Co.jsx)("p",{id:`account-holder-name-${l}-error`,className:"sr-only",children:c.translate("usBankAccountScreen.accountHolderName.error")})]})}),(0,Co.jsx)(jl,{size:20,sizeMin:6}),(0,Co.jsxs)("div",{role:"radiogroup",className:"d-flex justify-center shrink-0","aria-label":c.translate("usBankAccountScreen.accountType.label"),children:[(0,Co.jsx)(od,{radioName:"accountType",className:"max-w-50 me-3",checked:a.accountType===WA.INDIVIDUAL,radioValue:a.accountType,disabled:a.locked,onChange:()=>r.changeAccountType(WA.INDIVIDUAL),dataQa:"personal-bank-account",trackingElement:"personalBankAccount",children:(0,Co.jsx)("span",{className:"text-truncate",children:c.translate("usBankAccountScreen.accountType.personal")})}),(0,Co.jsx)(od,{radioName:"accountType",className:"max-w-50 ms-3",checked:a.accountType===WA.COMPANY,radioValue:a.accountType,disabled:a.locked,onChange:()=>r.changeAccountType(WA.COMPANY),dataQa:"business-bank-account",trackingElement:"businessBankAccount",children:(0,Co.jsx)("span",{className:"text-truncate",children:c.translate("usBankAccountScreen.accountType.business")})})]})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{type:"submit",className:"btn-primary",processingState:a.processingState,errorTitle:a.errorMessage||c.translate("common.errorOccurredText"),dataQa:"ach-continue",trackingElement:"nextButton",children:c.translate("usBankAccountScreen.button")})})]})},JA={filter:"drop-shadow(rgba(109, 141, 177, 0.5) 0 1px 5px)"},eC={letterSpacing:"-0.2em"},tC={background:"#E3EDF6",height:"12px"},nC=Object.assign(Object.assign({},tC),{width:"146px"}),iC=Object.assign(Object.assign({},tC),{width:"46px"}),sC=e=>{const t=(0,Ho.t)(),n=(0,zo.Q)(),i=(0,ko.P)();return(0,Co.jsxs)("div",{className:"fixed-container",children:[e.showAmountExample&&(0,Co.jsx)(lu,{as:"p",className:(0,To.A)("text-center",i?"text-ellipsis":"text-line-clamp-7"),token:"usBankAccountGuideScreen.description.amounts",params:{amount:t.formatCurrency(100,{currency:"USD"})}}),e.showDescriptorCodeExample&&(0,Co.jsx)(lu,{as:"p",className:(0,To.A)("text-center",i?"text-ellipsis":"text-line-clamp-7"),token:"usBankAccountGuideScreen.description.descriptorCode"}),(0,Co.jsx)("div",{className:"mt-5",style:JA,children:(0,Co.jsxs)("div",{className:"us-bank-account-receipt px-6 pt-4 bg-blue-5 border-top-radius-4",children:[(0,Co.jsx)("p",{className:"text-center text-truncate",children:t.translate("usBankAccountGuideScreen.bankStatement")}),(0,Co.jsx)("div",{className:"border-top border-gray-20 mt-4"}),e.showAmountExample&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)("div",{className:(0,To.A)("d-flex mt-3",{"text-start":n}),dir:"ltr",children:[(0,Co.jsx)("div",{className:"grow-1 overflow-hidden",children:(0,Co.jsxs)("div",{className:(0,To.A)("body-3 text-gray-60",{"text-line-clamp-2":!i}),children:[e.statementDescriptor,":"]})}),(0,Co.jsx)("div",{className:"body-2 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.amountExample}})]}),(0,Co.jsx)("div",{className:"border-top border-gray-20 my-3"}),(0,Co.jsxs)("div",{className:(0,To.A)("d-flex",{"text-start":n}),dir:"ltr",children:[(0,Co.jsx)("div",{className:"grow-1 overflow-hidden",children:(0,Co.jsxs)("div",{className:(0,To.A)("body-3 text-gray-60",{"text-line-clamp-2":!i}),children:[e.statementDescriptor,":"]})}),(0,Co.jsx)("div",{className:"body-2 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.amountExample}})]}),(0,Co.jsx)("div",{className:"border-top border-gray-20 my-3"})]}),e.showDescriptorCodeExample&&(0,Co.jsxs)(Co.Fragment,{children:[(0,Co.jsxs)("div",{className:(0,To.A)("d-flex mt-3",{"text-start":n}),dir:"ltr",children:[(0,Co.jsxs)("div",{className:"d-flex flex-wrap grow-1",children:[(0,Co.jsxs)("div",{className:(0,To.A)("body-3 text-gray-60 me-1",i?"overflow-hidden":"text-line-clamp-2"),children:[e.statementDescriptor,":"]}),(0,Co.jsxs)("div",{className:"d-flex label-4 shrink-0 text-nowrap",children:[e.descriptorCodeExample.prefix,(0,Co.jsx)("span",{className:"d-inline-block font-size-18",style:eC,"aria-hidden":!0,children:""})]})]}),(0,Co.jsx)("div",{className:"body-3 text-gray-60 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.descriptorCodeExample.amount}})]}),(0,Co.jsx)("div",{className:"border-top border-gray-20 mt-3"}),(0,Co.jsxs)("div",{className:"d-flex justify-between mt-4 mb-3",dir:"ltr",children:[(0,Co.jsx)("div",{className:"border-radius-8",style:nC}),(0,Co.jsx)("div",{className:"border-radius-8",style:iC})]})]})]})})]})},aC=(0,h.memo)(sC),rC={[cn.DONATE]:()=>{const{state:e}=Jo(cn.DONATE);return(0,Co.jsx)(kp,{state:e.errors,children:(0,Co.jsx)(Tg,{})})},[cn.UPSELL]:qA,[cn.PAYMENT_OPTIONS]:e=>{const{stripeElementsCardState:t,setStripeElementsCardState:n}=(()=>{const{stripeElementState:e,setStripeElementState:t}=lp(),{stripeElementState:n,setStripeElementState:i}=lp(),{stripeElementState:s,setStripeElementState:a}=lp(),r=(0,h.useCallback)(((e,n)=>{switch(e){case _r.CARD_NUMBER:t(n);break;case _r.CARD_EXPIRY:i(n);break;case _r.CARD_CVC:a(n)}}),[t,a,i]);return{stripeElementsCardState:{[_r.CARD_NUMBER]:e,[_r.CARD_EXPIRY]:n,[_r.CARD_CVC]:s},setStripeElementsCardState:r}})();return(0,Co.jsx)(Xy,{state:t,children:(0,Co.jsx)(JE,Object.assign({},e,{stripeElementsCardState:t,setStripeElementsCardState:n}))})},[cn.US_BANK_ACCOUNT]:e=>{const{state:t}=Jo(cn.US_BANK_ACCOUNT);return(0,Co.jsx)(QA,{state:t.errors,children:(0,Co.jsx)(ZA,Object.assign({},e))})},[cn.US_BANK_ACCOUNT_DONATE_OPTIONS]:e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(cn.US_BANK_ACCOUNT_DONATE_OPTIONS),s=(0,Ho.t)(),a=(0,ko.P)();return(0,Co.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-link-to-bank",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("usBankAccountDonateOptionsScreen.title")}`})}),(0,Co.jsx)(pl,{title:s.translate("usBankAccountDonateOptionsScreen.title"),showBadge:t}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body items-center",a?"pb-3":"justify-center py-4"),children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(0,Co.jsx)(zA,{className:"d-block mx-auto",ariaHidden:!0}),(0,Co.jsx)("p",{className:"text-center mt-4",children:s.translate("usBankAccountDonateOptionsScreen.description")})]})}),(0,Co.jsxs)(Zc,{children:[(0,Co.jsx)(Ll,{className:"btn-primary",processingState:n.processingState,errorTitle:n.loginToBankError,disabled:n.locked,dataQa:"authorize-bank-button",trackingElement:"authorizeBankButton",onClick:()=>i.authorizeToBank(),children:s.translate("usBankAccountDonateOptionsScreen.button.authorize")}),(0,Co.jsx)("button",{type:"button",className:"btn btn-default mt-3",disabled:n.locked,"data-qa":"routing-account-button","data-tracking-element-name":"routingAccountButton",onClick:()=>i.fillDetailsManually(),children:s.translate("usBankAccountDonateOptionsScreen.button.routing")})]})]})},[cn.US_BANK_ACCOUNT_CONFIRMATION]:e=>{let{showBadge:t}=e;const{state:n,controller:i}=Jo(cn.US_BANK_ACCOUNT_CONFIRMATION),s=(0,ko.P)(),a=(0,Ho.t)();return(0,Co.jsxs)("div",{className:"flow-screen",children:[(0,Co.jsx)(pl,{title:a.translate("usBankAccountConfirmationScreen.title"),showBadge:t,titleQa:"us-bank-account-confirmation-title"}),(0,Co.jsx)(il,{children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("usBankAccountConfirmationScreen.title")}`})}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body d-flex flex-column",{"py-5":!s}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column min-h-0",children:[(0,Co.jsxs)("div",{className:"shrink-0 bg-white border-radius-8",style:GA,children:[(0,Co.jsxs)("div",{className:"px-3 py-2",style:VA,children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.agreementDate")}),(0,Co.jsx)("p",{className:"label-3 text-truncate","data-qa":"agreement-date-label",children:n.usBankAccount.agreementDate})]}),(0,Co.jsxs)("div",{className:"px-3 py-2",style:VA,children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.accountHolderName")}),(0,Co.jsx)("p",{className:"label-3 text-truncate","data-qa":"account-holder-name-label",children:n.usBankAccount.accountHolderName})]}),(0,Co.jsxs)("div",{className:"px-3 py-2",style:VA,children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.financialInstitution")}),(0,Co.jsx)("p",{className:"label-3 text-truncate","data-qa":"financial-institution-label",children:n.usBankAccount.financialInstitution})]}),(0,Co.jsxs)("div",{className:"px-3 py-2",style:VA,children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.routingNumber")}),(0,Co.jsx)("p",{className:"label-3 text-truncate","data-qa":"routing-number-label",children:n.usBankAccount.routingNumber})]}),(0,Co.jsxs)("div",{className:"px-3 py-2",children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.accountNumber")}),(0,Co.jsxs)("p",{className:"label-3 d-flex items-start text-truncate",children:[(0,Co.jsx)("span",{className:"font-size-18 shrink-0 me-1 font-weight-400",style:KA,"aria-hidden":!0,children:""}),(0,Co.jsx)("span",{className:"shrink-0","data-qa":"account-number-last4-label",children:n.usBankAccount.accountNumberLast4})]})]})]}),(0,Co.jsx)("div",{className:s?"mt-5":"grow-1 min-h-0 p-rel mt-4",children:(0,Co.jsx)("div",{className:(0,To.A)({"p-abs top-left bottom-right scroll-box":!s}),children:(0,Co.jsx)("p",{className:(0,To.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!s,"pointer-events-none":n.locked}),children:n.isRecurring?a.translate("usBankAccountConfirmationScreen.mandateRecurring",{companyName:n.companyName}):a.translate("usBankAccountConfirmationScreen.mandate",{companyName:n.companyName,payButtonTitle:a.translate("usBankAccountConfirmationScreen.button")})})})})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{className:"btn-primary",processingState:n.processingState,errorTitle:n.payErrorMessage,onClick:()=>{i.leave()},dataQa:"us-bank-account-pay-button",trackingElement:"nextButton",children:a.translate("usBankAccountConfirmationScreen.button")})})]})},[cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE),s=(0,Ho.t)(),a=(0,ko.P)();return(0,Co.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-us-bank-account-guide",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("usBankAccountGuideScreen.title")}`})}),(0,Co.jsx)(pl,{title:s.translate("usBankAccountGuideScreen.title"),showBadge:t}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-6":!a}),children:(0,Co.jsx)(aC,{statementDescriptor:n.statementDescriptor,amountExample:i.amountExample,descriptorCodeExample:i.descriptorCodeExample,showAmountExample:"amounts"===n.verificationType,showDescriptorCodeExample:"descriptor_code"===n.verificationType})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{i.leave()},"data-qa":"us-bank-account-micro-dep-continue-button",children:s.translate("usBankAccountGuideScreen.button")})})]})},[cn.UK_BACS]:e=>{const{state:t}=Jo(cn.UK_BACS);return(0,Co.jsx)(_A,{state:t.errors,children:(0,Co.jsx)(TA,Object.assign({},e))})},[cn.UK_BACS_CONFIRMATION]:e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(cn.UK_BACS_CONFIRMATION),s=(0,ko.P)(),a=(0,Ho.t)(),r=yA(n.ukBacs.sortCode.match(/(\d{2})/g)||[],"-");return(0,Co.jsxs)("div",{className:"flow-screen",children:[(0,Co.jsx)(pl,{title:a.translate("ukBacsConfirmationScreen.title"),showBadge:t,titleQa:"uk-bacs-confirmation-title"}),(0,Co.jsx)(il,{children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("ukBacsConfirmationScreen.title")}`})}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-8 pb-3":!s}),children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(0,Co.jsxs)("div",{className:"bg-white border-radius-8",style:vA,children:[(0,Co.jsxs)("div",{className:"px-3 py-2",style:NA,children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("ukBacsConfirmationScreen.email")}),(0,Co.jsx)("p",{className:"label-3 text-truncate",children:n.email})]}),(0,Co.jsxs)("div",{className:"px-3 py-2",style:NA,children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("ukBacsConfirmationScreen.name")}),(0,Co.jsx)("p",{className:"label-3 text-truncate",children:n.ukBacs.accountHolderName})]}),(0,Co.jsxs)("div",{className:"px-3 py-2",children:[(0,Co.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("ukBacsConfirmationScreen.accountDetails")}),(0,Co.jsxs)("div",{className:"d-flex text-sans-serif",children:[(0,Co.jsx)("p",{className:"label-3 text-truncate me-3",children:r}),(0,Co.jsx)("p",{className:"label-3 text-truncate",children:n.ukBacs.accountNumber})]})]})]}),(0,Co.jsx)(lu,{className:(0,To.A)("body-4 mt-4",s?"text-ellipsis":"text-line-clamp-7"),as:"p",token:"ukBacsConfirmationScreen.legalInformation",params:{statementDescriptor:n.company.stripe.ukBacsDisplayName,email:n.email}}),(0,Co.jsx)("hr",{className:"my-3","aria-hidden":!0}),(0,Co.jsxs)("div",{className:"d-flex items-center",children:[(0,Co.jsx)(lu,{className:(0,To.A)("body-4",s?"text-ellipsis":"text-line-clamp-2 p-1 m-minus-1",{"pointer-events-none":n.locked}),as:"p",token:"ukBacsConfirmationScreen.guarantee",params:{link:"https://stripe.com/bacs_debit/direct-debit-guarantee"}}),(0,Co.jsx)(CA,{className:"text-gray-60 shrink-0 ms-3",width:67,height:22,"aria-hidden":!0})]})]})}),(0,Co.jsx)(Zc,{children:(0,Co.jsx)(Ll,{className:"btn-primary",processingState:n.processingState,errorTitle:n.payErrorMessage,onClick:()=>{i.leave()},dataQa:"uk-bacs-pay-button",trackingElement:"nextButton",children:Sl(a,n.formattedAmount,n.frequency)})})]})},[cn.AU_BECS]:e=>{const{stripeElementState:t,setStripeElementState:n}=lp();return(0,Co.jsx)(hp,{state:t,children:(0,Co.jsx)(yp,Object.assign({stripeElementState:t,setStripeElementState:n},e))})},[cn.DOUBLE]:oy,[cn.GIFT_AID]:e=>{const{transitionEntered:t,showBadge:n}=e,{state:i,controller:s}=Jo(cn.GIFT_AID),a=(0,Ho.t)(),r=(0,ko.P)(),o=(0,Fo.$)(),c=(0,h.useCallback)((e=>{s.changeGiftAid(e),s.leave()}),[s]),l=(0,h.useCallback)((()=>{c(!1)}),[c]);return(0,h.useEffect)((()=>{o||t&&s.setShown()}),[t,s,o]),(0,Co.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-gift-aid",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("giftAidScreen.title")}`})}),(0,Co.jsx)(pl,{showBadge:n,children:(0,Co.jsx)("h2",{className:(0,To.A)("title-2",{"py-2":r}),"aria-label":a.translate("giftAidScreen.title"),children:(0,Co.jsx)("span",{className:"icon-slot d-block","aria-hidden":!0,children:(0,Co.jsx)("span",{className:"p-abs centered",children:(0,Co.jsx)(hy,{className:"d-block"})})})})}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",r?"pb-2":"pt-6 pb-4"),children:(0,Co.jsxs)("div",{className:(0,To.A)("fixed-container",{"grow-1 d-flex flex-column":!r}),children:[(0,Co.jsxs)("p",{className:(0,To.A)("text-center",r?"text-ellipsis":"text-line-clamp-6"),children:[a.translate("giftAidScreen.governmentText")," ",a.translate("giftAidScreen.ratioInfo")]}),(0,Co.jsx)(lu,{as:"p",className:(0,To.A)("subtitle-4 text-center mt-4-5",r?"text-ellipsis":"text-line-clamp-3"),token:"giftAidScreen.actionQuestion"}),i.legalText&&(0,Co.jsx)("div",{className:"grow-1 mt-4-5 d-flex flex-column",children:(0,Co.jsx)(py,{})})]})}),(0,Co.jsxs)(Zc,{children:[(0,Co.jsx)("button",{type:"button",className:"btn btn-primary",disabled:i.locked,onClick:()=>c(!0),"data-qa":"gift-aid-continue","data-tracking-element-name":"claimButton",children:a.translate("giftAidScreen.button.claim")}),(0,Co.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Co.jsx)(Ll,{buttonType:"link",onClick:l,processingState:i.processingState,errorTitle:i.payErrorMessage||a.translate("common.errorOccurredText"),dataQa:"no-gift-aid-and-pay",trackingElement:"dontClaimButton",children:a.translate("giftAidScreen.button.refuse")})})]})]})},[cn.POST_DONATION_UPSELL]:()=>{const{state:e}=Jo(cn.POST_DONATION_UPSELL);return(0,Co.jsx)(nA,{state:e,children:(0,Co.jsx)(uA,{})})},[cn.SEPA]:e=>{const{stripeElementState:t,setStripeElementState:n}=lp();return(0,Co.jsx)(dA,{state:t,children:(0,Co.jsx)(gA,Object.assign({stripeElementState:t,setStripeElementState:n},e))})},[cn.IDEAL_CONFIRMATION]:e=>{const{showBadge:t}=e,{state:n,controller:i}=Jo(cn.IDEAL_CONFIRMATION),s=(0,ko.P)(),a=(0,Ho.t)(),r=(0,h.useCallback)((()=>{i.leave()}),[i]),o=(0,h.useCallback)((()=>{i.returnToBankWindow()}),[i]),c=(0,h.useCallback)((()=>{i.back()}),[i]);return(0,Co.jsxs)("div",{className:"flow-screen",children:[(0,Co.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("idealConfirmationScreen.title")}`})}),(0,Co.jsx)(pl,{backButtonClickHandler:c,title:a.translate("idealConfirmationScreen.title"),showBadge:t,titleQa:"ideal-confirmation-title"}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-5 pb-6":!s}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[n.showReturnBankInfo?(0,Co.jsx)(My,{className:(0,To.A)("shrink-0",s?"mt-3":"my-auto")}):(0,Co.jsx)(Sy,{email:n.email,name:n.name,className:"shrink-0"}),!n.showReturnBankInfo&&n.isSubscription&&(0,Co.jsx)(Uy,{className:(0,To.A)("grow-1",s?"mt-5":"mt-4"),locked:n.locked})]})}),(0,Co.jsx)(Zc,{backButtonClickHandler:c,children:n.showReturnBankInfo?(0,Co.jsx)(Ll,{className:"btn-primary",processingState:Pr.IDLE,trackingElement:"nextButton",dataQa:"ideal-continue-button",onClick:o,children:a.translate("idealConfirmationScreen.button")}):(0,Co.jsxs)(Co.Fragment,{children:[i.showNextStepOverview&&(0,Co.jsx)("p",{className:"body-4 text-center text-ellipsis mb-4",children:a.translate("idealConfirmationScreen.nextStep")}),(0,Co.jsx)(Ll,{className:"btn-primary",processingState:n.processingState,errorTitle:n.errorMessage||a.translate("common.errorOccurredText"),onClick:r,dataQa:"ideal-pay-button",trackingElement:"nextButton",children:Sl(a,n.formattedAmount,n.frequency)})]})})]})},[cn.COMMUNICATION_CONSENT]:e=>{let{showBadge:t}=e;const{controller:n,state:i}=Jo(cn.COMMUNICATION_CONSENT),s=(0,Ho.t)(),a=(0,ko.P)(),r=function(){const{campaign:e}=(0,No.n)();return e.config.consentText.customized.description}(),o=(0,h.useRef)(null),c=fp(o),l=(0,h.useCallback)((e=>t=>{n.changeChannel(e,t)}),[n]);return(0,h.useEffect)((()=>{n.setCustomizedConsentShown()}),[n]),(0,Co.jsxs)("form",{className:"flow-screen","aria-label":s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("communicationConsentScreen.title")}`}),"data-qa":"communication-consent-screen",onSubmit:e=>{e.preventDefault(),n.leave()},children:[(0,Co.jsx)(pl,{title:s.translate("communicationConsentScreen.title"),showBadge:t}),(0,Co.jsx)(Fc,{className:(0,To.A)("px-body",{"pt-8 pb-6":!a}),children:(0,Co.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Co.jsx)(Ep,{className:"shrink-0 mx-auto",ariaHidden:!0}),(0,Co.jsx)("p",{className:(0,To.A)("shrink-0 text-center mt-5",a?"text-ellipsis":"text-line-clamp-2"),children:s.translate("communicationConsentScreen.description")}),(0,Co.jsx)("div",{className:"mt-5",children:i.channels.map(((e,t)=>(0,Co.jsx)(Yl,{className:(0,To.A)({"mt-2":0!==t}),dataQa:`communication-consent-${e.type}`,dataTestId:`communication-consent-${e.type}`,checked:e.isAccepted,onChange:l(e.type),children:(0,Co.jsx)("span",{className:"label-3",children:s.translate(`communicationConsentScreen.channels.${e.type}`)})},e.type)))}),!!r&&(0,Co.jsx)("div",{className:"p-rel grow-1 shrink-0 mt-5",children:(0,Co.jsx)("div",{ref:o,className:(0,To.A)({"p-abs top-left bottom-right d-flex flex-column":!a,"scroll-box":c,"pointer-events-none":i.locked}),children:(0,Co.jsx)("p",{className:(0,To.A)("body-4 shrink-0 text-gray-80 text-ellipsis mt-auto",{"px-3 py-2-5":c}),"data-qa":"communication-consent-description",children:r})})})]})}),(0,Co.jsxs)(Zc,{children:[(0,Co.jsx)("button",{type:"submit",className:"btn btn-primary","data-qa":"communication-consent-continue","data-testid":"communication-consent-continue","data-tracking-element-name":"nextButton",children:s.translate("communicationConsentScreen.button.continue")}),(0,Co.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Co.jsx)("button",{type:"button",className:"btn-link link-1 text-truncate","data-qa":"communication-consent-skip","data-testid":"communication-consent-skip","data-tracking-element-name":"skipButton",onClick:()=>{n.resetChannels(),n.leave()},children:s.translate("communicationConsentScreen.button.skip")})})]})]})},[Ar.QUESTIONS]:yd,[Ar.PRIVACY]:Ou,[Ar.THANK_YOU]:Oh,[Ar.COMMENT]:yl,[Ar.MAILING_ADDRESS]:e=>{const{state:t}=Jo(Ar.MAILING_ADDRESS);return(0,Co.jsx)(Bm,{state:t.validation,children:(0,Co.jsx)(qm,Object.assign({},e))})},[Ar.REMIND_ME]:()=>{const{state:e}=Jo(Ar.REMIND_ME);return(0,Co.jsx)(sp,{state:{validation:{email:e.email,termsAndConditions:e.termsAndConditions},serverErrors:e.serverErrors},children:(0,Co.jsx)(rp,{})})},[Ar.BLOCKED]:Jc},oC=Object.assign(Object.assign({},Dm),rC),cC=e=>{let{onScreenEntered:t}=e;const n=(0,ko.P)(),i=(0,Fo.$)(),s=Zo(),a=(0,Ro.C)(),[r,o]=(0,h.useState)("next"),[c,l]=(0,h.useState)(s.getCurrentFlow().getCurrentScreen().name),[u,d]=(0,h.useState)(!0),[m,p]=(0,h.useState)([...s.checkoutService.checkoutUIState.alwaysRenderedScreens]),[g,y]=(0,h.useState)(),[f,S]=(0,h.useState)(),[E,A]=(0,h.useState)(),C=c===Ar.REMIND_ME,v=(0,No.n)().getAskPageConfig().show,N=!n&&!i&&v&&!1,b=(0,h.useCallback)(((e,t,n)=>{a&&!i&&s.checkoutService.trackCheckoutScreenView(s.getCurrentFlow().getCurrentScreen().name,e,t,n)}),[s,i,a]);(0,h.useEffect)((()=>{a&&b()}),[b,a]),(0,h.useEffect)((()=>s.onScreenChanged((e=>{const t=s.getCurrentFlow().getCurrentScreen().name;c!==t&&(y(e.createdAt),S(e.transitionStartedAt),A(e.transitionFinishedAt),d(!1),o((null==e?void 0:e.direction)===Tc.BACKWARD?"previous":"next"),l(t),p((e=>{const t=s.checkoutService.checkoutUIState.alwaysRenderedScreens;return e.length!==t.length||t.some((t=>!e.includes(t)))?[...t]:e})))}))),[c,s]);const P=(0,h.useCallback)((()=>{if(!g)return;const e=new Date;d(!0),b(f,E,e)}),[b,g,f,E]);return(0,h.useEffect)((()=>{null==t||t(u)}),[t,u]),(0,Co.jsx)(Ic,{className:(0,To.A)({"dark-mode":C}),children:(0,Co.jsxs)(xc.C.Provider,{value:u,children:[Object.entries(oC).map((e=>{let[t,s]=e;return!m.includes(t)&&(0,Co.jsx)(Rc,{show:t===c,Screen:s,screenDirection:r,currentScreen:c,alwaysMount:!1,animationDisabled:n||i||N,onScreenEntered:P},t)})),m.map((e=>(0,Co.jsx)(Rc,{show:e===c,Screen:oC[e],screenDirection:r,currentScreen:c,alwaysMount:!0,animationDisabled:n||i||N,onScreenEntered:P},e)))]})})},lC=(0,h.memo)(cC),uC=e=>{const t=(0,Ho.t)(),n=(0,Fo.$)(),i=Zo(),s=Mo(),a=(0,h.useCallback)((()=>{n||i.startCryptoFlow()}),[i,n]);return(0,Co.jsxs)("div",{className:(0,To.A)(s("flow-buttons"),e.className),children:[e.enabledCrypto&&(0,Co.jsx)("button",{type:"button",className:(0,To.A)("btn-link",s("flow-button")),disabled:e.disabled,onClick:a,"data-qa":"start-crypto-flow",children:t.translate("changeFlowButtons.crypto")}),e.enabledMoney&&(0,Co.jsx)("button",{type:"button",className:(0,To.A)("btn-link",s("flow-button")),disabled:e.disabled,onClick:()=>{n||i.startFiatFlow()},"data-qa":"start-fiat-flow",children:t.translate("changeFlowButtons.fiat")})]})},dC=(0,h.memo)(uC);var hC,mC,pC;function gC(){return gC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gC.apply(this,arguments)}var yC=function(e,t){return h.createElement("svg",gC({fill:"none",height:60,viewBox:"0 0 140 60",width:140,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t},e),hC||(hC=h.createElement("linearGradient",{id:"a",gradientUnits:"userSpaceOnUse",x1:91.5325,x2:7.85105,y1:45.603,y2:15.43},h.createElement("stop",{offset:.441305,stopColor:"#ff8aad"}),h.createElement("stop",{offset:1,stopColor:"#ff447c"}))),mC||(mC=h.createElement("path",{d:"m10.9294 10.8399c-.6322-.2429 10.8815 18.8464 33.2279 28.4697 45.5139 19.6001 87.0467-13.1294 76.0427-14.3233-7.717-.8373-5.318 20.05 18.247 2.2579",stroke:"url(#a)",strokeLinecap:"round",strokeWidth:3})),pC||(pC=h.createElement("path",{d:"m8.25728 18.5369c-.76577-.0838-1.21272-.6728-1.20134-1.2942.06069-3.3134-.32837-9.2897-.32837-9.2897-.00501-.44046.07885-.84339.38062-1.10901.30178-.26562.75539-.32197 1.14414-.2324 4.49707 1.0355 8.98567 1.31819 8.98567 1.31819.6877.04473 1.2056.63959 1.16 1.33211-.0467.69218-.6406 1.21851-1.3275 1.17531 0 0-3.5428-.1858-5.6881-.58486l-1.84814 1.69606c.12288 1.7735.1138 2.9127.01315 5.7717-.02496.6934-.60198 1.238-1.29013 1.2168z",fill:"#ff4980"})))},fC=(0,h.forwardRef)(yC),SC=(0,h.memo)(fC);const EC=()=>{const e=(0,Ho.t)(),t=(0,zo.Q)();return(0,Co.jsxs)("div",{className:"frequency-hint-side",children:[(0,Co.jsx)("p",{className:"frequency-hint-side-text text-white text-ellipsis","data-qa":"recurring-frequency-hint-side-label",children:e.translate("frequencyHint.label")}),(0,Co.jsx)(SC,{className:(0,To.A)("frequency-hint-side-arrow",{"icon-flip-horizontal":t})})]})},AC=(0,h.memo)(EC),CC=e=>{const t=(0,ko.P)(),n=Mo(),i=(0,Ho.t)();return(0,Co.jsx)("button",{type:"button",className:(0,To.A)(n("modal-close"),e.className),"aria-label":i.translate("common.closeDialogButtonAriaLabel"),onClick:e.onClick,"data-qa":"global-close","data-tracking-element-name":"closeButton",children:(0,Co.jsx)("span",{className:(0,To.A)("icon-slot d-block",t?"icon-slot-28":"icon-slot-32"),"aria-hidden":!0,children:(0,Co.jsx)("span",{className:"p-abs centered",children:(0,Co.jsx)(xl,{className:"icon-stroke icon-stroke-2 d-block"})})})})};var vC=(0,h.memo)(CC);const NC={enter:400,exit:200},bC=()=>{!function(){const e=(0,Ho.t)(),t=Zo(),n=dc(),i=(0,Fo.$)(),[s,a]=(0,h.useState)((()=>t.getCurrentFlow().getCurrentScreen().name));(0,h.useEffect)((()=>t.onScreenChanged((()=>{a(t.getCurrentFlow().getCurrentScreen().name)}))),[t,s]);const r=(0,h.useCallback)((t=>{const i=e.translate("closeTabDialog.text");if(!n.isUnrestrictedExitScreen(s))return(t||window.event).returnValue=i,i}),[n,e,s]);(0,h.useEffect)((()=>{if(i)return;window.addEventListener("beforeunload",r);const e=()=>window.removeEventListener("beforeunload",r);return t.checkoutService.setRemoveCloseGuard(e),e}),[t.checkoutService,r,i])}();const e=function(){const e=(0,No.n)(),t=dc();return!e.infrastructureParams.isMobile||t.showCloseButton}(),t=function(){const e=Zo(),t=(0,No.n)(),n=t.infrastructureParams.isMobile,i=t.infrastructureParams.showcase,[s,a]=(0,h.useState)((()=>!i)),r=(e,t,n)=>{const i=e.getCurrentFlow().getCurrentScreen().name,s=!e.checkoutService.checkoutUIState.isMobileScreenWithoutFaqLinks(i),r=e.checkoutService.checkoutUIState.showFAQLinks;a(t?r&&s:r)};return(0,h.useEffect)((()=>{if(i)return;const t=e.onScreenChanged((()=>{r(e,n)}));return r(e,n),t}),[e,n,i]),s}(),n="AFJCHFEK"===(0,No.n)().campaign.company,i=(0,bo.M)(),s=(0,ko.P)(),a=pc("lg"),r=(0,Fo.$)(),o=Mo(),{show:c,entered:u,handleOpenTransitionEntered:d,handleCloseClick:m,handleCloseTransitionExited:p}=function(){var e=this;const t=(0,ko.P)(),[n,i]=(0,h.useState)({shouldReopen:!1,tributeSelected:!1}),[s,a]=(0,h.useState)(!1),r=wa(),[o,c]=(0,h.useState)(!1),u=Zo(),d=dc(),m=(0,h.useCallback)((function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(0,l.sH)(e,[...i],void 0,(function*(){let{isManualCall:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.shouldNotifyAbandoned(e)&&(u.checkoutService.updateSession({canUseAmountDefaults:!0}),u.checkoutService.abandonSession());const n=u.getCurrentFlow().getCurrentScreen().name;u.canClose({isMobile:t,isMobileExitScreen:d.isMobileExitScreen(n),isUnrestrictedExitScreen:d.isUnrestrictedExitScreen(n),isFinalAvailableScreen:d.isFinalAvailableScreen(n)})&&(yield u.checkoutService.saveCheckoutClosePublicParams(),a(!1))}))}),[u,d,t]);(0,h.useEffect)((()=>{const e=()=>a(!0),t=e=>(0,l.sH)(this,void 0,void 0,(function*(){var{isManualCall:t}=e,n=(0,l.Tt)(e,["isManualCall"]);i(n),yield m({isManualCall:t})}));return r.on(Na.SHOULD_SHOW,e),r.on(Na.SHOULD_HIDE,t),()=>{r.removeListener(Na.SHOULD_SHOW,e),r.removeListener(Na.SHOULD_HIDE,t)}}),[m,r]);const p=(0,h.useCallback)((()=>{u.checkoutService.trackCheckoutClose(u.getCurrentFlow().getCurrentScreen().name),r.emit(Na.WAS_HIDDEN,n)}),[r,u,n]);return{show:s,entered:o,handleOpenTransitionEntered:(0,h.useCallback)((()=>{c(!0),u.checkoutService.trackCheckoutView()}),[u]),handleCloseTransitionExited:p,handleCloseClick:m}}(),g=(0,h.useRef)(null),y=(0,h.useRef)(null),f=(0,h.useRef)(null),S=(0,h.useRef)(null),{handleBlur:E,handleFocus:A}=Uo({rootElRef:g,trapStartRef:f,trapStopRef:S}),C=(0,No.n)(),v=Zo(),N=dc(),b=Tp(),P=b.get(Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT),D=C.getAskPageConfig(),_=D.show||!!C.fundraisingPage,[T,x]=(0,h.useState)(_),O=C.infrastructureParams.livemode,k=D.showLinks,I=s&&T&&k,w=P.isTestGroup2(),R=(0,h.useRef)(null),[M,L]=(0,h.useState)(!1),[U,F]=(0,h.useState)(!0),{shouldShowFlowsSection:j,enabledMoney:B,enabledCrypto:H}=((e,t)=>{const n=(0,No.n)(),i=lc(),{showcase:s}=n,a=s?s.isFirstScreen:e,{crypto:r,money:o}=n.enabledFlows;if(!(0,h.useMemo)((()=>[r,o].filter(Boolean).length>1&&a&&!t),[r,a,o,t]))return{shouldShowFlowsSection:!1,enabledMoney:!1,enabledCrypto:!1};const c=i.type;return{shouldShowFlowsSection:!0,enabledMoney:!!o&&c!==Ae.MONEY,enabledCrypto:!!r&&c!==Ae.CRYPTO}})(U,M),q=t&&!n||j||I||r;(0,h.useEffect)((()=>{const e=e=>{e.code===Oo.J.ESC&&m()};return i.document.addEventListener("keyup",e),()=>{i.document&&i.document.removeEventListener("keyup",e)}}),[m,i.document]),(0,h.useEffect)((()=>v.onScreenChanged((()=>{const e=v.getCurrentFlow(),t=e.getCurrentScreen().name,n=!N.isMobileScreenWithoutAskPage(t);x(s?n&&_:_),F(e.isCurrentScreenFirst()),L(!1),i.document.body.classList.remove("overflow-hidden")}))),[N,v,s,_,i]);const[G,V]=(0,h.useState)(!1),K=(0,h.useCallback)((e=>{V(e)}),[]),Y=(0,h.useCallback)((()=>{if(!r)return;const e=new Event(_o.CLICK_SHOWCASE);i.parent.dispatchEvent(e)}),[i.parent,r]);return(0,h.useEffect)((()=>b.get(Sn.UPSELL_CURTAIN_EXPERIMENT).onCurtainOpen((()=>{L(!0)}))),[b]),(0,h.useEffect)((()=>b.get(Sn.UPSELL_CURTAIN_EXPERIMENT).onCurtainClose((()=>{L(!1)}))),[b]),(0,Co.jsx)(Co.Fragment,{children:(0,Co.jsx)(Ro.m.Provider,{value:u,children:(0,Co.jsx)(Io.Provider,{value:u&&G,children:(0,Co.jsx)(xo.A,{in:c,timeout:NC,classNames:s||r?{}:"rtg-modal",nodeRef:g,onEntered:d,onExited:p,unmountOnExit:!0,children:(0,Co.jsx)("div",{className:(0,To.A)(o("modal"),{"has-campaign":T,showcase:r}),ref:g,onFocus:A,onBlur:E,onClickCapture:Y,children:(0,Co.jsxs)(wo.Tn.Provider,{value:g,children:[(0,Co.jsx)("span",{ref:f,tabIndex:0,"aria-hidden":!0}),e&&(0,Co.jsx)(vC,{onClick:m,className:(0,To.A)({"pointer-events-none":r})}),(0,Co.jsxs)("div",{className:(0,To.A)(o("widget"),{"pb-10":!O&&!r&&s,"pb-14":!O&&!r&&!s,"pointer-events-none":r}),children:[(0,Co.jsxs)("div",{className:o("widget-main"),children:[T&&(0,Co.jsxs)("div",{className:o("widget-campaign"),"data-testid":"campaign",children:[!s&&!a&&(0,Co.jsx)(xo.A,{nodeRef:R,in:M,classNames:"rtg-upsell-backdrop",timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:(0,Co.jsx)("div",{ref:R,className:(0,To.A)("upsell-curtain-backdrop top-left bottom-right",s?"p-fixed":"p-abs border-top-radius-16"),style:{marginBottom:"-1px"},onClick:()=>{b.get(Sn.UPSELL_CURTAIN_EXPERIMENT).closeCurtainOnBackDrop()}})}),(0,Co.jsx)(yc,{})]}),(0,Co.jsxs)("div",{className:(0,To.A)(o("widget-form")),ref:y,children:[(0,Co.jsx)(wo.Qq.Provider,{value:y,children:(0,Co.jsx)(lC,{onScreenEntered:K})}),w&&(0,Co.jsx)(AC,{})]})]}),q&&(0,Co.jsx)("div",{className:o("widget-footer"),"data-qa":"widget-footer-block",children:(0,Co.jsxs)("div",{className:"fixed-container",children:[(!n||j)&&(0,Co.jsxs)("div",{className:o("widget-footer-panel"),children:[!n&&(0,Co.jsx)(_c,{showAskPage:T}),j&&(0,Co.jsxs)(Co.Fragment,{children:[T&&!s&&a&&(0,Co.jsx)("div",{className:"body-4 text-white opacity-80 shrink-0 mx-3","aria-hidden":!0,children:""}),(0,Co.jsx)(dC,{enabledCrypto:H,enabledMoney:B})]})]}),I&&(0,Co.jsx)(Vo,{links:D.links,className:(0,To.A)({"mt-3":!n||j})})]})})]}),(0,Co.jsx)("span",{ref:S,tabIndex:0,"aria-hidden":!0})]})})})})})})};var PC=n(8984);const DC=e=>{var t;const{onMounted:n}=e;return(0,h.useEffect)((()=>{n()}),[n]),(0,Co.jsx)(h.StrictMode,{children:(0,Co.jsx)(Po.Provider,{value:e.sentry,children:(0,Co.jsx)(Do,{fallback:(0,Co.jsx)("div",{children:"fallback content"}),children:(0,Co.jsx)(bo.U.Provider,{value:e.iframeWindow,children:(0,Co.jsx)(Qo.Provider,{value:e.flowManager,children:(0,Co.jsx)(No.G.Provider,{value:e.checkoutConfiguration,children:(0,Co.jsx)(Ia.Provider,{value:e.viewEventEmitter,children:(0,Co.jsx)(PC.R.Provider,{value:e.intl,children:(0,Co.jsx)(uh.Provider,{value:e.tracker,children:(0,Co.jsx)(_p.Provider,{value:e.experiments,children:(0,Co.jsx)(oc.Provider,{value:e.currencyService,children:(0,Co.jsx)(Mu.Provider,{value:null!==(t=null==e?void 0:e.showcaseContext)&&void 0!==t?t:null,children:(0,Co.jsx)(bC,{})})})})})})})})})})})})})};class _C{constructor(e,t,n,i,s,a){this.container=e,this.iframe=t,this.eventEmitter=n,this.sentry=i,this.debug=s,this.checkoutCore=a,this.renderKey=(0,Aa.i)()}get iframeNode(){return this.iframe.iframeNode}open(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n;if(null===(n=null===(t=null==e?void 0:e.abortController)||void 0===t?void 0:t.signal)||void 0===n?void 0:n.aborted)throw new d;yield this.render(),this.iframe.showDocument(),this.iframe.open(),this.show()}))}close(){this.iframe.close(),this.unmount(),this.iframe.destroy(),this.eventEmitter.removeAllListeners()}onHide(e){return this.eventEmitter.on(Na.WAS_HIDDEN,e),this}get targetWindow(){const e=this.iframe.iframeWindow;if(!e)throw new Error("No window in iframe");return e}render(e){return(0,l.sH)(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{const n=()=>(this.logCheckoutOpeningTime(),t());this.root.render((0,Co.jsx)(DC,{onMounted:n,viewEventEmitter:this.eventEmitter,flowManager:this.checkoutCore.flowManager,intl:this.checkoutCore.intl,sentry:this.sentry,tracker:this.checkoutCore.trackerCheckout,experiments:this.checkoutCore.experiments,iframeWindow:this.targetWindow,currencyService:this.checkoutCore.currencyService,checkoutConfiguration:this.checkoutCore.checkoutConfiguration,showcaseContext:e},this.renderKey))}catch(e){n(e)}}))}))}show(){this.eventEmitter.emit(Na.SHOULD_SHOW)}regenerateKey(){return this.renderKey=(0,Aa.i)(),this.renderKey}get root(){return this._root||(this._root=(0,vo.H)(this.container)),this._root}unmount(){this.root.unmount(),this.debug.log("Checkout UI (React) is unmounted")}logCheckoutOpeningTime(){const e=Date.now()-this.checkoutCore.trackerCheckout.checkoutOpenTimestamp;this.debug.log("checkout opening time:onMounted",`${e} ms`)}}function TC(e,t){void 0!==t&&function(n){var i;function s(){i||(i=!0,n())}["interactive","complete"].indexOf(t.readyState)>=0?n():(i=!1,t.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))}((function(){var n=!0,i=!1,s=null,a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(e){return!!(e&&e!==t&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function c(e){n=!1}function l(){t.addEventListener("mousemove",u),t.addEventListener("mousedown",u),t.addEventListener("mouseup",u),t.addEventListener("pointermove",u),t.addEventListener("pointerdown",u),t.addEventListener("pointerup",u),t.addEventListener("touchmove",u),t.addEventListener("touchstart",u),t.addEventListener("touchend",u)}function u(e){var i,s;"html"!==(null==e||null===(i=e.target)||void 0===i||null===(s=i.nodeName)||void 0===s?void 0:s.toLowerCase())&&(n=!1,t.removeEventListener("mousemove",u),t.removeEventListener("mousedown",u),t.removeEventListener("mouseup",u),t.removeEventListener("pointermove",u),t.removeEventListener("pointerdown",u),t.removeEventListener("pointerup",u),t.removeEventListener("touchmove",u),t.removeEventListener("touchstart",u),t.removeEventListener("touchend",u))}t.addEventListener("keydown",(function(e){r(t.activeElement)&&o(t.activeElement),n=!0}),!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("focus",(function(e){var t,i,s;r(e.target)&&(n||(i=(t=e.target).type,"INPUT"==(s=t.tagName)&&a[i]&&!t.readOnly||"TEXTAREA"==s&&!t.readOnly||t.isContentEditable))&&o(e.target)}),!0),t.addEventListener("blur",(function(t){var n;r(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(i=!0,e.clearTimeout(s),s=e.setTimeout((function(){i=!1,e.clearTimeout(s)}),100),(n=t.target).hasAttribute("data-focus-visible-added")&&(n.classList.remove("focus-visible"),n.removeAttribute("data-focus-visible-added")))}),!0),t.addEventListener("visibilitychange",(function(e){"hidden"==t.visibilityState&&(i&&(n=!0),l())}),!0),l(),t.body.classList.add("js-focus-visible")}))}class xC{constructor(e){this.onLoadHandlers=[],this.ready=!1,this.localeCode=e.locale,this.node=e.node,this.overrideTemplate=e.overrideTemplate,this.fonts=e.fonts||"",this.styles=e.styles||"",this.id=e.id||"",this.title=e.title,this.initialize=e.initialize,this.scripts=e.scripts||[],this.metaTags=e.metaTags||[],this.isMobile=e.isMobile||!1,this.env=e.env,this.disableRtl=e.disableRtl||!1,this.iframe=document.createElement("iframe"),this.addEventListeners(),e.initialStyles&&this.setStyles(e.initialStyles),this.setIframeAttributes()}resize(e){if(e.height){const t=xC.getSizeInCssUnit(e.height),n=e.minHeight?xC.getSizeInCssUnit(e.minHeight):t,i=e.maxHeight?xC.getSizeInCssUnit(e.maxHeight):t;this.iframe.setAttribute("height",t),this.iframe.style.setProperty("height",t,"important"),this.iframe.style.setProperty("min-height",n,"important"),this.iframe.style.setProperty("max-height",i,"important")}if(e.width){const t=xC.getSizeInCssUnit(e.width),n=e.minWidth?xC.getSizeInCssUnit(e.minWidth):t,i=e.maxWidth?xC.getSizeInCssUnit(e.maxWidth):t;this.iframe.setAttribute("width",t),this.iframe.style.setProperty("width",t,"important"),this.iframe.style.setProperty("min-width",n,"important"),this.iframe.style.setProperty("max-width",i,"important")}}showDocument(){xC.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.body.setAttribute("style","")}setStyles(e){e.forEach((e=>{let[t,n]=e;this.iframe.style.setProperty(t,String(n),"important")}))}addClass(e){e.forEach((e=>{this.iframe.className+=` ${e}`}))}removeStyles(e){xC.isContentDocumentAvailable(this.iframe.contentDocument)&&e.forEach((e=>{this.iframe.style.removeProperty(e)}))}appendElement(e){xC.isContentWindowAvailable(this.iframe.contentWindow)&&xC.isContentDocumentAvailable(this.iframe.contentDocument)&&(TC(this.iframe.contentWindow,this.iframe.contentDocument),this.iframe.contentDocument.body.appendChild(e))}addOnLoadHandler(e){if(this.ready)return e();this.onLoadHandlers.push(e)}addDocumentEventListener(e,t){xC.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.addEventListener(e,t)}removeDocumentEventListener(e,t){xC.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.removeEventListener(e,t)}findElement(e){return xC.isContentDocumentAvailable(this.iframe.contentDocument)?this.iframe.contentDocument.querySelector(e):null}matchMedia(e){return xC.isContentWindowAvailable(this.iframe.contentWindow)?this.iframe.contentWindow.matchMedia(e):null}get iframeNode(){return this.iframe}setGlobalData(e){if(xC.isContentWindowAvailable(this.iframe.contentWindow)){for(const[t,n]of Object.entries(e))this.iframe.contentWindow[t]=n;return!0}return!1}get iframeWindow(){return this.iframe.contentWindow}get iframeDocument(){return this.iframe.contentDocument}setIframeAttributes(){this.iframe.setAttribute("title",this.title),this.iframe.setAttribute("src","about:blank"),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("marginwidth","0"),this.iframe.setAttribute("width","1"),this.iframe.setAttribute("height","1"),this.id&&this.iframe.setAttribute("id",this.id)}addEventListeners(){this.iframe.addEventListener("load",(()=>{this.initialize&&this.iframe.contentWindow&&this.iframe.contentDocument&&this.initialize(this.iframe.contentWindow,this.iframe.contentDocument),this.ready=!0,this.onLoadHandlers.forEach((e=>e()))}))}getIframeTemplate(){const e=e=>Object.keys(e).map((t=>`${t}="${e[t]}"`)).join(" "),t=this.scripts.map((t=>`<script ${e(t)}><\/script>`)).join(""),n=this.metaTags.map((t=>`<meta ${e(t)}>`)).join("");return this.overrideTemplate?this.overrideTemplate({title:this.title,styles:this.styles,fonts:this.fonts,scripts:t,metaTags:n,isMobile:this.isMobile}):`\n      <!DOCTYPE html>\n      <html style="overflow: hidden;" lang="${this.localeCode}" dir="${(0,xi.N_)(this.localeCode,this.disableRtl)}">\n          <head>\n              <meta charset="utf-8">\n              <meta http-equiv="X-UA-Compatible" content="IE=edge">\n              ${n}\n              <title>${this.title}</title>\n              <style>${this.styles}</style>\n              <style>${this.fonts}</style>\n              ${t}\n          </head>\n          <body style="opacity: 0;"></body>\n      </html>\n    `}static isContentDocumentAvailable(e){return!!e||(console.warn("ContentDocument is not available"),!1)}static isContentWindowAvailable(e){return!!e||(console.warn("ContentWindow is not available"),!1)}static getSizeInCssUnit(e){const t=String(e);return/^\d+$/.test(t)?`${t}px`:t}}function OC(e,t){if(e.body)return t();setTimeout(OC.bind(null,e,t),10)}function kC(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return!!e.fonts&&new Promise((n=>e.fonts.load(t).finally((()=>{n(!0)}))))}))}function IC(){return`display: block !important;margin: 0 !important;padding: 0 !important;border: 0 !important; width: 100% !important; height: 100% !important; position: fixed !important; opacity: 1 !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; transform: translateZ(100px) !important;z-index: ${arguments.length>0&&void 0!==arguments[0]?arguments[0]:2147483647} !important;`}class wC extends xC{constructor(e,t){super(e),this.htmlElementStyleManager=t,this.render()}render(){let e=document.documentElement;this.env!==u.hY.PRODUCTION&&this.env!==u.hY.STAGING&&(e=document.body),this.isMobile?(this.containerDiv=document.createElement("div"),this.overlay=document.createElement("div"),this.overlay.setAttribute("id","fun-mobile-overlay-container"),this.containerDiv.setAttribute("id","fun-iframe-container"),this.containerDiv.appendChild(this.iframe),e.appendChild(this.overlay),e.appendChild(this.containerDiv)):this.node?(this.htmlElementStyleManager.setStyle("border: 0 !important; height: 100% !important; width: 100% !important; margin: 0 auto !important; padding: 0 !important; border-radius: 0 !important; display: block !important;",this.iframe),this.node.appendChild(this.iframe)):e.appendChild(this.iframe),this.setParentViewPort(),xC.isContentWindowAvailable(this.iframe.contentWindow)&&(this.iframe.contentWindow.document.open("text/html","replace"),this.iframe.contentWindow.document.write(this.getIframeTemplate()),TC(this.iframe.contentWindow,this.iframe.contentWindow.document),this.iframe.contentWindow.document.close())}onShow(){this.htmlElementStyleManager.setStyle(IC(),this.iframe)}open(){this.htmlElementStyleManager.saveDocumentOriginalStyles(),this.node||(this.isMobile&&this.containerDiv&&this.overlay&&(this.htmlElementStyleManager.setStyle("display: block !important;margin: 0 !important;padding: 0 !important;float: none !important;visibility: visible !important;opacity: 1 !important;position: absolute !important;width: 100% !important;height: 100% !important;top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; background: #f5f5f5 !important;z-index: 2147483647 !important;transform: translateZ(100px) !important;",this.containerDiv),this.htmlElementStyleManager.setStyle("position: fixed !important;top: 0 !important;left: 0 !important;right: 0 !important;bottom: 0 !important;margin: 0 !important;padding: 0 !important;background: #f5f5f5 !important;z-index: 2147483646 !important;transform: translateZ(99px) !important;",this.overlay)),this.htmlElementStyleManager.setStyle(this.isMobile?"display: block !important;border: none !important;margin: 0 !important;padding: 0 !important;width: 100% !important;height: 100% !important;":IC(2147483646),this.iframe),this.resize({width:"100%",height:"100%"}),this.node||(this.htmlElementStyleManager.appendStyle(this.isMobile?"all: initial !important;position: static !important;margin: 0 !important;padding: 0 !important;min-height: 0 !important;min-width: 0 !important;width: auto !important;height: 100% !important;overscroll-behavior-y: none !important;":"overflow: hidden !important; overscroll-behavior-y: none !important;",document.documentElement),OC(document,(()=>{this.htmlElementStyleManager.appendStyle(this.isMobile?"all: initial !important;overflow: auto !important;position: static !important;display: block !important;min-height: 0 !important;min-width: 0 !important;height: 100% !important;width: auto !important;margin: 0 !important;padding: 0 !important;overscroll-behavior-y: none !important;":"padding-right: 0 !important; overscroll-behavior-y: none !important;",document.body)}))),this.setGlobalStyles())}close(){this.htmlElementStyleManager.setStyle("border: 0 !important; width: 1px !important; height: 1px !important; position: fixed !important; opacity: 0 !important;",this.iframe),this.removeGlobalStyles(),this.htmlElementStyleManager.restoreOriginalStyles(document.documentElement),this.htmlElementStyleManager.restoreOriginalStyles(document.body),this.restoreParentViewPort()}destroy(){this.iframe.remove(),this.containerDiv&&(this.containerDiv.remove(),this.containerDiv=void 0),this.overlay&&(this.overlay.remove(),this.overlay=void 0)}setParentViewPort(){if(this.node)return;this.viewport=wC.getViewport("width=device-width, initial-scale=1, shrink-to-fit=no");const e=this.viewport,t=document.querySelector("meta[name=viewport]");t?(this.parentViewport=t,this.parentViewport.remove()):this.parentViewport=wC.getViewport(""),document.head.appendChild(e)}restoreParentViewPort(){this.node||(this.viewport&&(this.viewport.remove(),this.viewport=void 0),this.parentViewport&&(document.head.appendChild(this.parentViewport),this.parentViewport=void 0))}setGlobalStyles(){if(this.isMobile){this.headStyle=document.createElement("style");const e=this.headStyle;e.appendChild(document.createTextNode("body > *:not(#fun-iframe-container){ position: fixed !important; width: 100% !important; display: block !important }")),document.head.appendChild(e)}}removeGlobalStyles(){this.headStyle&&this.headStyle.remove()}setIframeAttributes(){super.setIframeAttributes(),this.iframe.setAttribute("allowpaymentrequest","true"),this.iframe.setAttribute("allow","payment web-share"),(or(window)||function(e){var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("FxiOS"))}(window)||function(e){var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("EdgiOS"))}(window))&&this.iframe.setAttribute("src",location.origin)}static getViewport(e){const t=document.createElement("meta");return t.setAttribute("name","viewport"),t.setAttribute("content",e),t}configure(e){this.localeCode=e.locale;const t=e.localizedTitle;if(!xC.isContentWindowAvailable(this.iframe.contentWindow))return;if(t&&(this.title=t,this.iframe.setAttribute("title",t)),this.iframe.contentWindow.document.documentElement.setAttribute("lang",this.localeCode),this.iframe.contentWindow.document.documentElement.setAttribute("dir",(0,xi.N_)(this.localeCode)),void 0===e.styles)return;if(e.showcase){const e=this.iframe.contentWindow.document.getElementById("main-showcase-style");null==e||e.remove()}const n=this.iframe.contentWindow.document.createElement("style");e.showcase&&n.setAttribute("id","main-showcase-style"),this.styles=e.styles||"",n.appendChild(this.iframe.contentWindow.document.createTextNode(this.styles)),this.iframe.contentWindow.document.head.appendChild(n)}waitUntilFontsLoaded(){return(0,l.sH)(this,arguments,void 0,(function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;if(!this.iframe.contentWindow)return;const t=kC(this.iframe.contentWindow.document,'1em "IBM Plex Sans"'),n=this.env===u.hY.PRODUCTION?Promise.resolve(!0):kC(this.iframe.contentWindow.document,'1em "Verveine"'),i=Promise.all([t,n]),s=(a=e,new Promise((e=>{setTimeout(e,a)})));var a;yield Promise.race([i,s])}))}}const RC=`\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 300;\n  font-display: swap;\n  src: url(${n(8552)}) format('woff2');\n  }\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(1755)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n  src: url(${n(9706)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 600;\n  font-display: swap;\n  src: url(${n(3717)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${n(8676)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 300;\n  font-display: swap;\n  src: url(${n(6843)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(4312)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n  src: url(${n(7977)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 600;\n  font-display: swap;\n  src: url(${n(5870)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${n(9807)}) format('woff2');\n}\n@font-face {\n  font-family: 'Sacramento';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(3179)}) format('woff2');\n}\n@font-face {\n  font-family: 'Verveine';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(9562)}) format('woff2');\n}\n`,MC=(e,t)=>(0,To.A)({"is-mobile-safari-16":null==e?void 0:e.isMobileSafari16,"desktop-view":!(null==t?void 0:t.isMobile)});function LC(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return new Promise((n=>{const i=new wC({node:e.node,fonts:RC,isMobile:e.isMobile,title:"",id:"__checkout2",env:e.env,locale:e.localeCode,overrideTemplate(t){return`\n          <!DOCTYPE html>\n          <html class="${MC(e,t)}" lang="${e.localeCode}">\n            <head>\n                <meta charset="utf-8">\n                <meta http-equiv="X-UA-Compatible" content="IE=edge">\n                ${null==t?void 0:t.metaTags}\n                <title>${null==t?void 0:t.title}</title>\n                <style>${null==t?void 0:t.styles}</style>\n                <style>${null==t?void 0:t.fonts}</style>\n                ${null==t?void 0:t.scripts}\n            </head>\n\n            <body style="opacity: 0;">\n              <div id="root" class="donation-form" role="dialog" aria-modal="true"></div>\n            </body>\n          </html>\n      `}},e.htmlElementStyleManager);i.addOnLoadHandler((()=>{var e,s,a;return"complete"!==(null===(e=i.iframeDocument)||void 0===e?void 0:e.readyState)&&"interactive"!==(null===(s=i.iframeDocument)||void 0===s?void 0:s.readyState)||!(null===(a=i.iframeDocument)||void 0===a?void 0:a.body)?(t.captureException(new Error("Iframe not ready on load"),{level:"warning"}),void setTimeout((()=>n(i)),100)):i.findElement("#root")?void n(i):(t.captureException(new Error("Root element not found on iframe load"),{level:"warning"}),void setTimeout((()=>{n(i)}),100))}))}))}))}function UC(e){return(0,l.sH)(this,void 0,void 0,(function*(){return(0,xi.iJ)(e)===Ti.p.RTL?(yield n.e(645).then(n.t.bind(n,7119,23))).default:(yield n.e(706).then(n.t.bind(n,6276,23))).default}))}class FC{constructor(){this.emitter=new m.A}on(e,t){return this.emitter.on(e,t),()=>this.emitter.off(e,t)}once(e,t){return this.emitter.once(e,t),this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.emitter.emit(e,...n),this}removeAllListeners(){return this.emitter.eventNames().forEach((e=>{this.emitter.removeListener(e)})),this}}class jC{constructor(){this.stack=[]}getCurrent(){return this.stack[this.stack.length-1]||null}getPrevious(){return this.stack[this.stack.length-2]||null}getHistoricalScreens(){return[...this.stack]}goTo(e){const t=this.stack.indexOf(e);return-1===t?(this.stack.push(e),this):(this.stack.splice(t+1),this)}has(e){return-1!==this.stack.indexOf(e)}}class BC extends FC{constructor(e,t,n){super(),this.transitionsCompiler=e,this.settings=t,this.state=n,this.history=new jC,this.locked=!1,this.done=!1,this.screens=e.compile(t.screens,this)}get previousScreenName(){return this.history.getPrevious()}get isLocked(){return this.locked}get isExiting(){return this.currentScreen.final||!1}tryExit(){if(this.isExiting)return!1;const e=this.getFinalScreen();if(!e)return!1;const t=this.getScreenByName(e);return!!this.canEnterToScreen(t)&&(this.goTo(t.name),!0)}start(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;const t=new Date,n=this.getScreenByName(this.settings.initial()),i=null!==(e=this.firstScreen)&&void 0!==e?e:n;return this.firstScreen=this.getFirstScreen(i),n!==i&&(yield n.instance.beforeEnter({isSynthetic:!0}),this.history.goTo(n.name),yield n.instance.beforeLeave({isSynthetic:!0})),this.history.goTo(this.firstScreen.name),this.currentScreen.instance.beforeEnter().then((()=>{this.emitScreenChanged({transitionStartedAt:t}),this.checkFlowCompleted()}))}))}next(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=new Date;if(!(null==e?void 0:e.omitBeforeLeave)&&!(yield this.currentScreen.instance.beforeLeave({direction:null==e?void 0:e.direction})))return;let n=this.getNextScreen(this.currentScreen),i=null==e?void 0:e.direction;if((null==e?void 0:e.getMandatoryAllowance)&&e.getMandatoryAllowance()){const e=this.getFirstMandatoryScreen();e&&(n=e,i=Tc.BACKWARD)}return this.goTo(n.name,{direction:i||Tc.FORWARD,transitionStartedAt:t})}))}prev(){if(this.settings.initial()===this.currentScreen.name)return Promise.resolve();const e=new Date,t=this.history.getHistoricalScreens(),n=t.findIndex((e=>{var t;return null===(t=this.screens.get(e))||void 0===t?void 0:t.final}));let i;return i=-1!==n?t[n-1]:this.history.getPrevious(),i?this.goTo(i,{direction:Tc.BACKWARD,transitionStartedAt:e}):Promise.reject(new Error(`Cannot go to the previous screen. Current screen: ${this.currentScreen.name}`))}getHistoricalScreens(){return this.history.getHistoricalScreens()}predictNextScreen(){return this.getNextScreen(this.currentScreen).name}goTo(e,t){return this.throwErrorIfCannotChangeScreen(e,null==t?void 0:t.direction).then((()=>this.currentScreen.instance.dispose())).then((()=>(this.history.goTo(e),this.currentScreen.instance=this.transitionsCompiler.createScreenInstance(e,this),this.currentScreen.instance.beforeEnter()))).then((()=>{this.emitScreenChanged({direction:null==t?void 0:t.direction,transitionStartedAt:null==t?void 0:t.transitionStartedAt}),this.checkFlowCompleted()}))}lock(){return this.locked=!0,this.emit(ns.LOCKED),this}unlock(){return this.locked=!1,this.emit(ns.UNLOCKED),this}setFirstScreen(e){this.firstScreen=this.getScreenByName(e)}getCurrentScreen(){return this.currentScreen.instance}getScreen(e){const t=this.screens.get(e);if(!t)throw new Error(`FormFlow Screen with name ${e} not found.`);return t.instance}checkHasScreen(e){return this.screens.has(e)}isCurrentScreenFirst(){var e;return this.currentScreen.name===(null===(e=this.firstScreen)||void 0===e?void 0:e.name)}isCurrentScreenLast(){return void 0===this.currentScreen.next}dispose(){this.removeAllListeners()}get canGoBack(){return!this.locked&&!this.done&&!!this.history.getPrevious()}get currentScreen(){const e=this.history.getCurrent();if(!e)throw new Error("Cannot identify current screen");const t=this.screens.get(e);if(!t)throw new Error("Cannot get current screen");return t}throwErrorIfCannotChangeScreen(e,t){return this.locked?Promise.reject(new Error(`Cannot change screen while flow is locked. Current screen: ${e}. Direction: ${t}. Viewed screens: ${this.history.getHistoricalScreens().join(", ")}`)):this.done?Promise.reject(new Error("Cannot change screen because flow is completed")):Promise.resolve()}checkFlowCompleted(){this.isCurrentScreenLast()&&!this.isExiting&&(this.done=!0,this.emit(ns.DONE))}emitScreenChanged(e){this.emit(ns.SCREEN_CHANGED,{screen:this.currentScreen.name,instance:this.currentScreen.instance,direction:null==e?void 0:e.direction,transitionStartedAt:(null==e?void 0:e.transitionStartedAt)||new Date,transitionFinishedAt:new Date,createdAt:new Date})}getScreenByName(e){const t=this.screens.get(e);if(!t)throw new Error(`Cant get "${e}" screen`);return t}canEnterToScreen(e){return!e.guard||!e.guard(this.state)}getFirstScreen(e){var t;if(!this.canEnterToScreen(e)){const n=null===(t=e.next)||void 0===t?void 0:t.call(e,this.state,this.history);if(!n)throw new Error('Unable to determine first screen, reached a screen without "next" function');const i=this.getScreenByName(n);return this.getFirstScreen(i)}return e}getNextScreen(e){var t;const n=null===(t=e.next)||void 0===t?void 0:t.call(e,this.state,this.history);if(!n)throw new Error("Cant go to the next screen");const i=this.getScreenByName(n);return this.canEnterToScreen(i)?i:this.getNextScreen(i)}getFirstMandatoryScreen(){return this.history.getHistoricalScreens().map((e=>this.getScreenByName(e))).find((e=>{var t;return null===(t=null==e?void 0:e.mandatory)||void 0===t?void 0:t.call(e,this.state)}))||null}getFinalScreen(){const e=[...this.screens.entries()].find((e=>e[1].final));return e?e[0]:null}}class HC{constructor(e){this.screenFactory=e}createScreenInstance(e,t){return this.screenFactory.create(e,t)}compile(e,t){const n=new Map;return Object.keys(e).forEach((i=>{const s=e[i];n.set(i,{name:i,next:s.next,guard:s.guard,mandatory:s.mandatory,final:s.final,instance:this.screenFactory.create(i,t)})})),n}}function qC(e,t,n){const i=new HC(e);return new BC(i,t,n)}class GC{constructor(){this._promise=new Promise(((e,t)=>{this._resolver=e,this._rejector=t}))}get promise(){return this._promise}resolve(e){this.resolver(e)}reject(e){this.rejector(e)}get resolver(){if(!this._resolver)throw new Error("_resolver is undefined");return this._resolver}get rejector(){if(!this._rejector)throw new Error("_rejector is undefined");return this._rejector}}class VC{constructor(){this.storage=[]}enqueue(e){this.storage.push(e)}dequeue(){return this.storage.shift()}size(){return this.storage.length}toArray(){return[...this.storage]}front(){return this.storage[0]}clear(){this.storage=[]}isEmpty(){return!this.storage.length}}class KC{constructor(e){this.debounce=e,this.queue=new VC,this.currentRequestPromise=null}request(e){let{promise:t,allowDelay:n,allowMerge:i}=e;const s=new GC;return this.queue.enqueue({promise:t,deferredPromise:s,allowMerge:i,allowDelay:n}),this.performRequest(),s.promise}getRequestBatch(){var e;const t=this.queue.dequeue();if(!t)return[];if(!(null==t?void 0:t.allowMerge))return[t];const n=[t];for(;null===(e=this.queue.front())||void 0===e?void 0:e.allowMerge;){const e=this.queue.dequeue();e&&n.push(e)}return n}getRequestBatches(){const e=[];for(;!this.queue.isEmpty();)e.push(this.getRequestBatch());return e}executeBatch(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=e[e.length-1];if(t)try{const n=yield t.promise();e.forEach((e=>e.deferredPromise.resolve(n)))}catch(t){e.forEach((e=>e.deferredPromise.reject(t)))}}))}performDelayedRequest(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.queue.front();if(!e)return;e.allowDelay&&(yield gr(this.debounce));const t=this.getRequestBatches();for(const e of t)yield this.executeBatch(e)}))}performRequest(){return(0,l.sH)(this,void 0,void 0,(function*(){for(;null===this.currentRequestPromise&&!this.queue.isEmpty();)try{this.currentRequestPromise=this.performDelayedRequest(),yield this.currentRequestPromise}finally{this.currentRequestPromise=null}}))}}var YC,zC,WC,$C,XC;!function(e){e.DONATION="FiatDonation",e.GIFT_AID="GiftAid",e.PAYMENT_OPTIONS="PaymentOptions",e.PRE_DONATION_UPSELL="PreDonationUpsell",e.UK_BACS="UKBacs",e.US_BANK_ACCOUNT="USBankAccount",e.POST_DONATION_UPSELL="PostDonationUpsell",e.DTD="DTD"}(YC||(YC={})),function(e){e[e.MIN=80]="MIN",e[e.MAX=250]="MAX"}(zC||(zC={})),function(e){e.EMAIL="email",e.ADDRESS="address",e.NOT_SHARE="not_share"}(WC||(WC={})),function(e){e.NONE="none",e.HONOR="honor",e.MEMORY="memory"}($C||($C={})),function(e){e.POSTAL_CARD="card",e.LETTER="letter"}(XC||(XC={}));const QC={[$C.MEMORY]:"In Memory",[$C.HONOR]:"In Honor",[$C.NONE]:""};$C.MEMORY,$C.HONOR,$C.NONE;class ZC{static get emptyAmountOptions(){return{once:[],every4weeks:[],monthly:[],daily:[],weekly:[],biweekly:[],bimonthly:[],quarterly:[],semiannual:[],annual:[]}}static get emptyDefaultAmounts(){return{once:0,monthly:0,daily:0,weekly:0,biweekly:0,bimonthly:0,quarterly:0,semiannual:0,annual:0}}constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,E){var A;this.dataPointRegistry=e,this._checkoutConfiguration=t,this.checkoutState=n,this._checkoutUIState=i,this.sessionService=s,this.sessionAPI=a,this.tracker=r,this.currencyService=o,this.intl=c,this.iframeWindow=l,this.sentry=u,this.paymentScreen=d,this.eventEmitter=h,this.checkoutAPIBridge=m,this.debug=p,this.experiments=g,this.paymentAPI=y,this.logger=f,this._redirectApi=S,this.params=E,this.shouldFindMandatoryScreen=!1,this._closeSessionPromise=null,(null===(A=this.checkoutConfiguration.fundraisingPage)||void 0===A?void 0:A.key)&&(this.checkoutUIState.askPageActiveTab=Dr.FUNDRAISER)}get redirectApi(){return this._redirectApi}get checkoutUIState(){return this._checkoutUIState}get checkoutConfiguration(){return this._checkoutConfiguration}get campaignConfig(){return this.checkoutConfiguration.campaign.config}get defaultAmountOptions(){return this.checkoutConfiguration.defaultAmountOptions}get company(){return this.checkoutConfiguration.company}get queryParams(){return this.checkoutConfiguration.queryParams}get hasPaymentAttempt(){return this.getState().hasPaymentAttempt}get canGoBack(){return this.checkoutState.canGoBack}get livemode(){return this.checkoutConfiguration.infrastructureParams.livemode}get isPaid(){var e;return!!(null===(e=this.getState().donationResultState)||void 0===e?void 0:e.donationId)}get isPaymentStarted(){return!1}get canCloseSession(){return!this.sessionService.closed&&this.isPaid}reloadCheckout(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.trackCheckoutClose(e),yield gr(20),t){const e=new URL(window.location.href);Object.entries(t).forEach((t=>{let[n,i]=t;e.searchParams.set(n,i)})),window.location.replace(e)}else window.location.reload()}))}initialize(e){this.checkoutState.initialize(),this.sessionService.updateSession(),this.checkoutUIState.preloadComponents()}dispose(){return(0,l.sH)(this,void 0,void 0,(function*(){}))}updateSession(e){return this.sessionService.updateSession(e)}abandonSession(){return this.sessionService.abandonSession()}getDataPoint(e){return this.dataPointRegistry.getDataPoint(e)}getState(){return this.checkoutState.get()}tryCloseSession(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this._closeSessionPromise)return this._closeSessionPromise;if(this.canCloseSession){this._closeSessionPromise=this.closeSession();try{yield this._closeSessionPromise}finally{this._closeSessionPromise=null}}}))}setCanGoBack(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.checkoutState.setCanGoBack(e),this}onStateUpdate(e){return this.checkoutState.onStateUpdate(e)}syncUpdateCheckoutState(){this.checkoutState.syncUpdate()}setRemoveCloseGuard(e){this._removeCloseGuard=e}disarmCloseGuard(){this._removeCloseGuard&&this._removeCloseGuard()}updateSessionWidgetDefaults(){this.sessionService.updateSessionWidgetDefaults()}handlePaymentRedirect(e){return(0,l.sH)(this,void 0,void 0,(function*(){e===this.params.screenSet.thankYou&&this.canRedirect&&(this.debug.log("simulating additional pay delay before redirect"),yield gr(ZC.ADDITIONAL_PAY_DELAY),this.debug.log("redirecting"),yield this.tryCloseSession(),yield this.redirectApi.tryRedirect(this))}))}getCommonPublicCheckoutDonationParams(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.donorNameDataPoint,n=this.donorEmailDataPoint,i=this.tributeDataPoint,s=this.getDataPoint(YC.DTD),a=this.getDataPoint(Nr.ON_BEHALF_OF),r=this.getDataPoint(Nr.DONATE_ANONYMOUS),o=this.getDataPoint(Nr.DESIGNATION),c=this.getDataPoint(Nr.COMMUNICATION_CONSENT),l=this.checkoutConfiguration.campaign.config,u=i.toObject(),d=t.toObject(),h=n.toObject(),m=this.getDonationParams();return(e=>{let{params:t,tributeDataPointDTO:n,donorNameDataPointDTO:i,donorEmailDataPointDTO:s,anonymousDataPoint:a,dtdDataPoint:r,onBehalfOfDataPoint:o,designationDataPoint:c,commentDataPoint:l,communicationConsentDataPoint:u,donationParams:d,campaign:h,currencyService:m,isPaid:p}=e;var g;const y=n.isActive&&!!n.inHonorOf;return{supporter:{id:(null===(g=t.payResult)||void 0===g?void 0:g.customerId)||null,email:s.email,firstName:i.firstName,lastName:i.lastName,anonymous:h.showAnonymous&&a.anonymousChecked,mailingListSubscribed:u.isAnyConsentAccepted,employer:r.employerName||null,onBehalfOf:o.isOnBehalfOf?o.companyName:null},comment:l.comment||null,donation:t.payResult&&p?{id:t.payResult.donationId,paymentMethod:(f=t.clientPaymentMethod,{[pt._.CARD]:"CreditCard",[pt._.APPLE_PAY]:"ApplePay",[pt._.GOOGLE_PAY]:"GooglePay",[pt._.PAYPAL]:"PayPal",[pt._.VENMO]:"Venmo",[pt._.US_BANK_ACCOUNT]:"ACH",[pt._.AU_BECS]:"BECS",[pt._.UK_BACS]:"Bacs",[pt._.ACSS]:"PAD",[pt._.SEPA]:"SEPA",[pt._.IDEAL]:"iDEAL",[pt._.CRYPTO]:"Crypto",[pt._.STOCK]:"Stock"}[f]||""),amount:m.toFloat(d.total,d.currency),feesCovered:m.toFloat(d.publicFee,d.currency),currency:d.currency,recurring:d.frequency!==oe.ONCE,frequency:d.frequency}:null,designation:c.goalKey&&p?{id:c.goalKey,name:c.goalName,code:c.goalCode}:null,tribute:y?{type:(S=n.type,S&&QC[S]||"")}:null,recurring:t.payResult&&p&&t.payResult.recurringId?{id:t.payResult.recurringId}:null};var f,S})({params:e,tributeDataPointDTO:u,donorEmailDataPointDTO:h,donorNameDataPointDTO:d,campaign:l,anonymousDataPoint:r,isPaid:this.isPaid,dtdDataPoint:s,onBehalfOfDataPoint:a,donationParams:m,currencyService:this.currencyService,designationDataPoint:o,commentDataPoint:this.commentDataPoint,communicationConsentDataPoint:c})}))}getCommonPublicCheckoutIntentParams(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.tributeDataPoint,t=this.donorNameDataPoint,n=this.donorEmailDataPoint,i=this.remindMeLaterDataPoint,s=this.getDataPoint(Nr.DESIGNATION),a=e.toObject(),r=t.toObject(),o=n.toObject(),c=this.getDonationParams();return(e=>{let{flowType:t,tributeDataPointDTO:n,donorNameDataPointDTO:i,donorEmailDataPointDTO:s,designationDataPoint:a,commentDataPoint:r,remindMeLaterDataPoint:o,donationParams:c,isPaid:l}=e;const u=n.isActive&&!!n.inHonorOf;return l?null:{flowType:t,checkoutSettings:{modifyAmount:c.canModifyAmount,designation:a.goalKey,modifyDesignation:a.modifyDesignation},comment:r.comment,donation:{amount:c.amount,currency:c.currency,recurring:c.frequency!==oe.ONCE,frequency:c.frequency,selectedHintId:c.selectedHintId},supporter:{email:s.email,firstName:i.firstName,lastName:i.lastName},tribute:u?{type:n.type,labelType:n.labelType,inHonorOf:n.inHonorOf}:null,isSavedEmailOnExit:o.used,feeCovered:c.feeCovered}})({flowType:this.checkoutState.flowType,designationDataPoint:s,commentDataPoint:this.commentDataPoint,remindMeLaterDataPoint:i,tributeDataPointDTO:a,donorNameDataPointDTO:r,donorEmailDataPointDTO:o,donationParams:c,isPaid:this.isPaid})}))}capturePayErrorToSentry(e){e&&(e instanceof nn.GI&&0===e.statusCode||this.sentry.captureException(e))}emitDonationComplete(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.getPublicCheckoutDonationParams();this.checkoutAPIBridge.emitDonationComplete(e),this.logger.donationComplete({key:this.checkoutConfiguration.campaign.key,name:this.checkoutConfiguration.campaign.name},Object.assign(Object.assign({},e),this.checkoutAPIBridge.getOpenParams()))}))}handleDonationCompleted(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=[this.emitDonationComplete(),this.trackCheckoutCharge(e)];yield Promise.all(t)}))}getOpeningTime(){switch(this.checkoutConfiguration.checkoutType){case Ce.PAGE:return Math.round(window.performance.now());case Ce.MODAL:return Date.now()-this.tracker.checkoutOpenTimestamp;default:throw new U(this.checkoutConfiguration.checkoutType,"Unexpected checkout type")}}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get canRedirect(){return this.redirectApi.canRedirect(this.getState())}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get remindMeLaterDataPoint(){return this.checkoutState.remindMeLater.dataPoint}closeSession(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.sessionService.updateSession(),yield this.sessionService.closeSession()}))}}ZC.ADDITIONAL_PAY_DELAY=1*Z.MS.SECOND;class JC extends Da{constructor(e,t,n,i,s,a){super(e,t),this.merge({checkoutScreen:n,chargeKey:i.chargeKey,chargeInUSDAmount:i.chargeInUSDAmount,chargeInDefaultCurrencyAmount:i.chargeInDefaultCurrencyAmount,chargeAmount:i.chargeAmount,chargeCurrency:i.chargeCurrency,chargeFeeCovered:i.chargeFeeCovered?1:0,chargePaymentMethod:i.chargePaymentMethod,chargeIsRecurring:i.chargeIsRecurring?1:0,chargeHasComment:i.chargeHasComment?1:0,chargeHasTribute:i.chargeHasTribute?1:0,chargeGoal:i.chargeGoal,chargeCampaignKey:i.chargeCampaignKey,duration:s,eventComment:a})}get eventType(){return"checkoutCharge"}}class ev extends Da{constructor(e,t,n){super(e,t),this.merge({checkoutScreen:n})}get eventType(){return"checkoutClose"}}class tv extends Da{constructor(e,t,n,i){super(e,t),this.merge({checkoutScreen:n,eventComment:i})}get eventType(){return"checkoutScreenView"}}class nv extends Da{constructor(e,t,n,i){super(e,t),this.merge({duration:n,eventComment:i})}get eventType(){return"checkoutView"}}class iv extends ZC{constructor(){super(...arguments),this._isPaymentCompleted=!1,this.donationStatusInterval=null}get isPaymentCompleted(){return this._isPaymentCompleted}get queryParams(){return this.checkoutConfiguration.queryParams}get type(){return this.checkoutState.flowType}getPaymentScreen(e,t){return this.paymentScreen.get(e,t)}trackCheckoutCharge(e){const t=this.donationDataPoint,n=this.checkoutState.tribute.dataPoint,i=this.checkoutState.comment.dataPoint,s=this.getDataPoint(Nr.DESIGNATION),a=this.checkoutConfiguration.campaign,r=this.checkoutConfiguration.element,o=this.defaultAmountOptions;this.tracker.track(new JC({frequency:t.frequency,currency:t.currency,amount:t.amount||0,amountOptions:o},{elementType:r.type,elementKey:r.key,elementReminderKey:r.reminderKey},e.screen,{chargeKey:e.donationId,chargeInUSDAmount:t.totalInUSD||0,chargeInDefaultCurrencyAmount:t.totalInDefaultCurrency,chargeAmount:t.total,chargeCurrency:t.currency,chargeFeeCovered:!1,chargePaymentMethod:e.clientPaymentMethod,chargeIsRecurring:t.frequency!==oe.ONCE,chargeHasComment:i.isActive&&!!i.comment,chargeHasTribute:n.isFilled,chargeGoal:s.goalKey||void 0,chargeCampaignKey:a.key},e.duration))}trackCheckoutView(){var e,t;const n=this.donationDataPoint.toObject(),i=this.checkoutConfiguration.element,s=this.checkoutConfiguration.externalConfig,a=Boolean((null===(e=s.launcher)||void 0===e?void 0:e.elementKey)&&(null===(t=s.checkoutData)||void 0===t?void 0:t.amount)),r=this.getOpeningTime();this.debug.log("checkout opening time:eventCheckoutView",`${r} ms`),this.tracker.track(new nv({frequency:n.frequency,currency:n.currency,amount:n.amount,amountOptions:iv.emptyAmountOptions},{elementType:i.type,elementKey:i.key,elementReminderKey:i.reminderKey},r,{isAmountFromElement:a}))}trackCheckoutClose(e){const t=this.donationDataPoint.toObject(),n=this.checkoutConfiguration.element;this.tracker.track(new ev({frequency:t.frequency,currency:t.currency,amount:t.amount,amountOptions:iv.emptyAmountOptions},{elementType:n.type,elementKey:n.key,elementReminderKey:n.reminderKey},e))}trackCheckoutScreenView(e,t,n,i){const s=this.donationDataPoint.toObject(),a=this.checkoutConfiguration.element,r={renderDuration:null};t&&n&&(r.transitionDuration=n.getTime()-t.getTime()),i&&n&&(r.renderDuration=i.getTime()-n.getTime()),this.tracker.track(new tv({frequency:s.frequency,currency:s.currency,amount:s.amount,amountOptions:iv.emptyAmountOptions},{elementType:a.type,elementKey:a.key,elementReminderKey:a.reminderKey},e,r))}getCheckoutTrackerData(){const e=this.donationDataPoint,t=this.checkoutState.tribute.dataPoint;return{donation:{amount:e.amount,currency:e.currency,frequency:e.frequency,defaultAmount:e.defaultAmount},tribute:{isActive:t.isActive}}}getState(){return this.checkoutState.get()}dispose(){const e=Object.create(null,{dispose:{get:()=>super.dispose}});return(0,l.sH)(this,void 0,void 0,(function*(){return this.clearDonationStatusInterval(),e.dispose.call(this)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return sn.fail({});try{return yield this.sessionService.updateSession(),yield this.paymentAPI.hold({clientPaymentMethod:u._h.CRYPTO}),sn.success(void 0)}catch(e){return sn.fail({shouldLeave:!1})}}))}pay(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{screen:t,predictedNextScreen:n}=e;if(this.checkoutConfiguration.infrastructureParams.showcase)return sn.fail({});this.checkoutState.setPaymentAttempt();const i=Date.now(),s=yield this.sessionService.updateSession();if(sn.isFailure(s))return this.payErrorMessage=this.intl.translate("common.errorOccurredText"),sn.fail({});let a;try{a=yield this.paymentAPI.pay()}catch(e){return this.capturePayErrorToSentry(e),sn.fail({})}return sn.isFailure(a)?sn.fail({}):a.successResult.data.cryptoData?(this.checkoutState.setCryptoAddress(a.successResult.data.cryptoData.address),this.checkoutState.setDonationResultState({donationId:a.successResult.data.donationId,customerId:a.successResult.data.customerId,tributeId:a.successResult.data.tributeId,tributeDonorPortalLink:a.successResult.data.tributeDonorPortalLink}),this.watchForPaymentStatus({donationId:a.successResult.data.donationId,startPayTimestamp:i,screen:t}),yield this.handlePaymentRedirect(n),sn.success(void 0)):sn.fail({})}))}initialize(e){super.initialize(e);const t=this.checkoutConfiguration.externalConfig.checkoutIntent;t&&!e.shouldRestoreFromIntent&&this.applyCheckoutIntent(t)}saveCheckoutClosePublicParams(){return(0,l.sH)(this,void 0,void 0,(function*(){const[e,t]=yield Promise.all([this.getPublicCheckoutDonationParams(),this.getCommonPublicCheckoutIntentParams()]);this.checkoutAPIBridge.setDonationParams(e),this.checkoutAPIBridge.setIntentParams(t)}))}getDonationParams(){const e=this.donationDataPoint,t=e.toObject();return{amount:t.amount,total:t.total,currency:t.currency,frequency:t.frequency,canModifyAmount:e.canModifyAmount,publicFee:0}}applyCheckoutIntent(e){var t,n,i;e.donation&&(e.donation.currency&&this.checkoutState.donation.setCurrency(e.donation.currency),e.donation.amount&&this.checkoutState.donation.setAmount(e.donation.amount)),e.supporter&&(e.supporter.firstName&&this.checkoutState.privacy.setDonorFirstName(e.supporter.firstName),e.supporter.lastName&&this.checkoutState.privacy.setDonorLastName(e.supporter.lastName),e.supporter.email&&this.checkoutState.privacy.setDonorEmail(e.supporter.email)),e.comment&&this.checkoutState.comment.saveComment(e.comment),e.tribute&&(e.tribute.inHonorOf&&this.checkoutState.tribute.setTributeeName(null===(t=e.tribute)||void 0===t?void 0:t.inHonorOf),this.checkoutState.tribute.setActive(!0)),(null===(n=e.checkoutSettings)||void 0===n?void 0:n.designation)&&this.checkoutState.designation.setGoal(null===(i=e.checkoutSettings)||void 0===i?void 0:i.designation),this.checkoutState.filledFromIntent=!0}getPublicCheckoutDonationParams(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.getCommonPublicCheckoutDonationParams({clientPaymentMethod:u._h.CRYPTO,payResult:this.checkoutState.get().donationResultState})}))}get donationDataPoint(){return this.checkoutState.donation.dataPoint}watchForPaymentStatus(e){this.donationStatusInterval=setInterval((()=>(0,l.sH)(this,void 0,void 0,(function*(){(yield this.paymentAPI.status())&&(this.clearDonationStatusInterval(),this.handleDonationCompleted({donationId:e.donationId,clientPaymentMethod:u._h.CRYPTO,screen:e.screen,duration:e.startPayTimestamp-Date.now()}),this._isPaymentCompleted=!0)}))),5e3)}clearDonationStatusInterval(){this.donationStatusInterval&&clearInterval(this.donationStatusInterval)}}class sv{constructor(e,t,n,i){this.campaignConfig=e,this.debug=t,this.checkoutConfiguration=n,this.dataPointRegistry=i,this.hasMailingAddressError=!1,this.filledFromIntent=!1,this.hasPaymentAttempt=!1,this._canGoBack=!1,this.donationResultState=null,this.updateListeners=new Set}get canGoBack(){return this._canGoBack}setPaymentAttempt(){return this.hasPaymentAttempt=!0,this}setCanGoBack(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._canGoBack=e}setDonationResultState(e){this.donationResultState=e}onStateUpdate(e){return this.updateListeners.add(e),()=>this.updateListeners.delete(e)}syncUpdate(){this.updateListeners.forEach((e=>e()))}}class av extends sv{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){super(d.campaign.config,u,d,h),this.donation=e,this.designation=t,this.mailingAddress=n,this.comment=i,this.privacy=s,this.communicationConsent=a,this.questions=r,this.tribute=o,this.remindMeLater=c,this.checkoutStateSynchronizer=l,this.debug=u,this.checkoutConfiguration=d,this.dataPointRegistry=h,this.flowType=Ae.CRYPTO,this.cryptoAddress=null}initialize(){this.checkoutStateSynchronizer.onInit()}get(){var e;return{donation:this.donationState,tribute:this.tributeState,comment:this.commentState,cryptoAddress:this.cryptoAddress,hasPaymentAttempt:this.hasPaymentAttempt,hasMailingAddressError:this.hasMailingAddressError,donationResultState:this.donationResultState,isPaid:Boolean(null===(e=this.donationResultState)||void 0===e?void 0:e.donationId),mailingAddress:this.mailingAddressState,questions:this.questionsState,remindMeLater:this.remindMeLaterState,termsAndConditions:this.termsAndConditionsState}}setCryptoAddress(e){return this.cryptoAddress=e,this}get remindMeLaterState(){const e=this.dataPointRegistry.getDataPoint(Nr.REMIND_ME_LATER),t=this.privacy.donorEmailDataPoint,n=this.privacy.termsAndConditionsDataPoint,i={show:!1,isEnabled:e.isEnabled};return e.isEnabled?t.validate().isValid?n.isEnabled&&!n.isAccepted?Object.assign(Object.assign({},i),{show:!0}):i:Object.assign(Object.assign({},i),{show:!0}):i}get termsAndConditionsState(){return{isEnabled:this.privacy.termsAndConditionsDataPoint.isEnabled}}get donationState(){const e=this.dataPointRegistry.getDataPoint(vr.DONATION);return{amount:e.amount,currency:e.currency,frequency:e.frequency,defaultAmount:e.defaultAmount||0,amountOptions:[],amountInUsd:e.amountInUSD||0}}get tributeState(){const e=this.dataPointRegistry.getDataPoint(Nr.TRIBUTE);return{isEnabled:e.isEnabled,name:e.tributeeName,labelType:e.labelType,isActive:e.isActive}}get mailingAddressState(){const e=this.dataPointRegistry.getDataPoint(Nr.MAILING_ADDRESS);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get commentState(){const e=this.dataPointRegistry.getDataPoint(Nr.COMMENT);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get questionsState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Nr.QUESTIONS).isEnabled}}}class rv{constructor(e){this.dataPointRegistry=e}}function ov(e){return e===oe.ONCE?Ze.ONE_TIME:Ze.RECURRING}class cv extends rv{constructor(e){super(e),this.dataPointRegistry=e}synchronize(){const e=ov(this.dataPointRegistry.getDataPoint(vr.DONATION).frequency);this.designationDataPoint.hasSelectedGoalWithRepeat(e)||this.designationDataPoint.setComputedGoalKeyByGoalRepeat(e)}get designationDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.DESIGNATION)}}class lv{}class uv extends lv{constructor(e,t){super(),this.designationStateService=e,this.mailingAddressStateService=t}onInit(){this.syncDesignation(),this.syncMailingAddress()}onDonationChange(){this.syncDesignation(),this.syncMailingAddress()}syncDesignation(){this.designationStateService.synchronize()}syncMailingAddress(){this.mailingAddressStateService.synchronize()}}class dv{constructor(e,t,n,i){this.checkoutConfiguration=e,this.mailingAddressModule=t,this.paymentMethodAvailabilityManagerRepository=n,this.dataPointRegistry=i}isEnabled(){return this.mailingAddressModuleCheckoutScreenLogic.isEnabled(this.totalInCustomCurrency,this.mailingAddressModuleCheckoutScreenParams)}isRequired(){return this.mailingAddressModuleCheckoutScreenLogic.isRequired(this.totalInCustomCurrency,this.mailingAddressModuleCheckoutScreenParams)}get mailingAddressModuleCheckoutScreenLogic(){return this.mailingAddressModule.getCheckoutScreenLogic()}get campaignConfig(){return this.checkoutConfiguration.campaign.config}get totalInCustomCurrency(){const e=this.dataPointRegistry.getDataPoint(vr.DONATION),t=this.mailingAddressModule.getCurrencyLogic({widget:this.campaignConfig});return e.getTotalInCustomCurrency(t.currency)}get mailingAddressModuleCheckoutScreenParams(){return{mailingRequired:this.campaignConfig.mailingRequired,mailingRequiredFromAmount:this.campaignConfig.mailingRequiredFromAmount,showMailing:this.campaignConfig.showMailing,showMailingFromAmount:this.campaignConfig.showMailingFromAmount,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,paymentMethod:null,paymentMethodCountry:null,isGiftAidAccepted:!1}}}class hv extends rv{constructor(e,t){super(e),this.dataPointRegistry=e,this.mailingAddressAvailabilityService=t}synchronize(){this.mailingAddressDataPoint.setComputedAvailability({isEnabled:this.mailingAddressAvailabilityService.isEnabled(),isRequired:this.mailingAddressAvailabilityService.isRequired()})}get mailingAddressDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.MAILING_ADDRESS)}}class mv{constructor(e,t){this.dataPointRegistry=e,this.checkoutStateSynchronizer=t}perform(e){e(),this.triggerSynchronization()}}class pv extends mv{}class gv extends pv{get dataPoint(){return this.dataPointRegistry.getDataPoint(vr.DONATION)}setAmountByDefault(e){this.perform((()=>{this.dataPoint.setAmountByDefault(e)}))}setAmount(e){this.perform((()=>{this.dataPoint.setAmount(e)}))}setCurrency(e){this.perform((()=>{this.dataPoint.setCurrency(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onDonationChange()}}class yv extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(Nr.DESIGNATION)}setGoal(e){this.perform((()=>{this.dataPoint.setGoalKey(e,ov(this.donationDataPoint.frequency))}))}}class fv extends yv{get donationDataPoint(){return this.dataPointRegistry.getDataPoint(vr.DONATION)}triggerSynchronization(){}}class Sv extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(Nr.MAILING_ADDRESS)}setLine1(e){this.perform((()=>{this.dataPoint.setLine1(e)}))}setLine2(e){this.perform((()=>{this.dataPoint.setLine2(e)}))}setCity(e){this.perform((()=>{this.dataPoint.setCity(e)}))}setRegion(e){this.perform((()=>{this.dataPoint.setRegion(e)}))}setPostal(e){this.perform((()=>{this.dataPoint.setPostal(e)}))}setCountryCode(e){this.perform((()=>{this.dataPoint.setCountryCode(e)}))}setCountryCodeIfEmptyAddress(e){this.perform((()=>{this.dataPoint.setCountryCodeIfEmptyAddress(e)}))}setCityIfEmpty(e){this.perform((()=>{this.dataPoint.setCityIfEmpty(e)}))}setLine1IfEmpty(e){this.perform((()=>{this.dataPoint.setLine1IfEmpty(e)}))}setLine2IfEmpty(e){this.perform((()=>{this.dataPoint.setLine2IfEmpty(e)}))}setRegionIfEmpty(e){this.perform((()=>{this.dataPoint.setRegionIfEmpty(e)}))}setPostalIfEmpty(e){this.perform((()=>{this.dataPoint.setPostalIfEmpty(e)}))}setSkipped(e){this.perform((()=>{this.dataPoint.setSkipped(e)}))}}class Ev extends Sv{triggerSynchronization(){}}class Av extends mv{get donorNameDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.DONOR_NAME)}get customerTitleDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.CUSTOMER_TITLE)}get donorEmailDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.DONOR_EMAIL)}get phoneNumberDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.PHONE_NUMBER)}get birthdayDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.BIRTHDAY_DATE)}get onBehalfOfDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.ON_BEHALF_OF)}get donateAnonymousDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.DONATE_ANONYMOUS)}get termsAndConditionsDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.TERMS_AND_CONDITIONS)}setDonorFirstName(e){this.perform((()=>{this.donorNameDataPoint.setFirstName(e)}))}setDonorFirstNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setFirstNameIfEmpty(e)}))}setDonorLastName(e){this.perform((()=>{this.donorNameDataPoint.setLastName(e)}))}setDonorLastNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setLastNameIfEmpty(e)}))}setDonorFullName(e){this.perform((()=>{this.donorNameDataPoint.setFullName(e)}))}setDonorFullNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setFullNameIfEmpty(e)}))}setDonorTitle(e){this.perform((()=>{this.customerTitleDataPoint.setTitle(e)}))}setDonorEmail(e){this.perform((()=>{this.donorEmailDataPoint.setEmail(e)}))}setDonorEmailIfEmpty(e){this.perform((()=>{this.donorEmailDataPoint.setEmailIfEmpty(e)}))}setOnBehalfOfActive(e){this.perform((()=>{this.onBehalfOfDataPoint.setIsActive(e)}))}setOnBehalfOfCompanyName(e){this.perform((()=>{this.onBehalfOfDataPoint.setCompanyName(e)}))}setPhoneNumber(e){this.perform((()=>{this.phoneNumberDataPoint.setPhone(e)}))}setPhoneNumberIfEmpty(e){this.perform((()=>{this.phoneNumberDataPoint.setPhoneIfEmpty(e)}))}setPhoneCountryCode(e){this.perform((()=>{this.phoneNumberDataPoint.setCountryCode(e)}))}setPhoneCountryCodeIfEmptyPhone(e){this.perform((()=>{this.phoneNumberDataPoint.setCountryCodeIfEmptyPhone(e)}))}setPhoneCleanNumber(e){this.perform((()=>{this.phoneNumberDataPoint.setCleanPhone(e)}))}setBirthday(e){this.perform((()=>{this.birthdayDataPoint.setValue(e)}))}setBirthdayEnabled(){this.perform((()=>{this.birthdayDataPoint.setIsEnabled()}))}setDonateAnonymousChecked(e){this.perform((()=>{this.donateAnonymousDataPoint.setAnonymousChecked(e)}))}setTermsAndConditionsAccepted(e){this.perform((()=>{this.termsAndConditionsDataPoint.setIsAccepted(e)}))}}class Cv extends Av{triggerSynchronization(){}}class vv extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(Nr.COMMUNICATION_CONSENT)}setCustomizedChannelState(e,t){this.perform((()=>{t?this.dataPoint.acceptCustomizedConsent(e):this.dataPoint.rejectCustomizedConsent(e)}))}setGeneralConsentState(e){this.perform((()=>{e?this.dataPoint.acceptGeneralConsent():this.dataPoint.rejectGeneralConsent()}))}resetCustomizedConsent(){this.perform((()=>{this.dataPoint.rejectAll()}))}setGeneralConsentShown(){this.perform((()=>{this.dataPoint.setGeneralConsentShown()}))}setCustomizedConsentShown(){this.perform((()=>{this.dataPoint.setCustomizedConsentShown()}))}}class Nv extends vv{triggerSynchronization(){}}class bv extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(Nr.QUESTIONS)}setAnswer(e,t,n){this.perform((()=>{this.dataPoint.setAnswer(e,t,n)}))}}class Pv extends bv{triggerSynchronization(){}}class Dv extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(Nr.COMMENT)}setIsRequired(e){this.perform((()=>{this.dataPoint.setIsRequired(e)}))}setIsActive(e){this.perform((()=>{this.dataPoint.setIsActive(e)}))}saveComment(e){this.perform((()=>{this.dataPoint.saveComment(e)}))}savePrevComment(){this.perform((()=>{this.dataPoint.savePrevComment()}))}}class _v extends Dv{triggerSynchronization(){}}class Tv extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(Nr.TRIBUTE)}setActive(e){this.perform((()=>{this.dataPoint.setActive(e)}))}setTributeeName(e){this.perform((()=>{this.dataPoint.setTributeeName(e)}))}}class xv extends Tv{triggerSynchronization(){}}class Ov extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(Nr.REMIND_ME_LATER)}setState(e){this.perform((()=>{this.dataPoint.setState(e)}))}}class kv extends Ov{triggerSynchronization(){}}class Iv{constructor(e,t){this.checkoutState=e,this.params=t}get(){return this.shouldPayOnMailingAddressScreen()?this.params.screenSet.mailingAddress:this.params.screenSet.privacy}shouldPayOnMailingAddressScreen(){return this.checkoutState.get().mailingAddress.isEnabled}}function wv(e,t){return e.slice().filter((e=>null!==e)).sort(((e,t)=>e-t)).map((e=>(t-Number(e))/Math.abs(t-Number(e))||0)).reduce(((e,t)=>e+t),e.length)}class Rv{constructor(e,t,n,i,s){this.tracker=e,this.checkoutConfiguration=t,this.sentry=n,this.debouncedRequestService=i,this.requestService=s,this.created=!1,this.latestUpdatePayload=null,this.latestUpdateResponse=null,this.params={baseURL:a,token:e.checkoutViewId}}get sessionToken(){return this.params.token}get isCreated(){return this.created}get sessionStageInitial(){return this._sessionStageInitial}get(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){const i={retries:5,delay:200};(null==n?void 0:n.retries)&&(null==n?void 0:n.delay)&&(i.retries=n.retries,i.delay=n.delay);const s=yield this.waitForCreated((()=>this.requestService.get({url:`${this.params.baseURL}/${de}/${this.params.token}/${e}`,headers:this.headers,params:t,cancelSimilar:!0,rejectOnInvalid:null==n?void 0:n.rejectsOnInvalid})),i);if(sn.isSuccess(s))return s.successResult;throw new F}))}post(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){const i=this.getPostPromise(e,t,n);return this.debouncedRequestService.request({promise:i,allowMerge:!1,allowDelay:!1})}))}update(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.sessionStageInitial||(this.sessionStageInitial=this.getSessionStageInitial(e));const t=k(Object.assign(Object.assign({},e),{created:this.created,initial:this.sessionStageInitial})),n=this.getUpdaterPromise(t);return this.debouncedRequestService.request({promise:n,allowMerge:!1,allowDelay:!1})}))}close(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.debouncedRequestService.request({promise:this.getClosePromise(),allowMerge:!1,allowDelay:!1})}))}updateSessionWidgetDefaults(e,t){this.sessionStageInitial&&(this.sessionStageInitial.widgetDefaults=this.getWidgetDefaults(e,t))}abandon(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.debouncedRequestService.request({promise:this.getAbandonPromise(e),allowMerge:!1,allowDelay:!1})}))}getNextScreen(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=typeof e.clientHour,n=typeof e.clientWeekday;if("number"!==t||"number"!==n||void 0===e.clientHour||void 0===e.clientWeekday){const i=new Date;this.sentry.captureException(new Error("getNextScreen params clientHour or clientWeekday is not a number"),{extra:{params:e,dateForComparisonHour:i.getHours(),dateForComparisonWeekday:i.getDay(),clientHourType:t,clientWeekdayType:n}})}return this.requestService.post({url:`${this.params.baseURL}/${de}/${this.params.token}/getNextScreen`,headers:this.headers,params:e,cancelSimilar:!0,rejectOnInvalid:!0})}))}getFeeCovering(e){return this.requestService.post({url:`${this.params.baseURL}/${de}/getFeeCovering?token=${this.params.token}`,headers:this.headers,params:e,cancelSimilar:!0,rejectOnInvalid:!0})}getPostPromise(e,t,n){return()=>(0,l.sH)(this,void 0,void 0,(function*(){let i;try{i=yield this.requestService.post({url:`${this.params.baseURL}/${de}/${this.params.token}/${e}`,headers:this.headers,params:t,rejectOnInvalid:null==n?void 0:n.rejectsOnInvalid,setCustomFingerprint:!0})}catch(e){throw this.sentry.captureException(e),e}return i}))}getUpdaterPromise(e){return()=>(0,l.sH)(this,void 0,void 0,(function*(){let t;if(GS()(e,this.latestUpdatePayload)&&this.latestUpdateResponse)return sn.success(this.latestUpdateResponse);try{t=yield this.requestService.post({url:`${this.params.baseURL}/${de}/${this.params.token}`,headers:this.headers,params:e,setCustomFingerprint:!0})}catch(e){throw this.sentry.captureException(e),e}return sn.isSuccess(t)?(this.created=!0,this.latestUpdateResponse=t.successResult,this.latestUpdatePayload=e,t):this.handleSessionUpdateFailure(t)}))}getClosePromise(){return()=>this.requestService.post({url:`${this.params.baseURL}/${de}/${this.params.token}/close`,headers:this.headers,params:{},rejectOnInvalid:!0})}getAbandonPromise(e){return()=>(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.requestService.post({url:`${this.params.baseURL}/${de}/${this.params.token}/abandon`,headers:this.headers,params:e,rejectOnInvalid:!0})}catch(e){throw this.sentry.captureException(e),e}return sn.isSuccess(t)?t:this.handleSessionAbandonFailure(t)}))}get headers(){const e={"Content-Type":"text/plain; charset=utf-8"};return"on"===Cn("developmentMode")&&(e["X-FRU-DevelopmentMode"]="on"),e}set sessionStageInitial(e){this._sessionStageInitial=e}handleSessionUpdateFailure(e){var t;const n=!!(null===(t=e.failureResult.errors)||void 0===t?void 0:t.customerEmail);return n?sn.fail({customerEmailError:n}):sn.fail({})}handleSessionAbandonFailure(e){var t;const n=!!(null===(t=e.failureResult.errors)||void 0===t?void 0:t.customerEmail);return n?sn.fail({customerEmailError:n}):sn.fail({})}getSessionStageInitial(e){var t,n,i,s,a,r,o;const c=window.location.href,l=Ye(c);return{token:this.tracker.checkoutViewId,key:this.checkoutConfiguration.campaign.key,livemode:this.checkoutConfiguration.infrastructureParams.livemode,urlParams:l,widgetUrl:c,launcherParams:this.checkoutConfiguration.launcherParams,timezone:Xi(),trackerParams:{clientId:this.tracker.clientId,pageViewId:null!==(t=this.tracker.pageViewId)&&void 0!==t?t:"",checkoutViewId:this.tracker.checkoutViewId,clientLocale:this.tracker.clientLocale,uaWebdriver:Boolean(navigator.webdriver),tags:this.tracker.getTags()},widgetDefaults:this.getWidgetDefaults(e.donation.amount||0,e.checkoutDefaults),customFields:this.checkoutConfiguration.getInitialCustomFields(),elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementReminderKey:this.checkoutConfiguration.element.reminderKey||"",fundraisingPageKey:(null===(n=this.checkoutConfiguration.fundraisingPage)||void 0===n?void 0:n.key)||"",fundraisingPageCustomFields:(null===(i=this.checkoutConfiguration.fundraisingPage)||void 0===i?void 0:i.customFields)||[],startUrl:"",launcherUrl:"",checkoutV2:!0,checkoutType:this.checkoutConfiguration.checkoutType,checkoutIntentCustomFields:null!==(o=null===(r=null===(a=null===(s=this.checkoutConfiguration.externalConfig.checkoutIntent)||void 0===s?void 0:s.checkoutSettings)||void 0===a?void 0:a.customFields)||void 0===r?void 0:r.filter((e=>e.name&&e.value)))&&void 0!==o?o:[]}}getWidgetDefaults(e,t){return{amount:t.defaultAmounts,frequency:t.frequency,amountOptions:t.amountOptions,currency:t.currency,relations:{amount:wv([t.defaultAmount],e),amountOptions:wv(t.frequencyAmountOptions,e)}}}waitForCreated(e,t){return(0,l.sH)(this,arguments,void 0,(function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.isCreated)try{return yield e()}catch(i){if(n>=t.retries)throw this.sentry.captureException(i),i;return yield new Promise((e=>setTimeout(e,t.delay))),this.waitForCreated(e,t,++n)}return yield new Promise((e=>setTimeout(e,t.delay))),this.waitForCreated(e,t,++n)}))}}Rv.SESSION_UPDATE_DEBOUNCE=100;class Mv extends Rv{}class Lv{constructor(e,t,n,i){this.checkoutState=e,this.dataPointRegistry=t,this.checkoutConfiguration=n,this.sessionAPI=i,this._closed=!1,this.sessionClosePromise=null}get closed(){return this._closed}get closing(){return!!this.sessionClosePromise}updateSessionWidgetDefaults(){}closeSession(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.closed&&!this.checkoutConfiguration.infrastructureParams.showcase){if(this.sessionClosePromise)return this.sessionClosePromise;this.sessionClosePromise=this.sessionAPI.close();try{yield this.sessionClosePromise,this._closed=!0}finally{this.sessionClosePromise=null}}}))}abandonSession(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.remindMeLaterDataPoint.toObject(),t=this.checkoutState.privacy.donorEmailDataPoint.toObject(),n={remindMeLater:{shown:e.shown,used:e.used}};return t.email&&(n.email=t.email),this.sessionAPI.abandon(n)}))}getDataPoint(e){return this.dataPointRegistry.getDataPoint(e)}get remindMeLaterDataPoint(){return this.checkoutState.remindMeLater.dataPoint}}var Uv;!function(e){e.NONE="none",e.RANDOM="random"}(Uv||(Uv={}));const Fv=e=>{const{type:t,generalConsent:n,isGeneralConsentShown:i}=e;return t===u.kt.GENERAL?{type:u.Au.GENERAL,general:(s=i,a=n.isAccepted,s?a?u.Bg.OPTED_IN:u.Bg.OPTED_OUT:u.Bg.NOT_SUBMITTED),customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}}:{type:u.Au.GENERAL,general:u.Bg.NOT_SUBMITTED,customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}};var s,a};class jv extends Lv{updateSession(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return sn.success({});const t=this.checkoutState.tribute.dataPoint,n=this.checkoutState.comment.dataPoint,i=this.getDataPoint(Nr.DESIGNATION),s=this.donationDataPoint.toObject(),a=this.getDonationAmount(this.donationDataPoint,e),r=this.donorNameDataPoint.toObject(),o=this.donorEmailDataPoint.toObject(),c=this.getDataPoint(Nr.CUSTOMER_TITLE).toObject(),l=this.getDataPoint(Nr.PHONE_NUMBER).toObject(),u=t.toObject(),d=this.questionsDataPoint.toObject(),h=this.dataPointRegistry.getDataPoint(Nr.TERMS_AND_CONDITIONS).toObject(),m=this.getDataPoint(Nr.ON_BEHALF_OF).toObject(),p=this.dataPointRegistry.getDataPoint(Nr.DONATE_ANONYMOUS).toObject(),g=this.getDataPoint(Nr.COMMUNICATION_CONSENT).toObject();return this.sessionAPI.update({donationType:Ae.CRYPTO,comment:n.isActive?n.comment:"",tribute:u.inHonorOf&&u.isActive?{labelType:u.labelType,type:u.type,inHonorOf:u.inHonorOf}:null,questions:d.questions,customer:{firstName:r.firstName,lastName:r.lastName,title:c.title,email:o.email,phone:l.phone,onBehalfOf:m.companyName,anonymousChecked:p.anonymousChecked,termsChecked:h.isAccepted,consent:Fv(g)},donation:{frequency:oe.ONCE,amount:a.amount,currency:s.currency,total:a.total,publicFee:0,goalKey:i.goalKey,goalName:i.goalName,hintsVariantName:Uv.NONE,hintDescription:"",_suggestedAmountHint:null},checkoutDefaults:this.getCheckoutDefaults(this.donationDataPoint)})}))}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get questionsDataPoint(){return this.checkoutState.questions.dataPoint}getCheckoutDefaults(e){return{amountOptions:this.checkoutConfiguration.defaultAmountOptions,defaultAmounts:this.checkoutConfiguration.defaultAmounts,frequency:e.frequency,currency:e.currency,frequencyAmountOptions:this.checkoutConfiguration.campaign.config.frequencies[e.frequency].amountOptions,defaultAmount:this.checkoutConfiguration.defaultAmounts[e.frequency]||0}}getDonationAmount(e,t){if((null==t?void 0:t.canUseAmountDefaults)&&!e.amount)return{amount:e.getDefaultAmountInCurrency(),total:e.getDefaultTotalInCurrency()};const n=e.toObject();return{amount:n.amount,total:n.total}}}var Bv=n(2650);const Hv=[{name:Uv.RANDOM,weight:1}];class qv{constructor(e){this.checkoutConfiguration=e}validate(){return{isValid:!0}}}class Gv extends qv{constructor(e,t){super(e),this.checkoutConfiguration=e,this.currencyService=t}getCurrencyName(e){return this.currencyService.getName(e)}getTotalInCustomCurrency(e){return this.currencyService.convert(this.total,this.currency,e)}}const Vv=1e7;class Kv extends Gv{constructor(e,t,n){super(e,t),this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this._currency="BTC",this._defaultCurrency="BTC",this._amount=0,this._defaultAmountInFiat=0,this._canModifyAmount=!0,this._canSelectCurrency=!0,this.currencyList.includes(this.currency)||(this._currency=this.currencyList[0],this._defaultCurrency=this.currencyList[0]),this.setAmountByDefault(this.defaultCurrency)}get currency(){return this._currency}get defaultCurrency(){return this._defaultCurrency}get amount(){return this._amount}get defaultAmountInFiat(){return this._defaultAmountInFiat}get canModifyAmount(){return this._canModifyAmount}get canSelectCurrency(){return this._canSelectCurrency}get frequency(){return oe.ONCE}get minAmount(){return 100}get maxAmount(){return 1e8}get defaultAmount(){return 5e5}get total(){return this.amount||0}get amountInUSD(){return this.amount?this.currencyService.convert(this.amount,this.currency,"USD"):null}get totalInUSD(){return this.currencyService.convert(this.total,this.currency,"USD")}get defaultFiatCurrency(){return this.checkoutConfiguration.campaign.config.defaultCurrency}get amountInDefaultFiat(){return this.currencyService.convert(this.amount||0,this.currency,this.defaultFiatCurrency)}get totalInDefaultCurrency(){return this.total}get currencyNetworkData(){return this.currencyService.getCryptoCurrency(this.currency)}get currencyList(){const e=this.checkoutConfiguration.company.cryptoProvider;return e?this.currencyService.getCurrencyCodesBySource(e):["BTC"]}getDefaultAmountsInCurrency(){return this.total}validate(){const e=null!==this.amount,t=!e||this.validateMinAmount(),n=!e||this.validateMaxAmount(),i={isValid:e&&t&&n,errors:{min:!t,max:!n,required:!e}};return{isValid:i.isValid,fields:{amount:i}}}toObject(){return{amount:this.amount||0,total:this.amount||0,currency:this.currency,frequency:this.frequency}}setAmountByDefault(e){this._amount=this.getDefaultAmountInCurrency(e),this._defaultAmountInFiat=this.amountInDefaultFiat}getDefaultAmountInCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currency;const t=this.currencyService.convert(this.defaultAmount,"USD",e),n=this.currencyService.toFloat(t,e),i=this.getAmountByDefaultMultiplier(n);return this.beautify(t*i,e)/i}getDefaultTotalInCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currency;return this.getDefaultAmountInCurrency(e)}setAmount(e){this._amount=e}setCurrency(e){this._currency=e}validateMinAmount(){return!!this.amountInUSD&&this.amountInUSD>=this.minAmount}validateMaxAmount(){return!this.amountInUSD||this.amountInUSD<=this.maxAmount}getAmountByDefaultMultiplier(e){let t=1;return e<10?t=this.getBaseMultiplier(e):e>Vv&&(t=this.getBaseMultiplier(e/Vv,0)),t}getBaseMultiplier(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=-Math.floor(Math.log10(e));return Math.pow(10,n+t)}beautify(e,t){return this.suggestionsService.beautify(e,t)}}class Yv{}var zv,Wv,$v,Xv,Qv;!function(e){e.MR="Mr",e.MRS="Mrs",e.MISS="Miss",e.MS="Ms",e.MX="Mx",e.SIR="Sir",e.DR="Dr",e.REV="Rev",e.DCN="Dcn",e.FR="Fr",e.BR="Br",e.SR="Sr",e.PROF="Prof"}(zv||(zv={})),function(e){e.M="M",e.MME="Mme",e.MLLE="Mlle",e.AUTRE="Autre"}(Wv||(Wv={})),function(e){e.HERR="Herr",e.FRAU="Frau",e.DR="Dr",e.PROF="Prof"}($v||($v={})),function(e){e.HERR="Herr",e.FRAU="Frau"}(Xv||(Xv={}));class Zv extends Yv{constructor(){super(...arguments),this.isEnabled=!0,this.titles=sN(Object.values(Xv))}}class Jv extends Yv{constructor(){super(...arguments),this.isEnabled=!1,this.titles=[]}}(Qv||(Qv={})).NONE="";const eN=Array.from(new Set([Qv.NONE,...Object.values(zv),...Object.values(Wv),...Object.values($v),...Object.values(Xv)]));class tN extends Yv{constructor(){super(...arguments),this.isEnabled=!0,this.titles=sN(Object.values(Wv))}}class nN extends Yv{constructor(){super(...arguments),this.isEnabled=!0,this.titles=sN(Object.values($v))}}class iN extends Yv{constructor(){super(...arguments),this.isEnabled=!0,this.titles=sN(Object.values(zv))}}function sN(e){return[Qv.NONE,...e]}var aN={isAvailableCustomerTitle:function(e){return!!e&&eN.includes(e)}},rN=function(e){return function(e,t){switch(e){case Tm.UNITED_KINGDOM:return new iN;case Tm.FRANCE:return new tN;case Tm.GERMANY:return new nN;case Tm.AUSTRIA:return new Zv;case Tm.CANADA:return t===I.D.FR_CA?new tN:new Jv;default:return new Jv}}(e.companyCountry,e.companyDefaultLocale)};class oN extends qv{static get defaultValidationResult(){return{isValid:!0,fields:{title:{isValid:!0,errors:{required:!1}}}}}constructor(e){super(e),this.checkoutConfiguration=e,this._title=Qv.NONE;const t=this.checkoutConfiguration.company;this._customerTitlesLogic=rN({companyCountry:t.country,companyDefaultLocale:t.localization.defaultLocale})}get isEnabled(){return this.checkoutConfiguration.campaign.config.customerTitle.show&&this._customerTitlesLogic.isEnabled}get isRequired(){return this.checkoutConfiguration.campaign.config.customerTitle.required&&this.isEnabled}get title(){return this._title}get titleList(){return this._customerTitlesLogic.titles}setTitle(e){this._title=e}toObject(){return{title:this.title}}validate(){const e=!this.isRequired||aN.isAvailableCustomerTitle(this.title);return{isValid:e,fields:{title:{isValid:e,errors:{required:!e}}}}}}class cN{constructor(e){this.deviceExperimentsSettings=e}getSuggestions(e){if(this.shouldSortSuggestions)return this.sortSuggestionsBasedOnCompanyExclusions(e)}getAmount(){if(this.shouldHideDefaultAmount)return this.showAmountBasedOnCompanyExclusions()}get shouldSortSuggestions(){return"ascSort"in this.deviceExperimentsSettings}get shouldHideDefaultAmount(){return"hasDefault"in this.deviceExperimentsSettings}sortSuggestionsBasedOnCompanyExclusions(e){return t=[...e],(n=this.deviceExperimentsSettings.ascSort?xe.ASC:xe.DESC)===xe.ASC?t.sort(((e,t)=>e-t)):n===xe.DESC?t.sort(((e,t)=>t-e)):t;var t,n}showAmountBasedOnCompanyExclusions(){if(!this.deviceExperimentsSettings.hasDefault)return null}}class lN{static convertMinAmount(e,t,n,i){let s=Math.max(t,e.convert(70,"USD",n));s=e.convert(s,n,i);const a=e.getDigits(i);return Math.ceil(s/Math.pow(10,a))*Math.pow(10,a)}constructor(e,t,n){var i,s;this.currencyService=t,this.suggestionsService=n,this.forceNullAmountWidgets=["FUNFXDEZPWX"],this.defaultData=Object.assign(Object.assign({},e),{disableCompanyExclusionLogic:{amounts:Boolean(null===(i=e.disableCompanyExclusionLogic)||void 0===i?void 0:i.amounts),suggestions:Boolean(null===(s=e.disableCompanyExclusionLogic)||void 0===s?void 0:s.suggestions)}}),this.currentData={frequency:this.defaultData.frequency,amount:this.defaultData.defaultAmount,minAmount:this.defaultData.minAmount||0,suggestions:this.defaultData.amountOptions,hintsAmounts:this.defaultData.hintsAmounts,isDonationEndDateActive:!this.defaultData.isExternalDonationEndDateShown||!!this.defaultData.isExternalDonationEndDateActive},this.setupCurrentData()}get amount(){return this.currentData.amount}get minAmount(){return this.currentData.minAmount}get isValidAmount(){return null!==this.currentData.amount&&this.currentData.amount>=this.currentData.minAmount}get suggestions(){return this.currentData.suggestions}get hintsAmounts(){return this.currentData.hintsAmounts||null}get currency(){return this.defaultData.currentCurrency}get currencyDigits(){return this.currencyService.getDigits(this.defaultData.currentCurrency)}get isDonationEndDateActive(){return this.currentData.isDonationEndDateActive}setDonationEndDateActive(e){this.currentData.isDonationEndDateActive=e}setAmount(e){this.currentData.amount=e,this.defaultData.disableAmountAI=!0}setCurrency(e,t){this.defaultData.previousCurrency=this.defaultData.currentCurrency,this.defaultData.currentCurrency=e,this.defaultData.disableAmountAI=!0,this.resetMinAmount(),t||(this.resetAmount(),this.applyNAIAmount(),this.applyRoundAmount()),this.resetSuggestions(),this.applyNAISuggestions(),this.applyRoundSuggestions(),this.resetHints(),this.applyRoundHints(),this.applyCompanyExclusions(),this.applyWidgetExclusions()}setSuggestionsAndDisableAi(e,t){this.defaultData.amountOptions=t,this.currentData.suggestions=e,this.defaultData.disableSuggestionsAI=!0}get needNAIAmount(){return Boolean(this.defaultData.aiEnabled&&!this.defaultData.showcase&&this.defaultData.trend&&!this.defaultData.disableAmountAI)}get needNAISuggestions(){return Boolean(this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI&&!this.defaultData.showcase&&this.defaultData.trend)}get suggestionsMultiplier(){return!this.defaultData.isLauncher&&this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI&&this.deviceExperimentsSettings.multiplySuggestions?1.4:1}get deviceExperimentsSettings(){return this.defaultData.experimentsSettings[this.defaultData.isMobile?u.Jy.MOBILE:u.Jy.DESKTOP]}setupCurrentData(){this.resetMinAmount(),this.resetAmount(),this.applyNAIAmount(),this.applyRoundAmount(),this.resetSuggestions(),this.applyNAISuggestions(),this.applyRoundSuggestions(),this.resetHints(),this.applyRoundHints(),this.applyCompanyExclusions(),this.applyWidgetExclusions()}resetMinAmount(){this.currentData.minAmount=lN.convertMinAmount(this.currencyService,this.defaultData.minAmount||0,this.defaultData.defaultCurrency,this.defaultData.currentCurrency)}resetAmount(){null!==this.currentData.amount&&(this.currentData.amount=this.currencyService.convert(this.currentData.amount,this.defaultData.previousCurrency,this.defaultData.currentCurrency,this.defaultData.aiEnabled&&!this.defaultData.disableAmountAI,this.defaultData.countryCode))}applyNAIAmount(){const e=this.defaultData.trend[this.currentData.frequency];var t,n;if(null!==this.currentData.amount&&this.needNAIAmount){let i=this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,!1,this.defaultData.countryCode);((n=this.currentData.amount)-e)/n*100>10&&(i=this.currentData.amount-this.currentData.amount/10),this.currentData.amount=e?i:(t=this.defaultData.xFactor,this.currentData.amount*(1+t/100))}}applyRoundAmount(){null!==this.currentData.amount&&(this.needNAIAmount||this.defaultData.previousCurrency!==this.defaultData.currentCurrency)&&(this.currentData.amount=this.suggestionsService.beautify(this.currentData.amount,this.defaultData.currentCurrency,this.currentData.minAmount))}resetSuggestions(){this.currentData.suggestions=this.defaultData.amountOptions.map((e=>this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI,this.defaultData.countryCode)))}applyNAISuggestions(){this.needNAISuggestions&&(this.currentData.suggestions=function(e,t){let n=[e/4,e/3,e/2,e,1.3*e];return 3===t.length&&(n=[e/2,e]),t=t.sort(((e,t)=>e-t)),n.forEach(((e,n)=>{const i=n+1;t[i]<5e4&&(t[i]=t[i]*(1+e/100))})),t=t.sort(((e,t)=>t-e))}(this.defaultData.xFactor,this.currentData.suggestions))}applyRoundSuggestions(){if(this.needNAISuggestions||this.defaultData.currentCurrency!==this.defaultData.defaultCurrency){const e=this.currentData.suggestions.map((e=>{const t=e*this.suggestionsMultiplier;return this.defaultData.aiEnabled?Math.max(t,this.currentData.minAmount):t}));this.currentData.suggestions=this.suggestionsService.beautify(e,this.defaultData.currentCurrency,this.currentData.minAmount)}}resetHints(){this.defaultData.hintsAmounts&&(this.currentData.hintsAmounts=this.defaultData.hintsAmounts.map((e=>this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,!1,this.defaultData.countryCode))))}applyRoundHints(){this.currentData.hintsAmounts&&this.defaultData.currentCurrency!==this.defaultData.defaultCurrency&&(this.currentData.hintsAmounts=this.suggestionsService.beautify(this.currentData.hintsAmounts,this.defaultData.currentCurrency,this.currentData.minAmount))}applyCompanyExclusions(){const e=this.defaultData.disableCompanyExclusionLogic.amounts||this.defaultData.disableCompanyExclusionLogic.suggestions;if(!this.defaultData.aiEnabled&&!e)return;const t=new cN(this.deviceExperimentsSettings),n=t.getSuggestions(this.currentData.suggestions);if(!n||this.defaultData.disableCompanyExclusionLogic.suggestions||this.defaultData.disableSuggestionsAI||(this.currentData.suggestions=n),this.defaultData.disableAmountAI)return;const i=t.getAmount();null!==i||this.defaultData.disableCompanyExclusionLogic.amounts||(this.currentData.amount=i)}applyWidgetExclusions(){this.defaultData.widgetKey&&this.forceNullAmountWidgets.includes(this.defaultData.widgetKey)&&(this.currentData.amount=null)}}class uN{static get frequencyOrder(){return he}static convertMinAmount(e,t,n,i){let s=Math.max(t,uN.getMinInWidgetCurrency(e,n));s=e.convert(s,n,i);const a=e.getDigits(i);return Math.ceil(s/Math.pow(10,a))*Math.pow(10,a)}static getMinInWidgetCurrency(e,t){return e.convert(70,"USD",t)}constructor(e,t,n,i){if(this.exchequerCurrencyService=t,this.currencyService=n,this.suggestionsService=i,this.currentFrequency=oe.ONCE,this.strategyMap=new Map,this._enabledFrequencies=[],this.frequencies=Object.keys(e.frequencies),this._enabledFrequencies=Object.entries(e.frequencies).filter((e=>{let[,t]=e;return t.enabled})).map((e=>{let[t]=e;return t})),this.initStrategies(e),e.forceDefaultAmount){const t=this.getCurrentCurrency();this.setCurrency(e.defaultCurrency),this.setAmounts(e.forceDefaultAmount),this.setCurrency(t)}}get enabledFrequencies(){return this._enabledFrequencies}get isDonationEndDateActive(){return this.getStrategy(this.currentFrequency).isDonationEndDateActive}getCurrentFrequency(){return this.currentFrequency}getCurrentAmount(){return this.getStrategy(this.currentFrequency).amount}getCurrentCurrency(){return this.getStrategy(this.currentFrequency).currency}getAllAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).amount;return e}getAllMinAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).minAmount;return e}getAllSuggestions(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).suggestions;return e}setDonationEndDateActive(e){this.getStrategy(this.currentFrequency).setDonationEndDateActive(e)}setSuggestionsAndDisableAi(e,t,n){this.getStrategy(n).setSuggestionsAndDisableAi(e,t)}getAllHintsAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).hintsAmounts;return e}getGuessedCurrency(){return this.exchequerCurrencyService.guessedCurrency}getGuessedCurrenciesList(){return this.exchequerCurrencyService.guessedCurrenciesList}setFrequency(e){return this.currentFrequency=e,this}setAmount(e){return this.getStrategy(this.currentFrequency).setAmount(e),this}setAmountForFrequency(e,t){return this.getStrategy(t).setAmount(e),this}setAmounts(e){return this.strategyMap.forEach((t=>{t.setAmount(e)})),this}setCurrency(e,t){return this.strategyMap.forEach((n=>{n.setCurrency(e,t)})),this}getHighestFrequency(){if(1===this.enabledFrequencies.length)return this.enabledFrequencies[0];let e=this.enabledFrequencies[0];for(const t of this.enabledFrequencies)uN.frequencyOrder[t]>uN.frequencyOrder[e]&&(e=t);return e}getLowestFrequency(){if(1===this.enabledFrequencies.length)return this.enabledFrequencies[0];let e=this.enabledFrequencies[0];for(const t of this.enabledFrequencies)uN.frequencyOrder[t]<uN.frequencyOrder[e]&&(e=t);return e}getCurrentState(){const e=this.getStrategy(this.currentFrequency);return{frequency:this.currentFrequency,amount:e.amount,minAmount:e.minAmount,isValidAmount:e.isValidAmount,suggestions:e.suggestions,hintsAmounts:e.hintsAmounts,currency:e.currency,currencyDigits:e.currencyDigits,guessedCurrenciesList:this.exchequerCurrencyService.guessedCurrenciesList,guessedCurrency:this.exchequerCurrencyService.guessedCurrency}}getStrategy(e){const t=this.strategyMap.get(e);if(!t)throw new Error(`Strategy for frequency ${e} is not defined`);return t}initStrategies(e){for(const t of this.frequencies){e.frequencies[t].default&&(this.currentFrequency=t);const n=ue[t].map(((n,i)=>e.frequencies[t].amountOptions[i]||n)),i=e.hintsAmounts&&e.hintsAmounts[t]||null,s=this.shouldDisableAi(t,e);this.strategyMap.set(t,new lN({widgetKey:e.widgetKey,countryCode:e.countryCode,defaultCurrency:e.defaultCurrency,isMobile:e.isMobile,isLauncher:e.isLauncher,showcase:e.showcase,aiEnabled:e.aiEnabled&&!s,disableAmountAI:e.disableAmountAI,disableSuggestionsAI:e.disableSuggestionsAI,trend:e.trend,xFactor:e.xFactor,disableCompanyExclusionLogic:e.disableCompanyExclusionLogic,experimentsSettings:e.experimentsSettings,frequency:t,minAmount:e.frequencies[t].minAmount,defaultAmount:e.frequencies[t].defaultAmount,amountOptions:n,currentCurrency:this.exchequerCurrencyService.defaultCurrentCurrency,previousCurrency:this.exchequerCurrencyService.defaultPreviousCurrency,isExternalDonationEndDateShown:e.isExternalDonationEndDateShown,isExternalDonationEndDateActive:e.isExternalDonationEndDateActive,hintsAmounts:i},this.currencyService,this.suggestionsService))}}shouldDisableAi(e,t){return"FUNGQSSKQKB"===t.widgetKey&&t.isMobile&&e===oe.ONCE}}class dN{constructor(e){this.defaultData=e,this._guessedCurrenciesList=[],this._guessedCurrency="",this._defaultPreviousCurrency="",this._defaultCurrentCurrency="",this.initGuessedCurrenciesList(),this.initGuessedCurrency(),this.initCurrency()}get guessedCurrenciesList(){return this._guessedCurrenciesList}get guessedCurrency(){return this._guessedCurrency}get defaultPreviousCurrency(){return this._defaultPreviousCurrency}get defaultCurrentCurrency(){return this._defaultCurrentCurrency}initGuessedCurrenciesList(){const e=this.defaultData.defaultCurrency,t=this.defaultData.currencies.countryCurrencies[0],n=this.defaultData.currencies.stripe.default,i=this.defaultData.currencies.countryCurrencies.slice(1),s=this.defaultData.currencies.langCurrencies,a=this.defaultData.currencies.stripe.list;var r;this._guessedCurrenciesList=(r=[e,t,n,...i,...s].filter((e=>a.includes(e))),[...new Set(r)])}initGuessedCurrency(){const e=this.defaultData.currencies.countryCurrencies;!this.defaultData.showcase&&this.defaultData.guessCurrency&&this.defaultData.isCurrencyEnabled&&e.length&&this._guessedCurrenciesList.includes(e[0])?this._guessedCurrency=e[0]:this._guessedCurrency=this.defaultData.defaultCurrency||"USD"}initCurrency(){this._defaultCurrentCurrency=this.defaultData.defaultCurrency,this._defaultPreviousCurrency=this.defaultData.defaultCurrency,this._guessedCurrency!==this._defaultCurrentCurrency&&(this._defaultCurrentCurrency=this._guessedCurrency)}}function hN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(Date.parse(new Date(e).toISOString())+1e3*(new Date).getTimezoneOffset()*60);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}class mN extends Gv{static get defaultValidationResult(){return{isValid:!0,fields:{amount:{isValid:!0,errors:{required:!1,min:!1,max:!1}}}}}constructor(e,t,n,i,s,a,r){super(e,t),this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this.experiments=i,this.userSession=s,this.transactionCosts=a,this.suggestedAmountHintsAI=r,this._defaultAmount=null,this._feeCoveringSuggestion=u.XN.ONLY_NO,this.synchronizeHintsAmounts(),this.synchronizeFee()}get defaultAmount(){return this._defaultAmount}get defaultTotal(){var e;return this.transactionCosts.getTotal(null!==(e=this.defaultAmount)&&void 0!==e?e:0,this.currency)}get amount(){return this.exchequer.getCurrentAmount()}get totalInUSD(){return this.currencyService.convert(this.total,this.currency,"USD")}get totalInDefaultCurrency(){return this.currencyService.convert(this.total,this.currency,this.defaultCurrency)}get fee(){return this.transactionCosts.getFee(this.amount||0,this.currency)}get processingFee(){return this.transactionCosts.getProcessingFee(this.amount||0,this.currency)}get isRecurring(){return this.frequency!==oe.ONCE}get frequency(){return this.exchequer.getCurrentFrequency()}get currency(){return this.exchequer.getCurrentCurrency()}get defaultFrequency(){return this.exchequerWithDefaults.getCurrentFrequency()}get defaultAmounts(){return this.exchequerWithDefaults.getAllAmounts()}get allAmountOptions(){return this.exchequer.getAllSuggestions()}get amountOptions(){return this.getAmountOptions(this.frequency)}get hintOptions(){return this.suggestedAmountHintsAI?this.suggestedAmountHintsAI.getHintsByFrequency(this.frequency):null}get currentHint(){var e;return(null===(e=this.hintOptions)||void 0===e?void 0:e.find((e=>e.default)))||null}get hintsVariantName(){var e;return this.currentHint&&(null===(e=this.suggestedAmountHintsAI)||void 0===e?void 0:e.variantName)||Uv.NONE}get minAmount(){return this.getMinAmount(this.frequency)}get maxAmount(){const e=(0,jh.Bm)(this.currency),t="9".repeat(e);return parseInt(t,10)}get minTotal(){return this.transactionCosts.getTotal(this.minAmount,this.currency)}get canModifyAmount(){var e;if(!1===this.externalCheckoutData.modifyAmount)return!1;if(!1===this.checkoutConfiguration.queryParams.modifyAmount)return!1;const t=null===(e=this.checkoutConfiguration.externalConfig.checkoutIntent)||void 0===e?void 0:e.checkoutSettings;return!t||"boolean"!=typeof t.modifyAmount||t.modifyAmount}get canSelectCurrency(){return this.canSelectCurrencyForFrequency(this.frequency)}get defaultCurrency(){return this.checkoutConfiguration.campaign.config.defaultCurrency}get currencySymbol(){return this.currencyService.getSymbol(this.currency)}get lowFrequency(){return this.exchequer.getLowestFrequency()}get highFrequency(){return this.exchequer.getHighestFrequency()}get enabledFrequencies(){return this.exchequer.enabledFrequencies}get total(){const e=this.checkoutConfiguration.infrastructureParams.showcase?1e4:0;return this.transactionCosts.getTotal(this.amount||e,this.currency)}get currencyList(){return[...this.checkoutConfiguration.company.stripeCurrencies.list]}get guessedCurrency(){return this._guessedCurrency||(this._guessedCurrency=this.exchequer.getGuessedCurrency()),this._guessedCurrency}get guessedCurrencyList(){return this._guessedCurrencyList||(this._guessedCurrencyList=this.exchequer.getGuessedCurrenciesList()),this._guessedCurrencyList}get isFeeCovered(){return this.transactionCosts.isCovered}get isCustomFeeCoveredValue(){return this.transactionCosts.isCustomCoveredValue}get canModifyFrequency(){return Object.values(this.checkoutConfiguration.campaign.config.frequencies).filter((e=>e.enabled)).length>1}get amountInUSD(){return this.amount?this.currencyService.convert(this.amount,this.currency,"USD"):null}get includeFees(){return this.transactionCosts.includeFees}get donationHasEndDate(){return this.checkoutConfiguration.campaign.config.frequencies[this.frequency].hasEndDate}get donationEndDate(){const e=this.checkoutConfiguration.campaign.config.frequencies[this.frequency].endDate;return e?hN(e):null}get isDonationEndDateActive(){return this.exchequer.isDonationEndDateActive}get showDonationEndDate(){if(!this.donationHasEndDate||!this.donationEndDate)return!1;const e=hN();return this.donationEndDate>=e}set amount(e){this.exchequer.setAmounts(e),this.checkForAmountDefault(e)}set frequency(e){this.exchequer.setFrequency(e),this.checkForAmountDefault(this.amount),e===oe.ONCE||this.canSelectCurrency||(this.currency=this.defaultCurrency)}set currency(e){const t=this.getDefaultAmountsInCurrency(this.frequency)!==this.amount;this.exchequerWithDefaults.setCurrency(e),this.exchequer.setCurrency(e,t),this._defaultAmount=this.getDefaultAmountsInCurrency(this.frequency)}set isFeeCovered(e){this.transactionCosts.isCovered=e}set isCustomFeeCoveredValue(e){this.transactionCosts.isCustomCoveredValue=e}changeDefaultAmountForFrequency(e,t){this.exchequerWithDefaults.setAmountForFrequency(e,t),this.exchequer.setAmountForFrequency(e,t),this.frequency===t&&(this._defaultAmount=this.getDefaultAmountsInCurrency(this.frequency))}setSuggestionsAndDisableAi(e,t,n){this.exchequerWithDefaults.setSuggestionsAndDisableAi(e,t,n),this.exchequer.setSuggestionsAndDisableAi(e,t,n)}setDonationEndDateActive(e){this.exchequer.setDonationEndDateActive(e)}getDefaultAmountsInCurrency(e){const t=this.defaultAmounts[e];if(void 0===t)throw new Error(`Default amount for frequency ${e} is not defined`);return t}getAmountOptions(e){const t=this.allAmountOptions[e];if(void 0===t)throw new Error(`Amount options for frequency ${e} are not defined`);return t}getMinAmount(e){const t=this.minAmounts[e];if(void 0===t)throw new Error(`Min amount for frequency ${e} is not defined`);return t}validate(){const e=null!==this.amount,t=!e||this.validateMinAmount(),n=!e||this.validateMaxAmount(),i={isValid:t&&n&&e,errors:{min:!t,max:!n,required:!e}};return{isValid:i.isValid,fields:{amount:i}}}snapshotFeeCoveringSuggestion(){this.isCustomFeeCoveredValue||(this.includeFees!==u.XN.ONLY_NO?this.includeFees!==u.XN.ONLY_YES?this._feeCoveringSuggestion=this.isFeeCovered?u.XN.DEFAULT_YES:u.XN.DEFAULT_NO:this._feeCoveringSuggestion=u.XN.ONLY_YES:this._feeCoveringSuggestion=u.XN.ONLY_NO)}isFrequencyEnabled(e){return this.exchequer.enabledFrequencies.includes(e)}toObject(){return{amount:this.amount||0,currency:this.currency,frequency:this.frequency,total:this.total,publicFee:this.processingFee,amountOptions:this.amountOptions,feeCoveringSuggestion:this._feeCoveringSuggestion,hintAmounts:this.hintsAmounts,hintsVariantName:this.hintsVariantName,currentHint:this.currentHint||null,maxDate:this.showDonationEndDate&&this.donationEndDate&&this.isDonationEndDateActive?this.donationEndDate.toISOString():null}}setDefaultAmounts(){this.exchequer.enabledFrequencies.forEach((e=>{var t;e!==this.frequency&&((null===(t=this.suggestedAmountHintsAI)||void 0===t?void 0:t.getHintsByFrequency(e))?this.setDefaultHintForFrequency(e):this.setDefaultAmountForFrequency(e))}))}synchronizeHintsAmounts(){if(!this.suggestedAmountHintsAI)return;const e=this.exchequer.getAllHintsAmounts();this.suggestedAmountHintsAI.updateHintsByAmounts(e),this.currentHint&&this.exchequer.setAmount(this.currentHint.amount)}synchronizeFee(){this.transactionCosts.calculateFeeAvailability({amount:this.amount,currency:this.currency}),this.isCustomFeeCoveredValue||this.includeFees!==u.XN.SMART_COVERING||(this.transactionCosts.calculateSmartFeeCovering({amountInUSD:this.amountInUSD,frequency:this.frequency}),this.snapshotFeeCoveringSuggestion())}updateHintsByDefault(e){this.suggestedAmountHintsAI&&this.suggestedAmountHintsAI.updateHintsByDefault(this.frequency,e)}resetHintsByDefault(){var e;if(this.suggestedAmountHintsAI)for(const t in this.suggestedAmountHintsAI.hints)null===(e=this.suggestedAmountHintsAI)||void 0===e||e.updateHintsByDefault(t,null)}isCurrencyEnabledForFrequency(e,t){return this.isCurrencyEnabled(e,t)}get minAmounts(){return this.exchequer.getAllMinAmounts()}get hintsAmounts(){return this.suggestedAmountHintsAI?this.suggestedAmountHintsAI.hintsAmounts:{[oe.ONCE]:[],[oe.DAILY]:[],[oe.WEEKLY]:[],[oe.BIWEEKLY]:[],[oe.EVERY_4_WEEKS]:[],[oe.MONTHLY]:[],[oe.BIMONTHLY]:[],[oe.QUARTERLY]:[],[oe.SEMIANNUAL]:[],[oe.ANNUAL]:[]}}get externalCheckoutData(){return this.checkoutConfiguration.externalConfig.checkoutData||{}}get exchequer(){return this._exchequer||(this._exchequer=this.getExchequer()),this._exchequer}get exchequerWithDefaults(){return this._exchequerWithDefaults||(this._exchequerWithDefaults=this.getExchequer()),this._exchequerWithDefaults}get guessCurrency(){return this.checkoutConfiguration.campaign.config.guessCurrency}get isMobile(){return this.checkoutConfiguration.infrastructureParams.isMobile}getExchequer(){var e,t,n,i,s;const a=this.checkoutConfiguration.campaign.config,r=this.checkoutConfiguration.user,o=this.checkoutConfiguration.currencies,c=this.checkoutConfiguration.company,l=k(a.frequencies),u=function(e,t){const n=e.storage;let i=0;const s=n.getField(Ve.X_FACTOR);if(s)return Number(s)||0;if(!e.sessionAt)return i;try{const n=Date.now(),s=e.sessionPage,a=n-e.sessionAt;t&&(i+=10),/win/i.test(window.navigator.platform)&&(i-=10),/mac/i.test(window.navigator.platform)&&(i+=5),a>648e4&&(i+=10),s<=2&&(i+=15),s>5&&(i+=5),a<6e3&&(i+=5),a>=18e3&&(i+=10)}catch(e){i=0,console.error(e)}return i&&n.setField(Ve.X_FACTOR,String(i)),i}(this.userSession,this.isMobile),d=!(!this.checkoutConfiguration.launcherParams.key&&!this.checkoutConfiguration.launcherParams.elementKey),h=this.getInitialFrequency(),m=this.canSelectCurrencyForFrequency(h),p={langCurrencies:[...o.langCurrencies]||[],countryCurrencies:[...o.countryCurrencies]||[],stripe:{default:c.stripeCurrencies.default,list:[...c.stripeCurrencies.list]}},g=new dN({currencies:p,defaultCurrency:this.defaultCurrency,guessCurrency:this.guessCurrency,isCurrencyEnabled:m,showcase:this.checkoutConfiguration.infrastructureParams.showcase}),y=new uN({widgetKey:this.checkoutConfiguration.campaign.key,countryCode:r.address.countryCode||"US",frequencies:l,currencies:p,defaultCurrency:this.defaultCurrency,isMobile:this.isMobile,isLauncher:d,showcase:this.checkoutConfiguration.infrastructureParams.showcase,aiEnabled:a.enableAI,disableAmountAI:this.checkoutConfiguration.hasExternalAmount,guessCurrency:this.guessCurrency,isCurrencyEnabled:a.currencyEnabled,trend:a.trend,xFactor:u,experimentsSettings:a.experimentsSettings,hintsAmounts:this.hintsAmounts,isExternalDonationEndDateShown:!!(null===(e=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===e?void 0:e.showEndDate),isExternalDonationEndDateActive:!!(null===(t=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===t?void 0:t.endDateEnabled)},g,this.currencyService,this.suggestionsService),f=this.getExternalFrequency();f&&y.setFrequency(f);const S=y.getCurrentCurrency(),E=this.getExternalCurrency(y.getCurrentFrequency()),A=this.getExternalAmount(E||S);if(!A&&E&&y.setCurrency(E),A&&(E?(y.setCurrency(E),y.setAmount(A)):(y.setCurrency(a.defaultCurrency),y.setAmount(A),y.setCurrency(S)),this.resetHintsByDefault()),this.externalCheckoutData.selectedHint){const e=y.getCurrentFrequency(),t=null===(i=null===(n=this.suggestedAmountHintsAI)||void 0===n?void 0:n.getHintsByFrequency(e))||void 0===i?void 0:i.find((e=>{var t;return e.id===(null===(t=this.externalCheckoutData.selectedHint)||void 0===t?void 0:t.id)}));t&&(null===(s=this.suggestedAmountHintsAI)||void 0===s||s.updateHintsByDefault(e,t))}return this._defaultAmount=y.getCurrentAmount(),y}validateMinAmount(){return!!this.amount&&this.amount>=this.minAmount}validateMaxAmount(){if(null===this.amount)return!0;const{length:e}=this.amount.toString();return e<=(0,jh.Bm)(this.currency)}checkForAmountDefault(e){this._defaultAmount=this.getDefaultAmountsInCurrency(this.frequency),this._defaultAmount===e&&this.exchequer.enabledFrequencies.forEach((e=>{this.setDefaultAmountForFrequency(e)}))}getExternalFrequency(){return this.externalCheckoutData.recurring&&Se.isFrequencyEnabled(this.checkoutConfiguration.campaign.config.frequencies,this.externalCheckoutData.recurring)?this.externalCheckoutData.recurring:this.checkoutConfiguration.queryParams.recurring&&Se.isFrequencyEnabled(this.checkoutConfiguration.campaign.config.frequencies,this.checkoutConfiguration.queryParams.recurring)?this.checkoutConfiguration.queryParams.recurring:null}getExternalCurrency(e){const t=this.externalCheckoutData.currency;if(t&&this.isCurrencyEnabled(t,e))return t;const n=this.checkoutConfiguration.queryParams.currency;return n&&this.isCurrencyEnabled(n,e)?n:null}getExternalAmount(e){return this.externalCheckoutData.amount||this.currencyService.fromFloat(this.checkoutConfiguration.queryParams.amount||0,e)}isCurrencyEnabled(e,t){return!!this.currencyList.includes(e)&&!!this.canSelectCurrencyForFrequency(t)}canSelectCurrencyForFrequency(e){const t=this.checkoutConfiguration.campaign.config;return e===oe.ONCE?t.currencyEnabled:t.currencyEnabled&&t.currencyEnabledRecurrings}setDefaultAmountForFrequency(e){const t=this.getDefaultAmountsInCurrency(e);this.exchequer.setAmountForFrequency(t,e)}setDefaultHintForFrequency(e){var t,n,i,s;const a=null===(t=this.suggestedAmountHintsAI)||void 0===t?void 0:t.hints[e],r=null===(n=this.suggestedAmountHintsAI)||void 0===n?void 0:n.defaultHints[e];if(!a||!r)return;const o=null!==(i=a.find((e=>e.default)))&&void 0!==i?i:r.find((e=>e.default));o&&(null===(s=this.suggestedAmountHintsAI)||void 0===s||s.updateHintsByDefault(e,o),this.exchequer.setAmountForFrequency(o.amount,e))}getInitialFrequency(){const{frequencies:e}=this.checkoutConfiguration.campaign.config,t=Object.keys(e),n=this.getExternalFrequency(),i=t.find((t=>e[t].default));return n||i||oe.ONCE}}class pN extends qv{static get defaultValidationResult(){return{isValid:!0,fields:{line1:{isValid:!0,errors:{required:!1}},line2:{isValid:!0,errors:{required:!1}},city:{isValid:!0,errors:{required:!1}},region:{isValid:!0,errors:{required:!1}},postal:{isValid:!0,errors:{required:!1}},countryCode:{isValid:!0,errors:{required:!1}}}}}static validateLine1(e){const t=!e.isRequired||!!e.line1;return{isValid:t,errors:{required:!t}}}static validateLine2(){return{isValid:!0,errors:{required:!1}}}static validateCity(e){const t=!(e.isRequired||e.line1)||!!e.city;return{isValid:t,errors:{required:!t}}}static validateCountryCode(e){const t=!(e.isRequired||e.line1)||!!e.countryCode;return{isValid:t,errors:{required:!t}}}constructor(e,t,n,i,s){super(e),this.checkoutConfiguration=e,this.addressService=t,this.addressValidationAPI=n,this.countriesService=i,this.mailingAddressCustomization=s,this._isEnabled=!1,this._isRequired=!1,this._line1="",this._line2="",this._city="",this._postal="",this._region="",this._countryCode=this.checkoutConfiguration.user.address.countryCode,this._isSkipped=!1,this.shouldAutofillRegion&&(this._region=this.formatGeoIpRegion(this.checkoutConfiguration.user.address.region,this.countryCode)),this._countryCode||(this._countryCode=this.getDefaultCountryCode())}get isEnabled(){return this._isEnabled}get isRequired(){return this._isRequired}get line1(){return this._line1}get line2(){return this._line2}get city(){return this._city}get postal(){return this._postal}get region(){return this._region}get countryCode(){return this._countryCode}get isSkipped(){return this._isSkipped}setLine1(e){this._line1=e}setLine1IfEmpty(e){this.line1.trim()||this.setLine1(e)}setLine2(e){this._line2=e}setLine2IfEmpty(e){this.line2.trim()||this.setLine2(e)}setCity(e){this._city=e}setCityIfEmpty(e){this.city.trim()||this.setCity(e)}setPostal(e){this._postal=e}setPostalIfEmpty(e){this.postal.trim()||this.setPostal(e)}setRegion(e){this._region=e}setRegionIfEmpty(e){this.region.trim()||this.setRegion(e)}setCountryCode(e){const t=this.mailingAddressCustomization.getPredefinedRegions({country:this.countryCode}),n=this.mailingAddressCustomization.getPredefinedRegions({country:e}),i=this.mailingAddressCustomization.isRegionEnabled({country:e});(t||n||!i)&&(this._region=""),this._countryCode=e}setCountryCodeIfEmptyAddress(e){this.line1.trim()||this.setCountryCode(e)}setComputedAvailability(e){this._isEnabled=e.isEnabled,this._isRequired=e.isRequired}getDetails(e,t){return this.addressService.getDetails({place:e,restrictCountries:[this.countryCode],sessionToken:t})}getSubplaces(e){return this.addressService.getSubplaces(Object.assign({},e))}getPlaces(e){return this.addressService.getPlaces(Object.assign({},e))}checkShouldValidateOnServer(){return!this.checkoutConfiguration.infrastructureParams.showcase&&(this.isRequired||!!this.line1)}toObject(){const e={isRequired:this.isRequired,line1:this.line1.trim(),city:this.city.trim(),region:this.region.trim(),postal:this.postal.trim(),countryCode:this.countryCode.trim()},t=this.line2.trim();return t&&(e.line2=t),e}validate(){const e=this.toObject(),t=pN.validateLine1(e),n=pN.validateLine2(),i=pN.validateCity(e),s=this.validateRegion(e),a=this.validatePostal(e),r=pN.validateCountryCode(e);return{isValid:t.isValid&&n.isValid&&i.isValid&&s.isValid&&a.isValid&&r.isValid,fields:{line1:t,line2:n,city:i,region:s,postal:a,countryCode:r}}}validateAddress(){return(0,l.sH)(this,void 0,void 0,(function*(){const{validated:e,valid:t}=yield this.addressValidationAPI.validate({line1:this.line1,line2:this.line2,city:this.city,region:this.region,postal:this.postal,countryCode:this.countryCode});return!e||t}))}shouldFindSubplaces(e){return this.addressService.shouldFindSubplaces({place:e,restrictCountries:[this.countryCode]})}setSkipped(e){this._isSkipped=e}get shouldAutofillRegion(){return!!this.checkoutConfiguration.infrastructureParams.livemode&&!!this.mailingAddressCustomization.isRegionEnabled({country:this.countryCode})}formatGeoIpRegion(e,t){const n=this.mailingAddressCustomization.getPredefinedRegions({country:t});if(!n)return e;let i;if(Array.isArray(n))i=n.find((t=>{let{name:n}=t;return n.toLowerCase()===e.toLowerCase()}));else for(const t of Object.values(n))if(i=t.find((t=>{let{name:n}=t;return n.toLowerCase()===e.toLowerCase()})),i)break;return i?i.code:e}getDefaultCountryCode(){return this.countriesService.getMailingAddressCountriesList()[0].countryCode}validateRegion(e){let t=e.isRequired||!!e.line1;this.mailingAddressCustomization.isRegionRequired({country:e.countryCode})||(t=!1);const n=!t||!!e.region;return{isValid:n,errors:{required:!n}}}validatePostal(e){let t,n=e.isRequired||!!e.line1||!!e.postal;if(this.mailingAddressCustomization.isPostalCodeRequired({country:e.countryCode})||(n=!1),n){const n=this.mailingAddressCustomization.getPostalCodeValidation({country:e.countryCode});t=n?n.test(e.postal):!!e.postal}else t=!0;return{isValid:t,errors:{required:!t}}}}class gN extends qv{constructor(){super(...arguments),this._isActive=!1,this._companyName=""}static get defaultValidationResult(){return{isValid:!0,fields:{onBehalfOf:{isValid:!0,errors:{required:!1,minLength:!1}}}}}get isEnabled(){return this.checkoutConfiguration.campaign.config.showBehalfOf}get isActive(){return this._isActive}get companyName(){return this.isActive?this._companyName:""}get isOnBehalfOf(){return!!this.isEnabled&&Boolean(this.companyName)}setIsActive(e){this._isActive=e}setCompanyName(e){this._companyName=e}toObject(){return{companyName:this.companyName}}validate(){const e=!this.isEnabled||!this.isActive||this.validateCompanyName();return{isValid:e,fields:{onBehalfOf:{isValid:e,errors:{required:!(!this.isEnabled||!this.isActive||this.companyName),minLength:!e}}}}}validateCompanyName(){return!(!this.companyName||this.companyName.length<2||this.companyName.match(/^\d+$/)||"mrs."===this.companyName.toLowerCase())}}const yN=(e,t)=>!!e&&e.length>=t,fN=e=>!!e&&/^(?!anonymous$)([^!_@#$%^*+=~[\]{};:\\|?`]+$)/i.test(e),SN=[" ","","","","","","","","","","","","","\u2028","","","","\t","\n","\f","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\ufeff","","","C","9","3","4","5","6","7","8","9","A","1","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","0"];function EN(e){const t=new Set([...SN," "]);let n=0,i=e.length;for(;n<i&&t.has(e.charAt(n));)n++;for(;i>n&&t.has(e.charAt(i-1));)i--;return e.slice(n,i)}class AN extends qv{static get defaultValidationResult(){return{isValid:!0,fields:{firstName:{isValid:!0,errors:{required:!1,minLength:!1,characters:!1}},lastName:{isValid:!0,errors:{required:!1,minLength:!1,characters:!1}}}}}constructor(e,t){super(e),this.checkoutConfiguration=e,this.validationSettings=t,this._firstName=this.checkoutConfiguration.queryParams.firstName||"",this._lastName=this.checkoutConfiguration.queryParams.lastName||""}get firstName(){return this._firstName.substring(0,this.validationSettings.MAX_LENGTH)}get lastName(){return this._lastName.substring(0,this.validationSettings.MAX_LENGTH)}get fullName(){return`${this.firstName} ${this.lastName}`.trim()}setFirstName(e){this._firstName=e}setFirstNameIfEmpty(e){this.firstName.trim()||this.setFirstName(e)}setLastName(e){this._lastName=e}setLastNameIfEmpty(e){this.lastName.trim()||this.setLastName(e)}setFullName(e){const t=e.split(" ").filter(Boolean);this.setFirstName(t[0]),t.length>1&&this.setLastName(t[t.length-1])}setFullNameIfEmpty(e){this.fullName.trim()||this.setFullName(e)}validate(){const e=this.toObject(),t=yN(e.firstName,this.validationSettings.MIN_LENGTH),n=fN(e.firstName),i={isValid:t&&n,errors:{required:!e.firstName,minLength:!t,characters:!n}},s=yN(e.lastName,this.validationSettings.MIN_LENGTH),a=fN(e.lastName),r={isValid:s&&a,errors:{required:!e.lastName,minLength:!s,characters:!a}};return{isValid:i.isValid&&r.isValid,fields:{firstName:i,lastName:r}}}toObject(){return{firstName:EN(this.firstName),lastName:EN(this.lastName)}}}class CN extends qv{constructor(){super(...arguments),this._email=this.checkoutConfiguration.queryParams.email||""}static get defaultValidationResult(){return{isValid:!0,fields:{email:{isValid:!0,errors:{email:!1,required:!1}}}}}get email(){return this._email}get emailConsent(){return{isEnabled:this.checkoutConfiguration.featureConfig.emailConsent}}setEmail(e){this._email=e}setEmailIfEmpty(e){this.email.trim()||this.setEmail(e)}validate(){const e=this.toObject(),t=mt(e.email),n={isValid:t,errors:{required:!e.email,email:!t}};return{isValid:n.isValid,fields:{email:n}}}toObject(){return{email:this.email.trim()}}}class vN extends qv{constructor(){super(...arguments),this._phone=null,this._countryCode=this.checkoutConfiguration.user.address.countryCode,this._cleanPhone=null}static get defaultValidationResult(){return{isValid:!0,fields:{phone:{isValid:!0,errors:{required:!1,invalid:!1}}}}}get isEnabled(){return this.checkoutConfiguration.campaign.config.showPhone}get isRequired(){return this.checkoutConfiguration.campaign.config.phoneRequired}get phone(){return this._phone}get countryCode(){return this._countryCode}get isLegalTextEnabled(){return this.checkoutConfiguration.campaign.config.showPhoneLegalText}get phoneLegalText(){return this.checkoutConfiguration.campaign.config.phoneLegalText}setPhone(e){this._phone=e}setPhoneIfEmpty(e){var t;(null===(t=this.phone)||void 0===t?void 0:t.trim())||this.setPhone(e)}setCountryCode(e){this._countryCode=e}setCountryCodeIfEmptyPhone(e){var t;(null===(t=this.phone)||void 0===t?void 0:t.trim())||this.setCountryCode(e)}setCleanPhone(e){this._cleanPhone=e}toObject(){return{phone:this.isEnabled?this._cleanPhone||"":null}}validate(){const e=this.isRequired&&!this.phone,t=(this.isRequired||!!this.phone)&&!function(e){if(!e)return!1;const t=e.replace(/[^\d]/g,"");return t.length>=7&&t.length<=15}(this.phone),n=!e&&!t;return{isValid:n,fields:{phone:{isValid:n,errors:{required:e,invalid:t}}}}}isFullPhoneNumberFilled(){return Boolean(this.phone&&this.countryCode)}}class NN extends qv{static isQuestionValid(e){return e.type===Lu.DATE&&!Qe()||(e.type===Lu.DATE&&e.answer?Boolean(e.isValid):!e.required||NN.isRequiredQuestionValid(e))}static isRequiredQuestionValid(e){return e.type===Lu.CHECKBOX?!0===e.answer:e.type===Lu.MULTIOPTION&&Array.isArray(e.answer)?!!e.answer.filter(Boolean).length:Boolean(e.answer)}constructor(e){if(super(e),this.checkoutConfiguration=e,this._questions=new Map,e.campaign.config.showQuestions&&this.campaign.config.questions)for(const e of this.campaign.config.questions){const t=e.options||[];let n=e.key;this.checkoutConfiguration.showcase&&!n&&(n=e.id),this._questions.set(n,{answer:Array.isArray(e.answer)?[...e.answer]:e.answer,code:e.code,createdAt:e.createdAt,key:n,id:e.id,options:[...t],question:e.question,required:e.required,type:e.type})}}get isEnabled(){return!!this.campaign.config.questions.length&&this.campaign.config.showQuestions}get questions(){return this._questions}setAnswer(e,t,n){const i=this.getQuestion(e);i.answer=t,i.isValid=n}toObject(){return{questions:k([...this.questions.values()])}}validate(){return this.validateQuestionsByKeys([...this.questions.keys()])}validateQuestionsByKeys(e){const t={};return[...this.questions.values()].filter((t=>{let{key:n}=t;return e.includes(n)})).forEach((e=>{t[e.key]={isValid:NN.isQuestionValid(e)}})),{isValid:Object.values(t).every((e=>{let{isValid:t}=e;return t})),fields:t}}getQuestion(e){const t=this.questions.get(e);if(!t)throw new bN(e);return t}getAnswer(e){return this.getQuestion(e).answer}get campaign(){return this.checkoutConfiguration.campaign}}class bN extends Error{constructor(e){super(`Question not found: ${e}`)}}class PN extends qv{constructor(){super(...arguments),this._isAccepted=this.checkoutConfiguration.campaign.config.termsChecked}static get defaultValidationResult(){return{isValid:!0,fields:{isAccepted:{isValid:!0,errors:{required:!1}}}}}get isEnabled(){return this.checkoutConfiguration.campaign.config.showTerms}get text(){return this.checkoutConfiguration.campaign.config.termsText}get isAccepted(){return this._isAccepted}setIsAccepted(e){this._isAccepted=e}validate(){const e=!this.isEnabled||this.isAccepted;return{isValid:e,fields:{isAccepted:{isValid:e,errors:{required:!e}}}}}toObject(){return{isAccepted:this.isEnabled?this.isAccepted:void 0}}}var DN,_N,TN;!function(e){e[e.IN_HONOR_OF_MAX_LENGTH=50]="IN_HONOR_OF_MAX_LENGTH"}(DN||(DN={}));class xN{static getInHonorOfMaxLength(){return DN.IN_HONOR_OF_MAX_LENGTH}}class ON extends Error{constructor(e){super("DataPoint Validation Failed"),this.validationResult=e}}function kN(e){return e.instant&&!e.microdeposits.enabled}function IN(e){return!e.instant&&e.microdeposits.enabled&&e.microdeposits.type===gs.AUTOMATIC}function wN(e){return!e.instant&&e.microdeposits.enabled&&e.microdeposits.type===gs.MICRODEPOSITS}function RN(e){return e.instant&&e.microdeposits.enabled&&e.microdeposits.type===gs.MICRODEPOSITS}function MN(e){return e.instant&&e.microdeposits.enabled&&e.microdeposits.type===gs.AUTOMATIC}function LN(e){return e>=9500}!function(e){e.ICELAND="IS",e.SOUTH_KOREA="KR"}(_N||(_N={})),function(e){e.CANADA_QUEBEC="Quebec",e.US_CALIFORNIA="California"}(TN||(TN={})),u.tg.AUSTRIA,u.tg.BELGIUM,u.tg.BULGARIA,u.tg.HUNGARY,u.tg.GERMANY,u.tg.GREECE,u.tg.DENMARK,u.tg.IRELAND,u.tg.SPAIN,u.tg.ITALY,u.tg.CYPRUS,u.tg.LATVIA,u.tg.LITHUANIA,u.tg.LUXEMBOURG,u.tg.MALTA,u.tg.NETHERLANDS,u.tg.POLAND,u.tg.PORTUGAL,u.tg.ROMANIA,u.tg.SLOVAKIA,u.tg.SLOVENIA,u.tg.FINLAND,u.tg.FRANCE,u.tg.CROATIA,u.tg.CZECH_REPUBLIC,u.tg.SWEDEN,u.tg.ESTONIA,u.tg.UNITED_KINGDOM,_N.ICELAND,u.tg.NORWAY,u.tg.LIECHTENSTEIN,u.tg.SWITZERLAND,u.tg.CANADA,TN.CANADA_QUEBEC,u.tg.UNITED_STATES,TN.US_CALIFORNIA;const UN=[u.tg.AUSTRIA,u.tg.BELGIUM,u.tg.BULGARIA,u.tg.HUNGARY,u.tg.GERMANY,u.tg.GREECE,u.tg.DENMARK,u.tg.IRELAND,u.tg.SPAIN,u.tg.ITALY,u.tg.CYPRUS,u.tg.LATVIA,u.tg.LITHUANIA,u.tg.LUXEMBOURG,u.tg.MALTA,u.tg.NETHERLANDS,u.tg.POLAND,u.tg.PORTUGAL,u.tg.ROMANIA,u.tg.SLOVAKIA,u.tg.SLOVENIA,u.tg.FINLAND,u.tg.FRANCE,u.tg.CROATIA,u.tg.CZECH_REPUBLIC,u.tg.SWEDEN,u.tg.ESTONIA,u.tg.NORWAY,u.tg.LIECHTENSTEIN,u.tg.SWITZERLAND,u.tg.UNITED_KINGDOM,u.tg.BRAZIL,u.tg.AUSTRALIA,u.tg.INDIA,u.tg.CANADA,_N.ICELAND,_N.SOUTH_KOREA],FN=e=>UN.includes(e);var jN=n(5538);const BN=(e,t)=>{var n;if(!HN(e,t))return{year:"",month:"",day:""};const i=(null===(n=e.match(/\D/))||void 0===n?void 0:n[0])||"",s=e.split(i);if(s.length<3)throw new Error(`Unsupported date format: ${t} for date: ${e}`);switch(t){case jN.Bh.SLASH_MM_DD_YYYY:return{month:s[0],day:s[1],year:s[2]};case jN.Bh.SLASH_DD_MM_YYYY:return{day:s[0],month:s[1],year:s[2]};case jN.Bh.DASH_YYYY_MM_DD:return{year:s[0],month:s[1],day:s[2]};case jN.Bh.DASH_DD_MM_YYYY:case jN.Bh.DOT_DD_MM_YYYY:return{day:s[0],month:s[1],year:s[2]};case jN.Bh.SLASH_YYYY_MM_DD:case jN.Bh.DOT_YYYY_MM_DD:return{year:s[0],month:s[1],day:s[2]};default:throw new Error(`was not able to parse date: ${e} with format: ${t}, date parts: ${s}`)}},HN=(e,t)=>!!jN.Qm[t].test(e);class qN extends qv{constructor(){super(...arguments),this._isEnabled=!1,this._dateValue=""}static get defaultValidationResult(){return{isValid:!0,fields:{value:{isValid:!0,errors:{format:!1}}}}}get dateFormat(){return jN.Px[this.checkoutConfiguration.environmentConfig.locale]||jN.UJ}get convertedDate(){if(!this._dateValue)return"";const{year:e,month:t,day:n}=BN(this._dateValue,this.dateFormat);return e&&t&&n?`${e}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`:""}get isEnabled(){return this._isEnabled}get dateValue(){return this._dateValue}setIsEnabled(){this._isEnabled=!0}setValue(e){this._dateValue=e}convert(){if(!this._dateValue)return"";const{year:e,month:t,day:n}=BN(this._dateValue,this.dateFormat);return e&&t&&n?`${e}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`:""}validate(){if(!this._dateValue)return qN.defaultValidationResult;const e=HN(this._dateValue,this.dateFormat);return{isValid:e,fields:{value:{isValid:e,errors:{format:!e}}}}}toObject(){return{}}}const GN={[Nr.DONOR_NAME]:AN,[Nr.DONOR_EMAIL]:CN,[Nr.MAILING_ADDRESS]:pN,[Nr.TRIBUTE]:class extends qv{constructor(e){super(e),this.checkoutConfiguration=e,this._tributeName="",this._tributeName=this.getDefaultTributeeName(),this._isActive=this.getDefaultTributeeActive()}get isEnabled(){return this.checkoutConfiguration.campaign.config.tribute.show}get isOptional(){return this.checkoutConfiguration.campaign.config.tribute.optional}get isActive(){return this._isActive}get isFilled(){return this.isActive&&!!this.tributeeName}get labelType(){return this.checkoutConfiguration.campaign.config.tribute.labelType}get isSharingEnabled(){const{showEmail:e,showAddress:t}=this.checkoutConfiguration.campaign.config.tribute;return e||t}get isTributeOriented(){return!this.isOptional||!!this.checkoutConfiguration.queryParams.tributeSelected}get tributeeName(){var e;return null===(e=this._tributeName)||void 0===e?void 0:e.substring(0,xN.getInHonorOfMaxLength())}get type(){return $C.NONE}setActive(e){this._isActive=e}setTributeeName(e){(e.trim()||""===e)&&(this._tributeName=e)}toObject(){return{inHonorOf:this.tributeeName,type:this.type,labelType:this.labelType,isActive:this.isActive}}getDefaultTributeeActive(){var e,t;const n=this.checkoutConfiguration.campaign.config.tribute.optional,i=(null===(t=null===(e=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===e?void 0:e.tribute)||void 0===t?void 0:t.type)===$C.NONE,s=!!this._tributeName,a=!!this.checkoutConfiguration.externalConfig.tributeSelected,r=!!this.checkoutConfiguration.queryParams.tributeSelected;return!n&&!i||s||a||r}getDefaultTributeeName(){var e,t;const n=this.checkoutConfiguration.queryParams.tributeHonoree,i=null===(t=null===(e=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===e?void 0:e.tribute)||void 0===t?void 0:t.inHonorOf;return n||i||""}},[Nr.BIRTHDAY_DATE]:qN,[YC.DONATION]:mN,[YC.GIFT_AID]:class extends qv{constructor(){super(...arguments),this._isEnabled=!1,this._isShowed=!1,this._isAccepted=!1}get isEnabled(){return this._isEnabled}get legalText(){return this.checkoutConfiguration.campaign.config.giftAid.legalText}get isShowed(){return this._isShowed}get isAccepted(){return this._isAccepted}setComputedAvailability(e){this._isEnabled=e}setShowed(){this._isShowed=!0}accept(){this._isAccepted=!0}reject(){this._isAccepted=!1}toObject(){return{}}},[Nr.QUESTIONS]:NN,[Nr.COMMENT]:class extends qv{constructor(){super(...arguments),this._isRequired=!1,this._isActive=this.checkoutConfiguration.commentSettings.isActive,this._prevComment="",this._comment=""}get isEnabled(){return this.checkoutConfiguration.campaign.config.showComment}get isRequired(){return this._isRequired}get isActive(){return this._isActive}get prevComment(){return this._prevComment}get comment(){return this._comment}setIsRequired(e){this._isRequired=e}setIsActive(e){this._isActive=e}savePrevComment(){this._prevComment=this.comment}saveComment(e){this._comment=e}toObject(){return{isActive:this.isActive,comment:this.comment}}},[Nr.DESIGNATION]:class extends qv{static get defaultValidationResult(){return{isValid:!0,fields:{goal:{isValid:!0,errors:{required:!1}}}}}constructor(e){var t;super(e),this.checkoutConfiguration=e,this._goalKey=null,this.savedOneTimeGoalKey=null,this.savedRecurringGoalKey=null,this._goalKey=(null===(t=this.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.designation)||this.externalCheckoutData.designationId||null}get isEnabled(){return!!this.goals.length&&this.displayGoal===Oe.SELECT}get goalKey(){return this._goalKey}get modifyDesignation(){var e;const t=this.checkoutConfiguration.queryParams.modifyDesignation;if("boolean"==typeof t)return t;const n=this.externalCheckoutData.modifyDesignation;if("boolean"==typeof n)return n;const i=null===(e=this.checkoutConfiguration.externalConfig.checkoutIntent)||void 0===e?void 0:e.checkoutSettings;return!i||"boolean"!=typeof i.modifyDesignation||i.modifyDesignation}get goals(){return this.checkoutConfiguration.campaign.config.goals}get goalName(){var e;return(null===(e=this.selectedGoal)||void 0===e?void 0:e.name)||null}get goalCode(){var e;return(null===(e=this.selectedGoal)||void 0===e?void 0:e.code)||null}get selectedGoal(){return this.isEnabled&&this.goals.find((e=>e.key===this.goalKey))||null}get allowRecurring(){var e;if(!this.isEnabled)return!0;const t=null===(e=this.selectedGoal)||void 0===e?void 0:e.repeat;return!t||t!==Ze.ONE_TIME}toObject(){return{goalKey:this.isEnabled?this.goalKey:null,goalName:this.isEnabled?this.goalName:null,allowRecurring:this.allowRecurring}}setGoalKey(e,t){this._goalKey=e,this.saveGoalKeyByRepeat(t)}hasSelectedGoalWithRepeat(e){var t,n,i;return this.checkoutConfiguration.preselectDesignation?(null===(i=this.selectedGoal)||void 0===i?void 0:i.repeat)===e:(null===(t=this.selectedGoal)||void 0===t?void 0:t.repeat)===e||(null===(n=this.selectedGoal)||void 0===n?void 0:n.repeat)===Ze.ALL}setComputedGoalKeyByGoalRepeat(e){var t,n;this.isEnabled&&((null===(t=this.externalGoal)||void 0===t?void 0:t.repeat)!==Ze.ALL&&(null===(n=this.externalGoal)||void 0===n?void 0:n.repeat)!==e?this.checkoutConfiguration.preselectDesignation||1===this.getAllowedGoals(e).length?this.preselectDesignation(e):this._goalKey=null:this._goalKey=this.externalGoal.key)}isGoalAllowedToShow(e,t){return!!this.isEnabled&&(e.repeat===t||e.repeat===Ze.ALL)}canChangeDesignation(e){return!!this.isEnabled&&!(e<=1||!this.modifyDesignation)}validateDesignation(e){const t=!this.isEnabled||this.isGoalValid(e),n={isValid:t,errors:{required:!t}};return{isValid:n.isValid,fields:{goal:n}}}shouldShowDesignation(e){return!(this.checkoutConfiguration.company.key===cs.FCA&&!this.isEditable(e))&&this.isEnabled&&!!this.getAllowedGoalsByFrequency(e).length}isEditable(e){return this.canChangeDesignation(this.getAllowedGoalsByFrequency(e).length)}getAllowedGoalsByFrequency(e){return this.getAllowedGoals(e)}get displayGoal(){return this.checkoutConfiguration.campaign.config.displayGoal}get externalGoal(){return this.isEnabled&&this.goals.find((e=>{var t;return e.key===this.checkoutConfiguration.queryParams.designationId||e.key===this.externalCheckoutData.designationId||e.key===(null===(t=this.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.designation)}))||null}get externalCheckoutData(){return this.checkoutConfiguration.externalConfig.checkoutData||{}}preselectDesignation(e){var t,n,i,s,a,r;const o=this.getSavedGoalByRepeat(e),c=this.getSavedGoalByRepeat(e===Ze.ONE_TIME?Ze.RECURRING:Ze.ONE_TIME);this._goalKey=null!==(r=null!==(s=null!==(n=null!==(t=null==o?void 0:o.key)&&void 0!==t?t:(null==c?void 0:c.repeat)===Ze.ALL?c.key:null)&&void 0!==n?n:null===(i=this.goals.find((t=>t.default===e)))||void 0===i?void 0:i.key)&&void 0!==s?s:null===(a=this.goals.find((e=>e.default===Ze.ALL)))||void 0===a?void 0:a.key)&&void 0!==r?r:null}getSavedGoalByRepeat(e){var t;const n=e===Ze.ONE_TIME?this.savedOneTimeGoalKey:this.savedRecurringGoalKey;return null!==(t=this.goals.find((e=>e.key===n)))&&void 0!==t?t:null}saveGoalKeyByRepeat(e){e!==Ze.ONE_TIME?this.savedRecurringGoalKey=this.goalKey:this.savedOneTimeGoalKey=this.goalKey}isGoalValid(e){return!(!this.selectedGoal&&this.getAllowedGoals(e).length>0)}getAllowedGoals(e){return this.goals.filter((t=>this.isGoalAllowedToShow(t,e)))}},[YC.PAYMENT_OPTIONS]:class extends qv{constructor(){super(...arguments),this._clientPaymentMethod=null,this._selectedPaymentOption=null,this._preSelectedPaymentOption=null,this._paymentMethodCountry=null,this._allowedPaymentMethods={[u._h.CARD]:{available:!1,visible:!1},[u._h.APPLE_PAY]:{available:!1,visible:!1},[u._h.GOOGLE_PAY]:{available:!1,visible:!1},[u._h.VENMO]:{available:!1,visible:!1},[u._h.PAYPAL]:{available:!1,visible:!1},[u._h.US_BANK_ACCOUNT]:{available:!1,visible:!1},[u._h.AU_BECS]:{available:!1,visible:!1},[u._h.UK_BACS]:{available:!1,visible:!1},[u._h.SEPA]:{available:!1,visible:!1},[u._h.IDEAL]:{available:!1,visible:!1},[u._h.ACSS]:{available:!1,visible:!1},[u._h.CRYPTO]:{available:!0,visible:!0},[u._h.STOCK]:{available:!1,visible:!1}},this._checkedPaymentMethods={[u._h.APPLE_PAY]:!1,[u._h.GOOGLE_PAY]:!1,[u._h.VENMO]:!1}}get allowedPaymentMethods(){return Object.assign(Object.assign({},this._allowedPaymentMethods),{[u._h.VENMO]:Object.assign(Object.assign({},this._allowedPaymentMethods[u._h.VENMO]),{visible:this._allowedPaymentMethods[u._h.VENMO].visible&&this._checkedPaymentMethods[u._h.VENMO]}),[u._h.APPLE_PAY]:Object.assign(Object.assign({},this._allowedPaymentMethods[u._h.APPLE_PAY]),{visible:this._allowedPaymentMethods[u._h.APPLE_PAY].visible&&this._checkedPaymentMethods[u._h.APPLE_PAY]}),[u._h.GOOGLE_PAY]:Object.assign(Object.assign({},this._allowedPaymentMethods[u._h.GOOGLE_PAY]),{visible:this._allowedPaymentMethods[u._h.GOOGLE_PAY].visible&&this._checkedPaymentMethods[u._h.GOOGLE_PAY]&&!this._checkedPaymentMethods[u._h.APPLE_PAY]})})}get clientPaymentMethod(){return this._clientPaymentMethod}get selectedPaymentOption(){return this._selectedPaymentOption}get preSelectedPaymentOption(){return this._preSelectedPaymentOption}get paymentMethodCountry(){return this._paymentMethodCountry}setComputedAllowedPaymentMethods(e){this._allowedPaymentMethods=e}setPaymentMethodChecked(e){this._checkedPaymentMethods[e]=!0}setPaymentMethod(e){this._clientPaymentMethod=e}setPaymentOption(e){this._selectedPaymentOption=e}setPreSelectedPaymentOption(e){this._preSelectedPaymentOption=e}setPaymentMethodCountry(e){this._paymentMethodCountry=e}toObject(){return{}}},[YC.PRE_DONATION_UPSELL]:class extends qv{constructor(e,t){super(e),this.checkoutConfiguration=e,this.currencyService=t,this._suggestedIsEnabled=null,this._computedIsEnabled=null,this._upsellFrequency=oe.MONTHLY,this._upsellCurrency="USD",this._upsellSuggestedHighAmount=null,this._upsellSuggestedLowAmount=null,this._upsellComputedHighAmount=null,this._upsellComputedLowAmount=null,this._upsellInitialAmount=null,this._isShowed=!1,this._upsellShowedFromCurrency="USD",this._upsellShowedFromAmount=null,this._isAccepted=!1}get isEnabled(){return null!==this._suggestedIsEnabled?this._suggestedIsEnabled:null!==this._computedIsEnabled&&this._computedIsEnabled}get upsellFrequency(){return this._upsellFrequency}get upsellCurrency(){return this._upsellCurrency}get upsellHighAmount(){return null!==this._upsellSuggestedHighAmount?this._upsellSuggestedHighAmount:null!==this._upsellComputedHighAmount?this._upsellComputedHighAmount:null}get upsellHighAmountInUsd(){return this.upsellHighAmount?this.currencyService.convert(this.upsellHighAmount,this._upsellCurrency,"USD"):null}get upsellLowAmount(){return null!==this._upsellSuggestedLowAmount?this._upsellSuggestedLowAmount:null!==this._upsellComputedLowAmount?this._upsellComputedLowAmount:null}get upsellLowAmountInUsd(){return this.upsellLowAmount?this.currencyService.convert(this.upsellLowAmount,this._upsellCurrency,"USD"):null}get upsellInitialAmount(){return this._upsellInitialAmount}get upsellInitialAmountInUsd(){return this.upsellInitialAmount?this.currencyService.convert(this.upsellInitialAmount,this._upsellCurrency,"USD"):null}get isShowed(){return this._isShowed}get upsellShowedFromCurrency(){return this._upsellShowedFromCurrency}get upsellShowedFromAmount(){return this._upsellShowedFromAmount}get isAccepted(){return this._isAccepted}setComputedAvailability(e){this._computedIsEnabled=e}setComputedParams(e){this._upsellFrequency=e.upsellFrequency,this._upsellCurrency=e.upsellCurrency,this._upsellComputedHighAmount=e.upsellHighAmount,this._upsellComputedLowAmount=e.upsellLowAmount,this._upsellInitialAmount=e.upsellInitialAmount}setSuggestedAvailability(e){this._suggestedIsEnabled=e}setSuggestedAmounts(e,t){this._upsellSuggestedHighAmount=e,this._upsellSuggestedLowAmount=t}resetSuggestedAvailability(){this._suggestedIsEnabled=null}resetSuggestedAmounts(){this._upsellSuggestedHighAmount=null,this._upsellSuggestedLowAmount=null}setShowed(){this._isShowed=!0,this._upsellShowedFromCurrency=this._upsellCurrency,this._upsellShowedFromAmount=this._upsellInitialAmount}accept(){this._isAccepted=!0}reject(){this._isAccepted=!1}toObject(){return{}}},[Nr.PHONE_NUMBER]:vN,[Nr.TERMS_AND_CONDITIONS]:PN,[Nr.REMIND_ME_LATER]:class extends qv{constructor(){super(...arguments),this._used=ae.NOT_GIVEN,this._shown=!1}get isEnabled(){var e;return(null===(e=this.checkoutConfiguration.company.abandonedDonations)||void 0===e?void 0:e.enabled)&&this.checkoutConfiguration.remindMeLaterSettings.isEnabled}get used(){return this._used}get shown(){return this._shown}setState(e){if(e.used!==ae.NOT_GIVEN&&!e.shown)throw new Error("RemindMeLaterDataPoint: used without shown");this._used=e.used,this._shown=e.shown}toObject(){return{used:this.used,shown:this.shown}}},[Nr.ON_BEHALF_OF]:gN,[Nr.DONATE_ANONYMOUS]:class extends qv{constructor(){super(...arguments),this._anonymousChecked=!1}get isEnabled(){return this.checkoutConfiguration.campaign.config.showAnonymous}get anonymousChecked(){return this._anonymousChecked}setAnonymousChecked(e){this._anonymousChecked=e}toObject(){return{anonymousChecked:this.anonymousChecked}}},[YC.UK_BACS]:class extends qv{constructor(){super(...arguments),this._sortCode="",this._accountNumber="",this._accountHolderName="",this._termsAccepted=!0}get sortCode(){return this._sortCode}get accountNumber(){return this._accountNumber}get accountHolderName(){return this._accountHolderName}get termsAccepted(){return this._termsAccepted}setSortCode(e){this._sortCode=e}setAccountNumber(e){this._accountNumber=e}setAccountHolderName(e){this._accountHolderName=e}setTermsAccepted(e){this._termsAccepted=e}toObject(){const e=this.validate();if(!e.isValid)throw new ON(e);return{termsAccepted:this.termsAccepted,sortCode:this.sortCode,accountNumber:this.accountNumber,accountHolderName:this.accountHolderName}}validate(){const e=this.isSortCodeValid(),t=this.isAccountNumberValid(),n=this.isAccountHolderNameValid();return{isValid:e&&t&&n&&this.termsAccepted,fields:{sortCode:{isValid:e},accountNumber:{isValid:t},accountHolderName:{isValid:n},termsAccepted:{isValid:this.termsAccepted}}}}isSortCodeValid(){return!!(this.sortCode&&this.sortCode.length>=6&&this.sortCode.length<=6)}isAccountNumberValid(){return!!(this.accountNumber&&this.accountNumber.length>=4&&this.accountNumber.length<=17)}isAccountHolderNameValid(){return!!this.accountHolderName}},[YC.POST_DONATION_UPSELL]:class extends qv{constructor(e,t,n){super(e),this.checkoutConfiguration=e,this.postDonationUpsellMlSuggestion=t,this.currencyService=n,this._isEnabled=!1,this._isAccepted=!1,this._isShowed=!1,this._upsellStartDate="",this._upsellFrequency=oe.MONTHLY,this._upsellCurrency="",this._upsellMinAmount=0,this._upsellComputedAmount=0,this._upsellCustomAmount=void 0}get isEnabled(){return this._isEnabled}get isAccepted(){return this._isAccepted}get isShowed(){return this._isShowed}get upsellStartDate(){return this._upsellStartDate}get upsellFrequency(){return this._upsellFrequency}get upsellMinAmount(){return this._upsellMinAmount}get upsellMaxAmount(){const e=this.currencyService.getDigits(this._upsellCurrency),t=(0,jh.Bm)(this._upsellCurrency),n=Number("9".repeat(t));return Math.floor(n/Math.pow(10,e))*Math.pow(10,e)}get upsellAmount(){return void 0!==this._upsellCustomAmount?this._upsellCustomAmount:this.mlSuggestedAmount.isFallback?this._upsellComputedAmount:this.mlSuggestedAmount.amount}get upsellAmountInUSD(){return this.upsellAmount?this.currencyService.convert(this.upsellAmount,this._upsellCurrency,"USD"):this.upsellAmount}setComputedAvailability(e){this._isEnabled=e}setComputedParams(e){this._upsellStartDate=e.upsellStartDate,this._upsellFrequency=e.upsellFrequency,this._upsellCurrency=e.upsellCurrency,this._upsellMinAmount=e.upsellMinAmount,this._upsellComputedAmount=e.upsellAmount}setUpsellCustomAmount(e){this._upsellCustomAmount=e}accept(){this._isAccepted=!0}setShowed(){this._isShowed=!0}validateMinAmount(){return!!this.upsellAmount&&this.upsellAmount>=this._upsellMinAmount}validateMaxAmount(){return!this.upsellAmount||this.upsellAmount<=this.upsellMaxAmount}toObject(){var e;const t=null!==(e=this.upsellAmount)&&void 0!==e?e:0;return{isAccepted:this._isAccepted,isShowed:this._isShowed,upsellStartDate:this._upsellStartDate,upsellFrequency:this._upsellFrequency,upsellCurrency:this._upsellCurrency,upsellAmount:t,upsellTip:0,upsellTotal:t}}get mlSuggestedAmount(){return this.postDonationUpsellMlSuggestion.getAdjustedAmountSuggestion()}},[YC.US_BANK_ACCOUNT]:class extends qv{constructor(){super(...arguments),this._routingNumber="",this._accountNumber="",this._accountHolderName="",this._verificationType=null,this._financialInstitution="",this._accountType=WA.INDIVIDUAL}get routingNumber(){return this._routingNumber}get accountNumber(){return this._accountNumber}get accountNumberLast4(){return this.accountNumber.length>4?this.accountNumber.slice(-4):this.accountNumber}get accountHolderName(){return this._accountHolderName}get verificationType(){return this._verificationType}get financialInstitution(){return this._financialInstitution}get accountType(){return this._accountType}get usBankAccountVerificationSetup(){const e=this.checkoutConfiguration.company.stripe.usBankAccount.verification;return{isInstantOnly:kN(e),isAbavOnly:IN(e),isMicroDepositOnly:wN(e),isInstantAndMicroDeposit:RN(e),isInstantAndAbav:MN(e)}}setRoutingNumber(e){this._routingNumber=e}setAccountNumber(e){this._accountNumber=e}setAccountHolderName(e){this._accountHolderName=e}setVerificationType(e){this._verificationType=e}setFinancialInstitution(e){this._financialInstitution=e}setAccountType(e){this._accountType=e}toObject(){const e=this.validate();if(!e.isValid)throw new ON(e);return{routingNumber:this.routingNumber,accountNumber:this.accountNumber,accountNumberLast4:this.accountNumberLast4,accountHolderName:this.accountHolderName,accountType:this.accountType,verificationType:this.verificationType,financialInstitution:this.financialInstitution}}validate(){const e=this.isRoutingNumberValid(),t=this.isAccountNumberValid(),n=this.isAccountHolderNameValid();return{isValid:e&&t&&n,fields:{routingNumber:{isValid:e},accountNumber:{isValid:t},accountHolderName:{isValid:n},financialInstitution:{isValid:this.isFinancialInstitutionValid()},verificationType:{isValid:this.isVerificationTypeValid()}}}}isRoutingNumberValid(){return!(!this.routingNumber||9!==this.routingNumber.length)}isAccountNumberValid(){return!!(this.accountNumber&&this.accountNumber.length>=5&&this.accountNumber.length<=17)}isFinancialInstitutionValid(){return!!this.financialInstitution}isVerificationTypeValid(){return null===this.verificationType||"descriptor_code"===this.verificationType||"amounts"===this.verificationType}isAccountHolderNameValid(){return!(this.usBankAccountVerificationSetup.isMicroDepositOnly||this.usBankAccountVerificationSetup.isAbavOnly||this.usBankAccountVerificationSetup.isInstantAndAbav)||!!this.accountHolderName}},[YC.DTD]:class extends qv{constructor(e,t,n,i){super(e),this.checkoutConfiguration=e,this.currencyService=t,this.doubleTheDonationApi=n,this.transactionCosts=i,this._isEnabled=!1,this._dtdFrequency=oe.MONTHLY,this._dtdCurrency="USD",this._dtdInitialAmount=null,this._employerId=0,this._employerName="",this._employerRatio=[1,1],this._employerRawMinAmount=0,this._isUpsellShowed=!1,this._isUpsellAccepted=!1,this._isSkipped=!1,this._snapshot=this.createSnapshot()}get isEnabled(){return this._isEnabled}get isIntegrationEnabled(){return this.checkoutConfiguration.integrations.dtdEnabled}get dtdFrequency(){return this._dtdFrequency}get dtdCurrency(){return this._dtdCurrency}get dtdInitialAmount(){return this._dtdInitialAmount}get dtdInitialTotal(){var e;return this.transactionCosts.getTotal(null!==(e=this._dtdInitialAmount)&&void 0!==e?e:0,this._dtdCurrency)}get dtdInitialTotalDoubled(){return this.dtdInitialTotal+this.dtdInitialTotal/this.employerRatio[0]*this.employerRatio[1]}get employerId(){return this._employerId}get employerName(){return this._employerName}get employerRatio(){return this._employerRatio}get employerRawMinAmount(){return this._employerRawMinAmount}get employerMinAmount(){return this.currencyService.convert(this.currencyService.fromFloat(this._employerRawMinAmount,"USD"),"USD",this._dtdCurrency)}get employerUpsellAmount(){return this.employerUpsellTotal-this.transactionCosts.getProcessingFee(this.employerMinAmount,this._dtdCurrency)}get employerUpsellTotal(){return this.currencyService.ceil(this.transactionCosts.getTotal(this.employerMinAmount,this._dtdCurrency),this._dtdCurrency)}get employerUpsellTotalDoubled(){return this.employerUpsellTotal+this.employerUpsellTotal/this.employerRatio[0]*this.employerRatio[1]}get isUpsellShowed(){return this._isUpsellShowed}get isUpsellAccepted(){return this._isUpsellAccepted}get isSkipped(){return this._isSkipped}get snapshot(){return this._snapshot}setComputedAvailability(e){this._isEnabled=e}setComputedParams(e){this._dtdFrequency=e.dtdFrequency,this._dtdCurrency=e.dtdCurrency,this._dtdInitialAmount=e.dtdInitialAmount}searchEmployerByName(e){return this.doubleTheDonationApi.getCompanies(e)}setEmployerName(e){this._employerName=e}setEmployerData(e){this._employerId=e.id,this._employerName=e.company_name,this._employerRawMinAmount=e.minimumMatchedAmount,this._employerRatio=e.ratio,this._snapshot=this.createSnapshot()}resetEmployerData(){this._employerId=0,this._employerName="",this._employerRawMinAmount=0,this._employerRatio=[1,1],this._snapshot=this.createSnapshot()}setUpsellShowed(e){this._isUpsellShowed=e}setUpsellAccepted(){this._isUpsellAccepted=!0}setSkipped(){this._isSkipped=!0}resetState(){this._isUpsellAccepted=!1,this._isSkipped=!1,this._snapshot=this.createSnapshot()}toObject(){return{}}createSnapshot(){return{dtdCurrency:this._dtdCurrency,dtdInitialAmount:this._dtdInitialAmount,dtdInitialTotal:this.dtdInitialTotal,employerRatio:this._employerRatio,employerRawMinAmount:this._employerRawMinAmount,employerMinAmount:this.employerMinAmount,employerUpsellTotal:this.employerUpsellTotal,employerUpsellTotalDoubled:this.employerUpsellTotalDoubled}}},[Nr.COMMUNICATION_CONSENT]:class extends qv{constructor(){super(...arguments),this._generalConsent={isAccepted:this.consentConfig.general.checkedByDefault},this._customizedConsent={[u.ax.EMAIL]:{isEnabled:this.consentConfig.customized.channels.email.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.PHONE_CALLS]:{isEnabled:this.consentConfig.customized.channels.phoneCalls.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.SMS]:{isEnabled:this.consentConfig.customized.channels.sms.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.POSTAL_MAIL]:{isEnabled:this.consentConfig.customized.channels.postalMail.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.SOCIAL_MEDIA]:{isEnabled:this.consentConfig.customized.channels.socialMedia.ask,isAccepted:this.consentConfig.customized.checkedByDefault}},this._isGeneralConsentShown=!1,this._isCustomizedConsentShown=!1}get isGeneralConsentEnabled(){const e=this.type===u.kt.GENERAL;return!(!e||!this.checkoutConfiguration.showcase)||(e&&this.consentConfig.general.showIfRequiredByLaw?FN(this.checkoutConfiguration.user.address.countryCode):e)}get isCustomizedConsentEnabled(){const e=this.type===u.kt.CUSTOMIZED,t=!this._customizedConsent||Object.values(this._customizedConsent).every((e=>!e.isEnabled));return!!e&&!t&&(!this.consentConfig.customized.showIfRequiredByLaw||FN(this.checkoutConfiguration.user.address.countryCode))}get generalConsent(){return this._generalConsent}get customizedConsent(){return this._customizedConsent}get isGeneralConsentShown(){return this._isGeneralConsentShown}get isCustomizedConsentShown(){return this._isCustomizedConsentShown}get isAnyConsentAccepted(){const e=this.isGeneralConsentEnabled&&this._isGeneralConsentShown&&this._generalConsent.isAccepted,t=this.isCustomizedConsentEnabled&&this._isCustomizedConsentShown&&Object.values(this._customizedConsent).some((e=>e.isAccepted));return e||t}toObject(){return{type:this.type,generalConsent:this._generalConsent,customizedConsent:this._customizedConsent,isGeneralConsentShown:this._isGeneralConsentShown,isCustomizedConsentShown:this._isCustomizedConsentShown}}acceptGeneralConsent(){this._generalConsent=Object.assign(Object.assign({},this._generalConsent),{isAccepted:!0})}rejectGeneralConsent(){this._generalConsent=Object.assign(Object.assign({},this._generalConsent),{isAccepted:!1})}acceptCustomizedConsent(e){this._customizedConsent[e]=Object.assign(Object.assign({},this._customizedConsent[e]),{isAccepted:!0})}rejectCustomizedConsent(e){this._customizedConsent[e]=Object.assign(Object.assign({},this._customizedConsent[e]),{isAccepted:!1})}rejectAll(){this._generalConsent=Object.assign(Object.assign({},this._generalConsent),{isAccepted:!1});const e={};for(const[t,n]of Object.entries(this._customizedConsent))e[t]={isEnabled:n.isEnabled,isAccepted:!1};this._customizedConsent=e}setComputedPhoneCallsConsentEnabled(e){const t=this._customizedConsent[u.ax.PHONE_CALLS];this.consentConfig.customized.channels.phoneCalls.ask&&(t.isEnabled=e)}setComputedSMSConsentEnabled(e){const t=this._customizedConsent[u.ax.SMS];this.consentConfig.customized.channels.sms.ask&&(t.isEnabled=e)}setComputedPostalMailConsentEnabled(e){const t=this._customizedConsent[u.ax.POSTAL_MAIL];this.consentConfig.customized.channels.postalMail.ask&&(t.isEnabled=e)}setGeneralConsentShown(){this._isGeneralConsentShown=!0}setCustomizedConsentShown(){this._isCustomizedConsentShown=!0}get type(){return this.consentConfig.type}get consentConfig(){return this.checkoutConfiguration.campaign.config.consent}},[Nr.CUSTOMER_TITLE]:oN,[vr.DONATION]:Kv};class VN{constructor(e,t){this.checkoutConfiguration=e,this.feeCalculator=t,this._isEnabled=!0,this._isCovered=this.isFeeCoveredByDefault,this._isCustomCoveredValue=!1}get includeFees(){return this._isEnabled?this.checkoutConfiguration.campaign.config.includeFees:u.XN.ONLY_NO}get isCovered(){return!!this._isEnabled&&this._isCovered}get isCustomCoveredValue(){return this._isCustomCoveredValue}set isCovered(e){this._isCovered=e}set isCustomCoveredValue(e){this._isCustomCoveredValue=e}calculateSmartFeeCovering(e){this._isCovered=this.shouldCoverFee(e)}calculateFeeAvailability(e){this._isEnabled=this.shouldEnableFee(e)}getFee(e,t){return this.feeCalculator.getFeeForWidget({amount:e,currency:t})}getTotal(e,t){return this.isCovered?e+this.getFee(e,t):e}getProcessingFee(e,t){return this.isCovered?this.getFee(e,t):0}get isFeeCoveredByDefault(){return[u.XN.DEFAULT_YES,u.XN.ONLY_YES].includes(this.includeFees)}shouldCoverFee(e){var t;const n=e.amountInUSD||0;if(e.frequency===oe.ONCE&&n>=1e5)return!1;const i=this.checkoutConfiguration.infrastructureParams,s=this.checkoutConfiguration.user,a=null==i?void 0:i.OS,r="Mac OS"===a,o="iOS"===a,c=(null===(t=null==s?void 0:s.address)||void 0===t?void 0:t.countryCode)===u.tg.UNITED_STATES;return!(c&&n>=25e3&&n<1e5&&!o&&!r||!c&&n>=1e4&&n<1e5&&!o&&!r)}shouldEnableFee(e){var t;const n=null!==(t=e.amount)&&void 0!==t?t:0;return!(n+this.getFee(n,e.currency)>99999999)}}class KN{constructor(e,t){this.whole=e,this.currency=t,this.fractional=this.whole/Math.pow(10,this.currency.digits)}plus(e){if(e.currency.equalTo(this.currency))return new KN(this.whole+e.whole,this.currency);throw new Error(`Currency mismatch: added ${e.currency} is not equal to ${this.currency}`)}isZero(){return 0===this.whole}[Symbol.toPrimitive](e){return"string"===e?this.whole.toString():this.whole}toString(){return this.whole.toString()}valueOf(){return this.whole}}class YN extends KN{}class zN{constructor(e,t,n){this.percentFee=e,this.fixedFee=t,this.converter=n}getFeeValue(e){const t=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code),n=new YN(t,e.currency);return Math.round(Number(e)*Number(this.percentFee)+Number(n))}}class WN{constructor(e,t){this.digits=t,this.code=e.toUpperCase()}equalTo(e){return String(this)===String(e).toUpperCase()}[Symbol.toPrimitive](){return this.code}toString(){return this.code}}class $N extends YN{constructor(e){super(Math.min(e.whole*$N.ACSS_FEE_PERCENT,$N.ACSS_MAX_FEE_VALUE),new WN("CAD",2))}}$N.ACSS_MAX_FEE_VALUE=500,$N.ACSS_FEE_PERCENT=.008;class XN{constructor(e){this.whole=e,this.percent=e/100,this.fractional=e/1e4}plus(e){if(this.percent+e.percent>100)throw new Error("PercentFee value can not be grater than 100");return new XN(this.whole+e.whole)}[Symbol.toPrimitive](e){return"string"===e?this.fractional.toString():this.fractional}toString(){return this.fractional.toString()}valueOf(){return this.fractional}}class QN extends XN{constructor(e){let t=QN.PERCENT;e&&(t=QN.PERCENT*QN.COEFF+e.whole*(1-QN.COEFF)),super(t)}}QN.PERCENT=350,QN.COEFF=.1;class ZN extends YN{constructor(e){super(Math.min(e.whole*ZN.FEE_PERCENT,ZN.MAX_FEE_VALUE),new WN("USD",2))}}ZN.MAX_FEE_VALUE=500,ZN.FEE_PERCENT=.008;var JN,eb=n(3129);class tb{constructor(e,t,n,i,s,a){this.stripeFee=e,this.applicationFee=t,this.fixedFee=n,this.paymentMethod=i,this.cardBrand=s,this.converter=a}get isNonProfitFee(){return this.stripeFee.whole===eb.UH.NON_PROFIT}getPaymentMethodFee(e){switch(this.paymentMethod){case u._h.US_BANK_ACCOUNT:return new ZN(e);case u._h.ACSS:return new $N(e)}}get isAmex(){return this.cardBrand===eb.fR.AMERICAN_EXPRESS}getFeeValue(e){const t=this.getPaymentMethodFee(e);if(t)return Number(e)*Number(this.applicationFee)+Number(t);if(this.isNonProfitFee&&this.isAmex){const t=this.applicationFee.plus(new QN);return Number(t)*Number(e)}const n=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code),i=new YN(n,e.currency),s=this.applicationFee.plus(this.stripeFee);return Number(e)*Number(s)+Number(i)}}class nb{constructor(e,t,n,i,s){this.stripeFee=e,this.applicationFee=t,this.fixedFee=n,this.companyParams=i,this.converter=s}get isUsCountry(){return"US"===this.companyParams.country}isCompanyCurrency(e){return e.currency.equalTo(this.companyParams.defaultCurrency)}isFixedFeeInDonationCurrency(e){return e.currency.equalTo(this.fixedFee.currency)}getFeeValue(e){let t=1;this.isCompanyCurrency(e)||(this.stripeFee=this.stripeFee.plus(new XN(100))),this.isFixedFeeInDonationCurrency(e)||(t=nb.FEE_CURRENCY_RATE_MULTIPLIER);const n=this.isUsCountry?new QN(this.stripeFee):this.stripeFee,i=this.applicationFee.plus(n),s=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code,t),a=new YN(s,e.currency),r=Number(e),o=(r+Number(a))/(1-Number(i))/r-1;return Math.round(r*Math.round(1e4*o)/1e4)}}nb.FEE_CURRENCY_RATE_MULTIPLIER=1.03;class ib{constructor(e,t,n){this.feeCalculator=n,e.validate(t),this.valueObjectsFactory=this.feeCalculator.valueObjectsFactory,this.converter=this.feeCalculator.converter,this.companyParams=t.companyParams,this.customFixedFee=this.valueObjectsFactory.makeFixedFee(t.customFixedFee,t.companyParams.defaultCurrency),this.customFeePercent=this.valueObjectsFactory.makePercentFee(t.customFeePercent),this.applicationFeePercent=this.valueObjectsFactory.makePercentFee(t.applicationFeePercent),this.stripeFeePercent=this.valueObjectsFactory.makePercentFee(t.stripeFee.percent),this.fixedFee=this.valueObjectsFactory.makeFixedFee(t.stripeFee.fixed,t.stripeFee.currency)}getFeeForDashboard(e,t){let n;return n=this.companyParams.useCustomFee?new zN(this.customFeePercent,this.customFixedFee,this.converter):t.fromVirtualTerminal?new tb(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,t.paymentMethod,t.cardBrand,this.converter):new nb(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,this.companyParams,this.converter),this.feeCalculator.calculate(e,n)}getFeeForWidget(e){let t;return t=this.companyParams.useCustomFee?new zN(this.customFeePercent,this.customFixedFee,this.converter):new nb(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,this.companyParams,this.converter),this.feeCalculator.calculate(e,t)}getFeeForVirtualTerminal(e,t){let n;return n=this.companyParams.useCustomFee?new zN(this.customFeePercent,this.customFixedFee,this.converter):new tb(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,t.paymentMethod,t.cardBrand,this.converter),this.feeCalculator.calculate(e,n)}}class sb{constructor(e){this.converter=e}makeFixedFee(e,t){return new YN(e,this.makeCurrency(t))}makeAmount(e,t){return new KN(e,this.makeCurrency(t))}makePercentFee(e){return new XN(e)}makeCurrency(e){return new WN(e,this.converter.getDigits(e))}}class ab{constructor(e){this.converter=e,this.valueObjectsFactory=new sb(e)}calculate(e,t){const n=this.valueObjectsFactory.makeAmount(e.amount,e.currency);return n.isZero()?0:this.roundFee(t.getFeeValue(n))}roundFee(e){return e<500&&(e=10*Math.ceil(e/10)),e>500&&(e=100*Math.ceil(e/100)),e}}class rb{constructor(){this.schema=new ua({applicationFeePercent:{type:Number,required:!0},customFeePercent:{type:Number,required:!0},customFixedFee:{type:Number,required:!0},stripeFee:{percent:{type:Number,required:!0},fixed:{type:Number,required:!0},currency:{type:String,required:!0}},companyParams:{defaultCurrency:{type:String,required:!0},country:{type:String,required:!0},useCustomFee:{type:Boolean,required:!0}}})}validate(e){const t=this.schema.validate(e,{typecast:!1});if(t.length){const n=t.map((t=>{const n=Bs()(e,t.path);return`${t.path}: ${n} ${t.message}`})).join("\n");throw new Error(n)}}}class ob{constructor(e){let{enabledAI:t,frequenciesHints:n,mandatoryHintsIds:i=[],distribution:s,currencyService:a,defaultCurrency:r}=e;this._hints={},this._defaultHints={},this._variantName=Uv.NONE,this._enabledAI=t,this._distribution=s,this._defaultCurrency=r,this.currencyService=a,this.initHints(n,i)}get hints(){return this._hints}get defaultHints(){return this._defaultHints}get hintsAmounts(){const e={[oe.ONCE]:[],[oe.DAILY]:[],[oe.WEEKLY]:[],[oe.BIWEEKLY]:[],[oe.EVERY_4_WEEKS]:[],[oe.MONTHLY]:[],[oe.BIMONTHLY]:[],[oe.QUARTERLY]:[],[oe.SEMIANNUAL]:[],[oe.ANNUAL]:[]};for(const t in this._hints){const n=this._hints[t];e[t]=n?n.map((e=>{let{amount:t}=e;return t})):[]}return e}get hintFrequencies(){return Object.keys(this._hints)}get variantName(){return this._variantName}getHintsByFrequency(e){return this._hints[e]||null}getDefaultHintsByFrequency(e){return this._defaultHints[e]||null}updateHintsByAmounts(e){for(const t in e){const n=this._hints[t],i=e[t];if(!(n&&n.length&&Array.isArray(i)))continue;const s=[...i].sort(((e,t)=>e-t)),a=[];s.forEach(((e,t)=>{a.push(Object.assign(Object.assign({},n[t]),{amount:e}))})),this._hints[t]=a}}updateHintsByDefault(e,t){const n=this._hints[e],i=[];if(!n)throw new Error(`Hints for frequency ${e} not found`);n.forEach((e=>{e.id===(null==t?void 0:t.id)?i.push(Object.assign(Object.assign({},e),{default:!0})):i.push(Object.assign(Object.assign({},e),{default:!1}))})),this._hints[e]=i}initHints(e,t){if(this._distribution.initCurrentVariantName(),this._distribution.currentVariantName===Uv.RANDOM)return e.forEach((e=>{let{frequency:n,hints:i}=e;const s=this.getFormattedHints({hints:i,frequency:n}),a=this.getRandomVariantHints(s,t);this._hints[n]=a,this._defaultHints[n]=a})),void(this._variantName=Uv.RANDOM);throw new Error("No variant found")}getFormattedHints(e){let{hints:t,frequency:n}=e;const i=t[t.length-1].amount;return t.map(((e,t)=>{const s=e.amount||function(e){let{index:t,frequency:n,enabledAI:i,lastAmount:s}=e;const a=n===oe.ONCE,r=i?a?ye:ge:a?pe:me,o=r.length;return o>=t+1?r[t]:s?(c=s+fe)%fe==0?c:Math.ceil(c/fe)*fe:r[o-1]+(t+1-o)*fe;var c}({index:t,frequency:n,enabledAI:this._enabledAI,lastAmount:i}),a="USD"===this._defaultCurrency?s:this.currencyService.convert(s,"USD",this._defaultCurrency);return Object.assign(Object.assign({},e),{amount:s,amountUsd:a,description:e.description})}))}getRandomVariantHints(e,t){return this._enabledAI?this.getEnabledAIHints(e,t):this.getDisabledAIHints(e)}getEnabledAIHints(e,t){if(e.length<6)throw new Error("Hints count is less than 6");return this.getRandomHints(e,t,3).sort(((e,t)=>e.amount-t.amount))}getDisabledAIHints(e){const t=e.filter((e=>{let{active:t}=e;return t}));if(t.length<3)throw new Error("Active hints count is less than 3");return t.sort(((e,t)=>e.amount-t.amount)).slice(0,3)}getRandomHints(e,t,n){const i=[],s=new Set;for(t.forEach(((t,a)=>{const r=e.find((e=>e.id===t));r&&i.length<n&&(s.add(a),i.push(r))}));i.length<n&&s.size<e.length;){let t;do{t=Math.floor(Math.random()*e.length)}while(s.has(t));s.add(t),i.push(e[t])}return this.getHintsWithRandomDefault(i)}getHintsWithRandomDefault(e){const t=e.map((e=>Object.assign(Object.assign({},e),{default:!1})));return t[Math.floor(Math.random()*t.length)].default=!0,t}}class cb{constructor(e){this.sessionAPI=e}validate(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.sessionAPI.post("mailingAddress",Object.assign({},e),{rejectsOnInvalid:!0});return sn.isSuccess(t)?t.successResult:{valid:!1,validated:!0}}))}}class lb{constructor(e){this.sessionAPI=e}getCompanies(e){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield this.getDtdCompanies(e)).map((e=>({id:e.payload.id,company_name:e.payload.company_name,ratio:e.payload.ratio,minimumMatchedAmount:e.payload.minimumMatchedAmount})))}))}getDtdCompanies(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{return(yield this.sessionAPI.get("dtd",{search:e},{delay:200,retries:5,cancelSimilar:!0})).data}catch(e){return[]}}))}}class ub{constructor(){this.MIN_LENGTH=2,this.MAX_LENGTH=su.NAME_MAX_LENGTH}}class db extends ub{constructor(){super(...arguments),this.MIN_LENGTH=su.NAME_MIN_LENGTH}}db.LOCALES=[I.D.ZH_TW,I.D.ZH_CN,I.D.JA,I.D.KO],function(e){e[e.PERSONAL_INFORMATION=1]="PERSONAL_INFORMATION"}(JN||(JN={}));class hb{static resolveSetting(e,t){if(e===JN.PERSONAL_INFORMATION)return function(e){return db.LOCALES.includes(e.localeCode)?new db:new ub}(t);throw new Error(`Unknown setting ${e}`)}constructor(e){this.personalInformation=hb.resolveSetting(JN.PERSONAL_INFORMATION,e)}}class mb{static isDonorNameDataPoint(e,t){return t===Nr.DONOR_NAME}static isFiatDonationDataPoint(e,t){return t===YC.DONATION}static isCryptoDonationDataPoint(e,t){return t===vr.DONATION}static isPreDonationUpsellDataPoint(e,t){return t===YC.PRE_DONATION_UPSELL}static isPostDonationUpsellDataPoint(e,t){return t===YC.POST_DONATION_UPSELL}static isPaymentOptionsDataPoint(e,t){return t===YC.PAYMENT_OPTIONS}static isDTDDataPoint(e,t){return t===YC.DTD}static isCommunicationConsentDataPoint(e,t){return t===Nr.COMMUNICATION_CONSENT}static isMailingAddressDataPoint(e,t){return t===Nr.MAILING_ADDRESS}static isCustomerTitleDataPoint(e,t){return t===Nr.CUSTOMER_TITLE}constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.checkoutConfiguration=e,this.currencyService=t,this.addressService=n,this.suggestionsService=i,this.intl=s,this.userSession=a,this.sessionAPI=r,this.experiments=o,this.tracker=c,this.sentry=l,this.mailingAddressCustomization=u,this.params=d,this.postDonationUpsellMlSuggestion=h}create(e){const t=this.getDataPoint(e);return mb.isFiatDonationDataPoint(t,e)||mb.isCryptoDonationDataPoint(t,e)?function(e,t,n,i,s,a,r,o){switch(o.flowType){case Ae.MONEY:return new mN(e,t,n,a,i,s,r);case Ae.CRYPTO:return new Kv(e,t,n);case Ae.STOCK:throw new Error(o.flowType);default:throw new U(o.flowType)}}(this.checkoutConfiguration,this.currencyService,this.suggestionsService,this.userSession,this.transactionCosts,this.experiments,this.suggestedAmountHintsAI,{flowType:this.params.flowType}):mb.isPreDonationUpsellDataPoint(t,e)?new t(this.checkoutConfiguration,this.currencyService):mb.isPostDonationUpsellDataPoint(t,e)?new t(this.checkoutConfiguration,this.postDonationUpsellMlSuggestion,this.currencyService):mb.isPaymentOptionsDataPoint(t,e)?new t(this.checkoutConfiguration):mb.isDTDDataPoint(t,e)?new t(this.checkoutConfiguration,this.currencyService,this.doubleTheDonationAPI,this.transactionCosts):mb.isCommunicationConsentDataPoint(t,e)?new t(this.checkoutConfiguration):mb.isDonorNameDataPoint(t,e)?new t(this.checkoutConfiguration,this.validationSettings.personalInformation):mb.isMailingAddressDataPoint(t,e)?new t(this.checkoutConfiguration,this.addressService,this.addressValidationAPI,this.countriesService,this.mailingAddressCustomization):(mb.isCustomerTitleDataPoint(t,e),new t(this.checkoutConfiguration))}get transactionCosts(){return this._transactionCosts||(this._transactionCosts=this.createTransactionCosts()),this._transactionCosts}get countriesService(){return this._countriesService||(this._countriesService=this.createCountriesService()),this._countriesService}get doubleTheDonationAPI(){return this.createDoubleTheDonationAPI()}get validationSettings(){return this.createValidationSettings()}get addressValidationAPI(){return this.createAddressValidationAPI()}get suggestedAmountHintsAI(){var e;return null!==(e=this.createExternalConfigSuggestedAmountHintsAI())&&void 0!==e?e:this.createSuggestedAmountHintsAI()}get distribution(){return this.createDistribution()}getDataPoint(e){return GN[e]}createTransactionCosts(){return function(e){let{checkoutConfiguration:t,currencyService:n}=e;const i=(s=t.company,a=n,new ib(new rb,{customFixedFee:s.coverFees.amount,customFeePercent:s.coverFees.percent,applicationFeePercent:s.applicationFees.money,stripeFee:s.stripeFee,companyParams:{country:s.country||"US",defaultCurrency:s.defaultCurrency,useCustomFee:s.coverFees.custom}},new ab(a)));var s,a;return new VN(t,i)}({checkoutConfiguration:this.checkoutConfiguration,currencyService:this.currencyService})}createCountriesService(){return(0,Bv.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})}createDoubleTheDonationAPI(){return new lb(this.sessionAPI)}createAddressValidationAPI(){return new cb(this.sessionAPI)}createValidationSettings(){return new hb({localeCode:this.intl.locale})}createExternalConfigSuggestedAmountHintsAI(){return function(e,t,n){var i,s;const a=null===(i=e.externalConfig.checkoutData)||void 0===i?void 0:i.hints;if(!a)return null;const r=[];for(const t of e.enabledFrequencies){const n=e.campaign.config.frequencies[t];if(n.hintsEnabled){const e=null!==(s=a[t])&&void 0!==s?s:[],i=n.suggestedAmountHints.filter((t=>e.includes(t.id)));if((null==e?void 0:e.length)!==i.length)return null;r.push({frequency:t,hints:i})}}return r.some((e=>{let{hints:t}=e;return!t.length}))?null:new ob({enabledAI:!1,frequenciesHints:r,distribution:n,currencyService:t,defaultCurrency:e.campaign.config.defaultCurrency})}(this.checkoutConfiguration,this.currencyService,this.distribution)}createSuggestedAmountHintsAI(){return function(e,t,n){var i,s;const a=[];if(e.enabledFrequencies.forEach((t=>{const n=e.campaign.config.frequencies[t];n.hintsEnabled&&a.push({frequency:t,hints:[...n.suggestedAmountHints]})})),!a.length)return null;const r=null===(s=null===(i=e.externalConfig.checkoutIntent)||void 0===i?void 0:i.donation)||void 0===s?void 0:s.selectedHintId;return new ob({enabledAI:e.campaign.config.enableAI,frequenciesHints:a,mandatoryHintsIds:r?[r]:void 0,distribution:n,currencyService:t,defaultCurrency:e.campaign.config.defaultCurrency})}(this.checkoutConfiguration,this.currencyService,this.distribution)}createDistribution(){return new Rr({distributionId:this.tracker.clientId,name:"suggestedAmountHintsAI",variants:Hv,sentry:this.sentry})}}class pb{constructor(e){this.dataPointFactory=e,this.dataPoints=new Map}get list(){return[...this.dataPoints.values()]}getDataPoint(e){let t=this.dataPoints.get(e);return void 0===t&&(t=this.registerDataPoint(e)),t}registerDataPoint(e){const t=this.dataPointFactory.create(e);return this.dataPoints.set(e,t),t}}class gb{constructor(e){this.sessionAPI=e}pay(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.sessionAPI.post("pay",{paymentMethod:null==e?void 0:e.paymentMethod})}))}hold(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=Object.assign({},e);return this.sessionAPI.post("hold",t,{rejectsOnInvalid:!0})}))}status(){return(0,l.sH)(this,void 0,void 0,(function*(){try{return(yield this.sessionAPI.get("status",{},{retries:5,delay:200,rejectsOnInvalid:!0})).completed}catch(e){throw new Error("Payment was not started")}}))}}const yb={amount:0,currency:"USD",isFallback:!0};class fb{constructor(e,t,n){this.sessionApi=e,this.currencyService=t,this.suggestions=n,this._amountSuggestion=yb,this._originalAmountSuggestion=yb}getOriginalAmountSuggestion(){return this._originalAmountSuggestion}getAdjustedAmountSuggestion(){return this._amountSuggestion}fetchAmountSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{const t=yield this.sessionApi.post("getPduAmount",e);if(sn.isSuccess(t)){const n=t.successResult;this._originalAmountSuggestion=n,this._amountSuggestion=this.adjustSuggestion(n,e.minRecurringAmount)}else this._originalAmountSuggestion=yb,this._amountSuggestion=yb}catch(e){this._originalAmountSuggestion=yb,this._amountSuggestion=yb}}))}adjustSuggestion(e,t){const{amount:n,currency:i}=e;if(n<t)return Object.assign(Object.assign({},e),{amount:t});const s=this.currencyService.convert(fb.MAX_AMOUNT_IN_USD,"USD",i);return n>s?Object.assign(Object.assign({},e),{amount:this.suggestions.beautify(s,i)}):Object.assign(Object.assign({},e),{amount:n})}}fb.MAX_AMOUNT_IN_USD=1e5;class Sb extends sv{constructor(e,t,n,i,s,a,r,o,c,l,d,h,m,p,g,y,f,S,E){super(f.campaign.config,y,f,S),this.donation=e,this.designation=t,this.tribute=n,this.preDonationUpsell=i,this.postDonationUpsell=s,this.privacy=a,this.paymentOptions=r,this.giftAid=o,this.communicationConsent=c,this.mailingAddress=l,this.comment=d,this.doubleTheDonation=h,this.questions=m,this.remindMeLater=p,this.checkoutStateSynchronizer=g,this.debug=y,this.dataPointRegistry=S,this.experiments=E,this.flowType=Ae.MONEY,this.paymentErrors={[u._h.CARD]:!1,[u._h.UK_BACS]:!1,[u._h.US_BANK_ACCOUNT]:!1,[u._h.PAYPAL]:!1}}get isReadyToRetryPay(){if(!this.hasPaymentAttempt)return!1;const e=this.dataPointRegistry.getDataPoint(YC.PAYMENT_OPTIONS).clientPaymentMethod;return!!e&&[u._h.CARD,u._h.UK_BACS].includes(e)}initialize(){this.checkoutStateSynchronizer.onInit()}get(){var e;return{hasPaymentAttempt:this.hasPaymentAttempt,isReadyToRetryPay:this.isReadyToRetryPay,hasMailingAddressError:this.hasMailingAddressError,donation:this.donationState,mailingListSubscription:this.mailingListSubscriptionState,paymentErrors:this.paymentErrors,giftAid:this.giftAidState,tribute:this.tributeState,comment:this.commentState,donateAnonymous:this.donateAnonymousState,designation:this.designationState,paymentOptions:this.paymentOptionsState,mailingAddress:this.mailingAddressState,preDonationUpsell:this.preDonationUpsellState,phoneNumber:this.phoneNumberState,onBehalfOf:this.onBehalfOfState,termsAndConditions:this.termsAndConditionsState,remindMeLater:this.remindMeLaterState,postDonationUpsell:this.postDonationUpsellState,questions:this.questionsState,doubleDonation:this.doubleDonationState,donationResultState:this.donationResultState,isPaid:Boolean(null===(e=this.donationResultState)||void 0===e?void 0:e.donationId),communicationConsent:this.communicationConsentState}}setPaymentError(e,t){this.paymentErrors[e]=t}get phoneNumberState(){const e=this.dataPointRegistry.getDataPoint(Nr.PHONE_NUMBER);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get remindMeLaterState(){const e=this.dataPointRegistry.getDataPoint(Nr.REMIND_ME_LATER),t=this.privacy.donorEmailDataPoint,n=this.privacy.termsAndConditionsDataPoint,i={show:!1,isEnabled:e.isEnabled};return e.isEnabled?t.validate().isValid?n.isEnabled&&!n.isAccepted?Object.assign(Object.assign({},i),{show:!0}):i:Object.assign(Object.assign({},i),{show:!0}):i}get mailingListSubscriptionState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Nr.MAILING_ADDRESS).isEnabled}}get donationState(){const e=this.dataPointRegistry.getDataPoint(YC.DONATION);return{amount:e.amount,currency:e.currency,frequency:e.frequency,defaultAmount:e.defaultAmount||0,amountOptions:e.amountOptions,amountInUsd:e.amountInUSD||0}}get donateAnonymousState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Nr.DONATE_ANONYMOUS).isEnabled}}get onBehalfOfState(){const e=this.privacy.onBehalfOfDataPoint;return{isEnabled:e.isEnabled,isActive:e.isActive}}get termsAndConditionsState(){return{isEnabled:this.privacy.termsAndConditionsDataPoint.isEnabled}}get commentState(){const e=this.dataPointRegistry.getDataPoint(Nr.COMMENT);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get giftAidState(){const e=this.dataPointRegistry.getDataPoint(YC.GIFT_AID);return{isEnabled:e.isEnabled,isAccepted:e.isAccepted}}get tributeState(){const e=this.dataPointRegistry.getDataPoint(Nr.TRIBUTE);return{isEnabled:e.isEnabled,name:e.tributeeName,labelType:e.labelType,isActive:e.isActive}}get designationState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Nr.DESIGNATION).isEnabled}}get paymentOptionsState(){const e=this.dataPointRegistry.getDataPoint(YC.PAYMENT_OPTIONS),t=this.dataPointRegistry.getDataPoint(YC.US_BANK_ACCOUNT);return{clientPaymentMethod:e.clientPaymentMethod,selectedPaymentOption:e.selectedPaymentOption,preSelectedPaymentOption:e.preSelectedPaymentOption,usBankAccountVerificationSetup:{isInstantOnly:t.usBankAccountVerificationSetup.isInstantOnly,isAbavOnly:t.usBankAccountVerificationSetup.isAbavOnly,isMicroDepositOnly:t.usBankAccountVerificationSetup.isMicroDepositOnly,isInstantAndMicroDeposit:t.usBankAccountVerificationSetup.isInstantAndMicroDeposit,isInstantAndAbav:t.usBankAccountVerificationSetup.isInstantAndAbav,verificationType:t.verificationType}}}get mailingAddressState(){const e=this.dataPointRegistry.getDataPoint(Nr.MAILING_ADDRESS);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get postDonationUpsellState(){const e=this.dataPointRegistry.getDataPoint(YC.POST_DONATION_UPSELL);return{isEnabled:e.isEnabled,isShowed:e.isShowed}}get preDonationUpsellState(){const e=this.dataPointRegistry.getDataPoint(YC.PRE_DONATION_UPSELL),t=this.dataPointRegistry.getDataPoint(Nr.TRIBUTE);let n=!1;return this.experiments.has(Sn.UPSELL_CURTAIN_EXPERIMENT)&&(n=this.experiments.get(Sn.UPSELL_CURTAIN_EXPERIMENT).canOpenUpsellCurtain({tributeIsFilled:t.isFilled,targetFrequency:e.upsellFrequency,preDonationUpsellIsEnabled:e.isEnabled})),{isEnabled:e.isEnabled,upsellCurtainUsed:n}}get doubleDonationState(){const e=this.dataPointRegistry.getDataPoint(YC.DTD);return{isEnabled:e.isEnabled,isIntegrationEnabled:e.isIntegrationEnabled,isAccepted:e.isUpsellAccepted}}get questionsState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Nr.QUESTIONS).isEnabled}}get communicationConsentState(){return{isCustomizedEnabled:this.dataPointRegistry.getDataPoint(Nr.COMMUNICATION_CONSENT).isCustomizedConsentEnabled}}}class Eb{constructor(e,t,n,i){this.globalWindow=e,this.checkoutConfiguration=t,this.currencyService=n,this.checkoutState=i}getUrl(e){var t,n,i,s;if(this.isShowcase)return null;const a=this.resolveTargetConfig(),r=a.type===u.N4.REDIRECT,o=this.checkoutConfiguration.queryParams.successUrl||(r?a.redirect.url:null);if(!o)return null;const c={amount:this.currencyService.toFloatUnformattedStr(this.donationDataPoint.total,this.donationDataPoint.currency),monthly:(null===(t=this.postDonationUpsellDataPoint)||void 0===t?void 0:t.isAccepted)||this.donationDataPoint.frequency===oe.MONTHLY,donationId:null!==(i=null===(n=e.donationResultState)||void 0===n?void 0:n.donationId)&&void 0!==i?i:"",currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,lang:(0,xi.Qk)(this.checkoutConfiguration.environmentConfig.locale)};if(r&&!a.redirect.includeSupporterData||(c.supporterFirstName=this.donorNameDataPoint.firstName,c.supporterLastName=this.donorNameDataPoint.lastName,c.supporterEmail=this.donorEmailDataPoint.email),this.designationDataPoint.goalKey){const e=this.designationDataPoint.goals.find((e=>e.key===this.designationDataPoint.goalKey));c.designationId=null==e?void 0:e.key,c.designationName=null==e?void 0:e.name}(null===(s=e.donationResultState)||void 0===s?void 0:s.tributeId)&&(c.tributeId=e.donationResultState.tributeId);try{const e=this.createURL(o);for(const t in c)if(Object.prototype.hasOwnProperty.call(c,t)){const n=c[t];e.searchParams.append(t,String(n))}return e.toString()}catch(e){return console.error("Invalid redirect URL"),null}}canRedirect(e){return!!this.getUrl(e)}tryRedirect(e){const t=this.getUrl(e.getState());return t?new Promise((()=>{this.redirect(t,e)})):Promise.resolve()}redirect(e,t){t.disarmCloseGuard(),this.globalWindow.location.replace(e)}get isShowcase(){return this.checkoutConfiguration.infrastructureParams.showcase}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get postDonationUpsellDataPoint(){return this.checkoutState instanceof Sb?this.checkoutState.postDonationUpsell.dataPoint:null}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get designationDataPoint(){return this.checkoutState.designation.dataPoint}createURL(e){return"/"===e[0]&&(e=this.globalWindow.location.origin+e),/^https?:\/\//m.test(e)||(e="https://"+e),new URL(e)}resolveTargetConfig(){return this.checkoutConfiguration.checkoutType===Ce.PAGE&&this.checkoutConfiguration.campaignPage.thankYouScreen?this.checkoutConfiguration.campaignPage.thankYouScreen:this.checkoutConfiguration.campaign.config.thankYouScreen}}class Ab extends Error{constructor(e){super(`Component "${e} doesnt defined, unable to preload`)}}class Cb{constructor(e){this.componentsMap=e,this.componentImports=new Set}add(e){return this.assertComponentDefined(e),this.componentImports.add(this.componentsMap[e]),this}load(){for(const e of this.componentImports)e()}assertComponentDefined(e){if(!this.componentsMap[e])throw new Ab(e)}}class vb{constructor(e,t){this.loadableComponents=e,this.campaignConfig=t}preload(){return this.configureLoadableComponents(),this.loadableComponents.load()}}var Nb;!function(e){e.PHONE_INPUT="PrivacyPhoneInput"}(Nb||(Nb={}));class bb extends vb{configureLoadableComponents(){this.campaignConfig.showPhone&&this.loadableComponents.add(Nb.PHONE_INPUT)}}const Pb={[Nb.PHONE_INPUT]:()=>Promise.all([n.e(339),n.e(513)]).then(n.bind(n,8513))};function Db(e){const t=new Cb(Pb);return new bb(t,e)}class _b{constructor(e,t,n){var i;this.componentsPreloader=e,this.checkoutState=t,this.showPaymentLoader=!1,this.askPageActiveTab=Dr.CAUSE,this.pagesOfQuestionsScreen=0,this.cookiePreferencesModalShown=!1,this.cookiePreferencesModalInitiatorElement=null,this.isDonationFormVisibleTrackEventBlocked=!1,this._showCloseButton=!0,this.firstScreen=n.screens.firstScreen,this.unrestrictedExitScreens=n.screens.unrestrictedExitScreens,this.mobileExitScreens=n.screens.mobileExitScreens,this.alwaysRenderedScreens=n.screens.alwaysRenderedScreens,this.screensWithoutTributeBadge=n.screens.screensWithoutTributeBadge,this.mobileScreensWithoutAskTitle=n.screens.mobileScreensWithoutAskTitle,this.mobileScreensWithAskText=n.screens.mobileScreensWithAskText,this.mobileScreensWithoutFaqLinks=n.screens.mobileScreensWithoutFaqLinks,this.mobileScreensWithoutAskPage=n.screens.mobileScreensWithoutAskPage,this.screensWithoutAskOverlay=n.screens.screensWithoutAskOverlay,this.canNotGoBackScreens=n.screens.canNotGoBackScreens,this.alwaysShowCloseButtonScreens=n.screens.alwaysShowCloseButtonScreens,this.conditionallyShowCloseButtonScreens=n.screens.conditionallyShowCloseButtonScreens,this.finalUnavailableScreens=null===(i=null==n?void 0:n.screens)||void 0===i?void 0:i.finalUnavailableScreens}get showCloseButton(){return this._showCloseButton}get showFAQLinks(){return!0}preloadComponents(){return this.componentsPreloader.preload()}setCloseButtonVisibility(e,t){this._showCloseButton=!t.includes(this.firstScreen)&&this.conditionallyShowCloseButtonScreens.includes(e)||this.alwaysShowCloseButtonScreens.includes(e),this.checkoutState.syncUpdate()}isUnrestrictedExitScreen(e){return this.unrestrictedExitScreens.includes(e)}isMobileExitScreen(e){return this.mobileExitScreens.includes(e)}isScreenWithoutTributeBadge(e){return this.screensWithoutTributeBadge.includes(e)}isMobileScreenWithoutAskTitle(e){return this.mobileScreensWithoutAskTitle.includes(e)}isMobileScreenWithAskText(e){return this.mobileScreensWithAskText.includes(e)}isMobileScreenWithoutFaqLinks(e){return this.mobileScreensWithoutFaqLinks.includes(e)}isMobileScreenWithoutAskPage(e){return this.mobileScreensWithoutAskPage.includes(e)}isScreenWithoutAskOverlay(e){return this.screensWithoutAskOverlay.includes(e)}isCanNotGoBackScreen(e){return this.canNotGoBackScreens.includes(e)}isFinalAvailableScreen(e){return void 0!==this.finalUnavailableScreens&&!this.finalUnavailableScreens.includes(e)}}class Tb extends _b{}const xb=[Ar.THANK_YOU],Ob=[],kb=[Ar.THANK_YOU,Ar.BLOCKED],Ib=[Ar.THANK_YOU],wb=[Ar.THANK_YOU],Rb=[],Mb=[Ar.THANK_YOU],Lb=[],Ub=[],Fb=Cr.CRYPTO_CURRENCY,jb=[...Ib,Cr.CRYPTO_CURRENCY],Bb=[...Rb,Cr.CRYPTO_CURRENCY],Hb=[...Ub,Cr.CRYPTO_CURRENCY],qb=[Cr.CRYPTO_CURRENCY,Ar.THANK_YOU,Ar.BLOCKED],Gb=[Ar.COMMENT],Vb=[...kb,Ar.QUESTIONS,Cr.CRYPTO_CURRENCY],Kb=[...xb,Cr.CRYPTO_CURRENCY],Yb=[...Mb],zb=[...Lb],Wb=[Ar.THANK_YOU],$b=[...Ob],Xb=[],Qb="facebook",Zb="twitter",Jb="linkedin",eP="email";function tP(e,t){if(void 0!==t){let n="?";return e.includes("?")&&(n="&"),`${e}${n}ref=${t}`}return e}function nP(e,t,n,i,s){let a="";switch(e){case Jb:return a=Ki.stringify({mini:"true",url:tP(t,s),summary:n}),`https://www.linkedin.com/shareArticle?${a}`;case Zb:return a=Ki.stringify({url:tP(t,s),text:n}),`https://twitter.com/intent/tweet?${a}`;case Qb:return a=Ki.stringify({u:tP(t,s),quote:n}),`https://www.facebook.com/sharer.php?${a}`;case eP:return a=Ki.stringify({body:yA([n,t],"\n"),subject:i||""}),`mailto:?${a}`;default:return""}}var iP,sP;!function(e){e.TWITTER="twitter",e.FACEBOOK="facebook",e.LINKEDIN="linkedin",e.EMAIL="email",e.MORE="more"}(iP||(iP={}));class aP{constructor(e){this.sharingApiParams=e}get isSharingEnabled(){const{email:e,twitter:t,linkedin:n,facebook:i,copyLink:s}=this.sharingChannels;return e||t||n||i||s}get sharingChannels(){return this.sharingApiParams.sharingChannels}get shareLink(){const e=this.sharingApiParams.sharingLink;return e?/^https?:\/\//m.test(e)?e:"https://"+e:window.location.href}get sharingText(){return this.sharingApiParams.sharingText||""}share(e,t,n){if(this.sharingApiParams.showcase)return;const i=this.getSharingLink(e,t,n);window.open(i,"_blank","location=yes,height=400,width=550,scrollbars=yes,status=yes")}getSharingLink(e,t,n){const i=function(e,t){const n=new URL(e),i={[sh.FACEBOOK]:iP.FACEBOOK,[sh.LINKEDIN]:iP.LINKEDIN,[sh.TWITTER]:iP.TWITTER,[sh.EMAIL]:iP.EMAIL,[sh.MORE]:iP.MORE,[sh.LINK]:null};return i[t]?(n.searchParams.set("sharingVendor",i[t]),n.toString()):e}(this.shareLink,e),s=this.sharingApiParams.sharingText||"";switch(e){case sh.TWITTER:return nP(Zb,i,s,void 0,n);case sh.LINKEDIN:return nP(Jb,i,s,void 0,n);case sh.FACEBOOK:return nP(Qb,i,s,void 0,n);case sh.EMAIL:return nP(eP,i,s,t);case sh.MORE:return i;case sh.LINK:return this.shareLink;default:throw new Error(`Unknown sharing type ${e}`)}}}function rP(e){var t;return e.checkoutType===Ce.PAGE&&(null===(t=e.campaignConfig)||void 0===t?void 0:t.campaignPage)?new aP({sharingChannels:Object.assign(Object.assign({},e.campaignConfig.campaignPage.thankYouScreen.sharing.channels),{copyLink:!1}),sharingLink:e.campaignConfig.campaignPage.thankYouScreen.sharing.link,showcase:e.isShowcase,sharingText:e.campaignConfig.campaignPage.thankYouScreen.sharing.text}):new aP({sharingChannels:Object.assign(Object.assign({},e.campaignConfig.thankYouScreen.sharing.channels),{copyLink:!1}),sharingLink:e.campaignConfig.thankYouScreen.sharing.link,showcase:e.isShowcase,sharingText:e.campaignConfig.thankYouScreen.sharing.text})}!function(e){e.PENDING_STATE_CHANGED="pendingStateChanged",e.SUBMIT="submit",e.SKIP="skip"}(sP||(sP={}));class oP extends FC{constructor(e,t,n){let{name:i}=t;super(),this.flow=e,this.debug=n,this._pending=!1,this.updateListeners=new Set,this.name=i}get data(){return{}}get pending(){return this._pending}set pending(e){this._pending=e,this.emit(sP.PENDING_STATE_CHANGED,this._pending)}dispose(){this.removeUpdateListeners(),this.removeAllListeners()}onUpdate(e){this.updateListeners.add(e)}removeUpdateListener(e){this.updateListeners.delete(e)}beforeLeave(e){return Promise.resolve(!0)}beforeEnter(){return Promise.resolve()}getScreenData(){return{}}leave(){return this.flow.next()}submit(){this.emit(sP.SUBMIT)}skip(){this.emit(sP.SKIP)}syncUpdate(){this.triggerUpdate()}update(){this.scheduleUpdate()}triggerUpdate(){this.updateListeners.forEach((e=>e()))}scheduleUpdate(){void 0!==this.updateTimeout&&window.clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout((()=>{this.triggerUpdate()}),oP.UPDATE_DEBOUNCE_MS)}removeUpdateListeners(){this.updateListeners.clear()}}oP.UPDATE_DEBOUNCE_MS=250;class cP extends oP{constructor(e){let{flow:t,name:n,checkoutService:i,checkoutState:s,debug:a,intl:r,subscriptionPeriodLabelsService:o,currencyService:c,experiments:l}=e;super(t,{name:n},a),this.checkoutService=i,this.checkoutState=s,this.intl=r,this.subscriptionPeriodLabelsService=o,this.currencyService=c,this.experiments=l,this.viewState=(0,ve.Ay)(this.getInitialViewState(),(e=>e)),this.on(sP.PENDING_STATE_CHANGED,(e=>{"boolean"==typeof e&&this.setLocked(e)}))}getScreenData(){return this.viewState}leave(e){return this.name!==this.flow.getCurrentScreen().name?Promise.resolve():this.flow.next({getMandatoryAllowance:()=>this.checkoutService.shouldFindMandatoryScreen,direction:null==e?void 0:e.direction,omitBeforeLeave:null==e?void 0:e.omitBeforeLeave})}produceViewState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.viewState=(0,ve.Ay)(this.viewState,e),t||this.syncUpdate()}setLocked(e){e?(this.flow.lock(),this.produceViewState((e=>{e.locked=!0}))):(this.flow.unlock(),this.produceViewState((e=>{e.locked=!1})))}withPending(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0;const t=yield e();return this.pending=!1,t}))}}class lP extends cP{getInitialViewState(){return{locked:!1}}}class uP extends cP{beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.comment.setIsRequired(!1),this.produceViewState((e=>{e.comment=this.commentDataPoint.comment}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession({canUseAmountDefaults:!0}),!0}))}setComment(e){this.produceViewState((t=>{t.comment=e}))}submitComment(){this.checkoutState.comment.saveComment(this.viewState.comment),this.leave({direction:Tc.BACKWARD})}getInitialViewState(){return{locked:!1,comment:""}}get commentDataPoint(){return this.checkoutService.getDataPoint(Nr.COMMENT)}}var dP=n(4270);const hP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="";for(let i=0;i<e;i+=1)n+=t[Math.floor(Math.random()*t.length)];return n};class mP extends cP{constructor(e,t,n,i){super(i),this.countriesService=e,this.mailingAddressCustomization=t,this.sentry=n,this.addressSessionToken=hP()}get isOnBehalfOf(){return this.checkoutState.privacy.onBehalfOfDataPoint.isOnBehalfOf}getStates(e){return this.mailingAddressCustomization.getPredefinedRegions({country:e})}getAriaErrorMessage(e){return this.intl.translate("mailingAddressScreen.addressForm.error.required",{field:e})}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.mailingAddress.setSkipped(!1);const e=this.countriesService.getMailingAddressCountriesList();this.produceViewState((t=>{var n,i,s;t.isRequired=this.mailingAddressDataPoint.isRequired,t.isPaymentScreen=this.isPaymentScreen,t.isCryptoFlow=this.isCryptoFlow,t.line1=this.mailingAddressDataPoint.line1,t.line2=this.mailingAddressDataPoint.line2,t.postal=this.mailingAddressDataPoint.postal,t.city=this.mailingAddressDataPoint.city,t.region=this.mailingAddressDataPoint.region,t.countryCode=this.mailingAddressDataPoint.countryCode,t.countryName=null!==(i=null===(n=e.find((e=>e.countryCode===this.mailingAddressDataPoint.countryCode)))||void 0===n?void 0:n.countryName)&&void 0!==i?i:"",t.countries=e,t.isRegionEnabled=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),t.isLayoutPostalCodeFirst=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),t.isAlternativeLabels=this.isAlternativeLabels(this.mailingAddressDataPoint.countryCode),t.formattedAmount=this.intl.formatCurrency(null!==(s=this.donationDataPoint.total)&&void 0!==s?s:0,{currency:this.donationDataPoint.currency,display:"trimzeroes"}),t.frequency=this.donationDataPoint.frequency,this.hasMailingAddressError&&(t.processingState=Pr.ERROR,t.payErrorMessage=this.checkoutService.payErrorMessage,t.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage)}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0;const e=this.mailingAddressDataPoint.validate();if(!e.isValid)return this.produceViewState((t=>{t.validation=e,t.shakeKey+=1})),this.pending=!1,!1;if(this.mailingAddressDataPoint.checkShouldValidateOnServer()){if(this.pending=!0,this.setProcessingState(Pr.PENDING),!(yield this.mailingAddressDataPoint.validateAddress()))return this.produceViewState((e=>{e.shakeKey+=1,e.hasServerValidationError=!0})),this.setProcessingState(Pr.ERROR),this.pending=!1,!1;this.setProcessingState(Pr.SUCCESS),this.pending=!1}return this.checkoutService.updateSession(),this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}skip(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.pending=!0,this.checkoutState.mailingAddress.setSkipped(!0),this.checkoutService.updateSession(),this.isPaymentScreen?(yield this.pay())?this.leave({omitBeforeLeave:!0}):void 0:(this.pending=!1,this.leave({omitBeforeLeave:!0}))}))}search(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.isAutocompleteEnabled())return;if(!this.isGetPlacesDataValid(e))return;this.produceViewState((e=>{e.isLoadingPlaces=!0}));const n=yield this.getPlaces(e,t);this.produceViewState((e=>{e.places=n.map((e=>Object.assign(Object.assign({},e),{innerId:(0,dP.Ak)()}))),e.isLoadingPlaces=!1}))}))}getPlaceById(e){const t=this.viewState.places.find((t=>t.innerId===e));if(!t)throw new Error(`No place with selected innerId "${e}"`);return t}shouldFindSubplaces(e){return this.mailingAddressDataPoint.shouldFindSubplaces(e)}retrieveSubplaces(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n="line1"===t?this.viewState.line1:this.viewState.postal;return this.search(n,e)}))}retrieveDetails(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.mailingAddressDataPoint.getDetails(e,this.addressSessionToken)}finally{this.addressSessionToken=hP()}this.setLine1(t.line1),this.setCity(t.city),this.isPostalCodeAutocompleteEnabled(this.mailingAddressDataPoint.countryCode)&&this.setPostal(t.postal),"string"==typeof t.line2&&this.setLine2(t.line2),t.region&&this.setRegion(t.region),this.produceViewState((e=>{e.line1=this.mailingAddressDataPoint.line1,e.line2=this.mailingAddressDataPoint.line2,e.city=this.mailingAddressDataPoint.city,e.region=this.mailingAddressDataPoint.region,e.postal=this.mailingAddressDataPoint.postal,e.validation=pN.defaultValidationResult}))}))}changeLine1(e){this.setLine1(e),this.produceViewState((e=>{e.validation.fields.line1.isValid||(e.validation.fields.line1=pN.defaultValidationResult.fields.line1),e.line1=this.mailingAddressDataPoint.line1}))}changeLine2(e){this.setLine2(e),this.produceViewState((e=>{e.validation.fields.line2.isValid||(e.validation.fields.line2=pN.defaultValidationResult.fields.line2),e.line2=this.mailingAddressDataPoint.line2}))}changeCity(e){this.setCity(e),this.produceViewState((e=>{e.validation.fields.city.isValid||(e.validation.fields.city=pN.defaultValidationResult.fields.city),e.city=this.mailingAddressDataPoint.city}))}changeRegion(e){this.setRegion(e),this.produceViewState((e=>{e.validation.fields.region.isValid||(e.validation.fields.region=pN.defaultValidationResult.fields.region),e.region=this.mailingAddressDataPoint.region}))}changePostalCode(e){this.setPostal(e),this.produceViewState((e=>{e.validation.fields.postal.isValid||(e.validation.fields.postal=pN.defaultValidationResult.fields.postal),e.postal=this.mailingAddressDataPoint.postal}))}changeSelectedCountry(e){const t=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),n=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),i=this.viewState.countries.find((t=>t.countryCode===e));i?(this.setCountryCode(e),this.setRegion(this.getPredefinedRegion(e,t,n)),this.produceViewState((t=>{t.countryCode=this.mailingAddressDataPoint.countryCode,t.countryName=i.countryName,t.region=this.mailingAddressDataPoint.region,t.places.splice(0,t.places.length),t.isRegionEnabled=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),t.isLayoutPostalCodeFirst=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),t.isAlternativeLabels=this.isAlternativeLabels(e)}))):this.sentry.captureException(new Error("Unknown country code"),{extra:{prevCountryCode:this.mailingAddressDataPoint.countryCode,nextCountryCode:e}})}getPredefinedRegion(e,t,n){var i,s;const a=this.getStates(e);if(a){if(Array.isArray(a))return null===(i=a[0])||void 0===i?void 0:i.code;const e=a[Object.keys(a)[0]],t=null===(s=null==e?void 0:e[0])||void 0===s?void 0:s.code;if(t)return t}const r=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),o=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode);return t!==r||n!==o?"":this.mailingAddressDataPoint.region}getInitialViewState(){return{locked:!1,isRequired:!1,isPaymentScreen:!0,isCryptoFlow:!1,processingState:Pr.IDLE,hasServerValidationError:!1,line1:"",line2:"",city:"",region:"",postal:"",countryCode:u.tg.UNITED_STATES,countryName:"",isLayoutPostalCodeFirst:!1,isRegionEnabled:!1,isAlternativeLabels:!1,countries:[],places:[],isLoadingPlaces:!1,shakeKey:0,validation:pN.defaultValidationResult,formattedAmount:"",frequency:oe.MONTHLY}}get hasMailingAddressError(){return this.checkoutService.getState().hasMailingAddressError}get mailingAddressDataPoint(){return this.checkoutService.getDataPoint(Nr.MAILING_ADDRESS)}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get isCryptoFlow(){return this.checkoutService.type===Ae.CRYPTO}get donationDataPoint(){return this.checkoutState.donation.dataPoint}isLayoutPostalCodeFirst(e){return this.mailingAddressCustomization.isLayoutPostalCodeFirst({country:e})}isRegionEnabled(e){return this.mailingAddressCustomization.isRegionEnabled({country:e})}isPostalCodeAutocompleteEnabled(e){return this.mailingAddressCustomization.isPostalCodeAutocompleteEnabled({country:e})}isAlternativeLabels(e){return this.mailingAddressCustomization.isAlternativeLabels({country:e})}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0,this.setProcessingState(Pr.PENDING);const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isSuccess(e)?(this.isCryptoFlow||(this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave)),this.pending=!1,!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage,e.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage})),this.setProcessingState(Pr.ERROR),this.pending=!1,!1)}))}getPlaces(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n={input:this.prepareGetPlacesText(e),restrictCountries:[this.viewState.countryCode],sessionToken:this.addressSessionToken};return t?this.mailingAddressDataPoint.getSubplaces(Object.assign({place:t},n)):this.mailingAddressDataPoint.getPlaces(Object.assign({},n))}))}isAutocompleteEnabled(){return this.mailingAddressCustomization.isAutocompleteEnabled({company:this.checkoutService.checkoutConfiguration.company.key,country:this.viewState.countryCode})}isGetPlacesDataValid(e){return Boolean(this.prepareGetPlacesText(e))&&Boolean(this.addressSessionToken)}prepareGetPlacesText(e){return e.trim()}setLine1(e){this.checkoutState.mailingAddress.setLine1(e)}setLine2(e){this.checkoutState.mailingAddress.setLine2(e)}setCity(e){this.checkoutState.mailingAddress.setCity(e)}setCountryCode(e){this.checkoutState.mailingAddress.setCountryCode(e)}setRegion(e){this.checkoutState.mailingAddress.setRegion(e)}setPostal(e){this.checkoutState.mailingAddress.setPostal(e)}}class pP extends cP{beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.firstName=this.donorNameDataPoint.firstName,e.lastName=this.donorNameDataPoint.lastName,e.email=this.donorEmailDataPoint.email,e.emailConsent.isEnabled=this.donorEmailDataPoint.emailConsent.isEnabled,e.showPhone=this.phoneNumberDataPoint.isEnabled,e.phoneRequired=this.phoneNumberDataPoint.isRequired,e.phone=this.phoneNumberDataPoint.phone,e.phoneLegalText=this.phoneNumberDataPoint.phoneLegalText,e.showPhoneLegalText=this.phoneNumberDataPoint.isLegalTextEnabled,e.userCountryCode=this.phoneNumberDataPoint.countryCode,e.showAnonymous=this.donateAnonymousDataPoint.isEnabled,e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked,e.processingState=Pr.IDLE,e.generalConsent={isAccepted:this.communicationConsentDataPoint.generalConsent.isAccepted,isEnabled:this.communicationConsentDataPoint.isGeneralConsentEnabled},e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName,e.onBehalfOf.isEnabled=this.onBehalfOfDataPoint.isEnabled,e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive,e.termsAndConditions.text=this.termsAndConditionsDataPoint.text,e.termsAndConditions.isEnabled=this.termsAndConditionsDataPoint.isEnabled,e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted;const{showPhone:n}=e,i=!!this.customerTitleDataPoint.isEnabled&&n&&e.onBehalfOf.isEnabled&&e.showAnonymous&&e.mailingListSubscription.show&&e.termsAndConditions.isEnabled;e.isApplePayAlertVisible=this.isApplePayAlertVisible,e.allOptionsEnabled=i,e.customerTitle.title=this.customerTitleDataPoint.title,e.customerTitle.list=this.customerTitleDataPoint.titleList,e.customerTitle.isEnabled=this.customerTitleDataPoint.isEnabled,e.customerTitle.isRequired=this.customerTitleDataPoint.isRequired,e.birthday.value=this.birthdayDataPoint.dateValue,e.birthday.isEnabled=this.birthdayDataPoint.isEnabled,e.birthday.convertedDate=this.birthdayDataPoint.convertedDate,e.donation.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"trimzeroes"}),e.donation.frequency=this.donationDataPoint.frequency,e.autoFocus=this.getAutoFocusConfig(e.customerTitle.isEnabled)})),this.tryStartBirthdayExperiment(),this.tryExposeBirthdayExperiment()}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0;let e=!1;if(this.produceViewState((t=>{t.validation.customerTitle=this.customerTitleDataPoint.validate(),t.validation.donorName=this.donorNameDataPoint.validate(),t.validation.donorEmail=this.donorEmailDataPoint.validate(),t.validation.phone=this.phoneNumberDataPoint.validate(),t.validation.isAccepted=this.termsAndConditionsDataPoint.validate(),t.validation.onBehalfOf=this.onBehalfOfDataPoint.validate(),t.validation.birthday=this.birthdayDataPoint.validate(),e=this.checkHasError(t),e&&(t.shakeKey+=1)})),e)return this.pending=!1,!1;this.setProcessingState(Pr.PENDING);const t=yield this.checkoutService.updateSession();if(sn.isFailure(t)&&t.failureResult.customerEmailError)return yield this.startServerErrorFlow(),!1;if(!this.isPaymentScreen)return this.setProcessingState(Pr.IDLE),this.pending=!1,!0;const n=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isSuccess(n)?(this.isCryptoFlow||(this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave)),this.pending=!1,!0):n.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),e.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage||""})),this.setProcessingState(Pr.ERROR),this.pending=!1,!1)}))}changeCompanyName(e){this.checkoutState.privacy.setOnBehalfOfCompanyName(e),this.produceViewState((e=>{e.validation.onBehalfOf.isValid||(e.validation.onBehalfOf=gN.defaultValidationResult),e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName}))}changeCustomerTitle(e){this.checkoutState.privacy.setDonorTitle(e),this.produceViewState((e=>{e.validation.customerTitle.isValid||(e.validation.customerTitle=oN.defaultValidationResult),e.customerTitle.title=this.customerTitleDataPoint.title}))}changeFirstName(e){this.checkoutState.privacy.setDonorFirstName(e),this.produceViewState((e=>{e.validation.donorName.fields.firstName.isValid||(e.validation.donorName.fields.firstName=AN.defaultValidationResult.fields.firstName),e.firstName=this.donorNameDataPoint.firstName}))}changeLastName(e){this.checkoutState.privacy.setDonorLastName(e),this.produceViewState((e=>{e.validation.donorName.fields.lastName.isValid||(e.validation.donorName.fields.lastName=AN.defaultValidationResult.fields.lastName),e.lastName=this.donorNameDataPoint.lastName}))}changeEmail(e){this.checkoutState.privacy.setDonorEmail(e),this.produceViewState((e=>{e.validation.donorEmail.fields.email.isValid||(e.validation.donorEmail.fields.email=CN.defaultValidationResult.fields.email),e.email=this.donorEmailDataPoint.email}))}changePhone(e){this.checkoutState.privacy.setPhoneNumber(e),this.produceViewState((e=>{e.validation.phone.isValid||(e.validation.phone=vN.defaultValidationResult),e.phone=this.phoneNumberDataPoint.phone}))}changePlainPhone(e){this.checkoutState.privacy.setPhoneCleanNumber(e)}changeBirthday(e){this.checkoutState.privacy.setBirthday(e),this.produceViewState((t=>{t.validation.birthday.isValid||(t.validation.birthday=qN.defaultValidationResult),t.birthday.convertedDate=this.birthdayDataPoint.convertedDate,t.birthday.value=e}))}changeCountryCode(e){this.checkoutState.privacy.setPhoneCountryCode(e),this.produceViewState((e=>{e.userCountryCode=this.phoneNumberDataPoint.countryCode}))}toggleOnBehalfOf(){this.checkoutState.privacy.setOnBehalfOfActive(!this.onBehalfOfDataPoint.isActive),this.produceViewState((e=>{e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive,e.isPaymentScreen=this.isPaymentScreen}))}toggleTermsAndConditionsAccepted(){this.checkoutState.privacy.setTermsAndConditionsAccepted(!this.termsAndConditionsDataPoint.isAccepted),this.produceViewState((e=>{var t;(null===(t=e.validation.isAccepted)||void 0===t?void 0:t.isValid)||(e.validation.isAccepted=PN.defaultValidationResult),e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted}))}toggleAnonymousChecked(){this.checkoutState.privacy.setDonateAnonymousChecked(!this.donateAnonymousDataPoint.anonymousChecked),this.produceViewState((e=>{e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked}))}toggleGeneralConsentChecked(e){this.checkoutState.communicationConsent.setGeneralConsentState(e),this.produceViewState((e=>{e.generalConsent.isAccepted=this.communicationConsentDataPoint.generalConsent.isAccepted}))}setGeneralConsentShown(){this.checkoutState.communicationConsent.setGeneralConsentShown()}clearEmailServerError(){this.produceViewState((e=>{e.serverErrors.email=!1,e.processingState=Pr.IDLE}))}getInitialViewState(){return{shakeKey:0,validation:{customerTitle:oN.defaultValidationResult,donorName:AN.defaultValidationResult,donorEmail:CN.defaultValidationResult,onBehalfOf:gN.defaultValidationResult,phone:vN.defaultValidationResult,isAccepted:PN.defaultValidationResult,birthday:qN.defaultValidationResult},serverErrors:{},showPhone:!1,phoneRequired:!1,showPhoneLegalText:!1,phoneLegalText:"",showAnonymous:!1,anonymousChecked:!1,mailingListSubscription:{checked:!1,show:!1,text:""},textIsVisible:!1,isApplePayAlertVisible:!1,allOptionsEnabled:!1,firstName:"",lastName:"",email:"",emailConsent:{isEnabled:!1},phone:null,isPaymentScreen:!1,payErrorMessage:"",additionalPayErrorMessage:"",userCountryCode:u.tg.UNITED_STATES,processingState:Pr.IDLE,termsAndConditions:{isAccepted:!1,isEnabled:!1,text:""},onBehalfOf:{isEnabled:!1,isActive:!1,companyName:""},customerTitle:{title:Qv.NONE,list:[],isEnabled:!1,isRequired:!1},locked:!1,donation:{formattedAmount:"",frequency:oe.MONTHLY},autoFocus:this.createDefaultAutoFocusConfig(),generalConsent:{isAccepted:!1,isEnabled:!1},birthday:{isEnabled:!1,value:"",convertedDate:""}}}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get isFiatFlow(){return this.checkoutService.type===Ae.MONEY}get isCryptoFlow(){return this.checkoutService.type===Ae.CRYPTO}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get termsAndConditionsDataPoint(){return this.checkoutState.privacy.termsAndConditionsDataPoint}get phoneNumberDataPoint(){return this.checkoutService.getDataPoint(Nr.PHONE_NUMBER)}get donateAnonymousDataPoint(){return this.checkoutState.privacy.donateAnonymousDataPoint}get onBehalfOfDataPoint(){return this.checkoutState.privacy.onBehalfOfDataPoint}get customerTitleDataPoint(){return this.checkoutState.privacy.customerTitleDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get paymentOptionsDataPoint(){return this.checkoutService.getDataPoint(YC.PAYMENT_OPTIONS)}get communicationConsentDataPoint(){return this.checkoutService.getDataPoint(Nr.COMMUNICATION_CONSENT)}get birthdayDataPoint(){return this.checkoutState.privacy.birthdayDataPoint}get isApplePay(){return this.paymentOptionsDataPoint.clientPaymentMethod===u._h.APPLE_PAY}get isMobile(){return this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile}get isApplePayAlertVisible(){return this.isMobile&&this.isFiatFlow&&this.isApplePay}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get birthdayDonationCheckoutExperiment(){return this.experiments.get(Sn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT)}get birthdayDonationCampaignPageExperiment(){return this.experiments.get(Sn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT)}tryExposeBirthdayExperiment(){this.birthdayDonationCheckoutExperiment.tryToExpose(),this.birthdayDonationCampaignPageExperiment.tryToExpose()}tryStartBirthdayExperiment(){const e={isPhoneEnabled:this.phoneNumberDataPoint.isEnabled,isOnBehalfOfEnabled:this.onBehalfOfDataPoint.isEnabled,isAnonymousEnabled:this.donateAnonymousDataPoint.isEnabled,isGeneralConsentEnabled:this.communicationConsentDataPoint.isGeneralConsentEnabled,isTermsAndConditionsEnabled:this.termsAndConditionsDataPoint.isEnabled,isTributeFilled:this.tributeDataPoint.isFilled,isDesktop:!this.isMobile,intl:this.intl};this.birthdayDonationCheckoutExperiment.tryStart(e),this.birthdayDonationCampaignPageExperiment.tryStart({intl:this.intl}),this.birthdayDonationCheckoutExperiment.isEnabled(e)||this.birthdayDonationCampaignPageExperiment.isEnabled({intl:this.intl})?this.setBirthdayEnabled():this.setBirthdayDisabled()}setBirthdayEnabled(){this.checkoutState.privacy.setBirthdayEnabled(),this.produceViewState((e=>{e.birthday.isEnabled=!0}))}setBirthdayDisabled(){this.produceViewState((e=>{e.birthday.isEnabled=!1,e.birthday.value="",e.birthday.convertedDate=""}))}checkHasError(e){return Object.keys(e.validation).some((t=>{const n=e.validation[t];return!!n&&!n.isValid}))}startServerErrorFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.serverErrors.email=!0,e.shakeKey+=1,e.processingState=Pr.ERROR})),this.pending=!1}))}setProcessingState(e){return this.produceViewState((t=>{t.processingState=e})),this}getAutoFocusConfig(e){const t=this.createDefaultAutoFocusConfig();return e&&(t.firstName=!1,t.customerTitle=!0),t}createDefaultAutoFocusConfig(){return{customerTitle:!1,firstName:!0}}}class gP extends cP{get showBackButton(){const e=1!==this.viewState.page||this.checkoutService.canGoBack,t=this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile;return{header:!t&&e,footer:t&&e}}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.questions=[...this.questionsDataPoint.questions.entries()].map((e=>{let[t,n]=e;return{key:t,type:n.type,required:n.required,code:n.code,question:n.question,answer:n.answer,page:null,options:[...n.options]}})),e.isMeasuring=!0}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.viewState.page,t=this.viewState.questions.filter((t=>{let{page:n}=t;return n===e})),n=this.questionsDataPoint.validateQuestionsByKeys(t.map((e=>{let{key:t}=e;return t})));return n.isValid?this.viewState.questions.some((t=>{let{page:n}=t;return null===n||n>e}))?(this.produceViewState((e=>{e.page+=1})),yield this.checkoutService.updateSession(),!1):(this.checkoutService.updateSession(),!0):(this.produceViewState((e=>{for(const[t,{isValid:i}]of Object.entries(n.fields))e.questionErrors[t]=!i;e.shakeKey+=1})),!1)}))}back(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.viewState.page;if(1===e&&this.flow.canGoBack&&this.checkoutService.canGoBack)return this.flow.prev();this.produceViewState((t=>{for(const n of t.questions)n.page===e&&(t.questionErrors[n.key]=!1);t.page-=1}))}))}answerQuestion(e,t,n){this.checkoutState.questions.setAnswer(e,t,n),this.produceViewState((t=>{const n=t.questions.find((t=>t.key===e));if(!n)throw new Error(`No question with such key: "${e}"`);t.questionErrors[e]=!1;const i=this.questionsDataPoint.getAnswer(e);Array.isArray(i)?Array.isArray(n.answer)?n.answer.splice(0,n.answer.length,...i):n.answer=[...i]:n.answer=i}))}navigateInShowcaseToPage(e){if(!this.viewState.isShowcase)throw new Error("Can be used only in showcase");this.produceViewState((t=>{t.page=e}))}completeMeasurement(e){if(e.size!==this.viewState.questions.length)throw new Error('"questionIndexesToPages" map should have the same length as questions array');this.produceViewState((t=>{for(const[n,i]of e)void 0!==t.questions[n]&&(t.questions[n].page=i,this.viewState.isShowcase&&(t.page=i));const n=this.checkoutService.checkoutConfiguration.showcase,i=n&&n.currentQuestionsPage;i&&(t.page=i),t.isMeasuring=!1}));const t=this.getPagesOfQuestionsScreen(e);return this.checkoutService.checkoutUIState.pagesOfQuestionsScreen=t,t}getInitialViewState(){return{locked:!1,page:1,questions:[],hasBackButton:!0,isMeasuring:!1,questionErrors:{},shakeKey:0,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase}}get questionsDataPoint(){return this.checkoutState.questions.dataPoint}getPagesOfQuestionsScreen(e){const t=[...e.values()];return t[t.length-1]}}class yP extends cP{beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.resetToDefaultState(),this.checkoutService.updateSession({canUseAmountDefaults:!0}),this.checkoutService.abandonSession();const e={used:ae.NO,shown:!0};this.checkoutState.remindMeLater.setState(e)}))}resetToDefaultState(){const e={used:ae.NOT_GIVEN,shown:!0};this.checkoutState.remindMeLater.setState(e)}updateEmail(e){this.checkoutState.privacy.setDonorEmail(e),this.produceViewState((t=>{t.email.isValid||(t.email.isValid=CN.defaultValidationResult.fields.email.isValid),t.email.value=e}))}updateIsTermsAndConditionsAccepted(e){this.checkoutState.privacy.setTermsAndConditionsAccepted(e),this.produceViewState((t=>{t.termsAndConditions.isValid||(t.termsAndConditions.isValid=PN.defaultValidationResult.fields.isAccepted.isValid),t.termsAndConditions.isAccepted=e}))}save(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Pr.PENDING);const e=this.donorEmailDataPoint.validate().isValid,t=this.termsAndConditionsDataPoint.validate().isValid,n=this.remindMeLaterDataPoint.validate().isValid,i=e&&t&&n;if(this.produceViewState((n=>{n.email.isValid=e,n.termsAndConditions.isValid=t,i||(n.shakeKey+=1)})),!i)return this.setProcessingState(Pr.IDLE),this.pending=!1,!1;const s={used:ae.YES,shown:!0};this.checkoutState.remindMeLater.setState(s);const a=yield this.checkoutService.updateSession({canUseAmountDefaults:!0});if(sn.isFailure(a)&&a.failureResult.customerEmailError)return this.showEmailServerValidationError(),this.pending=!1,!1;const r=yield this.checkoutService.abandonSession();return sn.isFailure(r)&&r.failureResult.customerEmailError?(this.showEmailServerValidationError(),this.pending=!1,!1):(this.setProcessingState(Pr.SUCCESS),this.pending=!1,!0)}))}saveOnClose(){this.donorEmailDataPoint.validate().isValid||this.updateEmail(""),this.termsAndConditionsDataPoint.validate().isValid||this.updateIsTermsAndConditionsAccepted(!1),this.checkoutService.updateSession({canUseAmountDefaults:!0}),this.checkoutService.abandonSession()}clearEmailServerError(){this.produceViewState((e=>{e.serverErrors.email=!1,e.processingState=Pr.IDLE}))}getInitialViewState(){return{locked:!1,email:{value:this.donorEmailDataPoint.email,isValid:!0},termsAndConditions:{isAccepted:this.termsAndConditionsDataPoint.isAccepted,isValid:!0,text:this.termsAndConditionsDataPoint.text},isTermsAndConditionsEnabled:this.termsAndConditionsDataPoint.isEnabled,processingState:Pr.IDLE,serverErrors:{},shakeKey:0}}get remindMeLaterDataPoint(){return this.checkoutState.remindMeLater.dataPoint}get termsAndConditionsDataPoint(){return this.checkoutState.privacy.termsAndConditionsDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showEmailServerValidationError(){this.produceViewState((e=>{e.processingState=Pr.ERROR,e.serverErrors.email=!0,e.shakeKey+=1}))}}class fP extends cP{constructor(e,t,n){super(n),this.redirectApi=e,this.sharingApi=t}get hasTribute(){return this.tributeDataPoint.isActive&&!!this.tributeDataPoint.tributeeName}get hasPostDonationUpsell(){var e,t;return null!==(t=null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.isAccepted)&&void 0!==t&&t}get thankYouTitle(){return this.intl.translate("common.thankYouTitle",{name:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase?"John":this.checkoutState.privacy.donorNameDataPoint.firstName})}get descriptionSharing(){switch(this.viewState.flowType){case Ae.MONEY:return this.descriptionSharingFiat;case Ae.CRYPTO:return this.intl.translate("thankYouScreen.description.once",{amount:this.viewState.formattedTotal});case Ae.STOCK:default:{const e=this.viewState.flowType;throw new Error(`Unknown flow type "${e}"`)}}}get descriptionTribute(){if(this.donationDataPoint instanceof mN&&this.donationDataPoint.frequency!==oe.ONCE&&this.donationDataPoint.showDonationEndDate&&this.donationDataPoint.donationEndDate&&this.donationDataPoint.isDonationEndDateActive){const e=this.intl.formatDate(this.donationDataPoint.donationEndDate,{type:Ha.SHORT_WITH_YEAR});return this.intl.safeTranslate("thankYouScreen.description.tribute.recurring.withEndDate",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(this.donationDataPoint.frequency),date:e,dedicatedTo:this.viewState.tribute.inHonorOf})}if(!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.donationDataPoint instanceof mN){const e=this.donationDataPoint.frequency;if(e!==oe.ONCE)return this.intl.safeTranslate("thankYouScreen.description.tribute.recurring.default",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e),dedicatedTo:this.viewState.tribute.inHonorOf})}return this.intl.safeTranslate("thankYouScreen.description.tribute.once",{amount:this.viewState.formattedTotal,dedicatedTo:this.viewState.tribute.inHonorOf})}get descriptionUpsell(){if(this.hasPostDonationUpsell)return this.intl.translate("thankYouScreen.description.upsell",{amount:this.viewState.formattedTotal,recurringType:this.viewState.postDonationUpsellData.recurringType,date:this.viewState.postDonationUpsellData.formattedStartDate,guaranteedAmount:this.viewState.postDonationUpsellData.formattedAmount})}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.redirectApi.canRedirect(this.checkoutService.getState())?(yield this.checkoutService.tryCloseSession(),yield this.redirectApi.tryRedirect(this.checkoutService)):this.checkoutService.tryCloseSession();const e=this.donationDataPoint.total||0,t=this.donationDataPoint.currency;this.produceViewState((n=>{var i,s;n.currency=t,n.total=e,n.formattedTotal=this.intl.formatCurrency(n.total,{currency:n.currency,display:"fulltrimzeroes"}),n.tributeDonorPortalLink=null!==(s=null===(i=this.checkoutService.getState().donationResultState)||void 0===i?void 0:i.tributeDonorPortalLink)&&void 0!==s?s:"",n.tribute.inHonorOf=this.tributeDataPoint.tributeeName,n.tribute.makeAnotherDonation=this.variant===br.TRIBUTE,n.tribute.completeDedication=this.variant===br.TRIBUTE,n.variant=this.variant;const{email:a,twitter:r,linkedin:o,facebook:c}=this.sharingApi.sharingChannels;n.sharing.showEmail=this.variant===br.SHARING&&a,n.sharing.showTwitter=this.variant===br.SHARING&&r,n.sharing.showLinkedin=this.variant===br.SHARING&&o,n.sharing.showFacebook=this.variant===br.SHARING&&c,n.sharing.sharingText=this.sharingApi.sharingText,n.postDonationUpsellData=this.postDonationUpsellData}))}))}getSharingLink(e){return this.sharingApi.getSharingLink(e,this.intl.translate("thankYouScreen.share.emailSubject"))}share(e,t){this.sharingApi.share(e,this.intl.translate("thankYouScreen.share.emailSubject"),t)}makeAnotherDonation(){}getRecurringTypeDescriptionAdjective(e){var t;return null!==(t={[oe.DAILY]:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adjective"),[oe.WEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adjective"),[oe.BIWEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adjective"),[oe.EVERY_4_WEEKS]:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adjective"),[oe.MONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adjective"),[oe.BIMONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adjective"),[oe.QUARTERLY]:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adjective"),[oe.SEMIANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adjective"),[oe.ANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adjective")}[e])&&void 0!==t?t:""}getRecurringTypeDescriptionAdverb(e){var t;return null!==(t={[oe.DAILY]:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),[oe.WEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),[oe.BIWEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),[oe.EVERY_4_WEEKS]:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),[oe.MONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),[oe.BIMONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),[oe.QUARTERLY]:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),[oe.SEMIANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),[oe.ANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb")}[e])&&void 0!==t?t:""}getInitialViewState(){return{locked:!1,variant:br.SHARING,currency:"USD",total:0,formattedTotal:"",sharing:{showFacebook:!0,showTwitter:!0,showLinkedin:!0,showEmail:!0,sharingText:""},tribute:{inHonorOf:"",makeAnotherDonation:!0,completeDedication:!0},postDonationUpsellData:{formattedAmount:"",formattedStartDate:"",recurringType:""},tributeDonorPortalLink:"",flowType:this.checkoutService.type}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get postDonationUpsellDataPoint(){return this.checkoutState instanceof Sb?this.checkoutState.postDonationUpsell.dataPoint:null}get descriptionSharingFiat(){if(this.donationDataPoint instanceof mN&&this.donationDataPoint.frequency!==oe.ONCE&&this.donationDataPoint.showDonationEndDate&&this.donationDataPoint.donationEndDate&&this.donationDataPoint.isDonationEndDateActive){const e=this.intl.formatDate(this.donationDataPoint.donationEndDate,{type:Ha.SHORT_WITH_YEAR});return this.intl.translate("thankYouScreen.description.recurring.withEndDate",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(this.donationDataPoint.frequency),date:e})}if(!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.donationDataPoint instanceof mN){const e=this.donationDataPoint.frequency;if(e!==oe.ONCE)return this.intl.translate("thankYouScreen.description.recurring.default",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e)})}return this.intl.translate("thankYouScreen.description.once",{amount:this.viewState.formattedTotal})}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get postDonationUpsellFormattedAmount(){var e;return this.intl.formatCurrency((null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellAmount)||0,{currency:this.donationDataPoint.currency,display:"fulltrimzeroes"})}get postDonationUpsellFormattedStartDate(){var e;return this.intl.formatDate((null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellStartDate)||"",{type:Ha.LONG})}get postDonationUpsellRecurringType(){var e;return(null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellFrequency)?this.getRecurringTypeDescriptionAdverb(this.postDonationUpsellDataPoint.upsellFrequency):""}get postDonationUpsellData(){return{recurringType:this.postDonationUpsellRecurringType,formattedAmount:this.postDonationUpsellFormattedAmount,formattedStartDate:this.postDonationUpsellFormattedStartDate}}get isSharingEnabled(){return this.sharingApi.isSharingEnabled}get variant(){return this.hasTribute&&this.tributeDataPoint.isSharingEnabled?br.TRIBUTE:this.isSharingEnabled?br.SHARING:br.DEFAULT}}class SP extends cP{constructor(e){super(e),this.designationDataPoint=e.designationDataPoint}addComment(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutState.comment.setIsRequired(!0),this.leave({omitBeforeLeave:!0})}))}validateDesignation(){const e=this.designationDataPoint.validateDesignation(this.getGoalRepeat(this.viewState.frequency));this.produceViewState((t=>{t.designation.isValid=e.isValid,t.errors.designation.required=e.fields.goal.errors.required}))}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.currencyCode=this.donationDataPoint.currency,e.currencyName=this.currencyService.getName(this.donationDataPoint.currency),e.currencies=this.donationDataPoint.currencyList.map((e=>({code:e,name:this.donationDataPoint.getCurrencyName(e),type:e}))),e.defaultFiatCurrency=this.donationDataPoint.defaultFiatCurrency,e.frequency=oe.ONCE,e.amount=this.donationDataPoint.amount||null,e.amountInUsd=this.donationDataPoint.amountInUSD||0,e.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat,e.minAmount=this.donationDataPoint.minAmount,e.tribute.show=this.tributeDataPoint.isEnabled,e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.labelType=this.tributeDataPoint.labelType,e.tribute.sharingEnabled=this.tributeDataPoint.isSharingEnabled,e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled,e.tribute.isOptional=this.tributeDataPoint.isOptional,e.tribute.isTributeOriented=this.tributeDataPoint.isTributeOriented,e.designation.show=this.designationDataPoint.isEnabled,e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal,e.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e.frequency)),e.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e.frequency)),e.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e.frequency)),e.comment.isEnabled=this.commentDataPoint.isEnabled,e.comment.content=this.commentDataPoint.comment,e.comment.prevContent=this.commentDataPoint.prevComment,e.livemode=this.checkoutService.livemode,e.isCryptoAccountConnected=!!this.checkoutService.company.cryptoProvider}))}))}changeAmount(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.donation.setAmount(e),this.checkoutService.syncUpdateCheckoutState();const t=this.donationDataPoint.validate();this.produceViewState((n=>{n.amount=e,n.amountInUsd=this.donationDataPoint.amountInUSD||0,n.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat,n.isDefaultAmount=!1,n.errors.amount.required=!1,n.errors.amount.min&&(n.errors.amount.min=t.fields.amount.errors.min),n.errors.amount.max&&(n.errors.amount.max=t.fields.amount.errors.max)}))}))}validateAmount(){const e=this.donationDataPoint.validate();this.produceViewState((t=>{t.isAmountValid=e.fields.amount.isValid,t.errors.amount.min=e.fields.amount.errors.min,t.errors.amount.max=e.fields.amount.errors.max,t.errors.amount.required=e.fields.amount.errors.required}))}savePrevComment(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.checkoutState.comment.savePrevComment()}changeCryptoCurrency(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.donation.setCurrency(e),this.viewState.isDefaultAmount&&(this.checkoutState.donation.setAmountByDefault(e),this.produceViewState((e=>{e.amount=this.donationDataPoint.total}))),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((t=>{t.currencyCode=e,t.currencyName=this.currencyService.getName(e),t.amountInUsd=this.donationDataPoint.amountInUSD||0,t.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat}))}))}toggleTribute(){this.checkoutState.tribute.setActive(!this.tributeDataPoint.isActive),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeTributeName(e){this.checkoutState.tribute.setTributeeName(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeGoal(e){this.checkoutState.designation.setGoal(e),this.produceViewState((e=>{e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal})),this.validateDesignation()}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return!this.pending&&(this.pending=!0,this.produceViewState((e=>{e.processingState=Pr.PENDING})),this.validateAmount(),this.validateDesignation(),this.viewState.isAmountValid?this.viewState.designation.isValid?(this.checkoutService.updateSession(),this.hold()):(this.produceViewState((e=>{e.designationShakeKey+=1,e.processingState=Pr.IDLE})),this.pending=!1,!1):(this.produceViewState((e=>{e.processingState=Pr.IDLE})),this.pending=!1,!1))}))}getInitialViewState(){return{processingState:Pr.IDLE,locked:!1,amount:null,amountInUsd:0,amountInDefaultFiat:0,minAmount:SP.MIN_DONATION_AMOUNT_IN_USD,maxAmount:SP.MAX_DONATION_AMOUNT_IN_USD,isAmountValid:!0,currencyCode:"BTC",currencyName:this.currencyService.getName("BTC"),defaultFiatCurrency:"USD",frequency:oe.ONCE,errors:{amount:{min:!1,max:!1,required:!1},payment:{status:!1},designation:{required:!1}},tribute:{name:"",isActive:!1,show:!1,labelType:u.dR.IN_HONOR_MEMORY,sharingEnabled:!1,isFilled:!1,inHonorOfMaxLength:xN.getInHonorOfMaxLength(),isOptional:!1,isTributeOriented:!1},designation:{show:!1,goalKey:null,goals:[],isEditable:!0,isValid:!0,shouldShowDesignation:!1,goal:null},currencies:[],enabledFlows:{money:this.checkoutService.checkoutConfiguration.enabledFlows.money},comment:{isEnabled:this.checkoutService.campaignConfig.showComment,content:"",prevContent:""},flowType:this.checkoutService.type,livemode:!0,isCryptoAccountConnected:!0,isDefaultAmount:!0,designationShakeKey:0}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.hold();return this.pending=!1,!sn.isFailure(e)||(this.handleHoldError(e),!1)}))}handleHoldError(e){sn.isSuccess(e)||this.produceViewState((e=>{e.errors.payment.status=!0,e.errors.payment.title=this.intl.translate("common.errorOccurredText"),e.errors.payment.message="",e.processingState=Pr.ERROR}))}getGoalRepeat(e){return e===oe.ONCE?Ze.ONE_TIME:Ze.RECURRING}}SP.MIN_DONATION_AMOUNT_IN_USD=100,SP.MAX_DONATION_AMOUNT_IN_USD=1e8;class EP extends cP{constructor(e){super(e)}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){const{cryptoAddress:e}=this.checkoutService.getState();if(!e)throw new Error("cryptoAddress was not set");this.produceViewState((t=>{var n;t.formattedAmount=this.intl.formatCurrency(null!==(n=this.donationDataPoint.total)&&void 0!==n?n:0,{display:"trimzeroes",currency:this.donationDataPoint.currency,withoutPrefix:!0,withoutSuffix:!0}),t.currencyCode=this.donationDataPoint.currency,t.walletAddress=e,t.networkName=this.donationDataPoint.currencyNetworkData.networkName,t.protocol=this.donationDataPoint.currencyNetworkData.protocol})),this.leaveOnSuccessfulPayment()}))}getInitialViewState(){return{locked:!1,formattedAmount:"0",walletAddress:"",currencyCode:"",networkName:"",protocol:""}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}leaveOnSuccessfulPayment(){const e=setInterval((()=>{this.checkoutService.isPaymentCompleted&&(clearInterval(e),this.leave())}),5e3)}}const AP={[Cr.CRYPTO_CURRENCY]:class extends SP{},[Cr.CRYPTO_WALLET]:class extends EP{},[Ar.COMMENT]:class extends uP{},[Ar.PRIVACY]:class extends pP{},[Ar.THANK_YOU]:class extends fP{},[Ar.REMIND_ME]:class extends yP{},[Ar.MAILING_ADDRESS]:class extends mP{},[Ar.QUESTIONS]:class extends gP{},[Ar.BLOCKED]:class extends lP{}};class CP{static isCryptoCurrencyScreenController(e,t){return t===Cr.CRYPTO_CURRENCY}static isCryptoWalletScreenController(e,t){return t===Cr.CRYPTO_WALLET}static isThankYouScreenController(e,t){return t===Ar.THANK_YOU}static isMailingAddressScreenController(e,t){return t===Ar.MAILING_ADDRESS}static isBlockedScreenController(e,t){return t===Ar.BLOCKED}constructor(e,t,n,i,s,a,r,o,c){this.checkoutService=e,this.checkoutState=t,this.intl=n,this.debug=i,this.sentry=s,this.currencyService=a,this.subscriptionPeriodLabelsService=r,this.mailingAddressCustomization=o,this.experiments=c}create(e,t){const n=AP[e],i={name:e,flow:t,checkoutService:this.checkoutService,checkoutState:this.checkoutState,debug:this.debug,intl:this.intl,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,currencyService:this.currencyService,experiments:this.experiments};return CP.isCryptoCurrencyScreenController(n,e)?new n(Object.assign(Object.assign({},i),{designationDataPoint:this.checkoutService.getDataPoint(Nr.DESIGNATION)})):CP.isCryptoWalletScreenController(n,e)?new n(Object.assign({},i)):CP.isThankYouScreenController(n,e)?new n(this.redirectApi,this.sharingApi,i):CP.isMailingAddressScreenController(n,e)?new n(this.countriesService,this.mailingAddressCustomization,this.sentry,i):(CP.isBlockedScreenController(n,e),new n(i))}get redirectApi(){return this.checkoutService.redirectApi}get sharingApi(){return this._sharingApi||(this._sharingApi=rP({checkoutType:this.checkoutService.checkoutConfiguration.checkoutType,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,campaignConfig:this.checkoutService.campaignConfig})),this._sharingApi}get countriesService(){return this._countriesService||(this._countriesService=(0,Bv.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutService.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})),this._countriesService}}class vP{constructor(e){this.options=e}getCustomExternalConfigScreen(){var e;const{checkoutConfiguration:t,isValidScreen:n}=this.options,i=null===(e=t.externalConfig.checkoutData)||void 0===e?void 0:e.screen;return void 0!==i&&n(i)?i:void 0}}class NP extends vP{getInitialScreen(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.isCompanyBlocked())return Ar.BLOCKED;const e=this.getCustomExternalConfigScreen();return void 0!==e?e:Cr.CRYPTO_CURRENCY}))}isCompanyBlocked(){return Boolean(this.options.checkoutConfiguration.company.blockedAt)}}const bP=Cr.CRYPTO_CURRENCY;function PP(e){return function(t){return e.some((e=>e===t))}}const DP=PP([Cr.CRYPTO_CURRENCY,Cr.CRYPTO_WALLET,Ar.COMMENT,Ar.PRIVACY,Ar.THANK_YOU,Ar.MAILING_ADDRESS,Ar.QUESTIONS,Ar.BLOCKED]);Error,Error;class _P extends Error{constructor(){super("Intent secret is not provided")}}Error;class TP extends Error{constructor(){super("Could not retrieve iDEAL payment intent")}}Error;class xP{static handleError(e){return"validation_error"===e.type?sn.fail({}):sn.fail({message:e.message})}constructor(e,t,n,i,s){this.stripe=e,this.intl=t,this.sentry=n,this.paymentAPI=i,this.setPaymentMethod=s,this.name=u._h.ACSS,this.intentSecret=null,this.params=null}initiateFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.params=e,!0}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.ACSS});if(sn.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new _P;return this.intentSecret=t,sn.success(void 0)}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t,n,i,s;if(this.setPaymentMethod(u._h.ACSS),yield this.hold(),!this.intentSecret)return sn.fail({});if((null===(e=(yield this.stripe.retrieveSetupIntent(this.intentSecret)).setupIntent)||void 0===e?void 0:e.status)===eb.Zq.SUCCEEDED)return sn.success(void 0);let a;try{null===(n=null===(t=this.params)||void 0===t?void 0:t.onPopupOpen)||void 0===n||n.call(t),a=yield this.stripe.confirmAcssDebitSetup(this.intentSecret,{payment_method:{billing_details:{name:Y,email:z}}},{skipMandate:!1})}catch(r){return this.sentry.captureException(r),sn.fail({message:this.commonErrorText})}finally{null===(s=null===(i=this.params)||void 0===i?void 0:i.onPopupClose)||void 0===s||s.call(i)}const r=a.error;return r?xP.handleError(r):sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return sn.isSuccess(e)?e:sn.fail({shouldLeave:!1,message:e.failureResult.message})}))}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}}var OP;!function(e){e.PAYMENT_METHOD_MICRODEPOSIT_VERIFICATION_DESCRIPTOR_CODE_MISMATCH="payment_method_microdeposit_verification_descriptor_code_mismatch",e.PAYMENT_METHOD_MICRODEPOSIT_VERIFICATION_ATTEMPTS_EXCEEDED="payment_method_microdeposit_verification_attempts_exceeded",e.BANK_ACCOUNT_UNUSABLE="bank_account_unusable",e.ACCOUNT_NUMBER_INVALID="account_number_invalid",e.PAYMENT_INTENT_AUTHENTICATION_FAILURE="payment_intent_authentication_failure"}(OP||(OP={}));const kP=["INR","USD","EUR","GBP","SGD","CAD","CHF","SEK","AED","JPY","NOK","MYR","HKD"];class IP{static handleCardError(e,t,n){return{message:t?e.translate("creditCard.error.title"):n,additionalMessage:t?e.translate("creditCard.error.message"):void 0}}static handle3DsAuthResult(e){return e?e.code===OP.PAYMENT_INTENT_AUTHENTICATION_FAILURE?sn.fail({message:e.message}):sn.fail({}):sn.success({})}constructor(e,t){this.stripe=e,this.paymentAPI=t}validateStripePaymentMethod(e,t,n){var i;if((null===(i=null==e?void 0:e.card)||void 0===i?void 0:i.country)!==u.tg.INDIA)return sn.success({});const s=this.validateIndianCard(t,n);return sn.isFailure(s)?s:sn.success({})}perform(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.paymentAPI.pay({paymentMethod:e});if(sn.isSuccess(t))return t;const n=t.failureResult.errors,i=null==n?void 0:n.customCode,s=null==n?void 0:n.intentSecret;return n?i&&s&&"requires_action"===n.customCode?this.initiate3DS(n.intentSecret,e):sn.fail({}):sn.fail({hasBaseErrorMessage:!!t.failureResult.message})}))}validateIndianCard(e,t){return e.getFrequency()===oe.ONCE?sn.success({}):e.getFrequency()===oe.DAILY&&this.isIndianCardRestrictedRecurringCurrency(e.getCurrency())?sn.fail({shouldLeave:!1,title:t.translate("creditCard.error.indianCardError.title"),message:t.translate("creditCard.error.indianCardError.notValidFrequencyAndCurrency",{currency:e.getCurrency()})}):e.getFrequency()===oe.DAILY?sn.fail({shouldLeave:!1,title:t.translate("creditCard.error.indianCardError.title"),message:t.translate("creditCard.error.indianCardError.notValidFrequency")}):this.isIndianCardRestrictedRecurringCurrency(e.getCurrency())?sn.fail({shouldLeave:!1,title:t.translate("creditCard.error.indianCardError.title"),message:t.translate("creditCard.error.indianCardError.notValidCurrency",{currency:e.getCurrency()})}):sn.success({})}isIndianCardRestrictedRecurringCurrency(e){return!kP.includes(e)}initiate3DS(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield this.stripe.handleCardAction(e),i=IP.handle3DsAuthResult(n.error);if(sn.isFailure(i))return i;const s=yield this.paymentAPI.pay({paymentMethod:t});return sn.isFailure(s)?sn.fail({}):s}))}}const wP="Payment cancelled";class RP{constructor(e){this.params=e}init(){return this.makePaymentRequest().then((e=>{let{canMakePaymentResult:t}=e;return!!(null==t?void 0:t.applePay)}))}create(e){return this.makePaymentRequest().then((t=>{let{paymentRequest:n}=t;const i=new Promise(((e,t)=>{n.once("token",(t=>{t.complete("success"),e({token:t.token,payerName:t.payerName,payerEmail:t.payerEmail})})).once("cancel",(()=>{t(wP)}))})),{total:s,displayItems:a}=this.params.request;return n.update({total:{label:s.label,amount:e.amount},displayItems:a,currency:e.currency}),n.show(),i.finally((()=>{n.off("token").off("cancel")}))})).then((e=>({stripeVerifier:e})))}makePaymentRequest(){let e;if(this.paymentRequest)e=Promise.resolve(this.paymentRequest);else{const t=this.params.stripe();if(!t)throw new Error("Stripe is not provided");e=t.then((e=>{const t=Object.assign(Object.assign({},this.params.request),{requestPayerEmail:!0,requestPayerName:!0,wallets:["applePay"]});return this.paymentRequest=e.paymentRequest(t),this.paymentRequest}))}return e.then((e=>new Promise(((t,n)=>{e.canMakePayment().then((n=>{t({canMakePaymentResult:n,paymentRequest:e})})).catch((e=>{n(e)}))}))))}}class MP{constructor(e,t,n,i,s,a,r,o,c,l,d,h,m,p,g){this.config=e,this.applePayStripeLoadingPromise=t,this.sentry=n,this.intl=i,this.paymentAPI=s,this.donation=a,this.setPaymentMethod=r,this.setDonorFullNameIfEmpty=o,this.setDonorEmailIfEmpty=c,this.setCountryCodeIfEmptyAddress=l,this.setCityIfEmpty=d,this.setLine1IfEmpty=h,this.setLine2IfEmpty=m,this.setPostalIfEmpty=p,this.setRegionIfEmpty=g,this.name=u._h.APPLE_PAY,this.cardToken=null,this.applePayPaymentMethodService=new RP({request:e,stripe:this.applePayStripeLoadingPromise})}checkAvailability(){return(0,l.sH)(this,void 0,void 0,(function*(){try{return yield this.applePayPaymentMethodService.init()}catch(e){return this.sentry.captureException(e),!1}}))}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.setPaymentMethod(u._h.APPLE_PAY),this.cardToken=yield this.createToken(),!this.cardToken)return sn.fail({});const e=yield this.hold();return sn.isFailure(e)?sn.fail({message:this.intl.translate("common.errorOccurredText")}):sn.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){try{const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.APPLE_PAY});if(sn.isFailure(e))return e}catch(e){return sn.fail({shouldLeave:!1})}return sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.cardToken||(this.cardToken=yield this.createToken()),!this.cardToken)return sn.fail({shouldLeave:!1});const e=yield this.createStripePaymentMethod(this.cardToken);if(sn.isFailure(e))return this.cardToken=null,sn.fail({shouldLeave:!1,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);if(this.cardToken=null,sn.isSuccess(t))return t;const{message:n,additionalMessage:i}=IP.handleCardError(this.intl,t.failureResult.hasBaseErrorMessage,t.failureResult.message);return sn.fail({shouldLeave:!1,message:n,additionalMessage:i})}))}initiatePayment(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.applePayStripeLoadingPromise();if(!t)throw new Error("Stripe is not provided");return new IP(t,this.paymentAPI).perform(e)}))}createStripePaymentMethod(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.applePayStripeLoadingPromise();if(!t)throw new Error("Stripe is not provided");let n;try{n=yield t.createPaymentMethod({type:u.qs.CARD,card:{token:e}})}catch(e){return this.sentry.captureException(e),sn.fail({})}return n.error?sn.fail({message:n.error.message}):n.paymentMethod?sn.success(n.paymentMethod):sn.fail({})}))}createToken(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t;let n;try{n=yield this.applePayPaymentMethodService.create({amount:this.donation.getTotal(),currency:this.donation.getCurrency().toLowerCase()}),n.stripeVerifier&&this.setDonorInfo(n.stripeVerifier)}catch(e){return e!==wP&&this.sentry.captureException(e),null}return(null===(t=null===(e=n.stripeVerifier)||void 0===e?void 0:e.token)||void 0===t?void 0:t.id)||null}))}setDonorInfo(e){var t;const n=e.payerEmail;n&&this.setDonorEmailIfEmpty(n);const i=e.payerName||(null===(t=e.token.card)||void 0===t?void 0:t.name)||"";i&&this.setDonorFullNameIfEmpty(i),this.setDonorMailingAddress(e)}setDonorMailingAddress(e){const{card:t}=e.token;t&&(t.address_country&&this.setCountryCodeIfEmptyAddress(t.address_country),this.setCityIfEmpty(t.address_city||""),this.setLine1IfEmpty(t.address_line1||""),this.setLine2IfEmpty(t.address_line2||""),this.setRegionIfEmpty(t.address_state||""),this.setPostalIfEmpty(t.address_zip||""))}}Error,Error;class LP extends Error{constructor(){super("AU BECS intent secret not found")}}class UP extends Error{constructor(){super("AU BECS personal information required")}}class FP{constructor(e,t,n,i,s,a,r){this.stripe=e,this.stripeElements=t,this.donorName=n,this.donorEmail=i,this.sentry=s,this.paymentAPI=a,this.params=r,this.name=u._h.AU_BECS,this.intentSecret=null,this.completed=!1,this.elementReady=!1,this.hasElementError=!1,this.initiated=!1,this.onElementChange=e=>{this.completed=e.complete,this.hasElementError=!!e.error}}initiateFlow(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.initiated||(this.auBankAccountElement=this.createElement(),this.auBankAccountElement.once("ready",(()=>{this.elementReady=!0,(null==t?void 0:t.onAuBankAccountElementReady)&&t.onAuBankAccountElementReady()})),this.auBankAccountElement.on("change",this.onElementChange),this.auBankAccountElement.mount(e),this.initiated=!0),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.elementReady?!this.completed&&!(yield this.validatePayment())||this.hasElementError?sn.fail({}):sn.success(void 0):sn.fail({})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.AU_BECS});if(sn.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new LP;return this.intentSecret=t,sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new LP;const{firstName:e,lastName:t}=this.donorName.getDto(),{email:n}=this.donorEmail.getDto();if(!n||!e||!t)throw new UP;const i=yield this.retrieveSetupIntent(this.intentSecret);if(!i)return sn.fail({shouldLeave:!1});if(i.status===eb.Zq.SUCCEEDED)return this.requestPay();const s=yield this.confirmDebitSetup(this.intentSecret);return sn.isFailure(s)?sn.fail({shouldLeave:!1,message:s.failureResult.message}):s.successResult.status===eb.Zq.SUCCEEDED?this.requestPay():sn.fail({shouldLeave:!1})}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;null===(e=this.auBankAccountElement)||void 0===e||e.destroy()}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return sn.isSuccess(e)?e:sn.fail({shouldLeave:!1,message:e.failureResult.message})}))}confirmDebitSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.getElement(),{firstName:n,lastName:i}=this.donorName.getDto(),{email:s}=this.donorEmail.getDto();let a;try{a=yield this.stripe.confirmAuBecsDebitSetup(e,{payment_method:{au_becs_debit:t,billing_details:{name:yA([n,i]),email:s}}})}catch(e){return this.sentry.captureException(e),sn.fail({shouldLeave:!1})}return a.error?"validation_error"===a.error.type||a.error.code===OP.ACCOUNT_NUMBER_INVALID?sn.fail({shouldLeave:!1,message:a.error.message}):sn.fail({shouldLeave:!1}):sn.success(a.setupIntent)}))}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.error?null:t.setupIntent}))}validatePayment(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getElement();let t;try{t=yield this.stripe.createPaymentMethod({type:u.qs.AU_BECS,au_becs_debit:e,billing_details:{name:"customer",email:"test@test.ru"}})}catch(e){return this.sentry.captureException(e),!1}return!!t.paymentMethod&&!t.error}))}getElement(){if(!this.auBankAccountElement)throw new Error("auBankAccountElement is not initialized");return this.auBankAccountElement}createElement(){return this.stripeElements.create("auBankAccount",{iconStyle:"default",disabled:!1,hideIcon:!1,style:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses})}}class jP extends Error{constructor(){super("Card element not found")}}class BP{constructor(e,t,n,i,s,a,r,o,c){this.stripe=e,this.stripeElements=t,this.sentry=n,this.intl=i,this.failureHandler=s,this.paymentAPI=a,this.setPaymentMethodCountry=r,this.donation=o,this.params=c,this.name=u._h.CARD,this.elementsSource=null,this.elementsState=this.getElementsInitialState(),this.handleElementChange=(e,t)=>{this.elementsState[e].completed=t.complete,this.elementsState[e].hasError=!!t.error},this.handleElementReady=(e,t)=>{this.elementsState[e].ready=!0,t&&t(e)},this.cardPaymentInitiator=new IP(this.stripe,this.paymentAPI)}initiateFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i;const{source:s,cardCvcContainer:a,cardExpiryContainer:r,cardNumberContainer:o,cardCvcOptions:c,cardNumberOptions:l,stripeElementStyleOverride:u,onCardElementReady:d}=e;if(this.elementsSource===s)return!0;this.elementsSource=s,this.elementsState=this.getElementsInitialState(),null===(t=this.stripeElements.getElement(_r.CARD_NUMBER))||void 0===t||t.destroy(),null===(n=this.stripeElements.getElement(_r.CARD_EXPIRY))||void 0===n||n.destroy(),null===(i=this.stripeElements.getElement(_r.CARD_CVC))||void 0===i||i.destroy();const h=this.stripeElements.create(_r.CARD_NUMBER,{iconStyle:"default",showIcon:void 0===(null==l?void 0:l.showIcon)||l.showIcon,style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses,placeholder:void 0!==(null==l?void 0:l.placeholder)?l.placeholder:this.intl.translate("creditCard.numberInput.label"),disableLink:!0}),m=this.stripeElements.create(_r.CARD_EXPIRY,{style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses}),p=this.stripeElements.create(_r.CARD_CVC,{style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses,placeholder:void 0!==(null==c?void 0:c.placeholder)?c.placeholder:void 0});return h.on("change",this.handleElementChange.bind(this,_r.CARD_NUMBER)),m.on("change",this.handleElementChange.bind(this,_r.CARD_EXPIRY)),p.on("change",this.handleElementChange.bind(this,_r.CARD_CVC)),h.once("ready",this.handleElementReady.bind(this,_r.CARD_NUMBER,d)),m.once("ready",this.handleElementReady.bind(this,_r.CARD_EXPIRY,d)),p.once("ready",this.handleElementReady.bind(this,_r.CARD_CVC,d)),h.mount(o),m.mount(r),p.mount(a),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.elementsReady?!this.elementsCompleted||this.hasElementsError?(yield this.stripe.createToken(this.getCardNumberElement()),sn.fail({})):sn.success(void 0):sn.fail({})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentAPI.hold({clientPaymentMethod:u._h.CARD})}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.stripeElements.getElement(_r.CARD_NUMBER),t=this.stripeElements.getElement(_r.CARD_EXPIRY),n=this.stripeElements.getElement(_r.CARD_CVC);null==e||e.destroy(),null==t||t.destroy(),null==n||n.destroy()}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.createStripePaymentMethod();if(sn.isSuccess(e)){const t=this.cardPaymentInitiator.validateStripePaymentMethod(e.successResult,this.donation,this.intl);if(sn.isFailure(t))return t}if(sn.isFailure(e))return this.failureHandler(),sn.fail({shouldLeave:!0,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);return sn.isFailure(t)?(this.failureHandler(),sn.fail({shouldLeave:!0,message:t.failureResult.message})):t}))}get elementsReady(){return Object.values(this.elementsState).every((e=>{let{ready:t}=e;return t}))}get elementsCompleted(){return Object.values(this.elementsState).every((e=>{let{completed:t}=e;return t}))}get hasElementsError(){return Object.values(this.elementsState).some((e=>{let{hasError:t}=e;return t}))}getCardNumberElement(){const e=this.stripeElements.getElement(_r.CARD_NUMBER);if(!e)throw new jP;return e}initiatePayment(e){return this.cardPaymentInitiator.perform(e)}createStripePaymentMethod(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;const t=this.getCardNumberElement();let n;try{n=yield this.stripe.createPaymentMethod({type:u.qs.CARD,card:t})}catch(e){return this.sentry.captureException(e),sn.fail({})}return n.error?sn.fail({message:n.error.message}):n.paymentMethod?((null===(e=n.paymentMethod.card)||void 0===e?void 0:e.country)&&this.setPaymentMethodCountry(n.paymentMethod.card.country),sn.success(n.paymentMethod)):sn.fail({})}))}getElementsInitialState(){return{[_r.CARD_NUMBER]:{ready:!1,completed:!1,hasError:!1},[_r.CARD_EXPIRY]:{ready:!1,completed:!1,hasError:!1},[_r.CARD_CVC]:{ready:!1,completed:!1,hasError:!1}}}}var HP;!function(e){e.CANCELED="CANCELED"}(HP||(HP={}));class qP extends Error{constructor(e){super(e.message||"Google Pay payment flow error"),this.meta=e,this.name="GooglePayPaymentFlowError"}}class GP{constructor(e,t){this.googlePaySdkEnv=e,this.sentry=t}loadClient(){return(0,l.sH)(this,void 0,void 0,(function*(){yield K("https://pay.google.com/gp/p/js/pay.js",!1,window,{},!1,J);const e=window.google;return e?new e.payments.api.PaymentsClient({environment:this.googlePaySdkEnv}):null}))}}class VP{constructor(e,t,n,i,s,a,r,o,c,l,d,h,m){this.config=e,this.livemode=t,this.env=n,this.stripe=i,this.currencyService=s,this.donation=a,this.sentry=r,this.intl=o,this.paymentAPI=c,this.googlePayAPI=l,this.setPaymentMethod=d,this.setDonorFullNameIfEmpty=h,this.setDonorEmailIfEmpty=m,this.name=u._h.GOOGLE_PAY,this.cardToken=null,this.googlePayJwt=null,this.client=null,this.googlePaySdkEnv="TEST",this.stripeLivemode="test",this.livemode&&this.env===u.hY.PRODUCTION&&(this.googlePaySdkEnv="PRODUCTION",this.stripeLivemode="live"),this.cardPaymentInitiator=new IP(this.stripe,this.paymentAPI)}checkAvailability(){return(0,l.sH)(this,void 0,void 0,(function*(){try{if(!this.client)return!1;const e=this.makeReadyToPayRequest();return(yield this.client.isReadyToPay(e)).result}catch(e){return"DEVELOPER_ERROR"===e.statusCode&&this.sentry.captureException(new Error(e.statusMessage),{extra:e}),!1}}))}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){try{this.googlePayJwt=yield this.getJwt()}catch(e){return!1}return this.client=yield this.loadClient(),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.setPaymentMethod(u._h.GOOGLE_PAY),this.cardToken=yield this.createToken(),!this.cardToken)return sn.fail({});const e=yield this.hold();return sn.isFailure(e)?sn.fail({message:this.intl.translate("common.errorOccurredText")}):sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.cardToken||(this.cardToken=yield this.createToken()),!this.cardToken)return sn.fail({shouldLeave:!1});const e=yield this.createStripePaymentMethod(this.cardToken);if(sn.isSuccess(e)){const t=this.cardPaymentInitiator.validateStripePaymentMethod(e.successResult,{getFrequency:()=>this.donation.getFrequency(),getCurrency:()=>this.donation.getCurrency()},this.intl);if(sn.isFailure(t))return t}if(sn.isFailure(e))return this.cardToken=null,sn.fail({shouldLeave:!1,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);if(this.cardToken=null,sn.isSuccess(t))return t;const{message:n,additionalMessage:i}=IP.handleCardError(this.intl,t.failureResult.hasBaseErrorMessage,t.failureResult.message);return sn.fail({shouldLeave:!1,message:n,additionalMessage:i})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){try{const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.GOOGLE_PAY});if(sn.isFailure(e))return e}catch(e){return sn.fail({shouldLeave:!1})}return sn.success(void 0)}))}get merchantInfo(){if(!this.googlePayJwt)throw new Error("GPay token is required");return{merchantId:this.config.googlePayInfo.merchantId,merchantName:this.config.companyName,merchantOrigin:window.location.hostname,authJwt:this.googlePayJwt}}initiatePayment(e){return(0,l.sH)(this,void 0,void 0,(function*(){return new IP(this.stripe,this.paymentAPI).perform(e)}))}createStripePaymentMethod(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.createPaymentMethod({type:u.qs.CARD,card:{token:e}})}catch(e){return this.sentry.captureException(e),sn.fail({})}return t.error?sn.fail({message:t.error.message}):t.paymentMethod?sn.success(t.paymentMethod):sn.fail({})}))}create(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.client)throw new Error("GPay client not found");const t=this.makePaymentRequest(e),n=yield this.client.loadPaymentData(t);if(n.errorCode)throw new Error("GPay payment data is not loaded");return{token:JSON.parse(n.paymentMethodData.tokenizationData.token),email:n.email}}))}makePaymentRequest(e){const{amount:t,currency:n}=e;return{apiVersion:2,apiVersionMinor:0,emailRequired:!0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:this.config.googlePayInfo.allowedAuthMethods,allowedCardNetworks:this.config.googlePayInfo.allowedCardNetworks},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"stripe",gatewayMerchantId:this.merchantInfo.merchantId,"stripe:version":this.config.googlePayInfo.stripeAPIVersion,"stripe:publishableKey":this.config.stripePublicKey[this.stripeLivemode]+"/"+this.config.stripeAccount}}}],transactionInfo:{countryCode:this.config.countryCode,currencyCode:n.toUpperCase(),totalPriceStatus:"FINAL",totalPrice:this.currencyService.toFloatUnformattedStr(t,n.toUpperCase())},merchantInfo:this.merchantInfo}}makeReadyToPayRequest(){return{allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:this.config.googlePayInfo.allowedAuthMethods,allowedCardNetworks:this.config.googlePayInfo.allowedCardNetworks}}],apiVersion:2,apiVersionMinor:0}}getJwt(){return this.googlePayAPI.getToken(window.location.hostname)}loadClient(){return new GP(this.googlePaySdkEnv,this.sentry).loadClient()}createToken(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;let t;try{t=yield this.create({currency:this.donation.getCurrency(),amount:this.donation.getTotal()}),t.token&&this.setDonorInfo(t)}catch(e){const t=e&&"object"==typeof e?e:{},n={toString:t.toString(),stringify:JSON.stringify(t),message:t.message,name:t.name,code:t.code};return t.statusCode!==HP.CANCELED&&this.sentry.captureException(new qP(n),{extra:n}),null}return(null===(e=t.token)||void 0===e?void 0:e.id)||null}))}setDonorInfo(e){var t,n;const i=e.email;i&&this.setDonorEmailIfEmpty(i);const s=(null===(n=null===(t=e.token)||void 0===t?void 0:t.card)||void 0===n?void 0:n.name)||"";s&&this.setDonorFullNameIfEmpty(s)}}var KP=n(4909);function YP(e,t){return(0,l.sH)(this,arguments,void 0,(function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{return yield e()}catch(i){if(n>=t.retries)throw i;return yield new Promise((e=>setTimeout(e,t.delay))),YP(e,t,++n)}}))}class zP{static removeAuthorizePaymentHandler(e){e&&window.removeEventListener("message",e)}constructor(e,t,n,i,s,a,r,o){this.sessionAPI=e,this.stripe=t,this.env=n,this.donorName=i,this.donorEmail=s,this.intl=a,this.sentry=r,this.paymentAPI=o,this.name=eb._h.IDEAL,this.intentSecret=null,this.paymentIntent=null,this.popup=null,this.popupParams={},this.counter=0}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return sn.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){let e;try{if(e=yield this.paymentAPI.hold({clientPaymentMethod:eb._h.IDEAL,token:{initOnly:!1}}),sn.isFailure(e))return e}catch(e){return sn.fail({message:this.commonErrorText})}const{intentSecret:t}=e.successResult;if(!t)throw new _P;return this.intentSecret=t,sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;if(this.intentSecret){const e=yield this.retrievePaymentIntent(this.intentSecret);if((null==e?void 0:e.status)===eb.Zq.SUCCEEDED)return this.closePopup(),this.requestPay()}if(!this.intentSecret)throw this.closePopup(),new _P;const t=yield this.confirmPaymentIntent(this.intentSecret);if(sn.isFailure(t))return t;if(this.paymentIntent=t.successResult,!this.paymentIntent)return this.closePopup(),sn.fail({message:this.paymentErrorText});if(this.paymentIntent.status===eb.Zq.SUCCEEDED)return this.closePopup(),this.requestPay();const n=this.paymentIntent.next_action;return"redirect_to_url"===(null==n?void 0:n.type)&&(null===(e=n.redirect_to_url)||void 0===e?void 0:e.url)?this.handleAction(this.intentSecret,n.redirect_to_url.url):(this.closePopup(),this.requestPay())}))}openConfirmationWindow(e){var t;if(this.popup)return this.popup;(null===(t=this.paymentIntent)||void 0===t?void 0:t.status)!==eb.Zq.SUCCEEDED?(this.popupParams=e,this.popup=window.open(this.popupPreLoadingPage,"_blank"),this.assertPopup(this.popup)):e.onClose&&e.onClose()}focusConfirmationWindow(){this.popup&&(this.popup.blur(),this.popup.focus())}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){}))}isPaid(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.paymentIntent)return!1;if(this.paymentIntent.status===eb.Zq.SUCCEEDED)return!0;this.assert(this.paymentIntent.client_secret);const e=yield this.retrievePaymentIntent(this.paymentIntent.client_secret);return(null==e?void 0:e.status)===eb.Zq.SUCCEEDED}))}isPaymentStarted(){return null!==this.paymentIntent}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}get paymentErrorText(){return this.intl.translate("common.paymentNotAuthorizedError")}get popupPreLoadingPage(){switch(this.env){case KP.h.PRODUCTION:return"https://checkout.fundraiseup.com/ideal";case KP.h.STAGING:return"https://checkout.funstaging.com/ideal";case KP.h.TESTING:return"http://checkout.fun.internal/ideal";default:return"https://checkout.localtest.me/ideal"}}confirmPaymentIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;const n=this.donorName.getDto(),i=this.donorEmail.getDto(),s={ideal:{},billing_details:{name:yA([n.firstName,n.lastName]),email:i.email}};try{const n=yield this.stripe.confirmIdealPayment(e,{payment_method:s,return_url:this.popupPreLoadingPage},{handleActions:!1});return n.error?(null===(t=n.error.payment_intent)||void 0===t?void 0:t.status)===eb.Zq.SUCCEEDED?sn.success(n.error.payment_intent):sn.fail({message:n.error.message}):sn.success(n.paymentIntent)}catch(e){return sn.fail({message:e.message})}}))}handleAction(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){var n;switch(yield this.authorizePayment(t),this.paymentIntent=yield this.retrievePaymentIntent(e),null===(n=this.paymentIntent)||void 0===n?void 0:n.status){case eb.Zq.SUCCEEDED:return this.requestPay();case eb.Zq.REQUIRES_PAYMENT_METHOD:{const t=yield this.confirmPaymentIntent(e);return sn.isSuccess(t)&&(this.paymentIntent=t.successResult),sn.fail({message:this.paymentErrorText})}case eb.Zq.REQUIRES_ACTION:return sn.fail({message:this.paymentErrorText});default:return this.notifyAboutError(new Error("Unexpected payment intent status"),{paymentIntent:this.paymentIntent}),this.closePopup(),sn.fail({message:this.paymentErrorText})}}))}retrievePaymentIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{return yield this.retrievePaymentIntentWithRetry(e)}catch(e){return e instanceof TP&&this.notifyAboutWarning(e,{stripeError:e.resultError}),null}}))}retrievePaymentIntentWithRetry(e){return(0,l.sH)(this,void 0,void 0,(function*(){return YP((()=>(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrievePaymentIntent(e)}catch(e){return this.sentry.captureException(e),null}if(t.error)throw new TP;return t.paymentIntent?t.paymentIntent:null}))),{retries:2,delay:500})}))}authorizePayment(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.popup;let n,i,s;return this.assertPopup(t),this.focusConfirmationWindow(),t.location=e,new Promise((e=>{s=this.authorizePaymentHandlerFn(e),n=setInterval((()=>{if(t.closed)return this.closePopup(),e()}),20),window.addEventListener("message",s),setTimeout((()=>{this.resetCounter(),i=setInterval((()=>this.waitWhileIntentWillUpdated(e,1e3,i)),1e3)}),5e3)})).then((()=>{clearInterval(n),clearInterval(i),zP.removeAuthorizePaymentHandler(s)}))}))}authorizePaymentHandlerFn(e){const t=new URL(this.popupPreLoadingPage).origin;return n=>{if(n.origin===t)return this.closePopup(),e()}}waitWhileIntentWillUpdated(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){var i;this.assert(this.intentSecret);const s=Math.round(9e5/t);if(this.counter>=s&&n)return clearInterval(n),this.closePopup(),e();this.counter++;const a=yield this.retrievePaymentIntent(this.intentSecret);return a&&a.status!==(null===(i=this.paymentIntent)||void 0===i?void 0:i.status)?(this.closePopup(),e()):void 0}))}resetCounter(){this.counter=0}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return sn.isSuccess(e)?e:sn.fail({shouldLeave:!1,message:e.failureResult.message})}))}closePopup(){this.popup&&(this.popup.close(),this.popupParams.onClose&&this.popupParams.onClose(),this.resetPopup())}resetPopup(){this.popup=null,this.popupParams={}}assertPopup(e){var t;const n=new Error(this.commonErrorText);if(!e)throw this.notifyAboutError(new Error("Can not create iDEAL popup"),{intent:null===(t=this.paymentIntent)||void 0===t?void 0:t.id}),n}assert(e){const t=new Error(this.commonErrorText);if(!e)throw t}notifyAboutError(e,t){this.sentry.captureException(e,{extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}notifyAboutWarning(e,t){this.sentry.captureException(e,{level:"warning",extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}}class WP extends Error{constructor(){super("Paypal hold payload is invalid")}}const $P=["Component closed","Detected container element removed from DOM"],XP=["Window closed before response","Window closed for postrobot_method before ack"];class QP{constructor(e,t,n,i){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.scriptParams=null,this.buttonParams=null,this.actions=null,this.rendered=!1,this.paypalButtons=null,this.scriptLoadingPromise=null}setCurrency(e,t){var n;const{paypalMerchantId:i,paypalClientId:s,subscriptionsEnabled:a}=this.config;if(!i){const e=new Error("Paypal merchant ID is not provided");throw this.sentry.captureException(e),e}const r={"client-id":s,"merchant-id":i,currency:this.getPaypalCurrency(e,t).toUpperCase(),"disable-funding":"venmo",locale:"automatic",intent:"capture",vault:"false"},o=M(this.locale);return o&&(r.locale=o),a&&(r.intent="tokenize",r.vault="true"),r.currency!==(null===(n=this.scriptParams)||void 0===n?void 0:n.currency)&&(this.scriptLoadingPromise=null),this.scriptParams=r,this}setButtonParams(e){let{onCreate:t,onApprove:n,onButtonClick:i,buttonColor:s,onCancel:a,onFail:r,onInit:o}=e;return this.buttonParams={fundingSource:u._h.PAYPAL,style:{color:s,tagline:!1,shape:"rect",height:48,size:"responsive"},[this.paypalIdentifierMethod]:()=>t(this.clientPaymentMethod),onApprove:e=>(0,l.sH)(this,void 0,void 0,(function*(){const t=e[this.paypalIdentifierKey];if(!t)return this.handleEmptyTokenError(e);yield n(this.clientPaymentMethod,t)})),onInit:(e,t)=>{this.actions=t,null==o||o()},onClick:()=>{null==i||i(this.clientPaymentMethod)},onError:e=>{const t=e.message;if(!t||!(t.includes("popup close")||t.includes("cross-domain")||t.includes("Window is closed")))throw e;r({message:"Window is closed"})},onCancel:()=>{null==a||a()}},this}disable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.disable()}catch(e){if(XP.includes(e.message))return;throw e}}))}enable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.enable()}catch(e){if(XP.includes(e.message))return;throw e}}))}loadPayPalScriptIfNeeded(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.scriptParams)throw new Error("Call `setCurrency` before you mount");return this.scriptLoadingPromise||(this.scriptLoadingPromise=K(`https://www.paypal.com/sdk/js?${$e(this.scriptParams)}`,!1,this.iframeWindow,{},!0,J)),this.scriptLoadingPromise}))}mount(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;if(!this.buttonParams)throw new Error("Call `setHandlers` before you mount");if(e&&!this.paypalButtons&&(null===(t=this.iframeWindow.paypal)||void 0===t?void 0:t.Buttons)){this.paypalButtons=this.iframeWindow.paypal.Buttons(this.buttonParams);try{yield this.paypalButtons.render(e),this.rendered=!0}catch(e){if($P.includes(null==e?void 0:e.message))return;throw e}}}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){this.rendered&&this.paypalButtons&&(yield this.paypalButtons.close(),this.rendered=!1,this.actions=null,this.paypalButtons=null)}))}get clientPaymentMethod(){return u._h.PAYPAL}get paypalIdentifierMethod(){return this.config.subscriptionsEnabled?"createBillingAgreement":"createOrder"}get paypalIdentifierKey(){return this.config.subscriptionsEnabled?"billingToken":"orderID"}getPaypalCurrency(e,t){const n=this.config.paypalCurrencies;return n.includes(e)?e:n.includes(t)?t:"USD"}handleEmptyTokenError(e){this.sentry.captureException(new Error(`Got an undefined token by paypalIdentifierKey: ${this.paypalIdentifierKey}`),{extra:{paypalIdentifierKey:this.paypalIdentifierKey,paypalData:e}})}}class ZP{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,E,A){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.paypalAPI=s,this.paymentAPI=a,this.donation=r,this.updateSession=o,this.setPaymentMethod=c,this.setDonorFirstNameIfEmpty=l,this.setDonorLastNameIfEmpty=u,this.setDonorEmailIfEmpty=d,this.setPhoneCountryCodeIfEmptyPhone=h,this.setPhoneNumberIfEmpty=m,this.setCountryCodeIfEmptyAddress=p,this.setCityIfEmpty=g,this.setLine1IfEmpty=y,this.setLine2IfEmpty=f,this.setPostalIfEmpty=S,this.setRegionIfEmpty=E,this.paymentFailureHandler=A,this.name=eb._h.PAYPAL,this.paypalButtonBuilder=new QP(this.config,this.sentry,this.locale,this.iframeWindow)}initiateFlow(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{element:t,holdDone:n,onFail:i,buttonColor:s,onButtonClick:a,onCancel:r,onInit:o}=e;return yield this.loadPayPalScriptIfNeeded(),yield this.paypalButtonBuilder.setButtonParams({buttonColor:s,onCreate:e=>(0,l.sH)(this,void 0,void 0,(function*(){yield this.updateSession();const t=yield this.paypalAPI.createOrder(e);if(!sn.isFailure(t))return t.successResult;i(t.failureResult)})),onApprove:(e,t)=>(0,l.sH)(this,void 0,void 0,(function*(){this.setPaymentMethod(e),this.clientPaymentMethod=e,this.token=t;const s=yield this.hold();sn.isFailure(s)?i(s.failureResult):n()})),onButtonClick:a,onCancel:r,onFail:i,onInit:o}).mount(t),!0}))}loadPayPalScriptIfNeeded(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paypalButtonBuilder.setCurrency(this.donation.getCurrency(),this.donation.getDefaultCurrency()).loadPayPalScriptIfNeeded()}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return sn.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.token||!this.clientPaymentMethod)throw new WP;const e={token:this.token,clientPaymentMethod:this.clientPaymentMethod};try{const t=yield this.paymentAPI.hold(e);return sn.isFailure(t)?t:(this.setDonorInfo(t.successResult),sn.success(void 0))}catch(e){return sn.fail({})}}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t,n;const i=yield this.paymentAPI.pay();return sn.isSuccess(i)?i:(null===(e=i.failureResult.errors)||void 0===e?void 0:e.code)===eb.M6.ORDER_EXPIRED?(this.paymentFailureHandler(),sn.fail({shouldLeave:!0,message:null===(t=i.failureResult.errors)||void 0===t?void 0:t.message})):sn.fail({shouldLeave:!1,message:null===(n=i.failureResult.errors)||void 0===n?void 0:n.message})}))}closePaypal(){this.paypalButtonBuilder.destroy()}togglePaypalActions(e){e?this.paypalButtonBuilder.enable():this.paypalButtonBuilder.disable()}setDonorInfo(e){var t,n,i,s,a,r,o,c;this.setDonorFirstNameIfEmpty(e.firstName||""),this.setDonorLastNameIfEmpty(e.lastName||""),this.setDonorEmailIfEmpty(e.email||""),(null===(t=e.address)||void 0===t?void 0:t.countryCode)&&this.setPhoneCountryCodeIfEmptyPhone(e.address.countryCode),this.setPhoneNumberIfEmpty(e.phone||""),(null===(n=e.address)||void 0===n?void 0:n.countryCode)&&this.setCountryCodeIfEmptyAddress(e.address.countryCode),this.setCityIfEmpty((null===(i=e.address)||void 0===i?void 0:i.city)||""),this.setLine1IfEmpty((null===(s=e.address)||void 0===s?void 0:s.line1)||""),this.setLine2IfEmpty((null===(a=e.address)||void 0===a?void 0:a.line2)||""),this.setRegionIfEmpty((null===(r=e.address)||void 0===r?void 0:r.region)||""),this.setPostalIfEmpty((null===(c=null===(o=e.address)||void 0===o?void 0:o.postal)||void 0===c?void 0:c.toString())||"")}}class JP{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.stripe=e,this.stripeElements=t,this.donorName=n,this.donorEmail=i,this.mailingAddressDataPoint=s,this.paymentOptionsDataPoint=a,this.sentry=r,this.paymentMethodManager=o,this.checkoutConfiguration=c,this.setPaymentMethodCountry=l,this.mailingAddressFailureHandler=u,this.paymentAPI=d,this.params=h,this.name=eb._h.SEPA,this.intentSecret=null,this.completed=!1,this.elementReady=!1,this.ibanElement=null,this.hasElementError=!1,this.initiated=!1,this.onElementChange=e=>{this.setPaymentMethodCountry(e.country),this.completed=e.complete,this.hasElementError=!!e.error}}initiateFlow(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.initiated||(this.ibanElement=this.createElement(t),this.ibanElement.once("ready",(()=>{this.elementReady=!0,(null==t?void 0:t.onIbanElementReady)&&t.onIbanElementReady()})),this.ibanElement.on("change",this.onElementChange),this.ibanElement.mount(e),this.initiated=!0),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.elementReady?!this.completed&&!(yield this.validatePayment())||this.hasElementError?sn.fail({}):sn.success(void 0):sn.fail({})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:eb._h.SEPA});if(sn.isFailure(e))return sn.fail(e.failureResult);const{intentSecret:t}=e.successResult;if(!t)throw new _P;return this.intentSecret=t,sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new _P;const{isValid:e}=this.mailingAddressDataPoint.validate();if(this.paymentMethodManager.isRequired("address",{ibanCountry:this.country})&&!e)throw new Error(`Wrong address format for ${this.country} IBAN`);const t=yield this.retrieveSetupIntent(this.intentSecret);if(!t)return sn.fail({shouldLeave:!1});if(t.status===eb.Zq.SUCCEEDED)return this.requestPay();const n=yield this.confirmSepaDebitSetup(this.intentSecret);if(sn.isFailure(n))return n;const i=n.successResult;return i&&i.status===eb.Zq.SUCCEEDED?this.requestPay():sn.fail({shouldLeave:!1})}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{null===(e=this.ibanElement)||void 0===e||e.destroy()}catch(e){}}))}get country(){if(!this.paymentOptionsDataPoint.paymentMethodCountry)throw new Error("Country is not set");return this.paymentOptionsDataPoint.paymentMethodCountry}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.setupIntent?t.setupIntent:null}))}confirmSepaDebitSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;const n=this.getElement();if(!this.country)throw new Error("country was not set");const i=this.donorName.getDto(),s=this.donorEmail.getDto(),a=this.mailingAddressDataPoint.toObject();let r;try{r=yield this.stripe.confirmSepaDebitSetup(e,{payment_method:{sepa_debit:n,billing_details:{name:yA([i.firstName,i.lastName]),email:s.email,address:{line1:a.line1,city:a.city,country:a.countryCode,postal_code:a.postal}}}})}catch(e){return this.sentry.captureException(e),sn.fail({})}return r.error?"validation_error"===r.error.type?sn.fail({shouldLeave:!1,message:r.error.message}):["invalid_owner_address","country-code-invalid"].includes(null!==(t=r.error.message)&&void 0!==t?t:"")?(this.mailingAddressFailureHandler(),sn.fail({shouldLeave:!0,message:r.error.message})):sn.fail({shouldLeave:!1}):sn.success(r.setupIntent)}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return sn.isSuccess(e)?e:sn.fail({shouldLeave:!1,message:e.failureResult.message})}))}getElement(){if(!this.ibanElement)throw new Error("ibanElement is not initialized");return this.ibanElement}createElement(e){const{stripeElementStyleOverride:t,showIcon:n}=null!=e?e:{};return this.stripeElements.create("iban",{iconStyle:"default",disabled:!1,hideIcon:void 0!==n&&!n,placeholderCountry:this.checkoutConfiguration.company.country,style:void 0!==t?t:Object.assign(Object.assign({},this.params.stripe.elementStyles),{base:Object.assign(Object.assign({},this.params.stripe.elementStyles.base),{fontSize:"14px"})}),classes:this.params.stripe.elementClasses,supportedCountries:["SEPA"]})}validatePayment(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getElement();let t;try{t=yield this.stripe.createPaymentMethod({type:u.qs.SEPA,sepa_debit:e,billing_details:{name:Y,email:z}})}catch(e){return this.sentry.captureException(e),!1}return!!t.paymentMethod&&!t.error}))}}class eD{constructor(e,t,n,i,s,a,r,o,c){this.stripe=e,this.donorEmail=t,this.mailingAddressDataPoint=n,this.ukBacs=i,this.sentry=s,this.intl=a,this.mailingAddressFailureHandler=r,this.ukBacsFailureHandler=o,this.paymentAPI=c,this.name=u._h.UK_BACS,this.intentSecret=null}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return sn.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.UK_BACS});if(sn.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new _P;return this.intentSecret=t,sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new _P;const e=yield this.retrieveSetupIntent(this.intentSecret);if(!e)return sn.fail({shouldLeave:!1});if(e.status===eb.Zq.SUCCEEDED)return this.requestPay();const t=yield this.confirmBacsDebitSetup(this.intentSecret);if(sn.isFailure(t))return t;const n=t.successResult;return n&&n.status===eb.Zq.SUCCEEDED?this.requestPay():sn.fail({shouldLeave:!0})}))}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.setupIntent?t.setupIntent:null}))}confirmBacsDebitSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i;let s;const a=this.donorEmail.getDto(),r=this.mailingAddressDataPoint.toObject(),o=this.ukBacs.getDto();try{s=yield this.stripe.confirmBacsDebitSetup(e,{payment_method:{bacs_debit:{sort_code:o.sortCode,account_number:o.accountNumber},billing_details:{name:o.accountHolderName,email:a.email,address:{line1:r.line1,city:r.city,country:r.countryCode,postal_code:r.postal}}}})}catch(e){return this.sentry.captureException(e),sn.fail({})}return s.error?["invalid_owner_address","country-code-invalid"].includes(null!==(n=s.error.code)&&void 0!==n?n:"")?(this.mailingAddressFailureHandler(),sn.fail({shouldLeave:!0,additionalMessage:s.error.message,message:this.intl.translate("mailingAddressScreen.validationError.title")})):(this.ukBacsFailureHandler(),["invalid_bank_account_account_number","invalid_bank_account"].includes(null!==(i=s.error.code)&&void 0!==i?i:"")?sn.fail({shouldLeave:!0,message:s.error.message}):s.error.message?sn.fail({shouldLeave:!1,message:s.error.message}):sn.fail({shouldLeave:!0})):sn.success(null!==(t=s.setupIntent)&&void 0!==t?t:null)}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return sn.isSuccess(e)?e:sn.fail({shouldLeave:!1,message:e.failureResult.message})}))}}const tD="venmo",nD=["Window closed before response","Window closed for postrobot_method before ack"];class iD{constructor(e,t,n,i){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.available=!0,this.scriptParams=null,this.buttonParams=null,this.actions=null,this.rendered=!1,this.scriptLoadingPromise=null}init(){const{paypalMerchantId:e,paypalClientId:t}=this.config;if(!e){const e=new Error("Paypal merchant ID is not provided");throw this.sentry.captureException(e),e}const n={"client-id":t,"merchant-id":e,currency:"USD","enable-funding":tD,"disable-funding":"card"},i=M(this.locale);return i&&(n.locale=i),this.scriptParams=n,this}setHandlers(e){let{onCreate:t,onApprove:n,onButtonClick:i,onCancel:s,onInit:a}=e;return this.buttonParams={fundingSource:tD,style:{tagline:!1,shape:"rect",height:48,size:"responsive"},createOrder:()=>t(u._h.VENMO),onApprove:e=>(0,l.sH)(this,void 0,void 0,(function*(){if(!this.venmoButtons)throw new Error("Venmo Buttons not initialized");const t=e.orderID;if(!t)return this.handleEmptyTokenError(e);yield n(this.clientPaymentMethod,t)})),onInit:(e,t)=>{this.actions=t,null==a||a()},onClick:()=>(0,l.sH)(this,void 0,void 0,(function*(){null==i||i(this.clientPaymentMethod)})),onError:e=>{const t=e.message;if(!t||!t.includes("popup close")&&!t.includes("cross-domain"))throw e},onCancel:()=>{null==s||s()}},this}disable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.disable()}catch(e){if(nD.includes(e.message))return;throw e}}))}enable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.enable()}catch(e){if(nD.includes(e.message))return;throw e}}))}loadPayPalScriptIfNeeded(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.scriptParams)throw new Error("Call `setCurrency` before init");return this.scriptLoadingPromise||(this.scriptLoadingPromise=K(`https://www.paypal.com/sdk/js?${$e(this.scriptParams)}`,!1,this.iframeWindow,{"data-namespace":"venmo"},!1,J)),this.scriptLoadingPromise}))}mount(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;if(!this.buttonParams)throw new Error("Call `setHandlers` before you mount");if(yield this.loadPayPalScriptIfNeeded(),e)if(null===(t=this.iframeWindow.venmo)||void 0===t?void 0:t.Buttons)if(this.venmoButtons=this.iframeWindow.venmo.Buttons(this.buttonParams),this.venmoButtons.isEligible())try{yield this.venmoButtons.render(e),this.rendered=!0}catch(e){if(["Component closed","Detected container element removed from DOM"].includes(null==e?void 0:e.message))return;throw e}else this.available=!1;else this.available=!1}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){this.rendered&&this.venmoButtons&&(yield this.venmoButtons.close(),this.rendered=!1)}))}get clientPaymentMethod(){return u._h.VENMO}handleEmptyTokenError(e){this.sentry.captureException(new Error("Got an undefined token"),{extra:{data:e}})}}class sD{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,E,A){this.livemode=e,this.showcase=t,this.config=n,this.sentry=i,this.locale=s,this.iframeWindow=a,this.updateSession=r,this.setPaymentMethod=o,this.setDonorFirstNameIfEmpty=c,this.setDonorLastNameIfEmpty=l,this.setDonorEmailIfEmpty=u,this.setPhoneCountryCodeIfEmptyPhone=d,this.setPhoneNumberIfEmpty=h,this.setCountryCodeIfEmptyAddress=m,this.setCityIfEmpty=p,this.setLine1IfEmpty=g,this.setLine2IfEmpty=y,this.setPostalIfEmpty=f,this.setRegionIfEmpty=S,this.paypalAPI=E,this.paymentAPI=A,this.name=eb._h.VENMO,this.venmoButtonBuilder=new iD(this.config,this.sentry,this.locale,this.iframeWindow)}checkAvailability(){return this.venmoButtonBuilder.available}initiateFlow(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{element:t,holdDone:n,onFail:i,onButtonClick:s,onCancel:a,onInit:r}=e;return yield this.loadPayPalScriptIfNeeded(),yield this.venmoButtonBuilder.setHandlers({onCreate:e=>(0,l.sH)(this,void 0,void 0,(function*(){yield this.updateSession();const t=yield this.paypalAPI.createOrder(e);if(!sn.isFailure(t))return t.successResult;i(t.failureResult)})),onApprove:(e,t)=>(0,l.sH)(this,void 0,void 0,(function*(){this.setPaymentMethod(e),this.clientPaymentMethod=e,this.token=t;const s=yield this.hold();sn.isFailure(s)?i(s.failureResult):n()})),onButtonClick:s,onCancel:()=>{null==a||a()},onInit:r}).mount(t),this.venmoButtonBuilder.available}))}loadPayPalScriptIfNeeded(){return this.venmoButtonBuilder.init().loadPayPalScriptIfNeeded()}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return sn.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.token||!this.clientPaymentMethod)throw new WP;const e={token:this.token,clientPaymentMethod:this.clientPaymentMethod},t=yield this.paymentAPI.hold(e);return sn.isFailure(t)?sn.fail(t.failureResult):(this.setDonorInfo(t.successResult),sn.success(void 0))}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return sn.isSuccess(e)?e:sn.fail({shouldLeave:!1})}))}closeButton(){this.venmoButtonBuilder.destroy()}toggleVenmoActions(e){e?this.venmoButtonBuilder.enable():this.venmoButtonBuilder.disable()}setDonorInfo(e){var t,n,i,s,a,r,o,c;this.setDonorFirstNameIfEmpty(e.firstName||""),this.setDonorLastNameIfEmpty(e.lastName||""),this.setDonorEmailIfEmpty(e.email||""),(null===(t=e.address)||void 0===t?void 0:t.countryCode)&&this.setPhoneCountryCodeIfEmptyPhone(e.address.countryCode),this.setPhoneNumberIfEmpty(e.phone||""),(null===(n=e.address)||void 0===n?void 0:n.countryCode)&&this.setCountryCodeIfEmptyAddress(e.address.countryCode),this.setCityIfEmpty((null===(i=e.address)||void 0===i?void 0:i.city)||""),this.setLine1IfEmpty((null===(s=e.address)||void 0===s?void 0:s.line1)||""),this.setLine2IfEmpty((null===(a=e.address)||void 0===a?void 0:a.line2)||""),this.setRegionIfEmpty((null===(r=e.address)||void 0===r?void 0:r.region)||""),this.setPostalIfEmpty((null===(c=null===(o=e.address)||void 0===o?void 0:o.postal)||void 0===c?void 0:c.toString())||"")}}class aD{constructor(e){this.sessionAPI=e}getToken(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{return yield this.sessionAPI.get("googlePay/token",{merchantOrigin:e},{retries:5,delay:200,rejectsOnInvalid:!0})}catch(e){throw Error("Error while receiving google pay token")}}))}}class rD{constructor(e){this.sessionAPI=e}createOrder(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.sessionAPI.post("paypal/order",{clientPaymentMethod:e})}))}}class oD{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.stripe=e,this.usBankAccount=t,this.sentry=n,this.paymentAPI=i,this.intl=s,this.params=a,this.donation=r,this.paymentFailureHandler=o,this.setFinancialInstitution=c,this.setVerificationType=l,this.setAccountNumber=u,this.setRoutingNumber=d,this.setAccountType=h,this.name=eb._h.US_BANK_ACCOUNT,this.intentSecret=null,this.initiateParams=null}initiateFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.initiateParams=e,!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.usBankAccount.getUsBankAccountVerificationSetup();if(e.isMicroDepositOnly||e.isAbavOnly)return sn.success(void 0);const t=yield this.hold();if(sn.isFailure(t))return sn.fail({message:t.failureResult.message||this.commonErrorText});if(!this.intentSecret)return sn.fail({message:this.commonErrorText});const n=yield this.collectBankAccountForSetup(this.intentSecret);if(sn.isFailure(n))return n;const i=n.successResult;if(i.status===eb.Zq.REQUIRES_PAYMENT_METHOD)return sn.fail({});const s=i.payment_method;return this.assertUSBankAccountPaymentMethod(s),this.paymentMethod=s,this.setFinancialInstitution(s.us_bank_account.bank_name),this.setAccountNumber(s.us_bank_account.last4),this.setRoutingNumber(s.us_bank_account.routing_number),this.setAccountType(s.us_bank_account.account_holder_type),sn.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.shouldCreatePaymentMethod){const e=yield this.createPaymentMethod();if(sn.isFailure(e))return e}const e=yield this.paymentAPI.hold({clientPaymentMethod:eb._h.US_BANK_ACCOUNT,token:{verificationType:this.verificationType}});if(sn.isFailure(e))return sn.fail(e.failureResult);const{intentSecret:t}=e.successResult;if(!t)throw new _P;return this.intentSecret=t,sn.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new _P;const e=yield this.retrieveSetupIntent(this.intentSecret);if(sn.isFailure(e))return e;if(e.successResult.status===eb.Zq.SUCCEEDED)return this.requestPay();const t=yield this.confirmUsBankAccountSetup(this.intentSecret);if(sn.isFailure(t))return t;const n=t.successResult;return!n||n.status!==eb.Zq.SUCCEEDED&&n.status!==eb.Zq.REQUIRES_ACTION?sn.fail({shouldLeave:!0}):(n.next_action&&(this.assertUSBankAccountNextAction(n.next_action),this.setVerificationType(n.next_action.verify_with_microdeposits.microdeposit_type)),this.requestPay())}))}get verificationType(){var e;if(null===(e=this.initiateParams)||void 0===e?void 0:e.verificationType)return this.initiateParams.verificationType;const t=this.usBankAccount.getUsBankAccountVerificationSetup();return t.isAbavOnly?"instant_or_skip":t.isInstantOnly?"instant":t.isInstantAndMicroDeposit?LN(function(e,t,n){if("USD"!==n)return t;const i=function(e){switch(e){case cs.ONE_FOR_ISRAEL:return 150;case cs.FCA:return 200;default:return null}}(e);return null===i?t:t<9500&&t>=i?9500:t}(this.params.companyKey,this.donation.getTotal(),this.donation.getCurrency()))?"automatic":"instant":t.isInstantAndAbav?"instant_or_skip":"microdeposits"}get shouldCreatePaymentMethod(){return"microdeposits"===this.verificationType||"instant_or_skip"===this.verificationType}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}get captureErrorContext(){return{extra:{widgetSession:this.params.sessionToken}}}createPaymentMethod(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.usBankAccount.getDto();let t;try{t=yield this.stripe.createPaymentMethod({type:eb.qs.US_BANK_ACCOUNT,billing_details:{name:e.accountHolderName},us_bank_account:{account_number:e.accountNumber,routing_number:e.routingNumber,account_holder_type:e.accountType}})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),sn.fail({shouldLeave:!1})}if(t.error)return sn.fail({shouldLeave:!1,message:t.error.message||this.commonErrorText});const n=t.paymentMethod;return this.assertUSBankAccountPaymentMethod(n),this.paymentMethod=n,this.setFinancialInstitution(n.us_bank_account.bank_name),sn.success(n)}))}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e,this.captureErrorContext),sn.fail({shouldLeave:!1})}return t.setupIntent?sn.success(t.setupIntent):sn.fail({shouldLeave:!1})}))}confirmUsBankAccountSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;let n;this.assertUSBankAccountPaymentMethod(this.paymentMethod);try{n=yield this.stripe.confirmUsBankAccountSetup(e,{payment_method:this.paymentMethod.id,expand:["payment_method"]})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),sn.fail({shouldLeave:!1})}return n.setupIntent?sn.success(n.setupIntent):(this.paymentFailureHandler(),["invalid_bank_account_account_number","invalid_bank_account"].includes(null!==(t=n.error.code)&&void 0!==t?t:"")||n.error.message?sn.fail({shouldLeave:!0,message:n.error.message}):sn.fail({shouldLeave:!0}))}))}collectBankAccountForSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i,s;let a;try{null===(n=null===(t=this.initiateParams)||void 0===t?void 0:t.onPopupOpen)||void 0===n||n.call(t),a=yield this.stripe.collectBankAccountForSetup({clientSecret:e,params:{payment_method_type:eb.qs.US_BANK_ACCOUNT,payment_method_data:{billing_details:{name:Y}}},expand:["payment_method"]})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),sn.fail({shouldLeave:!1})}finally{null===(s=null===(i=this.initiateParams)||void 0===i?void 0:i.onPopupClose)||void 0===s||s.call(i)}return a.setupIntent?sn.success(a.setupIntent):a.error?sn.fail({shouldLeave:!1,message:a.error.message||this.commonErrorText}):sn.fail({shouldLeave:!1})}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return sn.isSuccess(e)?e:sn.fail({shouldLeave:!1,message:e.failureResult.message})}))}assertUSBankAccountPaymentMethod(e){if("us_bank_account"!==e.type)throw this.sentry.captureException(new Error(`Expected us_bank_account payment method, but ${e.type} has been retrieved`),this.captureErrorContext),new Error(this.commonErrorText)}assertUSBankAccountNextAction(e){if("verify_with_microdeposits"!==e.type)throw this.sentry.captureException(new Error(`Expected verify_with_microdeposits next action, but ${e.type} has been retrieved`),this.captureErrorContext),new Error(this.commonErrorText)}}class cD{constructor(e,t,n,i){this.sentry=e,this.intl=t,this.paymentMethodAvailabilityManagerRepository=n,this.params=i,this.paymentFlows={}}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){for(const e of Object.values(this.paymentFlows))e.destroy&&(yield e.destroy())}))}resolveCard(e){let{sessionAPI:t,stripe:n,stripeElements:i,failureHandler:s,setPaymentMethodCountry:a,donation:r}=e;return this.getOrCreatePaymentFlow(u._h.CARD,(()=>{if(!n||!i)throw new Error("Credit card dependencies are not provided");return new BP(n,i,this.sentry,this.intl,s,new gb(t),a,r,{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolvePaypal(e){let{sessionAPI:t,locale:n,iframeWindow:i,paypalClientId:s,paypalMerchantId:a,paypalCurrencies:r,subscriptionsEnabled:o,donation:c,updateSession:l,setPaymentMethod:d,setDonorFirstNameIfEmpty:h,setDonorLastNameIfEmpty:m,setDonorEmailIfEmpty:p,setPhoneCountryCodeIfEmptyPhone:g,setPhoneNumberIfEmpty:y,setCountryCodeIfEmptyAddress:f,setCityIfEmpty:S,setLine1IfEmpty:E,setLine2IfEmpty:A,setPostalIfEmpty:C,setRegionIfEmpty:v,paymentFailureHandler:N}=e;return this.getOrCreatePaymentFlow(u._h.PAYPAL,(()=>new ZP({paypalClientId:s,paypalMerchantId:a,paypalCurrencies:r,subscriptionsEnabled:o},this.sentry,n,i,new rD(t),new gb(t),c,l,d,h,m,p,g,y,f,S,E,A,C,v,N)))}resolveGooglePay(e){let{sessionAPI:t,livemode:n,env:i,googlePayInfo:s,stripeAccount:a,companyName:r,stripePublicKey:o,countryCode:c,stripe:l,currencyService:d,donation:h,setPaymentMethod:m,setDonorFullNameIfEmpty:p,setDonorEmailIfEmpty:g}=e;return this.getOrCreatePaymentFlow(u._h.GOOGLE_PAY,(()=>{if(!l||!a)throw new Error("Stripe and Stripe account are required for GPay");return new VP({googlePayInfo:s,stripeAccount:a,stripePublicKey:o,companyName:r,countryCode:c},n,i,l,d,h,this.sentry,this.intl,new gb(t),new aD(t),m,p,g)}))}resolveUkBacs(e){let{sessionAPI:t,stripe:n,donorEmail:i,mailingAddressDataPoint:s,ukBacs:a,mailingAddressFailureHandler:r,ukBacsFailureHandler:o}=e;return this.getOrCreatePaymentFlow(u._h.UK_BACS,(()=>{if(!n)throw new Error("Stripe is not provided");return new eD(n,i,s,a,this.sentry,this.intl,r,o,new gb(t))}))}resolveApplePay(e){let{sessionAPI:t,companyName:n,applePayStripeLoadingPromise:i,donation:s,setPaymentMethod:a,setDonorFullNameIfEmpty:r,setDonorEmailIfEmpty:o,setCountryCodeIfEmptyAddress:c,setCityIfEmpty:l,setLine1IfEmpty:d,setLine2IfEmpty:h,setPostalIfEmpty:m,setRegionIfEmpty:p}=e;return this.getOrCreatePaymentFlow(u._h.APPLE_PAY,(()=>{const e={country:u.tg.UNITED_STATES,currency:s.getCurrency().toLowerCase(),total:{label:n,amount:s.getTotal()||0}};return new MP(e,i,this.sentry,this.intl,new gb(t),s,a,r,o,c,l,d,h,m,p)}))}resolveAuBECS(e){let{sessionAPI:t,stripe:n,stripeElements:i,donorName:s,donorEmail:a}=e;return this.getOrCreatePaymentFlow(u._h.AU_BECS,(()=>{if(!n||!i)throw new Error("Elements are not provided");return new FP(n,i,s,a,this.sentry,new gb(t),{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolveSepa(e){let{sessionAPI:t,stripe:n,stripeElements:i,mailingAddressDataPoint:s,donorName:a,donorEmail:r,paymentOptionsDataPoint:o,checkoutConfiguration:c,setPaymentMethodCountry:l,mailingAddressFailureHandler:d}=e;return this.getOrCreatePaymentFlow(u._h.SEPA,(()=>{if(!n||!i)throw new Error("Elements are not provided");const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.SEPA,Et.WIDGET);return new JP(n,i,a,r,s,o,this.sentry,e,c,l,d,new gb(t),{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolveIDEAL(e){let{sessionAPI:t,stripe:n,stripeElements:i,donorName:s,donorEmail:a,env:r}=e;return this.getOrCreatePaymentFlow(u._h.IDEAL,(()=>{if(!n||!i)throw new Error("Elements are not provided");return new zP(t,n,r,s,a,this.intl,this.sentry,new gb(t))}))}resolveUSBankAccount(e){let{stripe:t,usBankAccount:n,sessionAPI:i,checkoutConfiguration:s,donation:a,paymentFailureHandler:r,setFinancialInstitution:o,setVerificationType:c,setAccountNumber:l,setRoutingNumber:d,setAccountType:h}=e;return this.getOrCreatePaymentFlow(u._h.US_BANK_ACCOUNT,(()=>{if(!t)throw new Error("Stripe is not provided");return new oD(t,n,this.sentry,new gb(i),this.intl,{companyKey:s.company.key,sessionToken:i.sessionToken},a,r,o,c,l,d,h)}))}resolveACSS(e){let{sessionAPI:t,stripe:n,setPaymentMethod:i}=e;return this.getOrCreatePaymentFlow(u._h.ACSS,(()=>{if(!n)throw new Error("Stripe is not provided");return new xP(n,this.intl,this.sentry,new gb(t),i)}))}resolveVenmo(e){let{sessionAPI:t,livemode:n,showcase:i,locale:s,iframeWindow:a,paypalClientId:r,paypalMerchantId:o,updateSession:c,setPaymentMethod:l,setDonorFirstNameIfEmpty:d,setDonorLastNameIfEmpty:h,setDonorEmailIfEmpty:m,setPhoneCountryCodeIfEmptyPhone:p,setPhoneNumberIfEmpty:g,setCountryCodeIfEmptyAddress:y,setCityIfEmpty:f,setLine1IfEmpty:S,setLine2IfEmpty:E,setPostalIfEmpty:A,setRegionIfEmpty:C}=e;return this.getOrCreatePaymentFlow(u._h.VENMO,(()=>new sD(n,i,{paypalClientId:r,paypalMerchantId:o},this.sentry,s,a,c,l,d,h,m,p,g,y,f,S,E,A,C,new rD(t),new gb(t))))}getPaymentFlow(e){return this.paymentFlows[e]}getOrCreatePaymentFlow(e,t){return this.paymentFlows[e]||(this.paymentFlows[e]=t()),this.paymentFlows[e]}}const lD=(e,t,n,i,s)=>{const{isFallback:a}=n,r=(0,l.Tt)(n,["isFallback"]),o=e.allAmountOptions,c=e.defaultAmounts,u=e=>o[e]?o[e]:[],d=e=>c[e]?c[e]:0,h=e=>!a&&"presets"in r?r.presets[e].amountOptions:[],m=e=>!a&&"presets"in r?r.presets[e].defaultAmount:0,p={donation:{amounts:{[oe.ONCE]:{amountOptions:u(oe.ONCE),defaultAmount:d(oe.ONCE),minAmount:e.getMinAmount(oe.ONCE),currency:s},[oe.MONTHLY]:{amountOptions:u(oe.MONTHLY),defaultAmount:d(oe.MONTHLY),minAmount:e.getMinAmount(oe.MONTHLY),currency:s}}}},g={donation:{amounts:{[oe.ONCE]:{amountOptions:h(oe.ONCE),defaultAmount:m(oe.ONCE),minAmount:e.getMinAmount(oe.ONCE),currency:s},[oe.MONTHLY]:{amountOptions:h(oe.MONTHLY),defaultAmount:m(oe.MONTHLY),minAmount:e.getMinAmount(oe.MONTHLY),currency:s}}}};return{isSuggestionUsed:i&&!a,isSuggestionFallback:a,suggestionRequestDurationMs:t,suggestion:g,defaults:p}};class uD{constructor(e,t,n,i,s,a){this.checkoutService=e,this.checkoutState=t,this.checkoutConfiguration=n,this.currencyService=i,this.suggestionsService=s,this.amountPresetsFetcher=a,this._allowedFrequencies=[oe.ONCE,oe.MONTHLY],this._amountPresetsTrackData=[]}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutService.tryStartMlAmountPresetsExperiment(this.getCanApplyParams()),this.checkoutService.tryStartMlAmountPresetsPagesExperiment(this.getCanApplyParams()),this.checkoutService.exposeAmountPresetsExperiment(),this.checkoutService.exposeAmountPresetsPagesExperiment(),!this.shouldUseAdaptiveLogic())return;const e=this.getCanApplyParams(),t=this.getAmountPresetsVersion();yield Promise.all(e.currencies.map((e=>this.amountPresetsFetcher.fetchSuggestion(e,t)))),e.currencies.forEach((e=>this.saveMlAmountPresetsTrackData(e)))}))}tryApplySuggestion(){if(!this.shouldUseAdaptiveLogic())return;if(!this.canApply())return;const e=[this.donationDataPoint.currency];this.donationDataPoint.isCurrencyEnabledForFrequency(this.donationDataPoint.currency,oe.MONTHLY)||this.donationDataPoint.currency===this.donationDataPoint.defaultCurrency||e.unshift(this.donationDataPoint.defaultCurrency);for(const t of e){const e=this.amountPresetsFetcher.getSuggestion(t);null!==e&&(e.isFallback||this.checkoutConfiguration.enabledFrequencies.forEach((n=>{const i=this.donationDataPoint.frequency===n;if(!this.donationDataPoint.isCurrencyEnabledForFrequency(t,n)&&this.donationDataPoint.defaultCurrency!==t||!this.allowedFrequencies.includes(n))return;if(!i||!this.checkoutConfiguration.hasExternalAmount){const i=t!==this.donationDataPoint.currency?this.currencyService.convert(e.presets[n].defaultAmount,t,this.donationDataPoint.currency):e.presets[n].defaultAmount;this.changeDefaultAmountForFrequency(i,n)}const s=e.presets[n].amountOptions,a=t!==this.donationDataPoint.defaultCurrency?s.map((e=>this.currencyService.convert(e,t,this.donationDataPoint.defaultCurrency))):s;this.setSuggestionsAndDisableAi(s,a,n)})))}}tryTrackSuggestion(){this._amountPresetsTrackData.forEach((e=>{this.checkoutService.trackCustomEvent({type:e.type,data:e.data})})),this._amountPresetsTrackData=[]}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get allowedFrequencies(){var e;return null!==(e=this.checkoutService.getMlAmountPresetsExperimentAllowedFrequencies())&&void 0!==e?e:this._allowedFrequencies}shouldUseAdaptiveLogic(){return!(this.checkoutConfiguration.infrastructureParams.showcase||this.checkoutConfiguration.infrastructureParams.isLighthouse||this.checkoutConfiguration.checkoutType!==Ce.PAGE&&!this.checkoutService.isMlAmountPresetsPagesExperimentEnabled()&&!this.checkoutService.isMlAmountPresetsExperimentEnabled())}getAmountPresetsCurrencies(){let e=[this.donationDataPoint.currency];return this.donationDataPoint.isCurrencyEnabledForFrequency(this.donationDataPoint.currency,oe.MONTHLY)||this.donationDataPoint.currency===this.donationDataPoint.defaultCurrency||(this.allowedFrequencies.includes(oe.ONCE)?e.push(this.donationDataPoint.defaultCurrency):e=[this.donationDataPoint.defaultCurrency]),e}changeDefaultAmountForFrequency(e,t){if(null!==e){const n=this.suggestionsService.beautify(e,this.donationDataPoint.currency);this.checkoutState.donation.setDefaultAmountForFrequency(n,t)}}setSuggestionsAndDisableAi(e,t,n){const i=this.suggestionsService.beautify(e,this.donationDataPoint.currency),s=this.suggestionsService.beautify(t,this.donationDataPoint.defaultCurrency);this.checkoutState.donation.setSuggestionsAndDisableAI(i,s,n)}getCanApplyParams(){var e,t;const n=this.checkoutConfiguration.enabledFrequencies,i=this.checkoutConfiguration.element,s=n.some((e=>this.checkoutConfiguration.campaign.config.frequencies[e].hintsEnabled)),a=this.getAmountPresetsCurrencies(),r=a[0]||this.donationDataPoint.currency;let o=this.donationDataPoint.getMinAmount(oe.ONCE),c=this.donationDataPoint.getMinAmount(oe.MONTHLY);return r!==this.donationDataPoint.currency&&(o=this.currencyService.convert(o,this.donationDataPoint.currency,r),c=this.currencyService.convert(c,this.donationDataPoint.currency,r)),{fromDonationForm:i.type===re.DONATION_FORM,isEnabledCampaignAi:this.checkoutConfiguration.campaign.config.enableAI,isEnabledCampaignHints:s,p2pUsed:!!(null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.key),enabledFrequencies:n,minAmounts:{[oe.ONCE]:o,[oe.MONTHLY]:c},mlSuggestion:null!==(t=this.amountPresetsFetcher.getSuggestion(r))&&void 0!==t?t:null,currencies:a}}saveMlAmountPresetsTrackData(e){if(!this.amountPresetsFetcher.isSuggestionRequested(e))return;const t=this.amountPresetsFetcher.getSuggestion(e);if(!t)return;const n=this.canApply();this._amountPresetsTrackData.push({type:"checkoutPresetsResponse",data:lD(this.donationDataPoint,this.amountPresetsFetcher.getSuggestionRequestDurationMs(e),t,n,e)}),t.v2&&this._amountPresetsTrackData.push({type:"checkoutPresetsResponseV2",data:lD(this.donationDataPoint,this.amountPresetsFetcher.getSuggestionRequestDurationMs(e),t.v2,!1,e)})}getAmountPresetsVersion(){return this.checkoutService.isMlAmountPresetsExperimentEnabled()||this.checkoutService.isMlAmountPresetsPagesExperimentEnabled()?"v3":null}canApply(){const e=this.getCanApplyParams();if(!e.isEnabledCampaignAi)return!1;if(e.isEnabledCampaignHints)return!1;if(e.p2pUsed)return!1;if(!e.mlSuggestion)return!1;if(e.mlSuggestion.isFallback)return!1;for(const t of this.allowedFrequencies){const n=e.mlSuggestion.presets[t],i=e.minAmounts[t];if(!n||!i)return!1;if(n.defaultAmount<i)return!1;if(!n.amountOptions.length)return!1;if(n.amountOptions.some((e=>e<i)))return!1}return!0}}var dD;!function(e){e.V1="v1",e.V2="v2"}(dD||(dD={}));class hD{constructor(e,t,n,i,s,a){this.checkoutConfiguration=e,this.currencyService=t,this.checkoutState=n,this.tracker=i,this.defaultFrequencyFetcher=s,this.options=a,this.version=this.options.version}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.canApply())return sn.success(void 0);if(this.isSuggestionRequestedAtLeastOnce)return sn.success(void 0);const e=yield this.defaultFrequencyFetcher.fetchSuggestion({amount:this.donationDataPoint.amountInUSD||0,currency:this.donationDataPoint.currency||"USD",companyKey:this.params.companyKey,campaignKey:this.params.campaignKey,elementKey:this.params.elementKey,clientLocale:this.params.clientLocale,utmSource:this.params.utmSource,checkoutType:this.params.checkoutType,version:this.version});return sn.isFailure(e)?sn.fail(void 0):sn.success(void 0)}))}tryApplySuggestion(){if(!this.canApply())return;const e=this.defaultFrequencyFetcher.getSuggestion();e.isFallback||(this.checkoutState.donation.setFrequency(e.defaultFrequency),this.tryReapplyExternalAmount())}tryTrackSuggestion(){if(!this.canApply())return;const e=this.defaultFrequencyFetcher.getSuggestion(),t=this.defaultFrequencyFetcher.getMeta(),n=this.version===dD.V2?"checkoutDefaultFrequencyResponseV2":"checkoutDefaultFrequencyResponse";this.tracker.customTrack({type:n,data:{isSuggestionUsed:!e.isFallback,isSuggestionFallback:e.isFallback,suggestionRequestDurationMs:t.requestDurationMs,suggestion:{defaultFrequency:e.defaultFrequency},defaults:{frequency:this.donationDataPoint.defaultFrequency}}})}get params(){return{companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,elementKey:this.checkoutConfiguration.element.key,clientLocale:this.tracker.clientLocale,utmSource:this.checkoutConfiguration.queryParams.utm.source||"",isFrequenciesAIEnabled:this.checkoutConfiguration.aiConfig.frequencies.enabled,enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,hasExternalFrequency:this.checkoutConfiguration.hasExternalFrequency,externalFrequency:this.checkoutConfiguration.externalFrequency,userCountry:this.checkoutConfiguration.user.address.countryCode,checkoutType:this.checkoutConfiguration.checkoutType}}shouldUseAdaptiveLogic(){return!this.checkoutConfiguration.infrastructureParams.showcase}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get allowedFrequencies(){return[oe.ONCE,oe.MONTHLY]}get isSuggestionRequestedAtLeastOnce(){return this.defaultFrequencyFetcher.getMeta().fetchCallsCount>0}tryReapplyExternalAmount(){const e=this.getExternalParams();if(!e)return;const t=this.checkoutConfiguration.campaign.config.defaultCurrency,n=this.donationDataPoint.currency;this.checkoutState.donation.setCurrency(t),this.donationDataPoint.enabledFrequencies.forEach((e=>{var t;this.checkoutState.donation.setDefaultAmountForFrequency(null!==(t=this.checkoutConfiguration.campaign.config.frequencies[e].defaultAmount)&&void 0!==t?t:0,e)})),e.currency===t&&this.checkoutState.donation.setDefaultAmountForFrequency(e.amount,this.donationDataPoint.frequency),this.checkoutState.donation.setCurrency(n),e.currency===n&&this.checkoutState.donation.setDefaultAmountForFrequency(e.amount,this.donationDataPoint.frequency)}getExternalParams(){var e;return null!==(e=this.getExternalParamsFromElement())&&void 0!==e?e:this.getExternalParamsFromQueryParams()}getExternalParamsFromElement(){var e,t;const n=this.getExternalAmountCurrency(null===(e=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===e?void 0:e.currency),i=null===(t=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===t?void 0:t.amount;return i?{amount:i,currency:n}:null}getExternalParamsFromQueryParams(){var e;const t=this.getExternalAmountCurrency(null!==(e=this.checkoutConfiguration.queryParams.currency)&&void 0!==e?e:""),n=this.currencyService.fromFloat(this.checkoutConfiguration.queryParams.amount||0,t);return n?{amount:n,currency:t}:null}getExternalAmountCurrency(e){return e===this.donationDataPoint.currency?this.donationDataPoint.currency:this.checkoutConfiguration.campaign.config.defaultCurrency}canApply(){return!!this.params.isFrequenciesAIEnabled&&(!!this.shouldUseAdaptiveLogic()&&(!(this.params.hasExternalFrequency&&this.params.externalFrequency&&this.allowedFrequencies.includes(this.params.externalFrequency))&&!(this.allowedFrequencies.length!==this.params.enabledFrequencies.length||!this.params.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e))))))}}class mD{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.stringify,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>e;this.defaultValue=e,this.makeRequest=t,this.shouldCacheResponse=n,this.getCacheKey=i,this.getResult=s,this._cachedValues=new Map,this.pendingObject=null}getCachedOrFetchValue(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;const n=this.getCacheKey(e);if(null===(t=this.pendingObject)||void 0===t?void 0:t.promise){if(this.pendingObject.cacheKey===n){const e=yield this.pendingObject.promise;return this.getResult(e,!1)}this.pendingObject.reject("Aborted"),this.pendingObject=null}const i=this._cachedValues.get(n);return i?Promise.resolve(this.getResult(i,!0)):this.makeRequestAndCacheValue(e)}))}makeRequestAndCacheValue(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.getCacheKey(e);this.pendingObject=this.initPendingObject(e,t);try{const n=yield this.pendingObject.promise;return this.shouldCacheResponse(e,n)&&this._cachedValues.set(t,n),this.getResult(n,!1)}catch(e){return this._cachedValues.delete(t),this.getResult(this.defaultValue,!1)}finally{this.pendingObject=null}}))}initPendingObject(e,t){let n=e=>{};return{promise:new Promise(((t,i)=>{n=i,this.makeRequest(e).then((e=>{sn.isSuccess(e)?t(e.successResult):t(this.defaultValue)})).catch(i)})),cacheKey:t,reject:n}}}const pD={isFallback:!0};class gD{constructor(e){this.sessionApi=e,this._suggestion=this.getResult(pD,!1),this._fetchSuggestion=e=>Promise.race([this.requestCacheService.getCachedOrFetchValue(e),new Promise((e=>setTimeout((()=>{e(this.getResult(pD,!1))}),1500)))]),this.requestCacheService=new mD(pD,e.getFeeCovering.bind(e),this.shouldCacheResponse,this.getCacheKey,this.getResult)}fetchSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this._suggestion=yield this._fetchSuggestion(e),this._suggestion}))}getSuggestion(){return this._suggestion}getCacheKey(e){return JSON.stringify(e)}shouldCacheResponse(e,t){return!t.isFallback}getResult(e,t){return{response:e,fromCache:t}}}function yD(){return(0,l.sH)(this,void 0,void 0,(function*(){let e=0;return window.Navigator&&window.navigator instanceof window.Navigator&&"function"==typeof navigator.getBattery&&(e=(yield navigator.getBattery()).level),e}))}class fD{constructor(e,t,n,i,s,a){this.checkoutConfiguration=e,this.checkoutState=t,this.tracker=n,this.feeCoveringSuggestionsFetcher=i,this.currencyService=s,this.intl=a}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.canApply())return!1;const e=yield this.createGetSmartCoveringFeePayload();return null!==e&&(yield this.feeCoveringSuggestionsFetcher.fetchSuggestion(e),!0)}))}tryApplySuggestion(){if(!this.canApply())return;const e=this.feeCoveringSuggestionsFetcher.getSuggestion();e.response.isFallback||this.checkoutState.donation.setFeeCovered(e.response.feeCoveringSuggestion===u.XN.DEFAULT_YES)}tryTrackSuggestion(){if(!this.canApply())return;const e=this.feeCoveringSuggestionsFetcher.getSuggestion();e.fromCache||this.tracker.customTrack({type:"smartCoveringFeeV2Response",data:e.response})}get donationDataPoint(){return this.checkoutState.donation.dataPoint}setFeeCoveredToState(e){this.checkoutState.donation.setFeeCovered(e===u.XN.DEFAULT_YES)}canApply(){return this.checkoutConfiguration.checkoutType!==Ce.PAGE&&this.checkoutConfiguration.campaign.config.includeFees===u.XN.SMART_COVERING&&!this.donationDataPoint.isCustomFeeCoveredValue}createGetSmartCoveringFeePayload(){return(0,l.sH)(this,void 0,void 0,(function*(){if(null===this.donationDataPoint.amountInUSD||null===this.donationDataPoint.defaultAmount)return null;const e=this.currencyService.convert(this.checkoutConfiguration.defaultAmounts[this.donationDataPoint.frequency]||0,this.donationDataPoint.defaultCurrency,"USD"),t=yield yD();return{amountInUSD:this.donationDataPoint.amountInUSD,defaultAmountInUSD:e,currency:this.donationDataPoint.currency,companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,clientLocale:this.intl.locale,history:window.history.length,trackerClientId:this.tracker.clientId,elementLocale:this.checkoutConfiguration.element.locale,clientTimeZone:Xi(),battery:t}}))}}class SD{constructor(e,t,n,i){this.adaptiveDefaultFrequencyService=e,this.adaptiveAmountPresetsService=t,this.adaptivePreDonationUpsellSuggestionsService=n,this.onBeforeFetchSuggestion=i}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;null===(e=this.onBeforeFetchSuggestion)||void 0===e||e.call(this),yield Promise.all([this.adaptiveDefaultFrequencyService.tryFetchSuggestion(),this.adaptiveAmountPresetsService.tryFetchSuggestion()])}))}tryApplySuggestion(){this.adaptiveDefaultFrequencyService.tryApplySuggestion(),this.adaptiveAmountPresetsService.tryApplySuggestion()}tryTrackSuggestion(){var e;this.adaptiveDefaultFrequencyService.tryTrackSuggestion(),this.adaptiveAmountPresetsService.tryTrackSuggestion(),null===(e=this.adaptivePreDonationUpsellSuggestionsService)||void 0===e||e.tryTrackSuggestion()}}const ED={amount:0,currency:"",isFallback:!0};class AD{constructor(e){this.sessionApi=e,this.suggestion=ED,this.requestDurationMs=0,this.fetchCallsCount=0}getMeta(){return{requestDurationMs:this.requestDurationMs,fetchCallsCount:this.fetchCallsCount}}getSuggestion(){return this.suggestion}fetchSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{const t=performance.now(),n=yield Promise.race([this.timeoutPromise,this.fetchSuggestionFromApi(e)]);return sn.isSuccess(n)?this.suggestion=n.successResult:this.suggestion=ED,this.requestDurationMs=Math.round(performance.now()-t),sn.success(void 0)}catch(e){return this.suggestion=ED,this.requestDurationMs=0,sn.fail(void 0)}finally{this.fetchCallsCount++}}))}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e(sn.success(ED))}),3e3)}))}fetchSuggestionFromApi(e){return this.sessionApi.post("getPduAmount",e)}}var CD,vD,ND;!function(e){e.PAGES="pages",e.MODAL="modal"}(CD||(CD={})),function(e){e.V1="v1",e.V3="v3"}(vD||(vD={}));class bD{constructor(e,t,n,i,s,a,r){this.checkoutState=e,this.checkoutConfiguration=t,this.tracker=n,this.intl=i,this.pduAmountsFetcher=s,this.currencyService=a,this.suggestions=r}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.getRequestParams(),t=yield this.pduAmountsFetcher.fetchSuggestion(e);return!sn.isFailure(t)}))}tryApplySuggestion(){const e=this.pduAmountsFetcher.getSuggestion();if(!e||e.isFallback)return;const t=this.adjustSuggestion(e,this.postDonationUpsellDataPoint.upsellMinAmount);this.checkoutState.postDonationUpsell.setUpsellCustomAmount(t.amount)}tryTrackSuggestion(){const e=this.pduAmountsFetcher.getSuggestion(),t=this.pduAmountsFetcher.getMeta();this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:{suggestion:e,suggestionRequestDurationMs:t.requestDurationMs,suggestionFetchCallsCount:t.fetchCallsCount}})}get postDonationUpsellDataPoint(){return this.checkoutState.postDonationUpsell.dataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}getMaxSumInCorrectCurrency(){return this.currencyService.fromFloat(this.currencyService.convert(1e3,"USD",this.donationDataPoint.currency),this.donationDataPoint.currency)}getRequestParams(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;const t=new Date,n=yield this.getNavigatorData(navigator);return{clientId:this.tracker.clientId,utmSource:this.checkoutConfiguration.queryParams.utm.source||"",source:this.checkoutConfiguration.checkoutType,version:vD.V3,companyKey:this.checkoutConfiguration.company.key,checkoutWidgetKey:this.checkoutConfiguration.campaign.key,checkoutCurrency:this.donationDataPoint.currency,checkoutInUsdAmount:null!==(e=this.donationDataPoint.amountInUSD)&&void 0!==e?e:0,checkoutCurrencyRate:this.currencyService.getRate(this.donationDataPoint.currency),clientWeekday:t.getDay(),clientHour:t.getHours(),clientTimeZone:Xi(),clientLocale:this.intl.locale,clientDevicePixelRatio:window.devicePixelRatio,clientBatteryLevel:n.clientBatteryLevel,clientDeviceMemory:n.clientDeviceMemory,clientHardwareConcurrency:n.clientHardwareConcurrency,clientConnectionDownlink:n.clientConnectionDownlink,clientConnectionType:n.clientConnectionType,clientDoNotTrack:"1"===navigator.doNotTrack}}))}getNavigatorData(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i,s,a,r;return{clientBatteryLevel:yield yD(),clientDeviceMemory:null!==(t=e.deviceMemory)&&void 0!==t?t:0,clientHardwareConcurrency:null!==(n=e.hardwareConcurrency)&&void 0!==n?n:0,clientConnectionDownlink:null!==(s=null===(i=e.connection)||void 0===i?void 0:i.downlink)&&void 0!==s?s:0,clientConnectionType:null!==(r=null===(a=e.connection)||void 0===a?void 0:a.type)&&void 0!==r?r:""}}))}adjustSuggestion(e,t){const{amount:n,currency:i}=e,s=this.currencyService.convert(n,i,this.donationDataPoint.currency);let a=s;s<=t&&(a=t);const r=this.getMaxSumInCorrectCurrency();return s>r&&(a=r),Object.assign(Object.assign({},e),{amount:this.suggestions.beautify(a,this.donationDataPoint.currency)})}}!function(e){e.YES="yes",e.NO="no",e.UNKNOWN="unknown"}(ND||(ND={}));const PD={showUpsell:ND.UNKNOWN};function DD(e,t){let n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return new Promise(((i,a)=>{null!==n&&(clearTimeout(n),n=null),n=setTimeout((()=>{e(...s).then(i).catch(a)}),t)}))}}class _D{constructor(e){this.suggestion=PD,this.requestCacheService=new mD(PD,(t=>e.getNextScreen(t)),((e,t)=>this.shouldCacheResponse(e,t)),(e=>this.getCacheKey(e))),this.fetchSuggestionWithDebounce=DD((e=>this.getCachedOrFetchValue(e)),300)}fetchSuggestion(e){return this.fetchSuggestionWithDebounce(e)}getSuggestion(){return this.suggestion}shouldCacheResponse(e,t){return t.showUpsell!==ND.UNKNOWN&&null!==t.primaryAmount&&null!==t.secondaryAmount}getCacheKey(e){return JSON.stringify({eventTime:new Date(e.eventTime).toLocaleTimeString(e.clientLocale,{hour:"2-digit",weekday:"long"}),clientTimeZone:e.clientTimeZone,clientLocale:e.clientLocale,checkoutCurrency:e.checkoutCurrency,checkoutAmount:e.checkoutAmount,checkoutInUsdAmount:e.checkoutInUsdAmount,checkoutDefaultAmount:e.checkoutDefaultAmount})}getCachedOrFetchValue(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.suggestion=yield this.requestCacheService.getCachedOrFetchValue(e),this.suggestion}))}}class TD{constructor(e){this.isAdaptiveSuggestionFetched=!1,this.adaptivePreDonationUpsellSuggestionsFetcher=e.adaptivePreDonationUpsellSuggestionsFetcher,this.checkoutConfiguration=e.checkoutConfiguration,this.checkoutState=e.checkoutState,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.preDonationUpsellDataPoint=e.preDonationUpsellDataPoint,this.intl=e.intl,this.tracker=e.tracker,this.shouldRequestUpsellAmounts=e.shouldRequestUpsellAmounts}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;return!!this.shouldFetchSuggestion&&null!==this.donationDataPoint.amount&&null!==this.donationDataPoint.amountInUSD&&(yield this.adaptivePreDonationUpsellSuggestionsFetcher.fetchSuggestion(Object.assign(Object.assign({},function(){const e=new Date;return{eventTime:e.toISOString().split(".")[0]+"Z",clientWeekday:e.getDay(),clientHour:e.getHours(),clientTimeZone:Xi()}}()),{companyName:this.checkoutConfiguration.company.name,clientLocale:this.intl.locale,checkoutCampaignKey:this.checkoutConfiguration.campaign.key,checkoutCurrency:this.donationDataPoint.currency,checkoutAmount:this.donationDataPoint.amount,checkoutInUsdAmount:this.donationDataPoint.amountInUSD,checkoutCurrencyRate:this.currencyService.getRate(this.donationDataPoint.currency),checkoutDefaultAmount:null!==(e=this.donationDataPoint.defaultAmount)&&void 0!==e?e:0,shouldRequestUpsellAmounts:this.shouldRequestUpsellAmounts})),this.isAdaptiveSuggestionFetched=!0,!0)}))}tryApplySuggestion(){this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion().showUpsell===ND.NO&&this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1);const e=this.getAdjustedAmounts();e&&this.checkoutState.preDonationUpsell.setSuggestedAmounts(...e)}tryTrackSuggestion(){if(!this.isAdaptiveSuggestionFetched)return;const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion();this.tracker.customTrack({type:"preDonationUpsellMlResponse",data:{showUpsell:e.showUpsell}}),this.shouldRequestUpsellAmounts&&this.tracker.customTrack({type:"UpsellAmountSuggestion",data:{isFallback:"number"!=typeof e.primaryAmount||"number"!=typeof e.secondaryAmount,primaryAmount:e.primaryAmount,secondaryAmount:e.secondaryAmount}})}resetSuggestionApplication(){this.checkoutState.preDonationUpsell.resetSuggestedAvailability(),this.checkoutState.preDonationUpsell.resetSuggestedAmounts()}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get shouldFetchSuggestion(){return!(!this.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled||!this.preDonationUpsellDataPoint.isEnabled||this.preDonationUpsellDataPoint.upsellFrequency!==oe.MONTHLY&&this.preDonationUpsellDataPoint.upsellFrequency!==oe.EVERY_4_WEEKS)}getAdjustedAmounts(){const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion(),t=e.primaryAmount,n=e.secondaryAmount;if("number"!=typeof t||"number"!=typeof n)return;const i=this.preDonationUpsellDataPoint.upsellCurrency,s=this.donationDataPoint.getMinAmount(this.preDonationUpsellDataPoint.upsellFrequency),[a,r]=[t,n].map((e=>this.suggestionsService.beautify(this.currencyService.convert(this.currencyService.fromFloat(e,"USD"),"USD",i),i)));return a<s||r<s?void 0:[a,r]}}class xD extends pn{constructor(e){super(),this.merge({customEventType:e.customEventType,customEventData:JSON.stringify(e.customEventData)})}get eventType(){return mn}}class OD extends Da{constructor(e,t,n,i,s,a){super(e,t),this.merge({checkoutScreen:n,checkoutError:i,chargePaymentMethod:s,duration:a})}get eventType(){return"checkoutError"}}class kD extends _i{get isTestGroup(){return this.isActive&&this.isVariant(Rn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!kD.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}kD.ALLOWED_CURRENCIES=["USD"];class ID extends _i{get isTestGroup(){return this.isActive&&this.isVariant(Rn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!ID.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}ID.ALLOWED_CURRENCIES=["USD"];class wD extends _i{constructor(){super(...arguments),this.isFallback=!1,this.exposed=!1}get isTestGroup(){return this.isActive&&(this.isVariant(jn.TEST_1)||this.isVariant(jn.TEST_2))}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===u.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackSmartCoveringFeeResponse(e){this.isActive&&this.tracker.customTrack({type:"smartCoveringFeeV2Response",data:e})}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class RD extends _i{constructor(){super(...arguments),this.isFallback=!1,this.exposed=!1}get isTestGroup(){return this.isActive&&this.isVariant(Bn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===u.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackSmartCoveringFeeResponse(e){this.isActive&&this.tracker.customTrack({type:"smartCoveringFeeV2Response",data:e})}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class MD extends _i{constructor(){super(...arguments),this._allowedFrequencies=[oe.ONCE,oe.MONTHLY]}get isTestGroup(){return[qn.TEST].some((e=>this.isVariantTestGroup(e)))}get allowedFrequencies(){return this._allowedFrequencies}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!(e.currencies.length>1)&&(!!this.isAllowedByDonationForm(e)&&(!!e.isEnabledCampaignAi&&(!e.isEnabledCampaignHints&&(!e.p2pUsed&&!!e.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e)))))))}isDonationFormExperimentEnabled(){const e=Nn[Sn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT];return this.tracker.getTags().includes(e)}isAllowedByDonationForm(e){return!e.fromDonationForm||!!this.isDonationFormExperimentEnabled()}}class LD extends _i{get isTestGroup(){return this.isActive&&this.isVariant(Gn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!LD.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}LD.ALLOWED_CURRENCIES=["USD"];class UD extends _i{get isTestGroup(){return this.isActive&&this.isVariant(Vn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!UD.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}var FD,jD;UD.ALLOWED_CURRENCIES=["USD"],function(e){e[e.STRATEGY_10=10]="STRATEGY_10",e[e.STRATEGY_15=15]="STRATEGY_15",e[e.STRATEGY_20=20]="STRATEGY_20",e[e.STRATEGY_25=25]="STRATEGY_25"}(FD||(FD={}));class BD extends _i{constructor(e){super(e),this.customEventType="PDUAmountStrategy",this._strategy=this.getRandomStrategy()}get strategy(){return this._strategy}tryStart(){this.isActive||this.start()}isEnabled(){return this.isTestGroup}getCustomAmount(e){let{amount:t,minAmount:n,currency:i,suggestionsService:s}=e;const a=this.calculateCustomAmount(t,n);return s.beautify(a,i)}sendPDUAmountStrategyEvent(){this.tracker.customTrack({type:this.customEventType,data:{amountStrategy:this.strategy}})}get isTestGroup(){return this.isActive&&this.isVariant(Jn.TEST)}calculateCustomAmount(e,t){return Math.max(t,e*this.strategy/100)}getRandomStrategy(){const e=[FD.STRATEGY_10,FD.STRATEGY_15,FD.STRATEGY_20,FD.STRATEGY_25];return e[Math.floor(Math.random()*e.length)]}}!function(e){e[e.STRATEGY_10=10]="STRATEGY_10",e[e.STRATEGY_15=15]="STRATEGY_15",e[e.STRATEGY_20=20]="STRATEGY_20",e[e.STRATEGY_25=25]="STRATEGY_25"}(jD||(jD={}));class HD extends _i{constructor(e){super(e),this.customEventType="PDUAmountStrategy",this._strategy=this.getRandomStrategy()}get strategy(){return this._strategy}tryStart(){this.isActive||this.start()}isEnabled(){return this.isTestGroup}getCustomAmount(e){let{amount:t,minAmount:n,currency:i,suggestionsService:s}=e;const a=this.calculateCustomAmount(t,n);return s.beautify(a,i)}sendPDUAmountStrategyEvent(){this.tracker.customTrack({type:this.customEventType,data:{amountStrategy:this.strategy}})}get isTestGroup(){return this.isActive&&this.isVariant(ei.TEST)}calculateCustomAmount(e,t){return Math.max(t,e*this.strategy/100)}getRandomStrategy(){const e=[jD.STRATEGY_10,jD.STRATEGY_15,jD.STRATEGY_20,jD.STRATEGY_25];return e[Math.floor(Math.random()*e.length)]}}class qD extends _i{constructor(){super(...arguments),this._allowedFrequencies=[oe.ONCE,oe.MONTHLY]}get isTestGroup(){return[si.TEST].some((e=>this.isVariantTestGroup(e)))}get allowedFrequencies(){return this._allowedFrequencies}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!(e.currencies.length>1)&&(!!this.isAllowedByDonationForm(e)&&(!!e.isEnabledCampaignAi&&(!e.isEnabledCampaignHints&&(!e.p2pUsed&&!!e.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e)))))))}isDonationFormExperimentEnabled(){const e=Nn[Sn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT];return this.tracker.getTags().includes(e)}isAllowedByDonationForm(e){return!e.fromDonationForm||!!this.isDonationFormExperimentEnabled()}}class GD extends ZC{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,E,A,C,v,N,b,P,D){super(e,t,n,r,i,s,o,c,l,u,d,m,p,g,y,f,S,A,C,D),this.dataPointRegistry=e,this._checkoutConfiguration=t,this.checkoutState=n,this.sessionService=i,this.sessionAPI=s,this.paymentService=a,this._checkoutUIState=r,this.tracker=o,this.currencyService=c,this.intl=l,this.iframeWindow=u,this.sentry=d,this.paymentFlowManager=h,this.paymentScreen=m,this.eventEmitter=p,this.checkoutAPIBridge=g,this.debug=y,this.experiments=f,this.paymentAPI=S,this.postDonationUpsellAPI=E,this.logger=A,this._redirectApi=C,this.postDonationUpsellMlSuggestion=v,this.smartCoveringFeeDecider=N,this.suggestionsService=b,this.pduAmountsService=P,this.params=D,this.shouldFindMandatoryScreen=!1,this.experiments.register(Sn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT,kD),this.experiments.register(Sn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT,ID),this.experiments.register(Sn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT,LD),this.experiments.register(Sn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT,UD),this.experiments.register(Sn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT,MD),this.experiments.register(Sn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT,qD),this.experiments.register(Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT,BD),this.experiments.register(Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT,HD)}get isReadyToRetryPay(){return this.getState().isReadyToRetryPay}get type(){return this.checkoutState.flowType}get checkoutUIState(){return this._checkoutUIState}get goalMeterTrackerData(){const e=this.checkoutConfiguration.goalMeterData.raisedAmount,t=this.checkoutConfiguration.goalMeterData.currency,n=this.checkoutConfiguration.goalMeterData.totalAmount,i=e&&t?this.currencyService.convert(e,t,"USD"):null,s=n&&t?this.currencyService.convert(n,t,"USD"):null;return{shown:this.checkoutConfiguration.goalMeterData.shown,isFundraisingPageGoalMeter:this.checkoutConfiguration.goalMeterData.isFundraisingPageGoalMeter,raisedInUSD:i,goalAmountInUSD:s}}get isPaymentStarted(){return this.paymentService.isIDEALPaymentStarted()}getPaymentScreen(e,t){return this.paymentScreen.get(e,t)}getState(){return this.checkoutState.get()}hasPaymentError(e){return this.getState().paymentErrors[e]}dispose(){return this.paymentFlowManager.destroy()}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return sn.fail({});const e=this.getDataPoint(YC.PAYMENT_OPTIONS).clientPaymentMethod,t=yield this.resolvePaymentFlow(e);let n;try{yield this.sessionService.updateSession(),n=yield t.hold()}catch(e){return sn.fail({shouldLeave:!1})}return sn.isFailure(n)?(this.payErrorMessage=n.failureResult.message,sn.fail({shouldLeave:!1})):sn.success(void 0)}))}pay(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{screen:t,predictedNextScreen:n}=e;if(this.checkoutConfiguration.infrastructureParams.showcase)return sn.fail({});this.setPaymentError(eb._h.CARD,!1),this.setPaymentError(eb._h.UK_BACS,!1),this.setPaymentError(eb._h.US_BANK_ACCOUNT,!1),this.setPaymentError(eb._h.PAYPAL,!1),this.setMailingAddressError(!1),this.payErrorTitle=void 0,this.payErrorMessage=void 0,this.additionalPayErrorMessage=void 0,this.checkoutState.setPaymentAttempt();const i=this.getDataPoint(YC.PAYMENT_OPTIONS).clientPaymentMethod,s=yield this.resolvePaymentFlow(i),a=Date.now(),r=yield this.sessionService.updateSession();if(sn.isFailure(r))return this.payErrorMessage=this.intl.translate("common.errorOccurredText"),sn.fail({});let o;try{o=yield s.pay()}catch(e){return this.shouldFindMandatoryScreen=!0,this.payErrorMessage=this.intl.translate("common.errorOccurredText"),this.capturePayErrorToSentry(e),yield this.trackError(this.payErrorMessage,a-Date.now(),t),sn.fail({shouldLeave:this.hasPaymentError(eb._h.CARD)})}if(sn.isFailure(o)){this.shouldFindMandatoryScreen=!0,this.payErrorTitle=o.failureResult.title,this.payErrorMessage=o.failureResult.message,this.additionalPayErrorMessage=o.failureResult.additionalMessage;const e=this.payErrorMessage||(i===eb._h.CARD?this.intl.translate("creditCard.error.title"):this.intl.translate("common.errorOccurredText"));return yield this.trackError(e,a-Date.now(),t),sn.fail({shouldLeave:o.failureResult.shouldLeave})}return o.successResult.data?(this.checkoutState.setDonationResultState({donationId:o.successResult.data.donationId,customerId:o.successResult.data.customerId,tributeId:o.successResult.data.tributeId,tributeDonorPortalLink:o.successResult.data.tributeDonorPortalLink,recurringId:o.successResult.data.recurringId}),this.handleDonationCompleted({donationId:o.successResult.data.donationId,clientPaymentMethod:i||eb._h.CARD,duration:a-Date.now(),screen:t}),yield this.handlePaymentRedirect(n),yield this.fetchPostDonationUpsellScreenDecision(),yield this.performPDUAmountsV3Experiment(),sn.success(void 0)):sn.fail({shouldLeave:!1})}))}saveCheckoutClosePublicParams(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getDataPoint(Nr.DESIGNATION),t=e.toObject(),n=this.checkoutState.remindMeLater.dataPoint.toObject(),i=yield this.getPublicCheckoutDonationParams(),s=yield this.getCommonPublicCheckoutIntentParams();s&&(s.checkoutSettings.modifyDesignation=e.modifyDesignation,s.checkoutSettings.designation=t.goalKey,s.isSavedEmailOnExit=n.used),this.checkoutAPIBridge.setDonationParams(i),this.checkoutAPIBridge.setIntentParams(s)}))}trackCurrencyChange(e){this.tracker.track(new xD({customEventType:"selectCurrency",customEventData:{currency:e}}))}trackCheckoutCharge(e){const t=this.donationDataPoint.toObject(),n=this.checkoutState.tribute.dataPoint,i=this.getDataPoint(Nr.DESIGNATION),s=this.checkoutState.comment.dataPoint,a=this.checkoutConfiguration.campaign,r=this.checkoutConfiguration.element,o={[t.frequency]:t.amountOptions},c=t.hintAmounts[t.frequency].length?t.hintAmounts:o,l={};this.donationDataPoint.currentHint&&(l.hintAmount=this.donationDataPoint.currentHint.amount,l.hintDescription=this.donationDataPoint.currentHint.description,l.default=this.donationDataPoint.currentHint.default,l.amountUsd=this.donationDataPoint.currentHint.amountUsd,l.hintVariantName=this.donationDataPoint.hintsVariantName),this.tracker.track(new JC({frequency:t.frequency,currency:t.currency,amount:t.amount||0,amountOptions:c},{elementType:r.type,elementKey:r.key,elementReminderKey:r.reminderKey},e.screen,{chargeKey:e.donationId,chargeInUSDAmount:this.donationDataPoint.totalInUSD||0,chargeInDefaultCurrencyAmount:this.donationDataPoint.totalInDefaultCurrency,chargeAmount:this.donationDataPoint.total,chargeCurrency:this.donationDataPoint.currency,chargeFeeCovered:this.donationDataPoint.isFeeCovered,chargePaymentMethod:e.clientPaymentMethod,chargeIsRecurring:this.donationDataPoint.frequency!==oe.ONCE,chargeHasComment:s.isActive&&!!s.comment,chargeHasTribute:n.isFilled,chargeGoal:i.goalKey||void 0,chargeCampaignKey:a.key},e.duration,l))}trackCheckoutView(){var e,t;const n=this.donationDataPoint.toObject(),i=this.checkoutConfiguration.element,s={[n.frequency]:n.amountOptions},a=n.hintAmounts[n.frequency].length?n.hintAmounts:s,r=this.checkoutConfiguration.externalConfig,o=Boolean((null===(e=r.launcher)||void 0===e?void 0:e.elementKey)&&(null===(t=r.checkoutData)||void 0===t?void 0:t.amount)),c=this.getOpeningTime();this.debug.log("checkout opening time:eventCheckoutView",`${c} ms`),this.tracker.track(new nv({frequency:n.frequency,currency:n.currency,amount:n.amount,amountOptions:a},{elementType:i.type,elementKey:i.key,elementReminderKey:i.reminderKey},c,{isAmountFromElement:o}))}trackCheckoutClose(e){const t=this.donationDataPoint.toObject(),n=this.checkoutConfiguration.element,i={[t.frequency]:t.amountOptions},s=t.hintAmounts[t.frequency].length?t.hintAmounts:i;this.tracker.track(new ev({frequency:t.frequency,currency:t.currency,amount:t.amount,amountOptions:s},{elementType:n.type,elementKey:n.key,elementReminderKey:n.reminderKey},e))}trackCheckoutScreenView(e,t,n,i){const s=this.donationDataPoint.toObject(),a=this.getDataPoint(YC.PAYMENT_OPTIONS),r=Object.keys(a.allowedPaymentMethods).filter((e=>![eb._h.CRYPTO].includes(e)&&a.allowedPaymentMethods[e].available&&a.allowedPaymentMethods[e].visible)),o=this.checkoutConfiguration.element,c={[s.frequency]:s.amountOptions},l=s.hintAmounts[s.frequency].length?s.hintAmounts:c,u={paymentMethods:r,renderDuration:null};t&&n&&(u.transitionDuration=n.getTime()-t.getTime()),i&&n&&(u.renderDuration=i.getTime()-n.getTime()),this.tracker.track(new tv({frequency:s.frequency,currency:s.currency,amount:s.amount,amountOptions:l},{elementType:o.type,elementKey:o.key,elementReminderKey:o.reminderKey},e,u))}trackCustomEvent(e){this.tracker.customTrack(e)}getCheckoutTrackerData(){const e=this.checkoutState.tribute.dataPoint;return{donation:{amount:this.donationDataPoint.amount,currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,defaultAmount:this.donationDataPoint.defaultAmount,amountOptions:this.donationDataPoint.amountOptions,currentHint:this.donationDataPoint.currentHint,hintOptions:this.donationDataPoint.hintOptions,hintVariantName:this.donationDataPoint.hintsVariantName===Uv.NONE?null:this.donationDataPoint.hintsVariantName},tribute:{isActive:e.isActive},goalMeter:this.goalMeterTrackerData}}setPaymentError(e,t){return this.checkoutState.setPaymentError(e,t)}acceptPostDonationUpsell(){var e;const t=this.postDonationUpsellDataPoint.toObject(),n=this.getDataPoint(Nr.DESIGNATION).toObject();return this.postDonationUpsellAPI.update({donation:{total:t.upsellTotal,tip:t.upsellTip,amount:t.upsellAmount,currency:t.upsellCurrency},goalKey:null!==(e=n.goalKey)&&void 0!==e?e:"",firstChargeAt:t.upsellStartDate,period:t.upsellFrequency})}ensureFrequencyEnabled(e){const t=this.dataPointRegistry.getDataPoint(YC.PRE_DONATION_UPSELL);if(this.donationDataPoint.isFrequencyEnabled(e))return;let n,i;t.isAccepted?(n=oe.ONCE,i=t.upsellInitialAmount):(n=this.donationDataPoint.defaultFrequency,i=this.donationDataPoint.getDefaultAmountsInCurrency(n)),this.checkoutState.donation.setFrequency(n),this.checkoutState.donation.setAmount(i)}isSmartCoveringFeeExperimentEnabled(){const e={includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue};return!!this.smartCoveringFeeCampaignPagesExperimentV2.isEnabled(e)}exposeSmartCoveringFeeExperimentV2(){const e={includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue};this.smartCoveringFeeCampaignPagesExperimentV2.canBeStarted(e)&&this.smartCoveringFeeCampaignPagesExperimentV2.exposure()}fetchFeeCoveringSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.checkoutType===Ce.MODAL)return;if(!this.isSmartCoveringFeeExperimentEnabled())return;const t=yield this.createGetSmartCoveringFeePayload();if(null===t)return;let n;n=(null==e?void 0:e.debounced)?yield this.smartCoveringFeeDecider.debouncedFetchDecision(t):yield this.smartCoveringFeeDecider.fetchDecision(t);const i=n.response;n.fromCache||this.smartCoveringFeeCampaignPagesExperimentV2.trackSmartCoveringFeeResponse(i),i.isFallback?this.smartCoveringFeeCampaignPagesExperimentV2.isFallback=!0:(this.smartCoveringFeeCampaignPagesExperimentV2.isFallback=!1,this.checkoutState.donation.setFeeCovered(i.feeCoveringSuggestion===u.XN.DEFAULT_YES))}))}initialize(e){super.initialize(e),this.initializeSmartCoveringFeeExperiments();const t=this.checkoutConfiguration.externalConfig.checkoutIntent;t&&!e.shouldRestoreFromIntent&&this.applyCheckoutIntent(t),this.paymentService.ensurePaymentMethodsInitialized()}exposeAmountPresetsExperiment(){this.amountPresetsCheckoutExperiment.exposure()}tryStartMlAmountPresetsExperiment(e){this.amountPresetsCheckoutExperiment.tryStart(e)}isMlAmountPresetsExperimentEnabled(){return this.amountPresetsCheckoutExperiment.isTestGroup}tryStartMlAmountPresetsPagesExperiment(e){this.amountPresetsPagesV3Experiment.tryStart(e)}isMlAmountPresetsPagesExperimentEnabled(){return this.amountPresetsPagesV3Experiment.isTestGroup}exposeAmountPresetsPagesExperiment(){this.amountPresetsPagesV3Experiment.exposure()}getMlAmountPresetsExperimentAllowedFrequencies(){return this.amountPresetsCheckoutExperiment.isTestGroup?this.amountPresetsCheckoutExperiment.allowedFrequencies:null}getDonationParams(){var e;const t=this.donationDataPoint.toObject();return{amount:t.amount,total:t.total,currency:t.currency,frequency:t.frequency,publicFee:t.publicFee,canModifyAmount:this.donationDataPoint.canModifyAmount,feeCovered:this.donationDataPoint.isFeeCovered,selectedHintId:null===(e=this.donationDataPoint.currentHint)||void 0===e?void 0:e.id}}getPublicCheckoutDonationParams(){return this.getCommonPublicCheckoutDonationParams({clientPaymentMethod:this.getDataPoint(YC.PAYMENT_OPTIONS).clientPaymentMethod,payResult:this.checkoutState.get().donationResultState})}applyCheckoutIntent(e){var t,n,i,s;if(e.donation){if(e.donation.currency&&this.checkoutState.donation.setCurrency(e.donation.currency),e.donation.frequency){const{enabled:t}=this._checkoutConfiguration.campaign.config.frequencies[e.donation.frequency];t&&this.checkoutState.donation.setFrequency(e.donation.frequency)}if(e.donation.amount&&this.checkoutState.donation.setAmount(e.donation.amount),e.donation.selectedHintId){const n=null===(t=this.donationDataPoint.hintOptions)||void 0===t?void 0:t.find((t=>{var n;return t.id===(null===(n=e.donation)||void 0===n?void 0:n.selectedHintId)}));n&&this.checkoutState.donation.setHint(n)}}"boolean"==typeof e.feeCovered&&this.checkoutState.donation.setFeeCovered(e.feeCovered,{isCustomFeeCoveredValue:!0}),e.supporter&&(e.supporter.firstName&&this.checkoutState.privacy.setDonorFirstName(e.supporter.firstName),e.supporter.lastName&&this.checkoutState.privacy.setDonorLastName(e.supporter.lastName),e.supporter.email&&this.checkoutState.privacy.setDonorEmail(e.supporter.email)),e.comment&&this.checkoutState.comment.saveComment(e.comment),e.tribute&&(e.tribute.inHonorOf&&this.checkoutState.tribute.setTributeeName(null===(n=e.tribute)||void 0===n?void 0:n.inHonorOf),this.checkoutState.tribute.setActive(!0)),(null===(i=e.checkoutSettings)||void 0===i?void 0:i.designation)&&this.checkoutState.designation.setGoal(null===(s=e.checkoutSettings)||void 0===s?void 0:s.designation),this.checkoutState.filledFromIntent=!0}get isMlPostDonationUpsellV3ExperimentEnabled(){return!!this.smartDPUCheckoutV3Experiment.isEnabled(this.smartPDUV3ExperimentParams)||!!this.smartPDUCampaignPagesV3Experiment.isEnabled(this.smartPDUV3ExperimentParams)}get smartPDUV3ExperimentParams(){const e=this.getState();return{isPostDonationUpsellEnabled:e.postDonationUpsell.isEnabled,isPaid:e.isPaid}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get postDonationUpsellDataPoint(){return this.checkoutState.postDonationUpsell.dataPoint}get mlPostDonationUpsellCheckoutExperiment(){return this.experiments.get(Sn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT)}get mlPostDonationUpsellCampaignPagesExperiment(){return this.experiments.get(Sn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT)}get smartPostDonationUpsellCheckoutExperiment(){return this.experiments.get(Sn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT)}get smartPostDonationUpsellCampaignPagesExperiment(){return this.experiments.get(Sn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT)}get smartDPUCheckoutV3Experiment(){return this.experiments.get(Sn.SMART_PDU_CHECKOUT_V_3_EXPERIMENT)}get smartPDUCampaignPagesV3Experiment(){return this.experiments.get(Sn.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT)}get amountPresetsCheckoutExperiment(){return this.experiments.get(Sn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT)}get amountPresetsPagesV3Experiment(){return this.experiments.get(Sn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT)}get mlPostDonationUpsellExperimentParams(){const e=this.getState();return{isPostDonationUpsellEnabled:e.postDonationUpsell.isEnabled,isPaid:e.isPaid,currency:e.donation.currency}}get isMlPostDonationUpsellExperimentEnabled(){return!!this.mlPostDonationUpsellCheckoutExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)||!!this.mlPostDonationUpsellCampaignPagesExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)}get smartPostDonationUpsellExperimentParams(){const e=this.getState();return{isPostDonationUpsellEnabled:e.postDonationUpsell.isEnabled,isPaid:e.isPaid,currency:e.donation.currency}}get isSmartPostDonationUpsellEnabled(){return!!this.smartPostDonationUpsellCheckoutExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)||!!this.smartPostDonationUpsellCampaignPagesExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)}get smartCoveringFeeCampaignPagesExperimentV2(){return this.experiments.get(Sn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT)}tryStartMlPostDonationUpsellV3Experiment(){this.smartDPUCheckoutV3Experiment.tryStart(this.smartPDUV3ExperimentParams),this.smartPDUCampaignPagesV3Experiment.tryStart(this.smartPDUV3ExperimentParams)}exposureMlPostDonationUpsellV3Experiment(){this.smartDPUCheckoutV3Experiment.exposure(),this.smartPDUCampaignPagesV3Experiment.exposure()}tryStartMlPostDonationUpsellExperiment(){this.mlPostDonationUpsellCheckoutExperiment.tryStart(this.mlPostDonationUpsellExperimentParams),this.mlPostDonationUpsellCampaignPagesExperiment.tryStart(this.mlPostDonationUpsellExperimentParams)}trackPostDonationUpsellAmountSuggestion(e){this.mlPostDonationUpsellCheckoutExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)&&this.mlPostDonationUpsellCheckoutExperiment.trackAmountSuggestion(e),this.mlPostDonationUpsellCampaignPagesExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)&&this.mlPostDonationUpsellCampaignPagesExperiment.trackAmountSuggestion(e),this.smartPostDonationUpsellCheckoutExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)&&this.smartPostDonationUpsellCheckoutExperiment.trackAmountSuggestion(e),this.smartPostDonationUpsellCampaignPagesExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)&&this.smartPostDonationUpsellCampaignPagesExperiment.trackAmountSuggestion(e)}tryStartSmartPostDonationUpsellExperiment(){this.smartPostDonationUpsellCheckoutExperiment.tryStart(this.smartPostDonationUpsellExperimentParams),this.smartPostDonationUpsellCampaignPagesExperiment.tryStart(this.smartPostDonationUpsellExperimentParams)}performPDUAmountsV3Experiment(){return(0,l.sH)(this,void 0,void 0,(function*(){this.tryStartMlPostDonationUpsellV3Experiment(),this.exposureMlPostDonationUpsellV3Experiment(),this.isMlPostDonationUpsellV3ExperimentEnabled&&(yield this.pduAmountsService.tryFetchSuggestion())&&(this.pduAmountsService.tryApplySuggestion(),this.pduAmountsService.tryTrackSuggestion())}))}fetchPostDonationUpsellScreenDecision(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t;if(this.tryStartMlPostDonationUpsellExperiment(),this.tryStartSmartPostDonationUpsellExperiment(),!this.isMlPostDonationUpsellExperimentEnabled&&!this.isSmartPostDonationUpsellEnabled)return;const n=new Date;yield this.postDonationUpsellMlSuggestion.fetchAmountSuggestion({eventTime:(new Date).toISOString(),checkoutCurrency:this.donationDataPoint.currency,checkoutAmount:null!==(e=this.donationDataPoint.amount)&&void 0!==e?e:0,checkoutInUsdAmount:null!==(t=this.donationDataPoint.amountInUSD)&&void 0!==t?t:0,clientTimeZone:Xi(),clientHour:n.getHours(),clientWeekday:n.getDay(),clientLocale:this.intl.locale,minRecurringAmount:this.postDonationUpsellDataPoint.upsellMinAmount,campaignKey:this.checkoutConfiguration.campaign.key});const i=this.postDonationUpsellMlSuggestion.getOriginalAmountSuggestion();i.isFallback||this.trackPostDonationUpsellAmountSuggestion(i)}))}initializeSmartCoveringFeeExperiments(){this.experiments.register(Sn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT,RD),this.experiments.get(Sn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT).tryStart({includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue}),this.experiments.register(Sn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT,wD)}setMailingAddressError(e){this.checkoutState.hasMailingAddressError=e}trackError(e,t,n){const i=this.getDataPoint(YC.PAYMENT_OPTIONS),s=this.donationDataPoint.toObject(),a=this.checkoutConfiguration.element,r={[s.frequency]:s.amountOptions},o=s.hintAmounts[s.frequency].length?s.hintAmounts:r;this.tracker.track(new OD({frequency:this.donationDataPoint.frequency,currency:this.donationDataPoint.currency,amount:this.donationDataPoint.amount||0,amountOptions:o},{elementType:a.type,elementKey:a.key,elementReminderKey:a.reminderKey},n,e,i.clientPaymentMethod||eb._h.CARD,t))}resolvePaymentFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentService.resolvePaymentFlow(e)}))}createGetSmartCoveringFeePayload(){return(0,l.sH)(this,void 0,void 0,(function*(){if(null===this.donationDataPoint.amountInUSD||null===this.donationDataPoint.defaultAmount)return null;const e=this.currencyService.convert(this.checkoutConfiguration.defaultAmounts[this.donationDataPoint.frequency]||0,this.donationDataPoint.defaultCurrency,"USD"),t=yield yD();return{amountInUSD:this.donationDataPoint.amountInUSD,defaultAmountInUSD:e,currency:this.donationDataPoint.currency,companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,clientLocale:this.intl.locale,history:window.history.length,trackerClientId:this.tracker.clientId,elementLocale:this.checkoutConfiguration.element.locale,clientTimeZone:Xi(),battery:t}}))}}class VD extends rv{constructor(e){super(e),this.dataPointRegistry=e}synchronize(){const e=ov(this.dataPointRegistry.getDataPoint(YC.DONATION).frequency);this.designationDataPoint.hasSelectedGoalWithRepeat(e)||this.designationDataPoint.setComputedGoalKeyByGoalRepeat(e)}get designationDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.DESIGNATION)}}const KD=[u.tg.UNITED_STATES,u.tg.UNITED_KINGDOM,u.tg.AUSTRIA,u.tg.BELGIUM,u.tg.BULGARIA,u.tg.CROATIA,u.tg.CYPRUS,u.tg.CZECH_REPUBLIC,u.tg.DENMARK,u.tg.ESTONIA,u.tg.FINLAND,u.tg.FRANCE,u.tg.GERMANY,u.tg.GREECE,u.tg.HUNGARY,u.tg.IRELAND,u.tg.ITALY,u.tg.LATVIA,u.tg.LITHUANIA,u.tg.LUXEMBOURG,u.tg.MALTA,u.tg.NETHERLANDS,u.tg.POLAND,u.tg.PORTUGAL,u.tg.ROMANIA,u.tg.SLOVAKIA,u.tg.SLOVENIA,u.tg.SPAIN,u.tg.SWEDEN];class YD{constructor(e,t,n){this.checkoutConfiguration=e,this.currencyService=t,this.dataPointRegistry=n}isAvailable(e){switch(e){case oe.ANNUAL:return this.isAnnualUpsellAvailable();case oe.EVERY_4_WEEKS:return this.isEvery4WeeksUpsellAvailable();case oe.MONTHLY:return this.isMonthlyUpsellAvailable();default:throw new Error(`Unsupported target frequency: ${e}`)}}isAnnualUpsellAvailable(){return this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkConfigurationCompanyRecurringPlan(oe.ANNUAL)&&this.checkDesignation()&&this.checkTribute()&&this.checkDonationFrequency()}isEvery4WeeksUpsellAvailable(){return this.checkConfigurationCampaignUpsell()&&this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkConfigurationCompanyRecurringPlan(oe.EVERY_4_WEEKS)&&this.checkConfigurationUserCountryCode(KD)&&this.checkDesignation()&&!this.checkTribute()&&this.checkDonationFrequency()&&this.checkDonationCurrency()&&this.checkDonationAmount(oe.EVERY_4_WEEKS)}isMonthlyUpsellAvailable(){return!!this.checkoutConfiguration.infrastructureParams.showcase||this.checkConfigurationCampaignUpsell()&&this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkDesignation()&&!this.checkTribute()&&this.checkDonationFrequency()&&this.checkDonationCurrency()&&this.checkDonationAmount(oe.MONTHLY)}checkConfigurationCampaignUpsell(){return this.checkoutConfiguration.campaign.config.showUpsell}checkConfigurationCampaignEnabledFrequencies(){return this.checkoutConfiguration.enabledFrequencies.every((e=>this.checkoutConfiguration.preDonationUpsellSettings.enabledForDonationFrequencies.includes(e)))}checkConfigurationCampaignRecurringFrequency(){return this.checkoutConfiguration.enabledFrequencies.some((e=>e!==oe.ONCE))}checkConfigurationCompanyRecurringPlan(e){return this.checkoutConfiguration.company.recurringPlans[e]}checkConfigurationUserCountryCode(e){return e.includes(this.checkoutConfiguration.user.address.countryCode)}checkDesignation(){return this.dataPointRegistry.getDataPoint(Nr.DESIGNATION).allowRecurring}checkTribute(){return this.dataPointRegistry.getDataPoint(Nr.TRIBUTE).isFilled}checkDonationFrequency(){return this.dataPointRegistry.getDataPoint(YC.DONATION).frequency===oe.ONCE}checkDonationCurrency(){const e=this.dataPointRegistry.getDataPoint(YC.DONATION);return this.checkoutConfiguration.campaign.config.currencyEnabledRecurrings||e.currency===this.checkoutConfiguration.campaign.config.defaultCurrency}checkDonationAmount(e){var t;const n=this.dataPointRegistry.getDataPoint(YC.DONATION),i=null!==(t=n.amount)&&void 0!==t?t:0,s=n.currency;let a,r;switch(e){case oe.EVERY_4_WEEKS:a=Math.max(n.getMinAmount(e),this.currencyService.convert(7e3,"USD",s)),r=this.currencyService.convert(2e4,"USD",s);break;case oe.MONTHLY:a=n.getMinAmount(e),r=this.currencyService.convert(2e4,"USD",s);break;default:throw new Error(`Unsupported target frequency: ${e}`)}return i>=a&&i<=r}}class zD extends rv{constructor(e,t,n,i){super(t),this.checkoutConfiguration=e,this.dataPointRegistry=t,this.preDonationUpsellAvailabilityService=n,this.preDonationUpsellParamsService=i}synchronize(){const e=this.checkoutConfiguration.preDonationUpsellSettings.enabledTargetFrequencies.find((e=>this.preDonationUpsellAvailabilityService.isAvailable(e)));if(this.preDonationUpsellDataPoint.setComputedAvailability(!!e),e){const t=this.preDonationUpsellParamsService.getUpsellAmounts(e);this.preDonationUpsellDataPoint.setComputedParams({upsellFrequency:e,upsellCurrency:this.preDonationUpsellParamsService.getUpsellCurrency(),upsellHighAmount:t.high,upsellLowAmount:t.low,upsellInitialAmount:t.initial})}}get preDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(YC.PRE_DONATION_UPSELL)}}class WD{constructor(e,t,n,i){this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this.dataPointRegistry=i}getUpsellCurrency(){return this.dataPointRegistry.getDataPoint(YC.DONATION).currency}getUpsellAmounts(e){switch(e){case oe.ANNUAL:return this.getAnnualAmounts();case oe.EVERY_4_WEEKS:case oe.MONTHLY:return this.getEvery4WeeksAndMonthlyAmounts(e);default:throw new Error(`Unsupported target frequency: ${e}`)}}getAnnualAmounts(){const e=this.dataPointRegistry.getDataPoint(YC.DONATION).amount;return{high:e,low:null,initial:e}}getEvery4WeeksAndMonthlyAmounts(e){const t=this.dataPointRegistry.getDataPoint(YC.DONATION).amount,[n,i]=this.calculateEvery4WeeksAndMonthlyAmountsInUsd(),[s,a]=this.adjustEvery4WeeksAndMonthlyAmounts(e,n,i);return{high:a,low:s,initial:t}}calculateEvery4WeeksAndMonthlyAmountsInUsd(){var e;const t=null!==(e=this.dataPointRegistry.getDataPoint(YC.DONATION).amountInUSD)&&void 0!==e?e:0,n=this.checkoutConfiguration.preDonationUpsellSettings.amountsMap;switch(!0){case t<=1e3:return[null,t];case t<=2500:return n[Fe.UP_TO_25];case t<=3500:return n[Fe.UP_TO_35];case t<=5500:return n[Fe.UP_TO_55];case t<=1e4:return n[Fe.UP_TO_100];case t<=15e3:return n[Fe.UP_TO_150];case t<=2e4:return n[Fe.UP_TO_200];default:return[null,t]}}adjustEvery4WeeksAndMonthlyAmounts(e,t,n){const i=this.dataPointRegistry.getDataPoint(YC.DONATION),s=this.getUpsellCurrency(),a=i.getMinAmount(e);let r=null,o=null;return null!==n&&(r=this.suggestionsService.beautify(this.currencyService.convert(n,"USD",s),s),r<a&&(r=a)),null!==t&&(o=this.suggestionsService.beautify(this.currencyService.convert(t,"USD",s),s),(o<a||o===r)&&(o=null)),[o,r]}}class $D{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfiguration()&&this.checkOnBehalfOf()}checkConfiguration(){return this.checkoutConfiguration.campaign.config.showDouble}checkOnBehalfOf(){return!this.dataPointRegistry.getDataPoint(Nr.ON_BEHALF_OF).isOnBehalfOf}}class XD{constructor(e){this.dataPointRegistry=e}getDtdFrequency(){return this.dataPointRegistry.getDataPoint(YC.DONATION).frequency}getDtdCurrency(){return this.dataPointRegistry.getDataPoint(YC.DONATION).currency}getDtdInitialAmount(){return this.dataPointRegistry.getDataPoint(YC.DONATION).amount}}class QD extends rv{constructor(e,t,n){super(e),this.dataPointRegistry=e,this.doubleTheDonationAvailabilityService=t,this.doubleTheDonationParamsService=n}synchronize(){const e=this.dataPointRegistry.getDataPoint(YC.DTD);e.setComputedAvailability(this.doubleTheDonationAvailabilityService.isAvailable()),e.setComputedParams({dtdFrequency:this.doubleTheDonationParamsService.getDtdFrequency(),dtdCurrency:this.doubleTheDonationParamsService.getDtdCurrency(),dtdInitialAmount:this.doubleTheDonationParamsService.getDtdInitialAmount()})}}class ZD{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfigurationCampaign()&&this.checkConfigurationFeatureConfig()&&this.checkOnBehalfOf()}checkConfigurationCampaign(){return this.checkoutConfiguration.campaign.config.giftAid.show}checkConfigurationFeatureConfig(){return this.checkoutConfiguration.featureConfig.giftAid}checkOnBehalfOf(){return!this.dataPointRegistry.getDataPoint(Nr.ON_BEHALF_OF).isOnBehalfOf}}class JD extends rv{constructor(e,t){super(e),this.dataPointRegistry=e,this.giftAidAvailabilityService=t}synchronize(){this.giftAidDataPoint.setComputedAvailability(this.giftAidAvailabilityService.isAvailable())}get giftAidDataPoint(){return this.dataPointRegistry.getDataPoint(YC.GIFT_AID)}}class e_{constructor(e,t,n,i,s){this.checkoutConfiguration=e,this.currencyService=t,this.mailingAddressModule=n,this.paymentMethodAvailabilityManagerRepository=i,this.dataPointRegistry=s}isEnabled(){return this.mailingAddressModuleCheckoutScreenLogic.isEnabled(this.mailingAddressModuleCheckoutScreenAmount,this.mailingAddressModuleCheckoutScreenParams)}isRequired(){return this.mailingAddressModuleCheckoutScreenLogic.isRequired(this.mailingAddressModuleCheckoutScreenAmount,this.mailingAddressModuleCheckoutScreenParams)}get mailingAddressModuleCheckoutScreenLogic(){return this.mailingAddressModule.getCheckoutScreenLogic()}get mailingAddressModuleCheckoutScreenAmount(){const e=this.dataPointRegistry.getDataPoint(YC.DONATION),t=this.mailingAddressModule.getCurrencyLogic({widget:this.checkoutConfiguration.campaign.config});return this.currencyService.convert(e.amount||0,e.currency,t.currency)}get mailingAddressModuleCheckoutScreenParams(){const e=this.dataPointRegistry.getDataPoint(YC.PAYMENT_OPTIONS),t=this.dataPointRegistry.getDataPoint(YC.GIFT_AID);return{showMailing:this.checkoutConfiguration.campaign.config.showMailing,showMailingFromAmount:this.checkoutConfiguration.campaign.config.showMailingFromAmount,mailingRequired:this.checkoutConfiguration.campaign.config.mailingRequired,mailingRequiredFromAmount:this.checkoutConfiguration.campaign.config.mailingRequiredFromAmount,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,paymentMethod:e.clientPaymentMethod,paymentMethodCountry:e.paymentMethodCountry,isGiftAidAccepted:t.isAccepted}}}class t_ extends rv{constructor(e,t){super(e),this.dataPointRegistry=e,this.mailingAddressAvailabilityService=t}synchronize(){this.mailingAddressDataPoint.setComputedAvailability({isEnabled:this.mailingAddressAvailabilityService.isEnabled(),isRequired:this.mailingAddressAvailabilityService.isRequired()})}get mailingAddressDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.MAILING_ADDRESS)}}const n_=[u.tg.INDIA];class i_{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfiguration()&&this.checkDonation()&&this.checkDesignation()&&this.checkTribute()&&this.checkPaymentOptions()}checkConfiguration(){return this.checkoutConfiguration.campaign.config.showPostDonationUpsell}checkDonation(){return this.dataPointRegistry.getDataPoint(YC.DONATION).frequency===oe.ONCE}checkDesignation(){return this.dataPointRegistry.getDataPoint(Nr.DESIGNATION).allowRecurring}checkTribute(){return!this.dataPointRegistry.getDataPoint(Nr.TRIBUTE).tributeeName}checkPaymentOptions(){switch(this.dataPointRegistry.getDataPoint(YC.PAYMENT_OPTIONS).clientPaymentMethod){case eb._h.PAYPAL:return this.checkoutConfiguration.company.paypal.subscriptionsEnabled;case eb._h.VENMO:case eb._h.IDEAL:return!1;case eb._h.CARD:return this.checkPaymentMethodCountry();default:return!0}}checkPaymentMethodCountry(){const e=this.dataPointRegistry.getDataPoint(YC.PAYMENT_OPTIONS);return null===e.paymentMethodCountry||!n_.includes(e.paymentMethodCountry)}}n(2950);class s_{constructor(e,t){this.suggestionsService=e,this.dataPointRegistry=t,this.timestamp=Date.now()}getUpsellStartDate(){return function(e,t){const n=new Date(e),i=n.getDate();return n.setMonth(n.getMonth()+1),n.getDate()!==i&&n.setDate(0),n.toISOString()}(this.timestamp)}getUpsellFrequency(){return oe.MONTHLY}getUpsellCurrency(){return this.dataPointRegistry.getDataPoint(YC.DONATION).currency}getUpsellMinAmount(){const e=this.dataPointRegistry.getDataPoint(YC.DONATION);return e.getMinAmount(e.highFrequency)}getUpsellAmount(){var e,t;const n=this.dataPointRegistry.getDataPoint(YC.DONATION),i=null!==(e=n.amount)&&void 0!==e?e:0,s=null!==(t=n.amountInUSD)&&void 0!==t?t:0;return Math.max(this.suggestionsService.beautify(i*this.getUpsellSuggestedAmountPercent(s),this.getUpsellCurrency()),this.getUpsellMinAmount())}getUpsellSuggestedAmountPercent(e){switch(!0){case e>1e5:return.1;case e>=5e4:return.15;default:return.2}}}class a_ extends rv{constructor(e,t,n){super(e),this.dataPointRegistry=e,this.postDonationUpsellAvailabilityService=t,this.postDonationUpsellParamsService=n}synchronize(){this.postDonationUpsellDataPoint.setComputedAvailability(this.postDonationUpsellAvailabilityService.isAvailable()),this.postDonationUpsellDataPoint.setComputedParams({upsellStartDate:this.postDonationUpsellParamsService.getUpsellStartDate(),upsellFrequency:this.postDonationUpsellParamsService.getUpsellFrequency(),upsellCurrency:this.postDonationUpsellParamsService.getUpsellCurrency(),upsellMinAmount:this.postDonationUpsellParamsService.getUpsellMinAmount(),upsellAmount:this.postDonationUpsellParamsService.getUpsellAmount()})}get postDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(YC.POST_DONATION_UPSELL)}}class r_ extends lv{constructor(e,t,n,i,s,a,r,o){super(),this.designationStateService=e,this.preDonationUpsellStateService=t,this.doubleTheDonationStateService=n,this.giftAidStateService=i,this.mailingAddressStateService=s,this.postDonationUpsellStateService=a,this.paymentOptionsStateService=r,this.communicationConsentStateService=o}onInit(){this.syncDesignation(),this.syncPreDonationUpsell(),this.syncDoubleTheDonation(),this.syncGiftAid(),this.syncMailingAddress(),this.syncPostDonationUpsell(),this.syncPaymentOptions(),this.syncCommunicationConsent()}onDonationChange(){this.syncDesignation(),this.syncPreDonationUpsell(),this.syncDoubleTheDonation(),this.syncMailingAddress(),this.syncPostDonationUpsell(),this.syncPaymentOptions()}onDesignationChange(){this.syncPreDonationUpsell(),this.syncPostDonationUpsell()}onTributeChange(){this.syncPreDonationUpsell(),this.syncPostDonationUpsell()}onPrivacyChange(){this.syncDoubleTheDonation(),this.syncGiftAid(),this.syncCommunicationConsent()}onGiftAidChange(){this.syncMailingAddress()}onPaymentOptionsChange(){this.syncMailingAddress(),this.syncPostDonationUpsell()}onMailingAddressChange(){this.syncCommunicationConsent()}syncDesignation(){this.designationStateService.synchronize(),this.onDesignationChange()}syncPreDonationUpsell(){this.preDonationUpsellStateService.synchronize()}syncDoubleTheDonation(){this.doubleTheDonationStateService.synchronize()}syncGiftAid(){this.giftAidStateService.synchronize(),this.onGiftAidChange()}syncMailingAddress(){this.mailingAddressStateService.synchronize(),this.onMailingAddressChange()}syncPostDonationUpsell(){this.postDonationUpsellStateService.synchronize()}syncPaymentOptions(){this.paymentOptionsStateService.synchronize(),this.onPaymentOptionsChange()}syncCommunicationConsent(){this.communicationConsentStateService.synchronize()}}class o_ extends rv{constructor(e,t){super(e),this.dataPointRegistry=e,this.paymentOptionsParamsService=t}synchronize(){const e=this.paymentOptionsParamsService.getAvailablePaymentOptions();this.paymentOptionsDataPoint.setComputedAllowedPaymentMethods(e)}get paymentOptionsDataPoint(){return this.dataPointRegistry.getDataPoint(YC.PAYMENT_OPTIONS)}}function c_(e,t){return!(e===Ce.MODAL&&t)}class l_{constructor(e,t,n){this.checkoutConfiguration=e,this.paymentMethodAvailabilityManagerRepository=t,this.dataPointRegistry=n}getAvailablePaymentOptions(){return{[u._h.PAYPAL]:this.checkPaypal(),[u._h.VENMO]:this.checkVenmo(),[u._h.CARD]:this.checkCard(),[u._h.APPLE_PAY]:this.checkApplePay(),[u._h.GOOGLE_PAY]:this.checkGooglePay(),[u._h.AU_BECS]:this.checkAuBecs(),[u._h.US_BANK_ACCOUNT]:this.checkUSBankAccount(),[u._h.UK_BACS]:this.checkUkBacs(),[u._h.SEPA]:this.checkSepa(),[u._h.ACSS]:this.checkAcss(),[u._h.IDEAL]:this.checkIDEAL(),[u._h.CRYPTO]:{available:!0,visible:!0},[u._h.STOCK]:{available:!1,visible:!1}}}get donationDataPoint(){return this.dataPointRegistry.getDataPoint(YC.DONATION)}checkPaypal(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.PAYPAL,Et.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.PAYPAL)&&this.checkoutConfiguration.company.paymentOptions.paypal&&e.allowed("currency",this.donationDataPoint.currency)&&this.checkoutConfiguration.company.paypalCurrencies.includes(this.donationDataPoint.currency)&&c_(this.checkoutConfiguration.checkoutType,this.checkoutConfiguration.infrastructureParams.isInAppBrowser);return{available:t,visible:t&&e.allowed("repeat",this.donationDataPoint.frequency)&&(this.donationDataPoint.frequency===oe.ONCE||this.checkoutConfiguration.company.paypal.subscriptionsEnabled)}}checkVenmo(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.VENMO,Et.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.VENMO)&&this.checkoutConfiguration.infrastructureParams.livemode&&!this.checkoutConfiguration.infrastructureParams.showcase&&(this.checkoutConfiguration.user.address.countryCode===u.tg.UNITED_STATES||Qe())&&!!this.checkoutConfiguration.company.paypal.merchantId&&this.checkoutConfiguration.company.paymentOptions.venmo&&c_(this.checkoutConfiguration.checkoutType,this.checkoutConfiguration.infrastructureParams.isInAppBrowser);return{available:t,visible:t&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)}}checkCard(){const e=this.isPaymentMethodAvailableByConfiguration(u._h.CARD)&&this.checkoutConfiguration.company.paymentOptions.creditCard;return{available:e,visible:e}}checkApplePay(){const e=this.isPaymentMethodAvailableByConfiguration(u._h.APPLE_PAY)&&this.checkoutConfiguration.company.paymentOptions.applePay;return{available:e,visible:e}}checkGooglePay(){const e=this.isPaymentMethodAvailableByConfiguration(u._h.GOOGLE_PAY)&&this.checkoutConfiguration.company.paymentOptions.googlePay&&!this.checkoutConfiguration.infrastructureParams.isInAppBrowser&&window.isSecureContext;return{available:e,visible:e}}checkAuBecs(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.AU_BECS,Et.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.AU_BECS)&&this.checkoutConfiguration.company.paymentOptions.auBecsDebit&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkUSBankAccount(){const e=function(e,t,n){if("USD"!==n)return t;const i=function(e){switch(e){case cs.ONE_FOR_ISRAEL:return 150;case cs.FCA:return 200;default:return null}}(e);return null===i?t:t<9500&&t>=i?9500:t}(this.checkoutConfiguration.company.key,this.donationDataPoint.total,this.donationDataPoint.currency),t=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.US_BANK_ACCOUNT,Et.WIDGET),n=t.allowed("amount",e)&&wN(this.checkoutConfiguration.company.stripe.usBankAccount.verification)?LN(e):t.allowed("amount",e),i=this.isPaymentMethodAvailableByConfiguration(u._h.US_BANK_ACCOUNT)&&this.checkoutConfiguration.company.paymentOptions.usBankAccount&&t.allowed("repeat",this.donationDataPoint.frequency)&&t.allowed("currency",this.donationDataPoint.currency)&&n&&"USD"===this.checkoutConfiguration.company.stripeCurrencies.default;return{available:i,visible:i}}checkUkBacs(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.UK_BACS,Et.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.UK_BACS)&&this.checkoutConfiguration.company.paymentOptions.ukBacs&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkSepa(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.SEPA,Et.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.SEPA)&&this.checkoutConfiguration.company.paymentOptions.sepa&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkAcss(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.ACSS,Et.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.ACSS)&&this.checkoutConfiguration.company.paymentOptions.acss&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkIDEAL(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.IDEAL,Et.WIDGET),t=this.checkoutConfiguration.company.country===u.tg.NETHERLANDS||e.allowed("customerCountry",this.checkoutConfiguration.user.address.countryCode),n=this.isPaymentMethodAvailableByConfiguration(u._h.IDEAL)&&!this.checkoutConfiguration.infrastructureParams.isInAppBrowser&&this.checkoutConfiguration.company.paymentOptions.ideal&&(this.donationDataPoint.frequency===oe.ONCE||this.checkoutConfiguration.company.paymentOptions.sepa)&&(t||Qe())&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:n,visible:n}}isPaymentMethodAvailableByConfiguration(e){return!this.checkoutConfiguration.paymentOptionsSettings.disabledPaymentMethods.includes(e)}}class u_ extends rv{constructor(e,t){super(t),this.checkoutConfiguration=e,this.dataPointRegistry=t}synchronize(){this.checkoutConfiguration.infrastructureParams.showcase||(this.setComputedPhoneAndSMSConsentEnable(),this.setComputedPostalMailConsentEnable())}get communicationConsentDataPoint(){return this.dataPointRegistry.getDataPoint(Nr.COMMUNICATION_CONSENT)}setComputedPhoneAndSMSConsentEnable(){const e=this.dataPointRegistry.getDataPoint(Nr.PHONE_NUMBER).isFullPhoneNumberFilled();this.communicationConsentDataPoint.setComputedPhoneCallsConsentEnabled(e),this.communicationConsentDataPoint.setComputedSMSConsentEnabled(e)}setComputedPostalMailConsentEnable(){const e=this.dataPointRegistry.getDataPoint(Nr.MAILING_ADDRESS),t=e.checkShouldValidateOnServer()&&!e.isSkipped;this.communicationConsentDataPoint.setComputedPostalMailConsentEnabled(t)}}class d_ extends pv{get dataPoint(){return this.dataPointRegistry.getDataPoint(YC.DONATION)}setFrequency(e){this.perform((()=>{this.dataPoint.frequency=e,this.dataPoint.synchronizeHintsAmounts(),this.dataPoint.synchronizeFee()}))}setCurrency(e){this.perform((()=>{this.dataPoint.currency=e,this.dataPoint.synchronizeHintsAmounts(),this.dataPoint.synchronizeFee()}))}setAmount(e){this.perform((()=>{this.dataPoint.amount=e,this.dataPoint.resetHintsByDefault(),this.dataPoint.synchronizeFee()}))}setHint(e){this.perform((()=>{this.dataPoint.amount=e.amount,this.dataPoint.updateHintsByDefault(e),this.dataPoint.setDefaultAmounts(),this.dataPoint.synchronizeFee()}))}setFeeCovered(e,t){this.perform((()=>{this.dataPoint.isFeeCovered=e,void 0!==(null==t?void 0:t.isCustomFeeCoveredValue)&&(this.dataPoint.isCustomFeeCoveredValue=t.isCustomFeeCoveredValue),this.dataPoint.snapshotFeeCoveringSuggestion()}))}setDefaultAmountForFrequency(e,t){this.perform((()=>{this.dataPoint.changeDefaultAmountForFrequency(e,t),this.dataPoint.synchronizeFee()}))}setDonationEndDateActive(e){this.perform((()=>{this.dataPoint.setDonationEndDateActive(e)}))}setSuggestionsAndDisableAI(e,t,n){this.perform((()=>{this.dataPoint.setSuggestionsAndDisableAi(e,t,n)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onDonationChange()}}class h_ extends yv{get donationDataPoint(){return this.dataPointRegistry.getDataPoint(YC.DONATION)}triggerSynchronization(){this.checkoutStateSynchronizer.onDesignationChange()}}class m_ extends Tv{triggerSynchronization(){this.checkoutStateSynchronizer.onTributeChange()}}class p_ extends Av{triggerSynchronization(){this.checkoutStateSynchronizer.onPrivacyChange()}}class g_ extends mv{get paymentOptionsDataPoint(){return this.dataPointRegistry.getDataPoint(YC.PAYMENT_OPTIONS)}get ukBacsDataPoint(){return this.dataPointRegistry.getDataPoint(YC.UK_BACS)}get usBankAccountDataPoint(){return this.dataPointRegistry.getDataPoint(YC.US_BANK_ACCOUNT)}setPaymentMethod(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethod(e)}))}setPaymentOption(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentOption(e)}))}setPreSelectedPaymentOption(e){this.perform((()=>{this.paymentOptionsDataPoint.setPreSelectedPaymentOption(e)}))}setPaymentMethodCountry(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethodCountry(e)}))}setPaymentMethodChecked(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethodChecked(e)}))}setUkBacsSortCode(e){this.perform((()=>{this.ukBacsDataPoint.setSortCode(e)}))}setUkBacsAccountNumber(e){this.perform((()=>{this.ukBacsDataPoint.setAccountNumber(e)}))}setUkBacsAccountHolderName(e){this.perform((()=>{this.ukBacsDataPoint.setAccountHolderName(e)}))}setUkBacsTermsAccepted(e){this.perform((()=>{this.ukBacsDataPoint.setTermsAccepted(e)}))}setUsBankAccountRoutingNumber(e){this.perform((()=>{this.usBankAccountDataPoint.setRoutingNumber(e)}))}setUsBankAccountNumber(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountNumber(e)}))}setUsBankAccountHolderName(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountHolderName(e)}))}setUsBankAccountVerificationType(e){this.perform((()=>{this.usBankAccountDataPoint.setVerificationType(e)}))}setUsBankAccountFinancialInstitution(e){this.perform((()=>{this.usBankAccountDataPoint.setFinancialInstitution(e)}))}setUsBankAccountType(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountType(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onPaymentOptionsChange()}}class y_ extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(YC.GIFT_AID)}setShowed(){this.perform((()=>{this.dataPoint.setShowed()}))}accept(){this.perform((()=>{this.dataPoint.accept()}))}reject(){this.perform((()=>{this.dataPoint.reject()}))}triggerSynchronization(){this.checkoutStateSynchronizer.onGiftAidChange()}}class f_ extends vv{triggerSynchronization(){}}class S_ extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(YC.PRE_DONATION_UPSELL)}setShowed(){this.perform((()=>{this.dataPoint.setShowed()}))}confirm(e){this.perform((()=>{e?this.dataPoint.accept():this.dataPoint.reject()}))}setSuggestedAvailability(e){this.perform((()=>{this.dataPoint.setSuggestedAvailability(e)}))}resetSuggestedAvailability(){this.perform((()=>{this.dataPoint.resetSuggestedAvailability()}))}setSuggestedAmounts(e,t){this.perform((()=>{this.dataPoint.setSuggestedAmounts(e,t)}))}resetSuggestedAmounts(){this.perform((()=>{this.dataPoint.resetSuggestedAmounts()}))}triggerSynchronization(){}}class E_ extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(YC.POST_DONATION_UPSELL)}setUpsellCustomAmount(e){this.perform((()=>{this.dataPoint.setUpsellCustomAmount(e)}))}setShowed(){this.perform((()=>{this.dataPoint.setShowed()}))}accept(){this.perform((()=>{this.dataPoint.accept()}))}triggerSynchronization(){}}class A_ extends mv{get dataPoint(){return this.dataPointRegistry.getDataPoint(YC.DTD)}setEmployerName(e){this.perform((()=>{this.dataPoint.setEmployerName(e)}))}setEmployerData(e){this.perform((()=>{this.dataPoint.setEmployerData(e)}))}resetEmployerData(){this.perform((()=>{this.dataPoint.resetEmployerData()}))}setUpsellShowed(e){this.perform((()=>{this.dataPoint.setUpsellShowed(e)}))}setUpsellAccepted(){this.perform((()=>{this.dataPoint.setUpsellAccepted()}))}setSkipped(){this.perform((()=>{this.dataPoint.setSkipped()}))}resetState(){this.perform((()=>{this.dataPoint.resetState()}))}triggerSynchronization(){}}class C_ extends bv{triggerSynchronization(){}}class v_ extends Ov{triggerSynchronization(){}}class N_ extends Sv{triggerSynchronization(){this.checkoutStateSynchronizer.onMailingAddressChange()}}class b_ extends Dv{triggerSynchronization(){}}class P_ extends Rv{}function D_(e){if(!e.isSkipped&&e.employerName)return{name:e.employerName}}function __(e){if(!e.isSkipped&&e.employerId)return{id:e.employerId,company_name:e.employerName,minimumMatchedAmount:e.employerRawMinAmount,ratio:e.employerRatio}}const T_=(e,t,n)=>e&&t?n?u.Bg.OPTED_IN:u.Bg.OPTED_OUT:u.Bg.NOT_SUBMITTED,x_=e=>{const{type:t,customizedConsent:n,generalConsent:i,isCustomizedConsentShown:s,isGeneralConsentShown:a}=e;return t===u.kt.GENERAL?{type:u.Au.GENERAL,general:T_(a,!0,i.isAccepted),customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}}:t===u.kt.CUSTOMIZED?{type:u.Au.CUSTOMIZED,general:u.Bg.NOT_SUBMITTED,customized:{email:T_(s,n.email.isEnabled,n.email.isAccepted),phoneCalls:T_(s,n.phoneCalls.isEnabled,n.phoneCalls.isAccepted),postalMail:T_(s,n.postalMail.isEnabled,n.postalMail.isAccepted),sms:T_(s,n.sms.isEnabled,n.sms.isAccepted),socialMedia:T_(s,n.socialMedia.isEnabled,n.socialMedia.isAccepted)}}:{type:u.Au.GENERAL,general:u.Bg.NOT_SUBMITTED,customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}}};function O_(e){return{defaultAmount:e.defaultAmount||0,frequencyAmountOptions:e.amountOptions,amountOptions:e.allAmountOptions,frequency:e.frequency,currency:e.currency,defaultAmounts:e.defaultAmounts}}class k_ extends Lv{updateSession(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i;if(this.checkoutConfiguration.infrastructureParams.showcase)return sn.success({});const s=this.donationDataPoint.toObject(),a=function(e,t){if((null==t?void 0:t.canUseAmountDefaults)&&!e.amount)return e.defaultAmount?{amount:e.defaultAmount,total:e.defaultTotal}:{amount:e.minAmount,total:e.minTotal};const n=e.toObject();return{amount:n.amount,total:n.total}}(this.donationDataPoint,e),r=this.commentDataPoint.toObject(),o=this.tributeDataPoint.toObject(),c=this.postDonationUpsellDataPoint.toObject(),l=this.questionsDataPoint.toObject(),u=this.donorNameDataPoint.toObject(),d=this.donorEmailDataPoint.toObject(),h=this.getDataPoint(YC.PRE_DONATION_UPSELL),m=this.getDataPoint(Nr.DONATE_ANONYMOUS).toObject(),p=this.getDataPoint(Nr.PHONE_NUMBER).toObject(),g=this.getDataPoint(Nr.TERMS_AND_CONDITIONS).toObject(),y=this.getDataPoint(Nr.ON_BEHALF_OF).toObject(),f=this.getDataPoint(Nr.CUSTOMER_TITLE).toObject(),S=this.getDataPoint(Nr.DESIGNATION).toObject(),E=this.getDataPoint(Nr.COMMUNICATION_CONSENT).toObject();return this.sessionAPI.update({donationType:Ae.MONEY,comment:r.isActive?r.comment:"",tribute:o.inHonorOf&&o.isActive?{labelType:o.labelType,type:o.type,inHonorOf:o.inHonorOf}:null,questions:l.questions,customer:{firstName:u.firstName,lastName:u.lastName,title:f.title,email:d.email,phone:p.phone,onBehalfOf:y.companyName,anonymousChecked:m.anonymousChecked,termsChecked:g.isAccepted,consent:x_(E)},donation:{amount:a.amount,total:a.total,publicFee:s.publicFee,currency:s.currency,frequency:s.frequency,goalKey:S.goalKey,goalName:S.goalName,giftAid:{shown:this.giftAidDataPoint.isShowed,claimed:this.giftAidDataPoint.isAccepted},upsell:{currency:h.upsellShowedFromCurrency,fromAmount:null!==(t=h.upsellShowedFromAmount)&&void 0!==t?t:0,showed:h.isShowed,used:h.isAccepted},employerUpsell:(A=this.dtdDataPoint,{currency:A.snapshot.dtdCurrency,fromAmount:A.snapshot.dtdInitialTotal,matchingFromAmount:A.snapshot.employerMinAmount,matchingPromisedAmount:A.snapshot.employerUpsellTotalDoubled,matchingRatio:A.snapshot.employerRatio,minimumMatchedAmount:A.snapshot.employerMinAmount,proposedAmount:A.snapshot.employerUpsellTotal,proposedAmountBeforeFeeCovered:A.snapshot.employerRawMinAmount,visible:!!A.employerMinAmount,showed:A.isUpsellShowed,used:A.isUpsellAccepted}),feeCoveringSuggestion:s.feeCoveringSuggestion,hintsVariantName:s.hintsVariantName,hintDescription:(null===(n=s.currentHint)||void 0===n?void 0:n.description)||"",_suggestedAmountHint:(null===(i=s.currentHint)||void 0===i?void 0:i.id)||null,limit:{maxDate:s.maxDate}},employer:D_(this.dtdDataPoint),employerDTD:__(this.dtdDataPoint),postDonationUpsell:{period:c.upsellFrequency,firstChargeAt:c.upsellStartDate,fromAmount:a.amount,showed:c.isShowed,currency:c.upsellCurrency,recurringAmount:c.upsellAmount,recurringTip:c.upsellTip,recurringTotal:c.upsellTotal,used:c.isAccepted},checkoutDefaults:O_(this.donationDataPoint)});var A}))}updateSessionWidgetDefaults(){const e=this.donationDataPoint.toObject();this.sessionAPI.updateSessionWidgetDefaults(e.amount,O_(this.donationDataPoint))}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get giftAidDataPoint(){return this.checkoutState.giftAid.dataPoint}get dtdDataPoint(){return this.checkoutState.doubleTheDonation.dataPoint}get postDonationUpsellDataPoint(){return this.checkoutState.postDonationUpsell.dataPoint}get questionsDataPoint(){return this.checkoutState.questions.dataPoint}}class I_ extends Error{constructor(e){super(`${e} payment flow is not initialized`)}}class w_{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.checkoutConfiguration=e,this.checkoutState=t,this.paymentFlowManager=n,this.dataPointRegistry=i,this.sessionAPI=s,this.sessionService=a,this.currencyService=r,this.intl=o,this.paymentMethods=c,this.iframeWindow=l,this.stripeLoadingPromise=u,this.applePayStripeLoadingPromise=d,this.params=h,this._stripeElementsPromise=null,this.googlePayChecked=!1,this.applePayChecked=!1,this.initializePaymentMethodsPromise=null}initiateCreditCard(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.CARD);return yield t.initiateFlow(e),{stripeElements:yield this.stripeElementsPromise}}))}startCreditCardFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.CARD),t=yield e.startFlow();return sn.isSuccess(t)}))}initiatePaypal(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.PAYPAL);return yield this.sessionService.updateSession(),t.initiateFlow(e)}))}preloadVenmoScript(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.isLighthouse)return;const e=yield this.resolvePaymentFlow(u._h.VENMO);yield e.loadPayPalScriptIfNeeded()}))}preloadPayPalScript(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.isLighthouse)return;const e=yield this.resolvePaymentFlow(u._h.PAYPAL);yield e.loadPayPalScriptIfNeeded()}))}closePaypalButton(){if(this.isShowcase)return;const e=this.paymentFlowManager.getPaymentFlow(u._h.PAYPAL);if(!e)throw new I_(u._h.PAYPAL);e.closePaypal()}togglePaypalActions(e){const t=this.paymentFlowManager.getPaymentFlow(u._h.PAYPAL);t&&t.togglePaypalActions(e)}initiateGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.GOOGLE_PAY);yield e.initiateFlow(),yield this.checkGooglePay()}))}startGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield this.resolvePaymentFlow(u._h.GOOGLE_PAY)).startFlow()}))}initiateApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.checkApplePay()}))}startApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield this.resolvePaymentFlow(u._h.APPLE_PAY)).startFlow()}))}initiateUSBankAccount(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.US_BANK_ACCOUNT);yield t.initiateFlow(e)}))}startUSBankAccount(){return(0,l.sH)(this,void 0,void 0,(function*(){return yield this.sessionService.updateSession(),(yield this.resolvePaymentFlow(u._h.US_BANK_ACCOUNT)).startFlow()}))}initiateACSS(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.ACSS);yield t.initiateFlow(e)}))}startACSS(){return(0,l.sH)(this,void 0,void 0,(function*(){return yield this.sessionService.updateSession(),(yield this.resolvePaymentFlow(u._h.ACSS)).startFlow()}))}initiateSepa(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield this.resolvePaymentFlow(u._h.SEPA);return yield n.initiateFlow(e,t),{stripeElements:yield this.stripeElementsPromise}}))}startSepaFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.SEPA),t=yield e.startFlow();return sn.isSuccess(t)}))}initiateVenmo(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.VENMO);yield t.initiateFlow(e),yield this.checkVenmo()}))}closeVenmoButton(){const e=this.paymentFlowManager.getPaymentFlow(u._h.VENMO);if(!e)throw new I_(u._h.VENMO);e.closeButton()}toggleVenmoActions(e){const t=this.paymentFlowManager.getPaymentFlow(u._h.VENMO);t&&t.toggleVenmoActions(e)}initiateIDEAL(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.IDEAL);yield e.initiateFlow()}))}openIDEALConfirmationWindow(e){const t=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);if(!t)throw new I_(u._h.IDEAL);return t.openConfirmationWindow(e)}isIDEALPaid(){const e=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);if(!e)throw new I_(u._h.IDEAL);return e.isPaid()}isIDEALPaymentStarted(){const e=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);return!!e&&e.isPaymentStarted()}focusIDEALConfirmationWindow(){const e=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);if(!e)throw new I_(u._h.IDEAL);e.focusConfirmationWindow()}initiateAuBECS(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield this.resolvePaymentFlow(u._h.AU_BECS);return yield n.initiateFlow(e,t),{stripeElements:yield this.stripeElementsPromise}}))}startAuBECSFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.AU_BECS),t=yield e.startFlow();return sn.isSuccess(t)}))}ensurePaymentMethodsInitialized(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.isShowcase){if(this.initializePaymentMethodsPromise)return this.initializePaymentMethodsPromise;this.initializePaymentMethodsPromise=this.initiatePaymentMethods(this.getDataPoint(YC.PAYMENT_OPTIONS)),yield this.initializePaymentMethodsPromise,this.initializePaymentMethodsPromise=null}}))}resolvePaymentFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n;if(!e)throw new Error("Client payment method is not specified");const i=this.checkoutConfiguration.company,s=this.checkoutConfiguration.user,a=this.getDataPoint(YC.PAYMENT_OPTIONS),r=this.getDataPoint(Nr.MAILING_ADDRESS);switch(e){case u._h.CARD:return this.paymentFlowManager.resolveCard({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,failureHandler:()=>{this.setPaymentError(u._h.CARD,!0)},setPaymentMethodCountry:e=>this.setPaymentMethodCountry(e),donation:{getFrequency:()=>this.getDonationFrequency(),getCurrency:()=>this.getDonationCurrency()}});case u._h.PAYPAL:return this.paymentFlowManager.resolvePaypal({sessionAPI:this.sessionAPI,locale:null===(t=this.intl)||void 0===t?void 0:t.locale,iframeWindow:this.iframeWindow,paypalClientId:this.paymentMethods.paypalClientId,paypalMerchantId:i.paypal.merchantId,paypalCurrencies:[...i.paypalCurrencies],subscriptionsEnabled:i.paypal.subscriptionsEnabled,donation:{getCurrency:()=>this.getDonationCurrency(),getDefaultCurrency:()=>this.getDonationDefaultCurrency()},updateSession:()=>this.sessionService.updateSession(),setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFirstNameIfEmpty:e=>this.setDonorFirstNameIfEmpty(e),setDonorLastNameIfEmpty:e=>this.setDonorLastNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e),setPhoneNumberIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e),paymentFailureHandler:()=>{this.setPaymentError(u._h.PAYPAL,!0)}});case u._h.GOOGLE_PAY:return this.paymentFlowManager.resolveGooglePay({sessionAPI:this.sessionAPI,livemode:this.livemode,stripePublicKey:this.paymentMethods.stripePublicKey,countryCode:s.address.countryCode,googlePayInfo:this.paymentMethods.googlePayInfo,stripeAccount:i.stripeAccount,companyName:i.name,env:this.checkoutConfiguration.infrastructureParams.env,stripe:yield this.stripeLoadingPromise(),currencyService:this.currencyService,donation:{getFrequency:()=>this.getDonationFrequency(),getCurrency:()=>this.getDonationCurrency(),getTotal:()=>this.getDonationTotal()},setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFullNameIfEmpty:e=>this.setDonorFullNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e)});case u._h.APPLE_PAY:return this.paymentFlowManager.resolveApplePay({sessionAPI:this.sessionAPI,companyName:i.name,applePayStripeLoadingPromise:this.applePayStripeLoadingPromise,donation:{getTotal:()=>this.getDonationTotal(),getCurrency:()=>this.getDonationCurrency()},setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFullNameIfEmpty:e=>this.setDonorFullNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e)});case u._h.UK_BACS:return this.paymentFlowManager.resolveUkBacs({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),donorEmail:{getDto:()=>this.getDonorEmailDto()},mailingAddressDataPoint:r,ukBacs:{getDto:()=>this.getUkBacsDto()},mailingAddressFailureHandler:()=>{this.setMailingAddressError(!0)},ukBacsFailureHandler:()=>{this.setPaymentError(u._h.UK_BACS,!0)}});case u._h.ACSS:return this.paymentFlowManager.resolveACSS({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),setPaymentMethod:e=>this.setPaymentMethod(e)});case u._h.AU_BECS:return this.paymentFlowManager.resolveAuBECS({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,donorName:{getDto:()=>this.getDonorNameDto()},donorEmail:{getDto:()=>this.getDonorEmailDto()}});case u._h.SEPA:return this.paymentFlowManager.resolveSepa({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,donorName:{getDto:()=>this.getDonorNameDto()},donorEmail:{getDto:()=>this.getDonorEmailDto()},mailingAddressDataPoint:r,paymentOptionsDataPoint:a,checkoutConfiguration:this.checkoutConfiguration,setPaymentMethodCountry:e=>this.setPaymentMethodCountry(e),mailingAddressFailureHandler:()=>{this.setMailingAddressError(!0)}});case u._h.IDEAL:return this.paymentFlowManager.resolveIDEAL({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),env:this.checkoutConfiguration.infrastructureParams.env,stripeElements:yield this.stripeElementsPromise,donorName:{getDto:()=>this.getDonorNameDto()},donorEmail:{getDto:()=>this.getDonorEmailDto()}});case u._h.VENMO:return this.paymentFlowManager.resolveVenmo({sessionAPI:this.sessionAPI,livemode:this.livemode,showcase:this.isShowcase,locale:null===(n=this.intl)||void 0===n?void 0:n.locale,iframeWindow:this.iframeWindow,paypalClientId:this.paymentMethods.paypalClientId,paypalMerchantId:i.paypal.merchantId,updateSession:()=>this.sessionService.updateSession(),setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFirstNameIfEmpty:e=>this.setDonorFirstNameIfEmpty(e),setDonorLastNameIfEmpty:e=>this.setDonorLastNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e),setPhoneNumberIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e)});case u._h.US_BANK_ACCOUNT:return this.paymentFlowManager.resolveUSBankAccount({stripe:yield this.stripeLoadingPromise(),usBankAccount:{getDto:()=>this.getUsBankAccountDto(),getUsBankAccountVerificationSetup:()=>this.getUsBankAccountVerificationSetup()},sessionAPI:this.sessionAPI,checkoutConfiguration:this.checkoutConfiguration,donation:{getTotal:()=>this.getDonationTotal(),getCurrency:()=>this.getDonationCurrency()},paymentFailureHandler:()=>{this.setPaymentError(u._h.US_BANK_ACCOUNT,!0)},setFinancialInstitution:e=>this.setUsBankAccountFinancialInstitution(e),setVerificationType:e=>this.setUsBankAccountVerificationType(e),setAccountNumber:e=>this.setUsBankAccountNumber(e),setRoutingNumber:e=>this.setUsBankAccountRoutingNumber(e),setAccountType:e=>this.setUsBankAccountType(e)});default:throw new Error(`Payment flow for ${e} is not implemented`)}}))}get livemode(){return this.checkoutConfiguration.infrastructureParams.livemode}get isShowcase(){return this.checkoutConfiguration.infrastructureParams.showcase}get stripeElementsPromise(){return this._stripeElementsPromise||(this._stripeElementsPromise=this.getStripeElements()),this._stripeElementsPromise}initiatePaymentMethods(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=[];e.allowedPaymentMethods.googlePay.available&&t.push(this.initiateGooglePay()),e.allowedPaymentMethods.applePay.available&&t.push(this.initiateApplePay()),e.allowedPaymentMethods.paypal.available&&t.push(this.preloadPayPalScript()),e.allowedPaymentMethods.venmo.available&&t.push(this.preloadVenmoScript()),yield Promise.all(t)}))}getStripeElements(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.stripeLoadingPromise();if(!e)throw new Error("Stripe is not provided");return e.elements(this.params.stripe.elementsOptions)}))}checkGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.googlePayChecked)return;const e=yield this.resolvePaymentFlow(u._h.GOOGLE_PAY);(yield e.checkAvailability())&&this.setPaymentMethodChecked(u._h.GOOGLE_PAY),this.googlePayChecked=!0}))}checkApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.applePayChecked)return;const e=yield this.resolvePaymentFlow(u._h.APPLE_PAY);(yield e.checkAvailability())&&this.setPaymentMethodChecked(u._h.APPLE_PAY),this.applePayChecked=!0}))}checkVenmo(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=(yield this.resolvePaymentFlow(u._h.VENMO)).checkAvailability();return e&&this.setPaymentMethodChecked(u._h.VENMO),e}))}setPaymentError(e,t){return this.checkoutState.setPaymentError(e,t)}setPaymentMethod(e){this.checkoutState.paymentOptions.setPaymentMethod(e)}setPaymentMethodCountry(e){this.checkoutState.paymentOptions.setPaymentMethodCountry(e)}setPaymentMethodChecked(e){this.checkoutState.paymentOptions.setPaymentMethodChecked(e)}setUsBankAccountFinancialInstitution(e){this.checkoutState.paymentOptions.setUsBankAccountFinancialInstitution(e)}setUsBankAccountVerificationType(e){this.checkoutState.paymentOptions.setUsBankAccountVerificationType(e)}setUsBankAccountNumber(e){this.checkoutState.paymentOptions.setUsBankAccountNumber(e)}setUsBankAccountRoutingNumber(e){this.checkoutState.paymentOptions.setUsBankAccountRoutingNumber(e)}setUsBankAccountType(e){this.checkoutState.paymentOptions.setUsBankAccountType(e)}setMailingAddressError(e){this.checkoutState.hasMailingAddressError=e}getDataPoint(e){return this.dataPointRegistry.getDataPoint(e)}setDonorFirstNameIfEmpty(e){this.checkoutState.privacy.setDonorFirstNameIfEmpty(e)}setDonorLastNameIfEmpty(e){this.checkoutState.privacy.setDonorLastNameIfEmpty(e)}setDonorFullNameIfEmpty(e){this.checkoutState.privacy.setDonorFullNameIfEmpty(e)}setDonorEmailIfEmpty(e){this.checkoutState.privacy.setDonorEmailIfEmpty(e)}setPhoneCountryCodeIfEmptyPhone(e){this.checkoutState.privacy.setPhoneCountryCodeIfEmptyPhone(e)}setPhoneNumberIfEmpty(e){this.checkoutState.privacy.setPhoneNumberIfEmpty(e)}setCountryCodeIfEmptyAddress(e){this.checkoutState.mailingAddress.setCountryCodeIfEmptyAddress(e)}setCityIfEmpty(e){this.checkoutState.mailingAddress.setCityIfEmpty(e)}setLine1IfEmpty(e){this.checkoutState.mailingAddress.setLine1IfEmpty(e)}setLine2IfEmpty(e){this.checkoutState.mailingAddress.setLine2IfEmpty(e)}setRegionIfEmpty(e){this.checkoutState.mailingAddress.setRegionIfEmpty(e)}setPostalIfEmpty(e){this.checkoutState.mailingAddress.setPostalIfEmpty(e)}getDonationFrequency(){return this.checkoutState.donation.dataPoint.frequency}getDonationCurrency(){return this.checkoutState.donation.dataPoint.currency}getDonationDefaultCurrency(){return this.checkoutState.donation.dataPoint.defaultCurrency}getDonationTotal(){return this.checkoutState.donation.dataPoint.total}getDonorEmailDto(){return this.checkoutState.privacy.donorEmailDataPoint.toObject()}getDonorNameDto(){return this.checkoutState.privacy.donorNameDataPoint.toObject()}getUkBacsDto(){return this.checkoutState.paymentOptions.ukBacsDataPoint.toObject()}getUsBankAccountDto(){return this.checkoutState.paymentOptions.usBankAccountDataPoint.toObject()}getUsBankAccountVerificationSetup(){return this.checkoutState.paymentOptions.usBankAccountDataPoint.usBankAccountVerificationSetup}}class R_{constructor(e){this.sessionAPI=e}update(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.sessionAPI.post("postDonationUpsell",{postDonationUpsell:e},{rejectsOnInvalid:!0});return!!sn.isSuccess(t)}))}}class M_{constructor(e){this.sessionApi=e,this._fetchDecision=e=>Promise.race([this.requestCacheService.getCachedOrFetchValue(e),new Promise((e=>setTimeout((()=>{e(this.getResult(pD,!1))}),1500)))]),this.requestCacheService=new mD(pD,e.getFeeCovering.bind(e),this.shouldCacheResponse,this.getCacheKey,this.getResult),this._debouncedGetDecision=DD(this._fetchDecision,300)}fetchDecision(e){return this._fetchDecision(e)}debouncedFetchDecision(e){return this._debouncedGetDecision(e)}getCacheKey(e){return JSON.stringify(e)}shouldCacheResponse(e,t){return!t.isFallback}getResult(e,t){return{response:e,fromCache:t}}}class L_ extends _b{}const U_=cn.DONATE,F_=[...kb,cn.DONATE,cn.POST_DONATION_UPSELL],j_=[cn.PAYMENT_OPTIONS,cn.AU_BECS,cn.SEPA],B_=[...Ib,cn.DONATE,Ar.REMIND_ME],H_=[...Rb,cn.DONATE],q_=[...Ub,cn.DONATE],G_=[cn.DONATE,Ar.THANK_YOU,Ar.BLOCKED],V_=[cn.UPSELL,cn.PAYMENT_OPTIONS,Ar.COMMENT],K_=[...xb,Ar.REMIND_ME,cn.DONATE],Y_=[...Ob,cn.DONATE],z_=[Ar.THANK_YOU,Ar.REMIND_ME],W_=[...wb],$_=[...Mb,Ar.REMIND_ME],X_=[...Lb,Ar.REMIND_ME],Q_={[oe.ANNUAL]:"upsellScreen.button.donateAnnual",[oe.MONTHLY]:"upsellScreen.button.donateMonthly",[oe.EVERY_4_WEEKS]:"upsellScreen.button.donate4Weeks"},Z_={[oe.ANNUAL]:"upsellScreen.button.donateAnnual",[oe.MONTHLY]:"upsellScreen.button.donateMonthly",[oe.EVERY_4_WEEKS]:"upsellScreen.button.donate4Weeks"},J_={[oe.ANNUAL]:"upsellScreen.titleAnnual",[oe.MONTHLY]:"upsellScreen.title",[oe.EVERY_4_WEEKS]:"upsellScreen.titleEvery4Weeks"},eT={[oe.ANNUAL]:"upsellScreen.questionAnnual",[oe.MONTHLY]:"upsellScreen.question",[oe.EVERY_4_WEEKS]:"upsellScreen.questionEvery4Weeks"},tT={[oe.ANNUAL]:"upsellScreen.questionAnnual",[oe.MONTHLY]:"upsellScreen.questionShort",[oe.EVERY_4_WEEKS]:"upsellScreen.questionShortEvery4Weeks"},nT={[oe.ANNUAL]:"upsellScreen.descriptionAnnual",[oe.MONTHLY]:"upsellScreen.description",[oe.EVERY_4_WEEKS]:"upsellScreen.descriptionEvery4Weeks"};class iT{constructor(e,t,n){this.checkoutState=e,this.intl=t,this.preDonationUpsellDataPoint=n}getBeforeEnterViewState(){var e,t;const n=this.getViewTexts();return{currency:this.preDonationUpsellDataPoint.upsellCurrency,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency,lowAmount:this.preDonationUpsellDataPoint.upsellLowAmount,lowAmountInUSD:this.preDonationUpsellDataPoint.upsellLowAmountInUsd,highAmount:this.preDonationUpsellDataPoint.upsellHighAmount,highAmountInUSD:this.preDonationUpsellDataPoint.upsellHighAmountInUsd,isAnnualTribute:this.preDonationUpsellDataPoint.upsellFrequency===oe.ANNUAL,highButtonText:n.highButtonText,lowButtonText:n.lowButtonText,screenTitle:n.screenTitle,questionText:n.questionText,questionShortText:n.questionShortText,descriptionText:n.descriptionText,upsell:{fromAmount:null!==(e=this.preDonationUpsellDataPoint.upsellInitialAmount)&&void 0!==e?e:0,fromAmountInUSD:null!==(t=this.preDonationUpsellDataPoint.upsellInitialAmountInUsd)&&void 0!==t?t:0},processingState:{lowMonthly:Pr.IDLE,highMonthly:Pr.IDLE}}}confirmUpsell(e){e?this.acceptUpsell(e):this.rejectUpsell()}acceptUpsell(e){this.checkoutState.preDonationUpsell.confirm(!0),this.setDonationParams({frequency:this.preDonationUpsellDataPoint.upsellFrequency,amount:e===Ap.HIGH?this.preDonationUpsellDataPoint.upsellHighAmount:this.preDonationUpsellDataPoint.upsellLowAmount})}rejectUpsell(){this.checkoutState.preDonationUpsell.confirm(!1),this.setDonationParams({frequency:oe.ONCE,amount:this.preDonationUpsellDataPoint.upsellInitialAmount})}setDonationParams(e){this.checkoutState.donation.dataPoint.frequency===e.frequency&&this.checkoutState.donation.dataPoint.amount===e.amount||(this.checkoutState.donation.setFrequency(e.frequency),this.checkoutState.donation.setAmount(e.amount))}getViewTexts(){var e,t,n;const i=this.preDonationUpsellDataPoint.upsellFrequency,s=this.preDonationUpsellDataPoint.upsellCurrency,a=null!==(e=this.preDonationUpsellDataPoint.upsellHighAmount)&&void 0!==e?e:0,r=null!==(t=this.preDonationUpsellDataPoint.upsellLowAmount)&&void 0!==t?t:0,o=null!==(n=this.preDonationUpsellDataPoint.upsellInitialAmount)&&void 0!==n?n:0;return{highButtonText:this.intl.translate(Q_[i],{amount:this.intl.formatCurrency(a,{currency:s,display:"floatcents"})}),lowButtonText:this.intl.translate(Z_[i],{amount:this.intl.formatCurrency(r,{currency:s,display:"floatcents"})}),screenTitle:this.intl.translate(J_[i]),questionText:this.intl.translate(eT[i],{amount:this.intl.formatCurrency(o,{currency:s,display:"floatcents"})}),questionShortText:this.intl.translate(tT[i],{amount:this.intl.formatCurrency(o,{currency:s,display:"floatcents"})}),descriptionText:this.intl.translate(nT[i])}}}class sT extends cP{constructor(e){super(e),this.paymentService=e.paymentService}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.setProcessingState(Pr.PENDING),this.produceViewState((e=>{e.payErrorMessage=""})),!(yield this.paymentService.startAuBECSFlow()))return this.produceViewState((e=>{e.shakeKey+=1,e.processingState=Pr.IDLE})),this.pending=!1,!1;const e=yield this.checkoutService.hold();return sn.isFailure(e)?(this.pending=!1,yield this.showError(),!1):this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}initiateAuBECS(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentService.initiateAuBECS(e,t)}))}getInitialViewState(){return{locked:!1,accountNumber:null,bsbNumber:null,shakeKey:0,accountHolderName:"",termsChecked:!0,errors:{},processingState:Pr.IDLE,isPaymentScreen:!1,formattedAmount:"",frequency:oe.ONCE}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isFailure(e)?e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1):(this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Pr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}const aT=[u.ax.EMAIL,u.ax.SMS,u.ax.PHONE_CALLS,u.ax.POSTAL_MAIL,u.ax.SOCIAL_MEDIA];class rT extends cP{constructor(e,t){super(t),this.communicationConsentDataPoint=e}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.channels=this.prepareChannels()}))}))}changeChannel(e,t){this.checkoutState.communicationConsent.setCustomizedChannelState(e,t),this.produceViewState((e=>{e.channels=this.prepareChannels()}))}resetChannels(){this.checkoutState.communicationConsent.resetCustomizedConsent()}setCustomizedConsentShown(){this.checkoutState.communicationConsent.setCustomizedConsentShown()}beforeLeave(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),!0}))}getInitialViewState(){return{locked:!1,channels:[]}}prepareChannels(){return aT.filter((e=>this.communicationConsentDataPoint.customizedConsent[e].isEnabled)).map((e=>({type:e,isAccepted:this.communicationConsentDataPoint.customizedConsent[e].isAccepted})))}}class oT extends _i{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(Ln.TEST)}canBeStarted(e){return!!e.canShowUpsellScreen&&!!oT.ALLOWED_TARGET_FREQUENCIES.includes(e.targetFrequency)}}oT.ALLOWED_TARGET_FREQUENCIES=[oe.MONTHLY,oe.EVERY_4_WEEKS];class cT extends _i{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(Mn.TEST)}canBeStarted(e){return!!e.canShowUpsellScreen&&!!cT.ALLOWED_TARGET_FREQUENCIES.includes(e.targetFrequency)}}cT.ALLOWED_TARGET_FREQUENCIES=[oe.MONTHLY,oe.EVERY_4_WEEKS];class lT extends cP{constructor(e,t,n){super(e),this.upsellAggregate=t,this.adaptiveFeeCoveringService=n,this.designationDataPoint=e.designationDataPoint,this.preDonationUpsellDataPoint=e.preDonationUpsellDataPoint,this.adaptivePreDonationUpsellSuggestionsService=e.adaptivePreDonationUpsellSuggestionsService,this.experiments.register(Sn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,cT),this.experiments.register(Sn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,oT)}get upsellCurtainExperiment(){return this.experiments.get(Sn.UPSELL_CURTAIN_EXPERIMENT)}get donateButtonLabel(){return function(e,t){switch(t){case oe.DAILY:return e.translate("donateForm.donateButton.daily");case oe.WEEKLY:return e.translate("donateForm.donateButton.weekly");case oe.BIWEEKLY:return e.translate("donateForm.donateButton.biweekly");case oe.EVERY_4_WEEKS:return e.translate("donateForm.donateButton.every4weeks");case oe.MONTHLY:return e.translate("donateForm.donateButton.monthly");case oe.BIMONTHLY:return e.translate("donateForm.donateButton.bimonthly");case oe.QUARTERLY:return e.translate("donateForm.donateButton.quarterly");case oe.SEMIANNUAL:return e.translate("donateForm.donateButton.semiannual");case oe.ANNUAL:return e.translate("donateForm.donateButton.annual");default:return e.translate("donateForm.donateButton.once")}}(this.intl,this.donationDataPoint.frequency)}get shouldShowAverageDonationHint(){return(this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.viewState.donation.frequency===oe.ONCE)&&!1}get shouldShowAverageDonationHintTooltip(){const e=this.viewState.tribute.sharingEnabled&&this.viewState.tribute.isActive&&this.viewState.isTributeInputFocused;return this.shouldShowAverageDonationHint&&!this.viewState.errors.amount.min&&!e&&!this.viewState.forceHideAverageDonationHintTooltip}get amountAverageDonationHint(){return this.currencyService.convert(1e4,"USD",this.viewState.donation.currency)}get isRateMatchingCountdownEnabled(){if(!this.viewState.rateMatching.show)return!1;if(!this.viewState.rateMatching.endDate)return!1;if(Qe()&&!this.viewState.rateMatching.endDateEnabled)return!1;const e=hN(this.viewState.rateMatching.endDate),t=new Date,n=new Date(t);return n.setDate(t.getDate()+14),e>t&&e<=n}get rateMatchingTotalAmountLimitInDonationCurrency(){return this.viewState.rateMatching.totalAmountLimit?this.currencyService.convert(this.viewState.rateMatching.totalAmountLimit,this.checkoutService.campaignConfig.defaultCurrency,this.viewState.donation.currency):null}get matchingImpact(){var e;if(!this.donationDataPoint.amount)return null;if(this.rateMatchingTotalAmountLimitInDonationCurrency&&this.isDonationOverMaxLimit){const t=null!==(e=this.rateMatching.remains)&&void 0!==e?e:this.rateMatchingTotalAmountLimitInDonationCurrency;return this.donationDataPoint.amount+t}return this.calculateMatchingImpactWithoutLimit()}get isDonationOverMaxLimit(){var e;if(!this.donationDataPoint.amount)return!1;if(!this.rateMatchingTotalAmountLimitInDonationCurrency)return!1;const t=this.calculateMatchingImpactWithoutLimit();if(!t)return!1;const n=null!==(e=this.rateMatching.remains)&&void 0!==e?e:this.rateMatchingTotalAmountLimitInDonationCurrency;return t-this.donationDataPoint.amount>n}get isDonationMatched(){return!!this.donationDataPoint.amount&&(!this.viewState.rateMatching.minAmount||this.donationDataPoint.amount>=this.minRateMatchingAmount)}get isLocked(){return!!this.getScreenData().locked||this.upsellCurtainExperiment.isTestGroup&&this.viewState.upsellCurtainShown}get minRateMatchingAmount(){const e=this.currencyService.convert(this.viewState.rateMatching.minAmount||0,this.checkoutService.campaignConfig.defaultCurrency,this.viewState.donation.currency);return this.currencyService.ceil(e,this.viewState.donation.currency)}get rateMatchingUpsellAmountToAdd(){return this.viewState.rateMatching.minAmount&&this.donationDataPoint.amount?this.donationDataPoint.amount>this.minRateMatchingAmount?null:this.minRateMatchingAmount-this.donationDataPoint.amount:null}get rateMatchingAmountAfterUpsell(){return this.viewState.rateMatching.minAmount?this.minRateMatchingAmount*this.viewState.rateMatching.rate:null}beforeEnter(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutService.ensureFrequencyEnabled(this.donationDataPoint.frequency),this.produceViewState((e=>{e.tribute.show=this.tributeDataPoint.isEnabled,e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.labelType=this.tributeDataPoint.labelType,e.tribute.sharingEnabled=this.tributeDataPoint.isSharingEnabled,e.tribute.isOptional=this.tributeDataPoint.isOptional,e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled,e.tribute.isTributeOriented=this.tributeDataPoint.isTributeOriented,e.comment.isEnabled=this.commentDataPoint.isEnabled,e.comment.content=this.commentDataPoint.comment,e.comment.prevContent=this.commentDataPoint.prevComment,e.donation.amount=this.donationDataPoint.amount,e.donation.minAmount=this.donationDataPoint.minAmount,e.donation.maxAmount=this.donationDataPoint.maxAmount,e.donation.amountOptions=[...this.donationDataPoint.amountOptions],e.donation.frequency=this.donationDataPoint.frequency,e.donation.canModifyAmount=this.donationDataPoint.canModifyAmount,e.donation.canSelectCurrency=this.donationDataPoint.canSelectCurrency,e.donation.currency=this.donationDataPoint.currency,e.donation.hintOptions=this.donationDataPoint.hintOptions,e.donation.canModifyFrequency=this.donationDataPoint.canModifyFrequency,e.donation.showDonationEndDate=this.donationDataPoint.showDonationEndDate,e.donation.donationEndDate=this.donationDataPoint.donationEndDate,e.donation.isDonationEndDateActive=this.donationDataPoint.isDonationEndDateActive,e.designation.show=this.designationDataPoint.isEnabled,e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e.donation.frequency)),e.designation.goal=this.designationDataPoint.selectedGoal,e.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e.donation.frequency)),e.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e.donation.frequency)),e.allCurrenciesList=this.donationDataPoint.currencyList,e.guessedCurrenciesList=this.donationDataPoint.guessedCurrencyList,e.donateButtonLabel=this.donateButtonLabel,e.leftButtonLabel=this.leftButtonLabel,e.leftButtonFrequency=this.donationDataPoint.lowFrequency,e.rightButtonLabel=this.rightButtonLabel,e.rightButtonFrequency=this.donationDataPoint.highFrequency,e.rateMatching=this.rateMatching,e.isRateMatchingEnabled=this.isRateMatchingEnabled(e.rateMatching),e.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.validateAmount(),this.initializeRecurringFrequencyHintCheckoutDesktopExperiment()}))}setIsTributeInputFocused(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield gr(200),this.produceViewState((t=>{t.isTributeInputFocused=e}))}))}changeFrequency(e){this.checkoutState.donation.setFrequency(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((t=>{t.donation.frequency=this.donationDataPoint.frequency,t.donation.amount=this.donationDataPoint.amount,t.donation.currency=this.donationDataPoint.currency,t.donation.amountOptions=[...this.donationDataPoint.amountOptions],t.donation.hintOptions=this.donationDataPoint.hintOptions,t.donation.canSelectCurrency=this.donationDataPoint.canSelectCurrency,t.donation.showDonationEndDate=this.donationDataPoint.showDonationEndDate,t.donation.donationEndDate=this.donationDataPoint.donationEndDate,t.donation.isDonationEndDateActive=this.donationDataPoint.isDonationEndDateActive,t.designation.goalKey=this.designationDataPoint.goalKey,t.designation.goal=this.designationDataPoint.selectedGoal,t.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e)),t.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e)),t.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e)),t.donation.minAmount=this.donationDataPoint.minAmount,t.donateButtonLabel=this.donateButtonLabel,t.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.validateAmount(),this.resetDesignationValidation(),this.fetchUpsellScreenDecision()}validateAmount(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.donationDataPoint.validate(),n=null===this.donationDataPoint.amount,i=e&&t.fields.amount.errors.required;this.produceViewState((e=>{e.donation.isAmountValid=t.fields.amount.isValid,e.errors.amount.required=i,e.errors.amount.min=!n&&t.fields.amount.errors.min,e.errors.amount.max=!n&&t.fields.amount.errors.max,e.showError=t.fields.amount.errors.min||t.fields.amount.errors.max||i}))}validateDesignation(){const e=this.designationDataPoint.validateDesignation(this.getGoalRepeat(this.viewState.donation.frequency));this.produceViewState((t=>{t.designation.isValid=e.isValid,t.errors.designation.required=e.fields.goal.errors.required}))}resetDesignationValidation(){this.produceViewState((e=>{e.designation.isValid=!0,e.errors.designation.required=!1}))}changeAmount(e){this.resetAmountValidationError(),this.checkoutState.donation.setAmount(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.hintOptions=this.donationDataPoint.hintOptions,e.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.fetchUpsellScreenDecision()}addUpsellAmount(){this.rateMatchingUpsellAmountToAdd&&this.donationDataPoint.amount&&this.changeAmount(this.donationDataPoint.amount+this.rateMatchingUpsellAmountToAdd)}changeCurrentHint(e){this.resetAmountValidationError(),this.checkoutState.donation.setHint(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.hintOptions=this.donationDataPoint.hintOptions,e.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.validateAmount(),this.fetchUpsellScreenDecision()}changeGoal(e){this.checkoutState.designation.setGoal(e),this.produceViewState((e=>{e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal})),this.validateDesignation(),this.fetchUpsellScreenDecision()}changeCurrency(e){this.checkoutState.donation.setCurrency(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.donation.currency=this.donationDataPoint.currency,e.donation.amountOptions=[...this.donationDataPoint.amountOptions],e.donation.amount=this.donationDataPoint.amount,e.donation.minAmount=this.donationDataPoint.minAmount,e.donation.maxAmount=this.donationDataPoint.maxAmount,e.donation.hintOptions=this.donationDataPoint.hintOptions})),this.checkoutService.trackCurrencyChange(e),this.fetchUpsellScreenDecision(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion()}toggleTribute(){this.checkoutState.tribute.setActive(!this.tributeDataPoint.isActive),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeTributeName(e){this.checkoutState.tribute.setTributeeName(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}addComment(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutState.comment.setIsRequired(!0),this.leave({omitBeforeLeave:!0})}))}savePrevComment(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.checkoutState.comment.savePrevComment()}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.tryStartCheckoutWithoutPreDonationUpsellExperiment(),this.produceViewState((e=>{e.forceHideAverageDonationHintTooltip=!0})),this.validateAmount(!0),this.validateDesignation(),this.viewState.donation.isAmountValid?this.viewState.designation.isValid?(this.checkoutService.updateSessionWidgetDefaults(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion(),(null==e?void 0:e.isSynthetic)?(this.checkoutService.updateSession(),!0):(yield this.performMlRequests(),this.checkoutService.updateSession(),!this.openUpsellCurtain())):(this.produceViewState((e=>{e.designationShakeKey+=1})),!1):(this.produceViewState((e=>{e.amountShakeKey+=1,e.showError=!0})),!1)}))}isRateMatchingEnabled(e){var t,n;if(!e.show)return!1;const i=new Date;if(null!==e.startDate&&new Date(e.startDate)>i)return!1;const s=Qe();if(!s&&null!==e.endDate&&i>new Date(e.endDate))return!1;if(s&&e.endDateEnabled&&null!==e.endDate&&i>new Date(e.endDate))return!1;const a=null!==(t=e.raised)&&void 0!==t?t:0,r=null!==(n=e.totalAmountLimit)&&void 0!==n?n:0;return!(e.totalAmountLimitEnabled&&a>=r)}openUpsellCurtain(){const e={tributeIsFilled:this.tributeDataPoint.isFilled,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency,preDonationUpsellIsEnabled:this.preDonationUpsellDataPoint.isEnabled,locale:this.intl.locale,currentFrequency:this.donationDataPoint.frequency};return!!this.upsellCurtainExperiment.canBeStarted(e)&&(this.upsellCurtainExperiment.tryStart(e),!!this.upsellCurtainExperiment.canOpenUpsellCurtain(e)&&(this.produceViewState((e=>{e.preDonationUpsell=this.upsellAggregate.getBeforeEnterViewState(),e.upsellCurtainShown=!0})),this.checkoutState.preDonationUpsell.setShowed(),this.upsellCurtainExperiment.openCurtain(),!0))}closeUpsellCurtain(){this.produceViewState((e=>{e.upsellCurtainShown=!1})),this.upsellCurtainExperiment.closeCurtain()}confirmUpsell(e){return this.upsellAggregate.confirmUpsell(e),this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),this.leave({omitBeforeLeave:!0})}toggleDonationEndDateActive(e){this.checkoutState.donation.setDonationEndDateActive(e),this.produceViewState((t=>{t.donation.isDonationEndDateActive=e}))}getInitialViewState(){return{locked:!1,isShowcase:!1,amountShakeKey:0,designationShakeKey:0,allCurrenciesList:[],guessedCurrenciesList:[],allowCentsForCharges:this.checkoutService.company.allowCentsForCharges,donation:{frequency:oe.ONCE,amountOptions:[0,0,0,0,0,0],amount:null,minAmount:0,maxAmount:0,canModifyAmount:!0,canSelectCurrency:!0,currency:"USD",isAmountValid:!0,canModifyFrequency:!0,hintOptions:null,showDonationEndDate:!1,donationEndDate:null,isDonationEndDateActive:!0},errors:{amount:{min:!1,max:!1,required:!1},designation:{required:!1}},showError:!1,comment:{isEnabled:!1,content:"",prevContent:""},tribute:{name:"",isActive:!1,show:!1,isOptional:!1,labelType:u.dR.IN_HONOR_MEMORY,sharingEnabled:!1,isFilled:!1,inHonorOfMaxLength:xN.getInHonorOfMaxLength(),isTributeOriented:!1},designation:{show:!1,goalKey:null,goals:[],isEditable:!0,isValid:!0,goal:null,shouldShowDesignation:!1},enabledFlows:{crypto:this.checkoutService.checkoutConfiguration.enabledFlows.crypto},companyName:this.checkoutService.company.name,donateButtonLabel:"",leftButtonLabel:"",leftButtonFrequency:oe.ONCE,rightButtonLabel:"",rightButtonFrequency:oe.MONTHLY,flowType:this.checkoutService.type,isTributeInputFocused:!1,forceHideAverageDonationHintTooltip:!1,isRateMatchingEnabled:!1,rateMatching:{show:!1,rate:2,sponsor:null,minAmount:0,endDate:null,endDateEnabled:!1,sponsorEnabled:!1,startDate:null,totalAmountLimitEnabled:!1,totalAmountLimit:null,raised:null,remains:null},showFrequencyCustomAmountInput:!1,upsellCurtainShown:!1,preDonationUpsell:{upsell:{fromAmount:0},currency:"USD",highButtonText:"",lowButtonText:"",highAmount:0,lowAmount:0,screenTitle:"",questionText:"",questionShortText:"",descriptionText:"",targetFrequency:oe.MONTHLY,isAnnualTribute:!1},processingState:Pr.IDLE}}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get leftButtonLabel(){return El(this.intl,this.donationDataPoint.lowFrequency)}get rightButtonLabel(){return El(this.intl,this.donationDataPoint.highFrequency)}get rateMatching(){const e=this.checkoutService.checkoutConfiguration.campaignPage.rateMatching;return{show:e.show,rate:e.rate,sponsor:e.sponsor,sponsorLogo:e.sponsorLogo,minAmount:e.minAmount,endDate:e.endDate,endDateEnabled:e.endDateEnabled,sponsorEnabled:e.sponsorEnabled,startDate:e.startDate,totalAmountLimitEnabled:e.totalAmountLimitEnabled,totalAmountLimit:e.totalAmountLimit,raised:e.raised,remains:e.remains}}get checkoutWithoutPreDonationUpsellExperiment(){return this.experiments.get(Sn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT)}get campaignPagesWithoutPreDonationUpsellExperiment(){return this.experiments.get(Sn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT)}calculateMatchingImpactWithoutLimit(){return this.donationDataPoint.amount?this.donationDataPoint.amount*this.viewState.rateMatching.rate:null}resetAmountValidationError(){this.produceViewState((e=>{e.errors.amount.min=!1,e.errors.amount.max=!1,e.errors.amount.required=!1,e.showError=!1}))}tryStartCheckoutWithoutPreDonationUpsellExperiment(){const e={canShowUpsellScreen:this.preDonationUpsellDataPoint.isEnabled,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency};this.checkoutWithoutPreDonationUpsellExperiment.tryStart(e),this.checkoutWithoutPreDonationUpsellExperiment.isEnabled(e)?this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1):(this.campaignPagesWithoutPreDonationUpsellExperiment.tryStart(e),this.campaignPagesWithoutPreDonationUpsellExperiment.isEnabled(e)&&this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1))}fetchUpsellScreenDecision(){return this.adaptivePreDonationUpsellSuggestionsService.resetSuggestionApplication(),this.tryStartCheckoutWithoutPreDonationUpsellExperiment(),this.adaptivePreDonationUpsellSuggestionsService.tryFetchSuggestion()}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}performFeeCoveringSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){(yield this.adaptiveFeeCoveringService.tryFetchSuggestion())&&(this.adaptiveFeeCoveringService.tryApplySuggestion(),this.adaptiveFeeCoveringService.tryTrackSuggestion())}))}performMlRequests(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.withPending((()=>(0,l.sH)(this,void 0,void 0,(function*(){this.setProcessingState(Pr.PENDING),(yield this.fetchUpsellScreenDecision())&&(this.adaptivePreDonationUpsellSuggestionsService.tryApplySuggestion(),this.adaptivePreDonationUpsellSuggestionsService.tryTrackSuggestion()),this.setProcessingState(Pr.IDLE)}))))}))}getGoalRepeat(e){return e===oe.ONCE?Ze.ONE_TIME:Ze.RECURRING}initializeRecurringFrequencyHintCheckoutDesktopExperiment(){var e;this.experiments.get(Sn.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT).tryStart({enabledFrequencies:this.checkoutService.checkoutConfiguration.enabledFrequencies,isTributeEnabled:this.checkoutState.tribute.dataPoint.isEnabled,isDesignationEnabled:this.checkoutState.designation.dataPoint.isEnabled,locale:this.intl.locale,isMobile:this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile,isImpactDescriptionEnabled:!!(null===(e=this.donationDataPoint.hintOptions)||void 0===e?void 0:e.some((e=>e.description)))})}}function uT(e,t){switch(e){case oe.DAILY:return t.translate("widgetSubscriptionPeriodLabel.daily.noun");case oe.WEEKLY:return t.translate("widgetSubscriptionPeriodLabel.weekly.noun");case oe.BIWEEKLY:return t.translate("widgetSubscriptionPeriodLabel.biweekly.noun");case oe.EVERY_4_WEEKS:return t.translate("widgetSubscriptionPeriodLabel.every4weeks.noun");case oe.MONTHLY:return t.translate("widgetSubscriptionPeriodLabel.monthly.noun");case oe.BIMONTHLY:return t.translate("widgetSubscriptionPeriodLabel.bimonthly.noun");case oe.QUARTERLY:return t.translate("widgetSubscriptionPeriodLabel.quarterly.noun");case oe.SEMIANNUAL:return t.translate("widgetSubscriptionPeriodLabel.semiannual.noun");case oe.ANNUAL:return t.translate("widgetSubscriptionPeriodLabel.annual.noun");default:throw new U(e)}}function dT(e){return e?xg.UPSELL_PAY_LATER:xg.CONTINUE}class hT extends cP{constructor(e){super(e)}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.resetDtd();const e=this.intl.formatCurrency(this.dtdDataPoint.dtdInitialTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"}),t=this.intl.formatCurrency(this.dtdDataPoint.employerUpsellTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"});let n="",i="",s="";const a=this.dtdDataPoint.dtdFrequency;a!==oe.ONCE?(n=this.intl.translate("doubleDonationScreen.button.donate.recurring",{amount:e,recurringType:uT(a,this.intl)}),i=this.intl.translate("doubleDonationScreen.button.changeAmount.recurring",{amount:t,recurringType:uT(a,this.intl)}),s=this.intl.translate("doubleDonationScreen.button.doNotChangeAmount.recurring",{amount:e,recurringType:uT(a,this.intl)})):(n=this.intl.translate("doubleDonationScreen.button.donate.once",{amount:e}),i=this.intl.translate("doubleDonationScreen.button.changeAmount.once",{amount:t}),s=this.intl.translate("doubleDonationScreen.button.doNotChangeAmount.once",{amount:e})),this.produceViewState((a=>{a.buttonType=dT(!1),a.total=this.dtdDataPoint.dtdInitialTotal,a.frequency=this.dtdDataPoint.dtdFrequency,a.currency=this.dtdDataPoint.dtdCurrency,a.isFeeCovered=this.dtdDataPoint.dtdInitialTotal!==this.dtdDataPoint.dtdInitialAmount,a.employer.name=this.dtdDataPoint.employerName,a.minimumMatchedAmount=this.dtdDataPoint.employerMinAmount,a.isIntegrationEnabled=this.dtdDataPoint.isIntegrationEnabled,a.showSkipButton=!0,a.matchingPromisedAmount=this.dtdDataPoint.employerUpsellTotalDoubled,a.matchingRatio=this.dtdDataPoint.employerRatio,a.proposedAmount=this.dtdDataPoint.employerUpsellTotal,a.proposedAmountBeforeFeeCovered=this.dtdDataPoint.employerRawMinAmount,a.formattedTotal=e,a.formattedUpsellTotal=t,a.declineButtonLabel=n,a.changeAmountButtonLabel=i,a.noChangeAmountButtonLabel=s,a.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()})),this.dtdDataPoint.employerId&&(this.setEmployerViewState(),this.checkoutState.doubleTheDonation.setUpsellShowed(this.viewState.showDTDUpsell&&this.viewState.showDTDUpsellExperiment))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),!0}))}changeEmployerName(e){e||this.resetEmployerDTD();const t=this.viewState.companies.some((t=>t.company_name.trim().toLocaleLowerCase()===e.trim().toLocaleLowerCase()));this.checkoutState.doubleTheDonation.setEmployerName(e),this.produceViewState((e=>{e.employer.name=this.dtdDataPoint.employerName,e.showEmployerMatchedBlock=t&&this.dtdDataPoint.employerMinAmount<=this.dtdDataPoint.dtdInitialTotal}))}skip(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutState.doubleTheDonation.setSkipped(),this.leave()}))}getDTDCompanies(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.dtdDataPoint.searchEmployerByName(e);GS()(t,this.viewState.companies)||this.produceViewState((e=>{e.companies=t}))}))}setEmployerDTD(e){const t=this.viewState.companies.find((t=>t.id===e));return!t||(this.checkoutState.doubleTheDonation.setEmployerData(t),this.setEmployerViewState(),this.checkoutState.doubleTheDonation.setUpsellShowed(this.viewState.showDTDUpsell&&this.viewState.showDTDUpsellExperiment),!1)}setEmployerViewState(){const e=this.intl.formatCurrency(this.dtdDataPoint.employerUpsellTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"});let t="";const n=this.dtdDataPoint.dtdFrequency;t=n!==oe.ONCE?this.intl.translate("doubleDonationScreen.button.changeAmount.recurring",{amount:e,recurringType:uT(n,this.intl)}):this.intl.translate("doubleDonationScreen.button.changeAmount.once",{amount:e}),this.produceViewState((n=>{n.employer.name=this.dtdDataPoint.employerName,n.showDTDDescription=!1,n.showDTDUpsell=this.dtdDataPoint.employerMinAmount>this.dtdDataPoint.dtdInitialTotal,n.showDTDUpsellExperiment=!this.isAlreadyPaidAmountNotMatched(),n.showSkipButton=!n.showDTDUpsell,n.showEmployerMatchedBlock=this.dtdDataPoint.employerMinAmount<=this.dtdDataPoint.dtdInitialTotal,n.DTDDoubledAmount=this.dtdDataPoint.dtdInitialTotalDoubled,n.minimumMatchedAmount=this.dtdDataPoint.employerMinAmount,n.upsellTotal=this.dtdDataPoint.employerUpsellTotal,n.formattedUpsellTotal=e,n.changeAmountButtonLabel=t,n.DTDUpsellDoubledAmount=this.dtdDataPoint.employerUpsellTotalDoubled,n.buttonType=dT(n.showDTDUpsell),n.matchingPromisedAmount=this.dtdDataPoint.employerUpsellTotalDoubled,n.matchingRatio=this.dtdDataPoint.employerRatio,n.proposedAmount=this.dtdDataPoint.employerUpsellTotal,n.proposedAmountBeforeFeeCovered=this.dtdDataPoint.employerRawMinAmount,n.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()}))}acceptUpsell(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.doubleTheDonation.setUpsellAccepted(),this.checkoutState.donation.setAmount(this.dtdDataPoint.employerUpsellAmount),yield this.leave()}))}resetEmployerDTD(){this.checkoutState.doubleTheDonation.resetEmployerData(),this.produceViewState((e=>{e.showDTDDescription=!0,e.showDTDUpsell=!1,e.showSkipButton=!0,e.showEmployerMatchedBlock=!1,e.buttonType=dT(e.showDTDUpsell),e.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()}))}isAlreadyPaidAmountNotMatched(){return!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.checkoutService.isPaid&&this.dtdDataPoint.employerMinAmount>this.dtdDataPoint.dtdInitialTotal}getInitialViewState(){return{locked:!1,showDTDDescription:!0,showEmployerMatchedBlock:!1,employer:{name:""},showDTDUpsell:!1,showDTDUpsellExperiment:!1,minimumMatchedAmount:0,DTDUpsellDoubledAmount:0,DTDDoubledAmount:0,currency:"USD",upsellTotal:0,showSkipButton:!0,total:0,processingState:Pr.IDLE,companies:[],buttonType:xg.CONTINUE,isFeeCovered:!1,matchingPromisedAmount:0,matchingRatio:[1,1],proposedAmount:0,proposedAmountBeforeFeeCovered:0,isIntegrationEnabled:!1,frequency:oe.ONCE,formattedTotal:"",formattedUpsellTotal:"",declineButtonLabel:"",changeAmountButtonLabel:"",noChangeAmountButtonLabel:"",isAlreadyPaidAmountNotMatched:!1,payErrorMessage:"",additionalPayErrorMessage:""}}get dtdDataPoint(){return this.checkoutState.doubleTheDonation.dataPoint}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}resetDtd(){this.dtdDataPoint.isUpsellAccepted&&this.checkoutState.donation.setAmount(this.dtdDataPoint.snapshot.dtdInitialAmount),this.checkoutState.doubleTheDonation.resetState()}}class mT extends cP{constructor(e){super(e),this.paymentService=e.paymentService}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.setProcessingState(Pr.PENDING),!(yield this.paymentService.startSepaFlow()))return this.produceViewState((e=>{e.shakeKey+=1,e.processingState=Pr.IDLE})),this.pending=!1,!1;const e=yield this.checkoutService.hold();return sn.isFailure(e)?(this.pending=!1,yield this.showError(),!1):this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}initiateSepa(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentService.initiateSepa(e,t)}))}recalculatePaymentScreen(){this.produceViewState((e=>{e.isPaymentScreen=this.isPaymentScreen}))}getInitialViewState(){return{processingState:Pr.IDLE,shakeKey:0,locked:!1,isPaymentScreen:!1,formattedAmount:"",frequency:oe.ONCE}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isFailure(e)?e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1):(this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Pr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")})),this.produceViewState((e=>{e.payErrorMessage=""}),!0)}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class pT extends cP{constructor(e){super(e)}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.giftAid.reject(),this.produceViewState((e=>{var t;e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency,e.legalText=this.giftAidDataPoint.legalText}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.checkoutService.updateSession(),!this.isPaymentScreen)return this.pending=!1,!0;this.produceViewState((e=>{e.processingState=Pr.PENDING}));const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isSuccess(e)||e.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage,e.processingState=Pr.ERROR})),this.pending=!1,!1)}))}changeGiftAid(e){e?this.checkoutState.giftAid.accept():this.checkoutState.giftAid.reject()}setShown(){this.checkoutState.giftAid.setShowed()}getInitialViewState(){return{locked:!1,showcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,formattedAmount:"",frequency:oe.MONTHLY,legalText:"",processingState:Pr.IDLE}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get giftAidDataPoint(){return this.checkoutState.giftAid.dataPoint}}class gT extends cP{constructor(e){super(e),this.paymentService=e.paymentService}get showNextStepOverview(){return this.viewState.processingState!==Pr.SUCCESS}back(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.checkoutService.canGoBack;if(this.flow.canGoBack&&e)return(yield this.withPending((()=>this.paymentService.isIDEALPaid())))?this.leave():this.flow.prev()}))}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.email=this.donorEmailDataPoint.email,e.name=this.donorNameDataPoint.fullName,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency,e.isSubscription=this.donationDataPoint.isRecurring}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Pr.PENDING),this.produceViewState((e=>{e.showReturnBankInfo=!0})),this.paymentService.openIDEALConfirmationWindow({onClose:()=>{this.produceViewState((e=>{e.showReturnBankInfo=!1}))}});const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isSuccess(e)?(this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.setProcessingState(Pr.ERROR),this.pending=!1,!1)}))}returnToBankWindow(){this.paymentService.focusIDEALConfirmationWindow()}getInitialViewState(){return{locked:!1,email:"",name:"",processingState:Pr.IDLE,formattedAmount:"",frequency:oe.ONCE,isSubscription:!1,errorMessage:"",showReturnBankInfo:!1}}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}setProcessingState(e){return e===Pr.ERROR&&this.produceViewState((e=>{e.errorMessage=this.checkoutService.payErrorMessage})),this.produceViewState((t=>{t.processingState=e})),this}}var yT;!function(e){e.DEFAULT="default",e.LPO="lpo"}(yT||(yT={}));const fT=[u._h.APPLE_PAY,u._h.CARD,u._h.PAYPAL,u._h.GOOGLE_PAY,u._h.VENMO,u._h.US_BANK_ACCOUNT,u._h.UK_BACS,u._h.AU_BECS,u._h.ACSS,u._h.SEPA,u._h.IDEAL];function ST(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;for(const s of e)if(n++,s.visible&&i++,i===t)return n;return-1}class ET{constructor(e){this.paymentMethodSorterParams=e}sort(e){var t,n;const i=Object.entries(e).map((e=>{let[t,n]=e;return{paymentMethod:t,available:n.available,visible:n.visible}})),s=this.getDefaultSortedPaymentMethods(),a=i.sort(((e,t)=>(s.includes(e.paymentMethod)?s.indexOf(e.paymentMethod):1/0)-(s.includes(t.paymentMethod)?s.indexOf(t.paymentMethod):1/0)));if((null===(t=this.paymentMethodSorterParams)||void 0===t?void 0:t.specificCompanyCountry)===u.tg.NETHERLANDS){const e=ST(a,1),t=a.findIndex((e=>e.paymentMethod===u._h.IDEAL)),n=a[t];a.splice(t,1),a.splice(e,0,n)}if((null===(n=this.paymentMethodSorterParams)||void 0===n?void 0:n.specificCompanyCountry)===u.tg.UNITED_KINGDOM){const e=a.findIndex((e=>e.paymentMethod===u._h.UK_BACS)),t=ST(a,1),n=a[e];a.splice(e,1),a.splice(t,0,n)}return a}getDefaultSortedPaymentMethods(){return fT}}class AT{constructor(e){this.checkoutConfiguration=e,this._paymentMethodSorter=null}get paymentMethodSorter(){return this._paymentMethodSorter||(this._paymentMethodSorter=new ET({specificCompanyCountry:this.checkoutConfiguration.company.country})),this._paymentMethodSorter}getPaymentButtons(e){const t={available:[],visible:[]};return this.paymentMethodSorter.sort(e).forEach((e=>{let{paymentMethod:n,available:i,visible:s}=e;if(n===u._h.APPLE_PAY&&i&&(t.available.push(Fy.APPLE_PAY),s&&t.visible.push(Fy.APPLE_PAY)),n===u._h.CARD&&i&&(t.available.push(Fy.CARD),s&&t.visible.push(Fy.CARD)),n===u._h.PAYPAL&&i&&(t.available.push(Fy.PAYPAL),s&&t.visible.push(Fy.PAYPAL)),n===u._h.GOOGLE_PAY&&i&&(t.available.push(Fy.GOOGLE_PAY),s&&t.visible.push(Fy.GOOGLE_PAY)),n===u._h.VENMO&&i&&(t.available.push(Fy.VENMO),s&&t.visible.push(Fy.VENMO)),n===u._h.US_BANK_ACCOUNT&&i){const e=this.checkoutConfiguration.company.stripe.usBankAccount.verification,n=RN(e)||kN(e),i=MN(e);n?(t.available.push(Fy.US_BANK_ACCOUNT_INSTANT),s&&t.visible.push(Fy.US_BANK_ACCOUNT_INSTANT)):i?(t.available.push(Fy.US_BANK_ACCOUNT),s&&t.visible.push(Fy.US_BANK_ACCOUNT)):(t.available.push(Fy.US_BANK_ACCOUNT_VERIFICATION),s&&t.visible.push(Fy.US_BANK_ACCOUNT_VERIFICATION))}n===u._h.UK_BACS&&i&&(t.available.push(Fy.UK_BACS),s&&t.visible.push(Fy.UK_BACS)),n===u._h.AU_BECS&&i&&(t.available.push(Fy.AU_BECS),s&&t.visible.push(Fy.AU_BECS)),n===u._h.ACSS&&i&&(t.available.push(Fy.ACSS),s&&t.visible.push(Fy.ACSS)),n===u._h.SEPA&&i&&(t.available.push(Fy.SEPA),s&&t.visible.push(Fy.SEPA)),n===u._h.IDEAL&&i&&(t.available.push(Fy.IDEAL),s&&t.visible.push(Fy.IDEAL))})),t}}class CT extends cP{constructor(e){super(e),this.frequency=oe.ONCE,this._paymentOptionsViewService=null,this.paymentService=e.paymentService,this.paymentOptionsDataPoint=e.paymentOptionsDataPoint,this.mailingAddressDataPoint=e.mailingAddressDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.handleErrors(),this.syncPaymentButtons(),this.initializePaymentOptions(),this.checkoutService.exposeSmartCoveringFeeExperimentV2(),this.checkoutService.updateSession(),this.resetPaymentOptions(),this.produceViewState((e=>{e.isInited=!0,e.currency=this.donationDataPoint.currency,e.currencySymbol=this.donationDataPoint.currencySymbol,e.defaultCurrency=this.donationDataPoint.defaultCurrency,e.amount=this.donationDataPoint.amount||(this.isShowcase?1e4:0),e.frequency=this.donationDataPoint.frequency,e.total=!this.donationDataPoint.amount&&this.isShowcase?10600:this.donationDataPoint.total,e.processingFee=!this.donationDataPoint.amount&&this.isShowcase?600:this.donationDataPoint.fee,e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.includeFees=this.donationDataPoint.includeFees,e.showIncludeFee=this.isIncludeFeesSectionVisible(this.donationDataPoint.includeFees),e.prefixCurrencySymbol=this.intl.formatSymbol(this.donationDataPoint.currencySymbol,it.PREFIX),e.postfixCurrencySymbol=this.intl.formatSymbol(this.donationDataPoint.currencySymbol,it.POSTFIX),e.isRecurring=this.donationDataPoint.isRecurring,e.recurringLabel=this.recurringLabel,e.isPaymentScreen=this.isPaymentScreen,e.experiments.paymentOptionScreenVersion=this.calcPaymentOptionScreenVersion()}))}))}beforeLeave(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),this.isPaymentScreen?this.pay():(this.unlock(),!0)}))}choosePaymentOption(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.pending){switch(this.lock(),this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(e),e){case Fy.CARD:if(this.checkoutState.paymentOptions.setPaymentMethod(u._h.CARD),this.paymentOptionsDataPoint.preSelectedPaymentOption===Fy.CARD){if(this.produceViewState((e=>{e.processingCardState=Pr.PENDING})),yield this.startCreditCard(),this.viewState.processingCardState===Pr.ERROR)return;return void this.produceViewState((e=>{e.processingCardState=Pr.IDLE}))}break;case Fy.GOOGLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(u._h.GOOGLE_PAY),void(yield this.startGooglePay()));case Fy.APPLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(u._h.APPLE_PAY),void(yield this.startApplePay()));case Fy.UK_BACS:this.checkoutState.paymentOptions.setPaymentMethod(u._h.UK_BACS);break;case Fy.AU_BECS:this.checkoutState.paymentOptions.setPaymentMethod(u._h.AU_BECS);break;case Fy.ACSS:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(u._h.ACSS),this.produceViewState((e=>{e.processingACSSState=Pr.PENDING})),yield this.paymentService.initiateACSS({onPopupOpen:null==t?void 0:t.onModalShow,onPopupClose:null==t?void 0:t.onModalHide}),yield this.startACSS(),void this.produceViewState((e=>{e.processingACSSState=Pr.IDLE})));case Fy.US_BANK_ACCOUNT:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Fy.US_BANK_ACCOUNT),this.produceViewState((e=>{e.processingUSBankAccountState=Pr.PENDING})),yield this.paymentService.initiateUSBankAccount({}),this.produceViewState((e=>{e.processingUSBankAccountState=Pr.IDLE})),this.unlock(),this.leave();case Fy.US_BANK_ACCOUNT_VERIFICATION:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Fy.US_BANK_ACCOUNT_VERIFICATION),this.produceViewState((e=>{e.processingUSBankAccountState=Pr.PENDING})),yield this.paymentService.initiateUSBankAccount({}),this.produceViewState((e=>{e.processingUSBankAccountState=Pr.IDLE})),this.unlock(),this.leave();case Fy.US_BANK_ACCOUNT_INSTANT:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Fy.US_BANK_ACCOUNT_INSTANT),this.produceViewState((e=>{e.processingUSBankAccountState=Pr.PENDING})),yield this.paymentService.initiateUSBankAccount({onPopupOpen:null==t?void 0:t.onModalShow,onPopupClose:null==t?void 0:t.onModalHide}),this.startUSBankAccount(Fy.US_BANK_ACCOUNT_INSTANT);case Fy.PAYPAL:throw new Error("Paypal method can not be chosen");case Fy.VENMO:throw new Error("Venmo method can not be chosen");case Fy.SEPA:this.checkoutState.paymentOptions.setPaymentMethod(u._h.SEPA);break;case Fy.IDEAL:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.IDEAL),this.produceViewState((e=>{e.processingIdealState=Pr.PENDING})),this.startIDEAL();default:throw new U(e)}return this.unlock(),this.leave()}}))}changePaymentOption(e,t){this.produceViewState((n=>{n.visiblePaymentOptions=e,n.hiddenPaymentOptions=t}),!0)}changeCardFilledFields(e,t){this.produceViewState((n=>{n.cardFilledFields[e]=t}),!0)}initiateCreditCard(e){return this.paymentService.initiateCreditCard(e)}startIDEAL(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.paymentService.initiateIDEAL();const e=yield this.checkoutService.hold();this.unlock(),sn.isSuccess(e)?yield this.leave():(this.showError({option:Fy.IDEAL,message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}),this.produceViewState((e=>{e.processingACSSState=Pr.IDLE})))}))}startCreditCard(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!(yield this.paymentService.startCreditCardFlow()))return this.resetPaymentOptions(),this.unlock(),void this.produceViewState((e=>{e.shakeKey+=1}));const e=yield this.checkoutService.hold();if(sn.isFailure(e))return this.resetPaymentOptions(),this.unlock(),void this.showError({title:this.intl.translate("creditCard.error.title"),message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:Fy.CARD});yield this.leave()}))}initiateVenmo(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{element:t,onClick:n,onHide:i}=e;yield this.paymentService.initiateVenmo({element:t,holdDone:()=>{null==i||i(),this.leave()},onFail:e=>{null==i||i(),this.resetPaymentOptions(),this.unlock(),this.showError({message:e.message||this.intl.translate("common.errorOccurredText"),option:Fy.VENMO})},onCancel:()=>{this.resetPaymentOptions(),this.unlock(),null==i||i()},onButtonClick:()=>{this.lock(),this.checkoutState.paymentOptions.setPaymentOption(null),null==n||n()}}),this.syncButtonsAvailability(),this.syncPreSelectedPaymentOption()}))}closePaypalButton(){return this.paymentService.closePaypalButton()}closeVenmoButton(){return this.paymentService.closeVenmoButton()}initiatePaypal(e){let{element:t,buttonColor:n,onClick:i,onHide:s}=e;return this.isShowcase?Promise.resolve(!1):this.paymentService.initiatePaypal({element:t,buttonColor:n,holdDone:()=>{null==s||s(),this.leave()},onFail:e=>{null==s||s(),this.resetPaymentOptions(),this.unlock(),this.showError({message:e.message||this.intl.translate("common.errorOccurredText"),option:Fy.PAYPAL})},onCancel:()=>{this.resetPaymentOptions(),this.unlock(),null==s||s()},onButtonClick:()=>{this.lock(),this.checkoutState.paymentOptions.setPaymentOption(null),null==i||i()}})}togglePaypalActions(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.paymentService.togglePaypalActions(e)}))}startGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startGooglePay();if(this.unlock(),sn.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:Fy.GOOGLE_PAY})}))}startApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startApplePay();if(this.unlock(),sn.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:Fy.APPLE_PAY})}))}startACSS(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startACSS();if(this.unlock(),sn.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:Fy.ACSS})}))}startUSBankAccount(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.paymentService.startUSBankAccount();if(this.unlock(),sn.isSuccess(t))return void(yield this.leave());this.resetPaymentOptions();const n=t.failureResult.message;n?this.showError({message:n,option:e}):this.produceViewState((e=>{e.processingUSBankAccountState=Pr.IDLE}))}))}toggleFeeCovered(){this.checkoutState.donation.setFeeCovered(!this.donationDataPoint.isFeeCovered,{isCustomFeeCoveredValue:!0}),this.produceViewState((e=>{e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.total=this.donationDataPoint.total})),this.syncButtonsAvailability(),this.syncPreSelectedPaymentOption()}setPreSelectedPaymentOption(e){this.checkoutState.paymentOptions.setPreSelectedPaymentOption(e),this.produceViewState((t=>{t.preSelectedPaymentOption=e}))}syncPaymentButtons(){this.syncButtonsAvailability(),this.tryStartLessPaymentOptionsCampaignPagesExperiment(),this.syncPreSelectedPaymentOption()}getFrequency(){return this.donationDataPoint.frequency}getCurrency(){return this.donationDataPoint.currency}getInitialViewState(){return{isInited:!1,showIncludeFee:!0,livemode:this.isLivemode,showTestModeTooltipInfo:this.showTestModeTooltipInfo,isStripeAccountConnected:this.isStripeAccountConnected,stripeElementsAvailable:this.isStripeElementsAvailable,amount:0,currency:"USD",currencySymbol:"$",prefixCurrencySymbol:"",postfixCurrencySymbol:"",allowCentsForCharges:this.checkoutService.company.allowCentsForCharges,frequency:oe.ONCE,includeFees:u.XN.DEFAULT_YES,processingFee:0,total:0,defaultCurrency:"USD",isFeeCovered:!1,availableOptions:[],visiblePaymentOptions:[],hiddenPaymentOptions:[],buttonOptions:Object.fromEntries(Object.values(Fy).map((e=>[e,{visible:!1}]))),locked:!1,processingACSSState:Pr.IDLE,processingUSBankAccountState:Pr.IDLE,processingCardState:Pr.IDLE,processingIdealState:Pr.IDLE,shakeKey:0,cardFilledFields:{[_r.CARD_NUMBER]:!1,[_r.CARD_EXPIRY]:!1,[_r.CARD_CVC]:!1},isRecurring:!0,recurringLabel:"",isPaymentScreen:!1,preSelectedPaymentOption:null,experiments:{paymentOptionScreenVersion:yT.DEFAULT}}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get recurringLabel(){return function(e,t){switch(t){case oe.DAILY:return e.translate("paymentMethodScreen.perDay");case oe.WEEKLY:return e.translate("paymentMethodScreen.perWeek");case oe.BIWEEKLY:return e.translate("paymentMethodScreen.per2Weeks");case oe.EVERY_4_WEEKS:return e.translate("paymentMethodScreen.per4Weeks");case oe.MONTHLY:return e.translate("paymentMethodScreen.perMonth");case oe.BIMONTHLY:return e.translate("paymentMethodScreen.per2Months");case oe.QUARTERLY:return e.translate("paymentMethodScreen.perQuarter");case oe.SEMIANNUAL:return e.translate("paymentMethodScreen.per6Months");case oe.ANNUAL:return e.translate("paymentMethodScreen.perYear");default:return""}}(this.intl,this.donationDataPoint.frequency)}get isShowcase(){return this.checkoutService.checkoutConfiguration.infrastructureParams.showcase}get isLivemode(){return this.checkoutService.checkoutConfiguration.infrastructureParams.livemode}get showTestModeTooltipInfo(){return!this.isShowcase&&!this.isLivemode}get isStripeAccountConnected(){return!!this.checkoutService.checkoutConfiguration.company.stripeAccount}get isStripeElementsAvailable(){return this.checkoutService.checkoutConfiguration.infrastructureParams.env!==u.hY.PRODUCTION||this.checkoutService.checkoutConfiguration.infrastructureParams.isSSLEnabled}get isPaymentScreen(){const e=this.checkoutService.getState().paymentOptions;return this.checkoutService.isReadyToRetryPay&&e.clientPaymentMethod===u._h.CARD&&e.preSelectedPaymentOption===Fy.CARD||this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get lessPaymentOptionsCampaignPagesExperiment(){return this.experiments.get(Sn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT)}get availableVisiblePaymentOptions(){return this.viewState.availableOptions.filter((e=>this.viewState.buttonOptions[e].visible))}get paymentOptionsViewService(){return this._paymentOptionsViewService||(this._paymentOptionsViewService=new AT(this.checkoutService.checkoutConfiguration)),this._paymentOptionsViewService}calcPaymentOptionScreenVersion(){return this.isLessPaymentOptionsCampaignPagesExperimentEnabled()?yT.LPO:yT.DEFAULT}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){this.setPaymentLoader();const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});if(sn.isFailure(e)){if(this.removePaymentLoader(),this.unlock(),e.failureResult.shouldLeave)return!0;const t=(()=>{switch(!0){case!!this.paymentOptionsDataPoint.selectedPaymentOption:return this.paymentOptionsDataPoint.selectedPaymentOption;case this.paymentOptionsDataPoint.clientPaymentMethod===u._h.PAYPAL:return Fy.PAYPAL;case this.paymentOptionsDataPoint.clientPaymentMethod===u._h.VENMO:return Fy.VENMO;default:return null}})();return t&&this.showError({title:this.checkoutService.payErrorTitle,message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:t}),!1}return this.produceViewState((e=>{e.processingCardState=Pr.SUCCESS})),this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave?yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave):this.removePaymentLoader(),this.unlock(),!0}))}resetPaymentOptions(){this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(null)}syncButtonsAvailability(){const e=this.paymentOptionsViewService.getPaymentButtons(this.paymentOptionsDataPoint.allowedPaymentMethods);this.produceViewState((t=>{const n=e.available;GS()(t.availableOptions,n)||(t.availableOptions=n);for(const[n,i]of Object.entries(t.buttonOptions))i.visible=e.visible.some((e=>e===n))}))}syncPreSelectedPaymentOption(){var e;if(this.checkoutService.checkoutConfiguration.checkoutType!==Ce.MODAL&&!this.isLessPaymentOptionsCampaignPagesExperimentEnabled())return;const t=this.availableVisiblePaymentOptions;null!==this.paymentOptionsDataPoint.preSelectedPaymentOption&&t.includes(this.paymentOptionsDataPoint.preSelectedPaymentOption)?this.setPreSelectedPaymentOption(this.paymentOptionsDataPoint.preSelectedPaymentOption):this.setPreSelectedPaymentOption(null!==(e=t[0])&&void 0!==e?e:null)}isLessPaymentOptionsCampaignPagesExperimentEnabled(){return this.lessPaymentOptionsCampaignPagesExperiment.isTestGroup()}showError(e){let{title:t,message:n,option:i}=e;this.produceViewState((e=>{i!==Fy.US_BANK_ACCOUNT_INSTANT&&i!==Fy.US_BANK_ACCOUNT_VERIFICATION&&i!==Fy.US_BANK_ACCOUNT||(e.processingUSBankAccountState=Pr.ERROR),i===Fy.CARD&&(e.processingCardState=Pr.ERROR),i===Fy.IDEAL&&(e.processingIdealState=Pr.ERROR),e.buttonOptions[i].errorTitle=t,e.buttonOptions[i].error=n})),window.setTimeout((()=>{this.produceViewState((e=>{i!==Fy.US_BANK_ACCOUNT_INSTANT&&i!==Fy.US_BANK_ACCOUNT_VERIFICATION&&i!==Fy.US_BANK_ACCOUNT||(e.processingUSBankAccountState=Pr.IDLE),i===Fy.CARD&&(e.processingCardState=Pr.IDLE),i===Fy.IDEAL&&(e.processingIdealState=Pr.IDLE),e.buttonOptions[i].errorTitle=void 0,e.buttonOptions[i].error=void 0}))}),Pe)}isIncludeFeesSectionVisible(e){return[u.XN.DEFAULT_YES,u.XN.DEFAULT_NO,u.XN.SMART_COVERING].includes(e)}lock(){this.togglePaypalActions(!1),this.pending=!0}unlock(){this.togglePaypalActions(!0),this.pending=!1}setPaymentLoader(){this.paymentOptionsDataPoint.selectedPaymentOption!==Fy.CARD&&(this.checkoutService.checkoutUIState.showPaymentLoader=!0),this.checkoutService.syncUpdateCheckoutState()}removePaymentLoader(){this.checkoutService.checkoutUIState.showPaymentLoader=!1,this.checkoutService.syncUpdateCheckoutState()}handleErrors(){const e=this.checkoutService.getState().paymentOptions,t=this.checkoutService.getState().paymentErrors;e.clientPaymentMethod===u._h.US_BANK_ACCOUNT&&(t[u._h.US_BANK_ACCOUNT]&&e.selectedPaymentOption&&this.showError({message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:e.selectedPaymentOption}),this.checkoutService.setPaymentError(u._h.US_BANK_ACCOUNT,!1)),t[u._h.PAYPAL]&&e.clientPaymentMethod===u._h.PAYPAL&&(this.showError({message:this.intl.translate("common.errorOccurredText"),option:Fy.PAYPAL}),this.checkoutService.setPaymentError(u._h.PAYPAL,!1)),t[u._h.CARD]&&e.clientPaymentMethod===u._h.CARD&&e.preSelectedPaymentOption===Fy.CARD&&(this.showError({title:this.intl.translate("creditCard.error.title"),message:this.checkoutService.payErrorMessage||this.intl.translate("creditCard.error.message"),option:Fy.CARD}),this.checkoutService.setPaymentError(u._h.CARD,!1))}tryStartLessPaymentOptionsCampaignPagesExperiment(){this.lessPaymentOptionsCampaignPagesExperiment.tryStart()}initializePaymentOptions(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.paymentService.ensurePaymentMethodsInitialized(),this.syncPaymentButtons(),this.lessPaymentOptionsCampaignPagesExperiment.exposure()}))}}class vT extends cP{constructor(e){super(e),this.suggestionsService=e.suggestionsService}get periodLabel(){return this.recurringTypes[this.viewState.period]}get thankYouTitle(){return this.intl.translate("common.thankYouTitle",{name:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase?"John":this.donorNameDataPoint.firstName})}get description(){return this.intl.translate("postDonationUpsellScreen.title",{amount:this.intl.formatCurrency(this.viewState.total,{currency:this.viewState.currency,display:"fulltrimzeroes"})})}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.tryStartCollectDatasetPostDonationUpsellAmountExperimentV3(),this.tryToApplyCollectDatasetPostDonationUpsellAmountExperimentV3(),this.produceViewState((e=>{e.total=this.donationDataPoint.total,e.currency=this.donationDataPoint.currency,e.recurringMinAmount=this.postDonationUpsellDataPoint.upsellMinAmount,e.upsellMaxAmount=this.postDonationUpsellDataPoint.upsellMaxAmount,e.amount=this.postDonationUpsellDataPoint.upsellAmount,e.amountInUSD=this.postDonationUpsellDataPoint.upsellAmountInUSD,e.startDate=this.postDonationUpsellDataPoint.upsellStartDate})),this.exposureSmartPostDonationUpsellExperimentV2()}))}makeAmountInputVisible(){this.produceViewState((e=>{e.showAmountInput=!0}))}changeAmount(e){this.checkoutState.postDonationUpsell.setUpsellCustomAmount(e),this.produceViewState((e=>{e.amount=this.postDonationUpsellDataPoint.upsellAmount,e.amountInUSD=this.postDonationUpsellDataPoint.upsellAmountInUSD})),this.validateAmount()}setShowedInSession(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||(this.checkoutState.postDonationUpsell.setShowed(),yield this.checkoutService.updateSession(),yield this.checkoutService.tryCloseSession())}))}validateAmount(){const e=this.postDonationUpsellDataPoint.validateMinAmount(),t=this.postDonationUpsellDataPoint.validateMaxAmount();this.produceViewState((n=>{n.isAmountValid=e&&t,n.errors.min=!e,n.errors.max=!t}))}isAmountValid(){return(0,l.sH)(this,void 0,void 0,(function*(){return!!this.viewState.isAmountValid||(this.produceViewState((e=>{e.shakeKey+=1})),!1)}))}accept(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutService.checkoutConfiguration.infrastructureParams.showcase)return this.leave();if(!this.pending){if(this.pending=!0,yield this.isAmountValid())return(yield this.checkoutService.acceptPostDonationUpsell())?(this.checkoutState.postDonationUpsell.accept(),this.pending=!1,this.leave()):(this.produceViewState((e=>{e.confirmError=!0})),void(this.pending=!1));this.pending=!1}}))}getInitialViewState(){return{locked:!1,total:0,currency:"USD",amount:0,amountInUSD:0,period:oe.MONTHLY,showAmountInput:!1,confirmError:!1,recurringMinAmount:0,upsellMaxAmount:0,startDate:(new Date).toString(),isAmountValid:!0,errors:{min:!1,max:!1},shakeKey:0,isShowcase:!1,flowType:this.checkoutService.type}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get postDonationUpsellDataPoint(){return this.checkoutState.postDonationUpsell.dataPoint}get recurringTypes(){return{[oe.DAILY]:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),[oe.WEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),[oe.BIWEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),[oe.EVERY_4_WEEKS]:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),[oe.MONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),[oe.BIMONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),[oe.QUARTERLY]:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),[oe.SEMIANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),[oe.ANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb")}}get collectDatasetPostDonationUpsellAmountCheckoutExperimentV3(){return this.experiments.get(Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT)}get collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3(){return this.experiments.get(Sn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT)}tryStartCollectDatasetPostDonationUpsellAmountExperimentV3(){this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3.tryStart(),this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3.tryStart()}exposureSmartPostDonationUpsellExperimentV2(){const e=this.experiments.get(Sn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT),t=this.experiments.get(Sn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT);e.exposure(),t.exposure()}tryToApplyCollectDatasetPostDonationUpsellAmountExperimentV3(){let e=null;if(this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3.active&&(e=this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3),this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3.active&&(e=this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3),!e||!this.donationDataPoint.amount||!this.suggestionsService)return;e.exposure();const t=e.getCustomAmount({amount:this.donationDataPoint.amount,minAmount:this.postDonationUpsellDataPoint.upsellMinAmount,currency:this.donationDataPoint.currency,suggestionsService:this.suggestionsService});this.checkoutState.postDonationUpsell.setUpsellCustomAmount(t),e.sendPDUAmountStrategyEvent()}}class NT extends cP{constructor(e){super(e)}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.accountHolderName=this.ukBacsDataPoint.accountHolderName,e.accountNumber=this.ukBacsDataPoint.accountNumber,e.sortCode=this.ukBacsDataPoint.sortCode,e.termsChecked=this.ukBacsDataPoint.termsAccepted,this.checkoutService.getState().paymentErrors[u._h.UK_BACS]&&(e.shakeKey+=1)})),this.checkoutService.getState().paymentErrors[u._h.UK_BACS]&&this.setProcessingState(Pr.ERROR),this.checkoutService.setPaymentError(u._h.UK_BACS,!1)}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0;const e=this.ukBacsDataPoint.validate();return e.isValid?(this.setProcessingState(Pr.PENDING),this.produceViewState((e=>{e.payErrorMessage=""})),this.isPaymentScreen?this.pay():this.hold()):(this.produceViewState((t=>{t.errors.sortCode=!e.fields.sortCode.isValid,t.errors.accountNumber=!e.fields.accountNumber.isValid,t.errors.accountHolderName=!e.fields.accountHolderName.isValid,t.errors.termsChecked=!e.fields.termsAccepted.isValid,t.shakeKey+=1})),this.pending=!1,!1)}))}changeSortCode(e){e.length>6||(this.checkoutState.paymentOptions.setUkBacsSortCode(e),this.produceViewState((e=>{e.errors.sortCode=!1,e.sortCode=this.ukBacsDataPoint.sortCode})))}changeAccountNumber(e){e.length>17||(this.checkoutState.paymentOptions.setUkBacsAccountNumber(e),this.produceViewState((e=>{e.errors.accountNumber=!1,e.accountNumber=this.ukBacsDataPoint.accountNumber})))}changeAccountHolderName(e){this.checkoutState.paymentOptions.setUkBacsAccountHolderName(e),this.produceViewState((e=>{e.errors.accountHolderName=!1,e.accountHolderName=this.ukBacsDataPoint.accountHolderName}))}toggleTermsChecked(){this.checkoutState.paymentOptions.setUkBacsTermsAccepted(!this.ukBacsDataPoint.termsAccepted),this.produceViewState((e=>{e.errors.termsChecked=!1,e.termsChecked=this.ukBacsDataPoint.termsAccepted}))}fillDemoData(e){const t=NT.demoData.sortCode.split(""),n=NT.demoData.accountNumber.split(""),i=NT.demoData.accountHolderName.split(""),s=window.setInterval((()=>{var a,r,o;if(t.length)null===(a=e.sortCode.current)||void 0===a||a.focus(),this.changeSortCode(this.viewState.sortCode+t.shift());else if(n.length)null===(r=e.accountNumber.current)||void 0===r||r.focus(),this.changeAccountNumber(this.viewState.accountNumber+n.shift());else{if(!i.length)return clearInterval(s);null===(o=e.accountHolderName.current)||void 0===o||o.focus(),this.changeAccountHolderName(this.viewState.accountHolderName+i.shift())}}),50);return()=>clearInterval(s)}getInitialViewState(){return{locked:!1,accountNumber:"",sortCode:"",shakeKey:0,accountHolderName:"",termsChecked:!0,errors:{},processingState:Pr.IDLE,livemode:this.checkoutService.checkoutConfiguration.infrastructureParams.livemode,companyName:this.checkoutService.checkoutConfiguration.company.name}}get ukBacsDataPoint(){return this.checkoutState.paymentOptions.ukBacsDataPoint}get isPaymentScreen(){var e,t;return this.checkoutService.isReadyToRetryPay&&(null===(t=null===(e=this.checkoutService.getState())||void 0===e?void 0:e.paymentOptions)||void 0===t?void 0:t.clientPaymentMethod)===u._h.UK_BACS}setProcessingState(e){this.produceViewState((t=>{t.payErrorMessage=this.checkoutService.payErrorMessage,t.processingState=e}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0;const e=yield this.checkoutService.hold();if(sn.isFailure(e))return this.handlePayFailure(e);const t=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isFailure(t)?this.handlePayFailure(t):(this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}handlePayFailure(e){return(0,l.sH)(this,void 0,void 0,(function*(){return e.failureResult.shouldLeave?(this.pending=!1,!0):(yield this.showError(),this.pending=!1,!1)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.withPending((()=>this.checkoutService.hold()));return!sn.isFailure(e)||(yield this.showError(),!1)}))}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Pr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}}NT.demoData={sortCode:"108800",accountNumber:"00012345",accountHolderName:"Michael Smith"};class bT extends cP{constructor(e){super(e)}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t,n,i;e.ukBacs.accountHolderName=this.ukBacsDataPoint.accountHolderName,e.ukBacs.accountNumber=null!==(t=this.ukBacsDataPoint.accountNumber)&&void 0!==t?t:"",e.ukBacs.sortCode=null!==(n=this.ukBacsDataPoint.sortCode)&&void 0!==n?n:"",e.email=this.donorEmailDataPoint.email,e.company.stripe.ukBacsDisplayName=this.checkoutService.checkoutConfiguration.company.stripe.ukBacsDisplayName,e.formattedAmount=this.intl.formatCurrency(null!==(i=this.donationDataPoint.total)&&void 0!==i?i:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Pr.PENDING);const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isSuccess(e)?(this.pending=!1,this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1)}))}getInitialViewState(){return{locked:!1,ukBacs:{sortCode:"",accountHolderName:"",accountNumber:""},email:"",company:{stripe:{ukBacsDisplayName:"Stripe"}},processingState:Pr.IDLE,formattedAmount:"",frequency:oe.MONTHLY}}get ukBacsDataPoint(){return this.checkoutState.paymentOptions.ukBacsDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Pr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")})),this.produceViewState((e=>{e.payErrorMessage=""}),!0)}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class PT extends _i{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(Tn.TEST)}canBeStarted(e){return!!PT.INCLUDED_LOCALES.includes(e.locale)&&!e.isTributeFilled}}PT.INCLUDED_LOCALES=[I.D.EN_US,I.D.EN_GB,I.D.EN_CA];class DT extends cP{constructor(e,t,n){super(n),this.upsellAggregate=e,this.adaptiveFeeCoveringService=t,this.experiments.register(Sn.UPSELL_SCREEN_V_3_EXPERIMENT,PT)}get isLocked(){return!!this.getScreenData().locked||this.viewState.processingState.lowMonthly===Pr.PENDING||this.viewState.processingState.highMonthly===Pr.PENDING}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.startExperiments();const e=this.upsellAggregate.getBeforeEnterViewState();this.produceViewState((t=>{t.currency=e.currency,t.targetFrequency=e.targetFrequency,t.upsell.fromAmount=e.upsell.fromAmount,t.upsell.fromAmountInUSD=e.upsell.fromAmountInUSD,t.lowAmount=e.lowAmount,t.lowAmountInUSD=e.lowAmountInUSD,t.highAmount=e.highAmount,t.highAmountInUSD=e.highAmountInUSD,t.isAnnualTribute=e.isAnnualTribute,t.highButtonText=e.highButtonText,t.lowButtonText=e.lowButtonText,t.screenTitle=e.screenTitle,t.questionText=e.questionText,t.questionShortText=e.questionShortText,t.descriptionText=e.descriptionText,t.experiments.upsellScreenV3=this.isUpsellScreenV3ExperimentEnabled()}))}))}setShowed(){this.checkoutState.preDonationUpsell.setShowed()}confirm(e){return this.upsellAggregate.confirmUpsell(e),this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion(),this.leave({omitBeforeLeave:!0})}getInitialViewState(){return{locked:!1,upsell:{fromAmount:0,fromAmountInUSD:0},currency:"USD",highButtonText:"",lowButtonText:"",highAmount:0,highAmountInUSD:0,lowAmount:0,lowAmountInUSD:0,screenTitle:"",questionText:"",questionShortText:"",descriptionText:"",targetFrequency:oe.MONTHLY,isAnnualTribute:!1,experiments:{upsellScreenV3:!1},processingState:{lowMonthly:Pr.IDLE,highMonthly:Pr.IDLE}}}get upsellScreenV3Experiment(){return this.experiments.get(Sn.UPSELL_SCREEN_V_3_EXPERIMENT)}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}startExperiments(){this.tryStartUpsellScreenV3Experiment()}tryStartUpsellScreenV3Experiment(){this.upsellScreenV3Experiment.tryStart({locale:this.intl.locale,isTributeFilled:this.tributeDataPoint.isFilled})}isUpsellScreenV3ExperimentEnabled(){return this.upsellScreenV3Experiment.isEnabled({locale:this.intl.locale,isTributeFilled:this.tributeDataPoint.isFilled})}performFeeCoveringSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){(yield this.adaptiveFeeCoveringService.tryFetchSuggestion())&&(this.adaptiveFeeCoveringService.tryApplySuggestion(),this.adaptiveFeeCoveringService.tryTrackSuggestion())}))}}class _T extends cP{constructor(e){super(e)}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.routingNumber=this.usBankAccountDataPoint.routingNumber,e.accountNumber=this.usBankAccountDataPoint.accountNumber,e.accountHolderName=this.usBankAccountDataPoint.accountHolderName})),this.hasPaymentError&&this.showError(),this.checkoutService.setPaymentError(u._h.US_BANK_ACCOUNT,!1)}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Pr.PENDING);const e=this.usBankAccountDataPoint.validate();if(!e.isValid)return this.produceViewState((t=>{t.errors.routingNumber=!e.fields.routingNumber.isValid,t.errors.accountNumber=!e.fields.accountNumber.isValid,t.errors.accountHolderName=!e.fields.accountHolderName.isValid,t.shakeKey+=1,t.processingState=Pr.IDLE})),this.pending=!1,!1;const t=yield this.checkoutService.hold();return sn.isSuccess(t)?(this.pending=!1,!0):(this.showError(),this.pending=!1,!1)}))}changeAccountNumber(e){e.length>17||(this.checkoutState.paymentOptions.setUsBankAccountNumber(e),this.produceViewState((e=>{e.errors.accountNumber=!1,e.accountNumber=this.usBankAccountDataPoint.accountNumber})))}changeRoutingNumber(e){e.length>9||(this.checkoutState.paymentOptions.setUsBankAccountRoutingNumber(e),this.produceViewState((e=>{e.errors.routingNumber=!1,e.routingNumber=this.usBankAccountDataPoint.routingNumber})))}changeAccountHolderName(e){this.checkoutState.paymentOptions.setUsBankAccountHolderName(e),this.produceViewState((e=>{e.errors.accountHolderName=!1,e.accountHolderName=this.usBankAccountDataPoint.accountHolderName}))}changeAccountType(e){this.checkoutState.paymentOptions.setUsBankAccountType(e),this.produceViewState((e=>{e.accountType=this.usBankAccountDataPoint.accountType}))}fillDemoData(e){const t=_T.demoData.routingNumber.split(""),n=_T.demoData.accountNumber.split(""),i=_T.demoData.accountHolderName.split(""),s=window.setInterval((()=>{var a,r,o;if(t.length)null===(a=e.routingNumber)||void 0===a||a.focus(),this.changeRoutingNumber(this.viewState.routingNumber+t.shift());else if(n.length)null===(r=e.accountNumber)||void 0===r||r.focus(),this.changeAccountNumber(this.viewState.accountNumber+n.shift());else{if(!i.length)return clearInterval(s);null===(o=e.accountHolderName)||void 0===o||o.focus(),this.changeAccountHolderName(this.viewState.accountHolderName+i.shift())}}),_T.demoDataInterval);return()=>clearInterval(s)}getInitialViewState(){return{locked:!1,routingNumber:"",accountNumber:"",accountHolderName:"",accountType:WA.INDIVIDUAL,shakeKey:0,processingState:Pr.IDLE,errors:{},livemode:this.checkoutService.checkoutConfiguration.infrastructureParams.livemode}}get usBankAccountDataPoint(){return this.checkoutState.paymentOptions.usBankAccountDataPoint}get hasPaymentError(){return this.checkoutService.getState().paymentErrors[u._h.US_BANK_ACCOUNT]}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showError(){this.produceViewState((e=>{e.shakeKey+=1,e.processingState=Pr.ERROR,e.errorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}}_T.demoData={routingNumber:"110000000",accountNumber:"000123456789",accountHolderName:"Michael Smith"},_T.demoDataInterval=50;class TT extends cP{constructor(e){super(e)}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.usBankAccount.accountHolderName=this.usBankAccountDataPoint.accountHolderName||this.donorNameDataPoint.fullName,e.usBankAccount.accountNumberLast4=this.usBankAccountDataPoint.accountNumberLast4,e.usBankAccount.routingNumber=this.usBankAccountDataPoint.routingNumber,e.usBankAccount.financialInstitution=this.usBankAccountDataPoint.financialInstitution,e.isRecurring=this.donationDataPoint.isRecurring}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Pr.PENDING),this.produceViewState((e=>{e.payErrorMessage=""}));const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return sn.isSuccess(e)?(this.pending=!1,this.setProcessingState(Pr.SUCCESS),yield gr(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),!0):(this.pending=!1,!!e.failureResult.shouldLeave||(yield this.showError(),!1))}))}getInitialViewState(){return{locked:!1,usBankAccount:{accountHolderName:"",accountNumberLast4:"",routingNumber:"",financialInstitution:"",agreementDate:this.intl.formatDate(new Date,{type:Ha.LONG_WITH_YEAR})},companyName:this.checkoutService.company.name,processingState:Pr.IDLE,isRecurring:!1}}get usBankAccountDataPoint(){return this.checkoutState.paymentOptions.usBankAccountDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Pr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class xT extends cP{constructor(e,t,n){super(n),this.paymentOptionsDataPoint=e,this.paymentService=t}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.hasPaymentError&&this.showError(),this.checkoutService.setPaymentError(u._h.US_BANK_ACCOUNT,!1)}))}authorizeToBank(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return;this.pending=!0,this.setProcessingState(Pr.PENDING),this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Fy.US_BANK_ACCOUNT_INSTANT),yield this.paymentService.initiateUSBankAccount({onPopupOpen:null==e?void 0:e.onModalShow,onPopupClose:null==e?void 0:e.onModalHide,verificationType:"instant"});const t=yield this.paymentService.startUSBankAccount();if(sn.isSuccess(t))return this.setProcessingState(Pr.IDLE),this.pending=!1,this.leave();const n=t.failureResult.message;n?this.showError(n):this.setProcessingState(Pr.IDLE),this.pending=!1}))}fillDetailsManually(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.pending)return this.pending=!0,this.setProcessingState(Pr.PENDING),this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Fy.US_BANK_ACCOUNT_VERIFICATION),yield this.paymentService.initiateUSBankAccount({}),this.pending=!1,this.setProcessingState(Pr.IDLE),this.leave({omitBeforeLeave:!0})}))}getInitialViewState(){return{test:1,processingState:Pr.IDLE,loginToBankError:"",locked:!1}}get hasPaymentError(){return this.checkoutService.getState().paymentErrors[u._h.US_BANK_ACCOUNT]}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showError(e){this.produceViewState((t=>{t.processingState=Pr.ERROR,t.loginToBankError=e||this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}}class OT extends cP{constructor(e){super(e)}get amountExample(){return`+${this.intl.formatCurrency(0,{currency:"USD"}).replace("00","xx")}`}get descriptorCodeExample(){return{prefix:"SM",amount:`+${this.intl.formatCurrency(1,{currency:"USD"})}`}}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.statementDescriptor=this.statementDescriptor,e.verificationType=this.verificationType}))}))}getInitialViewState(){return{locked:!1,statementDescriptor:"",verificationType:"amounts"}}get usBankAccountDataPoint(){return this.checkoutState.paymentOptions.usBankAccountDataPoint}get verificationType(){const e=this.usBankAccountDataPoint.verificationType;if(!e)throw new Error("Verification type is not defined");return e}get statementDescriptor(){switch(this.usBankAccountDataPoint.verificationType){case"descriptor_code":return this.checkoutService.company.name;case"amounts":return"ACCTVERIFY";default:return""}}}const kT={[cn.US_BANK_ACCOUNT]:class extends _T{},[cn.US_BANK_ACCOUNT_DONATE_OPTIONS]:class extends xT{},[cn.US_BANK_ACCOUNT_CONFIRMATION]:class extends TT{},[cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:class extends OT{},[cn.AU_BECS]:class extends sT{},[cn.DONATE]:class extends lT{},[cn.DOUBLE]:class extends hT{},[cn.GIFT_AID]:class extends pT{},[cn.PAYMENT_OPTIONS]:class extends CT{},[cn.POST_DONATION_UPSELL]:class extends vT{},[cn.SEPA]:class extends mT{},[cn.IDEAL_CONFIRMATION]:class extends gT{},[cn.UK_BACS]:class extends NT{},[cn.UK_BACS_CONFIRMATION]:class extends bT{},[cn.UPSELL]:class extends DT{},[cn.COMMUNICATION_CONSENT]:class extends rT{},[Ar.QUESTIONS]:class extends gP{},[Ar.COMMENT]:class extends uP{},[Ar.MAILING_ADDRESS]:class extends mP{},[Ar.PRIVACY]:class extends pP{},[Ar.THANK_YOU]:class extends fP{},[Ar.REMIND_ME]:yP,[Ar.BLOCKED]:class extends lP{}};class IT{static isDonateScreenController(e,t){return t===cn.DONATE}static isPaymentOptionScreenController(e,t){return t===cn.PAYMENT_OPTIONS}static isDoubleDonationScreenController(e,t){return t===cn.DOUBLE}static isGiftAidScreenController(e,t){return t===cn.GIFT_AID}static isUSBankAccountScreenController(e,t){return t===cn.US_BANK_ACCOUNT}static isUSBankAccountDonateOptionsScreenController(e,t){return t===cn.US_BANK_ACCOUNT_DONATE_OPTIONS}static isUSBankAccountConfirmationScreenController(e,t){return t===cn.US_BANK_ACCOUNT_CONFIRMATION}static isUSBankAccountVerificationGuideScreenController(e,t){return t===cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE}static isIDEALConfirmationScreenController(e,t){return t===cn.IDEAL_CONFIRMATION}static isSepaConversionScreenController(e,t){return t===cn.SEPA}static isPostDonationUpsellScreenController(e,t){return t===cn.POST_DONATION_UPSELL}static isUKBacsScreenController(e,t){return t===cn.UK_BACS}static isUKBacsConfirmationScreenController(e,t){return t===cn.UK_BACS_CONFIRMATION}static isUpsellScreenController(e,t){return t===cn.UPSELL}static isAUBecsScreenController(e,t){return t===cn.AU_BECS}static isThankYouScreenController(e,t){return t===Ar.THANK_YOU}static isMailingAddressScreenController(e,t){return t===Ar.MAILING_ADDRESS}static isBlockedScreenController(e,t){return t===Ar.BLOCKED}static isCommunicationConsentScreenController(e,t){return t===cn.COMMUNICATION_CONSENT}constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.checkoutService=e,this.checkoutState=t,this.paymentService=n,this.intl=i,this.debug=s,this.sentry=a,this.subscriptionPeriodLabelsService=r,this.mailingAddressCustomization=o,this.currencyService=c,this.suggestionsService=l,this.experiments=u,this.adaptivePreDonationUpsellSuggestionsService=d,this.feeCoveringSuggestions=h}create(e,t){const n=kT[e],i={name:e,flow:t,checkoutService:this.checkoutService,checkoutState:this.checkoutState,debug:this.debug,intl:this.intl,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,currencyService:this.currencyService,experiments:this.experiments};return IT.isDonateScreenController(n,e)?new n(Object.assign(Object.assign({},i),{designationDataPoint:this.checkoutService.getDataPoint(Nr.DESIGNATION),preDonationUpsellDataPoint:this.checkoutService.getDataPoint(YC.PRE_DONATION_UPSELL),adaptivePreDonationUpsellSuggestionsService:this.adaptivePreDonationUpsellSuggestionsService}),this.upsellAggregate,this.feeCoveringSuggestions):IT.isPaymentOptionScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService,paymentOptionsDataPoint:this.checkoutService.getDataPoint(YC.PAYMENT_OPTIONS),mailingAddressDataPoint:this.checkoutService.getDataPoint(Nr.MAILING_ADDRESS)})):IT.isAUBecsScreenController(n,e)||IT.isSepaConversionScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService})):IT.isDoubleDonationScreenController(n,e)||IT.isGiftAidScreenController(n,e)?new n(Object.assign({},i)):IT.isUSBankAccountScreenController(n,e)?new n(i):IT.isUSBankAccountDonateOptionsScreenController(n,e)?new n(this.checkoutService.getDataPoint(YC.PAYMENT_OPTIONS),this.paymentService,i):IT.isUSBankAccountConfirmationScreenController(n,e)||IT.isUSBankAccountVerificationGuideScreenController(n,e)?new n(i):IT.isIDEALConfirmationScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService})):IT.isPostDonationUpsellScreenController(n,e)?new n(Object.assign(Object.assign({},i),{suggestionsService:this.suggestionsService})):IT.isUKBacsScreenController(n,e)||IT.isUKBacsConfirmationScreenController(n,e)?new n(Object.assign({},i)):IT.isUpsellScreenController(n,e)?new n(this.upsellAggregate,this.feeCoveringSuggestions,i):IT.isThankYouScreenController(n,e)?new n(this.redirectApi,this.sharingApi,i):IT.isMailingAddressScreenController(n,e)?new n(this.countriesService,this.mailingAddressCustomization,this.sentry,i):IT.isBlockedScreenController(n,e)?new n(i):IT.isCommunicationConsentScreenController(n,e)?new n(this.checkoutService.getDataPoint(Nr.COMMUNICATION_CONSENT),i):new n(i)}get redirectApi(){return this.checkoutService.redirectApi}get sharingApi(){return this._sharingApi||(this._sharingApi=rP({checkoutType:this.checkoutService.checkoutConfiguration.checkoutType,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,campaignConfig:this.checkoutService.campaignConfig})),this._sharingApi}get countriesService(){return this._countriesService||(this._countriesService=(0,Bv.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutService.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})),this._countriesService}get upsellAggregate(){return this._upsellAggregate||(this._upsellAggregate=new iT(this.checkoutState,this.intl,this.checkoutService.getDataPoint(YC.PRE_DONATION_UPSELL))),this._upsellAggregate}}function wT(e){return Object.values(e).filter((e=>e.enabled)).length>1}class RT extends vP{constructor(e){super({checkoutConfiguration:e.checkoutConfiguration,isValidScreen:e.isValidScreen}),this.options=e}getInitialScreen(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.isCompanyBlocked())return Ar.BLOCKED;const e=this.getCustomExternalConfigScreen();return void 0!==e?e:this.canSkipDefaultScreen()?(yield this.shouldShowPreDonationUpsell())?cn.UPSELL:Ar.PRIVACY:cn.DONATE}))}get isAmountsValid(){return function(e,t,n){var i,s,a,r;let o=null===(i=e.checkoutData)||void 0===i?void 0:i.recurring;const c=!wT(t.frequencies);!o&&c&&(o=Se.getDefaultFrequencyWithOverride(t.frequencies,null));const l=gt.format({amount:null===(s=e.queryParams)||void 0===s?void 0:s.amount}),u=n.getDigits(t.defaultCurrency),d=Math.ceil((l.amount||0)*Math.pow(10,u)),h=(null===(a=e.checkoutData)||void 0===a?void 0:a.amount)||d,m=(null===(r=e.checkoutData)||void 0===r?void 0:r.currency)||t.defaultCurrency;if(!o||!h||!m)return!1;const p=t.frequencies[o].minAmount,g=uN.convertMinAmount(n,p||0,t.defaultCurrency,m),y=h.toString().length>(0,jh.Bm)(m);return!(h<g||y)}(this.options.checkoutConfiguration.externalConfig,this.options.checkoutConfiguration.campaign.config,this.options.currencyService)}isCompanyBlocked(){return Boolean(this.options.checkoutConfiguration.company.blockedAt)}canSkipDefaultScreen(){return function(e){var t,n,i,s,a,r,o,c,l,u,d;const h=e.campaign.config,m=e.externalConfig,p=null===(t=m.queryParams)||void 0===t?void 0:t.tributeHonoree,g=h.tribute.show,y=(null===(i=null===(n=m.checkoutData)||void 0===n?void 0:n.tribute)||void 0===i?void 0:i.inHonorOf)||p,f=null===(a=null===(s=m.checkoutData)||void 0===s?void 0:s.tribute)||void 0===a?void 0:a.type,S=h.showComment,E=!1!==(null===(r=m.checkoutData)||void 0===r?void 0:r.modifyAmount)&&"no"!==(null===(o=m.queryParams)||void 0===o?void 0:o.modifyAmount),A=!1!==(null===(c=m.checkoutData)||void 0===c?void 0:c.modifyDesignation)&&"no"!==(null===(l=m.queryParams)||void 0===l?void 0:l.modifyDesignation),C=h.frequencies,v=h.displayGoal!==Oe.WITHOUT&&h.goals.length>1,N=!!(null===(u=m.checkoutData)||void 0===u?void 0:u.showEndDate),b=[re.DONATION_FORM,re.SIMPLE_FORM,re.BUTTON_GROUP,re.IMPACT_SLIDER],P=e.element.type;if(!P)return!1;const D=P===re.DONATION_FORM,_=E&&!b.includes(P),T=A&&!D,x=wT(C),O=!D&&x,k=!!p||!!y&&f!==$C.NONE,I=!!p||!y&&f===$C.NONE,w=D?k||I:!g,R=(null===(d=m.checkoutData)||void 0===d?void 0:d.recurring)&&C[m.checkoutData.recurring].hasEndDate&&!N;return w&&!S&&!(T&&v)&&!_&&!O&&!R}(this.options.checkoutConfiguration)&&this.isAmountsValid}shouldShowPreDonationUpsell(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.options.adaptivePreDonationUpsellSuggestionsService.resetSuggestionApplication(),(yield this.options.adaptivePreDonationUpsellSuggestionsService.tryFetchSuggestion())&&this.options.adaptivePreDonationUpsellSuggestionsService.tryApplySuggestion(),this.options.preDonationUpsellDataPoint.isEnabled}))}}class MT{constructor(e,t){this.checkoutState=e,this.params=t}get(e,t){const n=this.checkoutState.get();switch(n.paymentOptions.clientPaymentMethod){case eb._h.UK_BACS:return this.params.screenSet.ukBacsConfirmation;case eb._h.US_BANK_ACCOUNT:return this.params.screenSet.usBankAccountConfirmation;case eb._h.IDEAL:return this.params.screenSet.idealConfirmation;case eb._h.CARD:return this.params.screenSet.paymentOptions;case eb._h.AU_BECS:return this.params.screenSet.auBecs;case eb._h.SEPA:return this.getScreenForSepaPaymentMethod(n,e,t);case eb._h.ACSS:case eb._h.APPLE_PAY:case eb._h.GOOGLE_PAY:case eb._h.VENMO:case eb._h.PAYPAL:default:return this.params.screenSet.paymentOptions}}getScreenForSepaPaymentMethod(e,t,n){const i=t===this.params.screenSet.sepa,s=t===this.params.screenSet.mailingAddress,a=n.includes(this.params.screenSet.mailingAddress),r=e.mailingAddress;return i&&r.isRequired&&!a||s&&r.isRequired?this.params.screenSet.mailingAddress:this.params.screenSet.sepa}}const LT=(e,t,n)=>{if(e.paymentOptions.clientPaymentMethod!==t)throw new Error(`Can not move to ${n} screen if "clientPaymentMethod" is not "${t}"`);return!1},UT=e=>e.every(Boolean),FT=e=>e.some(Boolean),jT=(e,t)=>UT([!t.has(cn.DOUBLE),e.doubleDonation.isEnabled,FT([e.isPaid,UT([e.doubleDonation.isIntegrationEnabled,e.donation.amountInUsd<2500])])]),BT=(e,t)=>UT([!t.has(cn.GIFT_AID),e.giftAid.isEnabled]),HT=(e,t)=>UT([!t.has(Ar.MAILING_ADDRESS),e.mailingAddress.isEnabled,FT([UT([e.isPaid,!e.mailingAddress.isRequired]),UT([!e.isPaid,e.mailingAddress.isRequired])])]),qT=e=>UT([!e.isPaid]),GT=e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.UK_BACS]),VT=e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT,e.paymentOptions.selectedPaymentOption===Fy.US_BANK_ACCOUNT_VERIFICATION]),KT=e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT]),YT=e=>UT([e.postDonationUpsell.isEnabled]),zT=cn.DONATE;function WT(e,t){switch(!0){case((e,t)=>UT([!t.has(cn.COMMUNICATION_CONSENT),e.communicationConsent.isCustomizedEnabled,FT([!e.mailingAddress.isEnabled,t.has(Ar.MAILING_ADDRESS)])]))(e,t):return cn.COMMUNICATION_CONSENT;case jT(e,t):return cn.DOUBLE;case HT(e,t):return Ar.MAILING_ADDRESS;case(e=>UT([e.questions.isEnabled]))(e):return Ar.QUESTIONS;case YT(e):return cn.POST_DONATION_UPSELL;default:return Ar.THANK_YOU}}const $T=PP([cn.US_BANK_ACCOUNT,cn.US_BANK_ACCOUNT_DONATE_OPTIONS,cn.US_BANK_ACCOUNT_CONFIRMATION,cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE,cn.AU_BECS,cn.DONATE,cn.DOUBLE,cn.GIFT_AID,cn.PAYMENT_OPTIONS,cn.POST_DONATION_UPSELL,cn.SEPA,cn.IDEAL_CONFIRMATION,cn.UK_BACS,cn.UK_BACS_CONFIRMATION,cn.UPSELL,cn.COMMUNICATION_CONSENT,Ar.QUESTIONS,Ar.COMMENT,Ar.MAILING_ADDRESS,Ar.PRIVACY,Ar.THANK_YOU,Ar.REMIND_ME,Ar.BLOCKED]),XT={[Ae.MONEY]:function(e){let{checkoutConfiguration:t,intl:n,tracker:i,debug:s,currencyService:a,suggestionsService:r,targetWindow:o,globalWindow:c,sentry:l,paymentMethods:d,stripeLoadingPromise:h,applePayStripeLoadingPromise:m,subscriptionPeriodLabelsService:p,userSession:g,addressService:y,eventEmitter:f,checkoutAPIBridge:S,experiments:E,logger:A,stripe:C,requestService:v,mailingAddressModule:N,paymentMethodAvailabilityManagerRepository:b,mailingAddressCustomization:P,adaptiveDefaultFrequencyFetcher:D,adaptiveAmountPresetsFetcher:_}=e;const T=new KC(Rv.SESSION_UPDATE_DEBOUNCE),x=new P_(i,t,l,T,v),O=new fb(x,a,r),k=new M_(x),I=new mb(t,a,y,r,n,g,x,E,i,l,P,{flowType:Ae.MONEY},O),w=new pb(I),R=function(e,t,n,i,s,a,r,o){const c=function(e,t,n,i,s,a){const r=function(e){return new VD(e)}(a),o=function(e,t,n,i){const s=new YD(e,t,i),a=new WD(e,t,n,i);return new zD(e,i,s,a)}(e,t,n,a),c=function(e,t){const n=new $D(e,t),i=new XD(t);return new QD(t,n,i)}(e,a),l=function(e,t){const n=new ZD(e,t);return new JD(t,n)}(e,a),u=function(e,t,n,i,s){const a=new e_(e,t,n,i,s);return new t_(s,a)}(e,t,i,s,a),d=function(e,t,n){const i=new i_(e,n),s=new s_(t,n);return new a_(n,i,s)}(e,n,a),h=function(e,t,n){const i=new l_(e,t,n);return new o_(n,i)}(e,s,a),m=function(e,t){return new u_(e,t)}(e,a);return new r_(r,o,c,l,u,d,h,m)}(e,t,n,i,s,r),l=[r,c],u=new d_(...l),d=new h_(...l),h=new m_(...l),m=new S_(...l),p=new p_(...l),g=new y_(...l),y=new g_(...l),f=new f_(...l),S=new N_(...l),E=new b_(...l),A=new E_(...l),C=new A_(...l),v=new C_(...l),N=new v_(...l);return new Sb(u,d,h,m,A,p,y,g,f,S,E,C,v,N,c,a,e,r,o)}(t,a,r,N,b,s,w,E),M=new k_(R,w,t,x),L=new MT(R,{screenSet:{usBankAccountConfirmation:cn.US_BANK_ACCOUNT_CONFIRMATION,ukBacsConfirmation:cn.UK_BACS_CONFIRMATION,idealConfirmation:cn.IDEAL_CONFIRMATION,mailingAddress:Ar.MAILING_ADDRESS,auBecs:cn.AU_BECS,sepa:cn.SEPA,paymentOptions:cn.PAYMENT_OPTIONS}}),U=Db(t.campaign.config),F=new gb(x),j=new R_(x),B=function(e,t){return new L_(e,t,{screens:{firstScreen:U_,unrestrictedExitScreens:K_,finalUnavailableScreens:z_,mobileExitScreens:Y_,alwaysRenderedScreens:j_,screensWithoutTributeBadge:B_,mobileScreensWithoutAskTitle:W_,mobileScreensWithAskText:H_,mobileScreensWithoutFaqLinks:$_,mobileScreensWithoutAskPage:X_,screensWithoutAskOverlay:q_,canNotGoBackScreens:F_,conditionallyShowCloseButtonScreens:V_,alwaysShowCloseButtonScreens:G_.concat(cn.POST_DONATION_UPSELL)}})}(U,R),H=new cD(l,n,b,{stripe:{elementStyles:C.elementStyles,elementClasses:C.elementClasses}}),q=new w_(t,R,H,w,x,M,a,n,d,o,h,m,{stripe:{elementsOptions:C.elementsOptions}}),G=new Eb(c,t,a,R),V=new AD(x),K=new bD(R,t,i,n,V,a,r),Y=new GD(w,t,R,M,x,q,B,i,a,n,o,l,H,L,f,S,s,E,F,j,A,G,O,k,r,K,{screenSet:{thankYou:Ar.THANK_YOU}}),z=new _D(x),W=E.get(Sn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT),$=new TD({adaptivePreDonationUpsellSuggestionsFetcher:z,checkoutConfiguration:t,checkoutState:R,currencyService:a,suggestionsService:r,preDonationUpsellDataPoint:w.getDataPoint(YC.PRE_DONATION_UPSELL),intl:n,tracker:i,shouldRequestUpsellAmounts:W.isTestGroup}),X=new gD(x),Q=new fD(t,R,i,X,a,n);if(!D)throw new Error("adaptiveDefaultFrequencyFetcher is required");const Z=qC(new IT(Y,R,q,n,s,l,p,P,a,r,E,$,Q),{initial:()=>zT,screens:{[cn.DONATE]:{next:(e,t)=>{const n=e();switch(!0){case(e=>UT([e.comment.isEnabled,e.comment.isRequired]))(n):return Ar.COMMENT;case(e=>UT([e.preDonationUpsell.isEnabled,!e.preDonationUpsell.upsellCurtainUsed]))(n):return cn.UPSELL;default:return Ar.PRIVACY}}},[Ar.COMMENT]:{next:()=>cn.DONATE},[cn.UPSELL]:{next:()=>Ar.PRIVACY},[Ar.PRIVACY]:{next:(e,t)=>{const n=e();switch(!0){case jT(n,t):return cn.DOUBLE;case BT(n,t):return cn.GIFT_AID;case HT(n,t):return Ar.MAILING_ADDRESS;default:return cn.PAYMENT_OPTIONS}}},[cn.DOUBLE]:{next:(e,t)=>{const n=e();switch(!0){case BT(n,t):return cn.GIFT_AID;case HT(n,t):return Ar.MAILING_ADDRESS;case qT(n):return cn.PAYMENT_OPTIONS;default:return WT(n,t)}}},[cn.GIFT_AID]:{next:(e,t)=>{const n=e();return!0===HT(n,t)?Ar.MAILING_ADDRESS:cn.PAYMENT_OPTIONS}},[Ar.MAILING_ADDRESS]:{mandatory:e=>{return t=e(),UT([t.hasPaymentAttempt,t.hasMailingAddressError]);var t},next:(e,t)=>{const n=e();switch(!0){case GT(n):return cn.UK_BACS_CONFIRMATION;case KT(n):return cn.US_BANK_ACCOUNT_CONFIRMATION;case(e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.IDEAL]))(n):return cn.IDEAL_CONFIRMATION;case qT(n):return cn.PAYMENT_OPTIONS;default:return WT(n,t)}}},[cn.PAYMENT_OPTIONS]:{mandatory:e=>{return t=e(),FT([UT([t.hasPaymentAttempt,t.paymentErrors[u._h.PAYPAL]]),UT([t.hasPaymentAttempt,t.paymentErrors[u._h.CARD],t.paymentOptions.preSelectedPaymentOption===Fy.CARD]),UT([t.hasPaymentAttempt,t.paymentErrors[u._h.US_BANK_ACCOUNT],t.paymentOptions.selectedPaymentOption===Fy.US_BANK_ACCOUNT_INSTANT,!t.paymentOptions.usBankAccountVerificationSetup.isInstantAndAbav])]);var t},next:(e,t)=>{const n=e();switch((e=>{const t=e.paymentOptions.clientPaymentMethod,n=e.paymentOptions.selectedPaymentOption;if(!t&&!n)throw new Error('"clientPaymentMethod" and "selectedPaymentOption" can not be null at the same time')})(n),!0){case(e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.AU_BECS]))(n):return cn.AU_BECS;case(e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.UK_BACS]))(n):return cn.UK_BACS;case(e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.SEPA]))(n):return cn.SEPA;case(e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.IDEAL]))(n):return cn.IDEAL_CONFIRMATION;case(e=>UT([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT,FT([e.paymentOptions.selectedPaymentOption===Fy.US_BANK_ACCOUNT,UT([e.paymentOptions.selectedPaymentOption===Fy.US_BANK_ACCOUNT_INSTANT,e.paymentErrors[u._h.US_BANK_ACCOUNT]])])]))(n):return cn.US_BANK_ACCOUNT_DONATE_OPTIONS;case VT(n):return cn.US_BANK_ACCOUNT;case KT(n):return cn.US_BANK_ACCOUNT_CONFIRMATION;default:return WT(n,t)}}},[cn.AU_BECS]:{guard:e=>LT(e(),u._h.AU_BECS,cn.AU_BECS),next:(e,t)=>WT(e(),t)},[cn.SEPA]:{guard:e=>LT(e(),u._h.SEPA,cn.SEPA),next:(e,t)=>{const n=e();return!0===(!n.isPaid&&HT(n,t))?Ar.MAILING_ADDRESS:WT(n,t)}},[cn.UK_BACS]:{mandatory:e=>{return t=e(),UT([t.hasPaymentAttempt,t.paymentErrors[u._h.UK_BACS]]);var t},guard:e=>LT(e(),u._h.UK_BACS,cn.UK_BACS),next:(e,t)=>{const n=e();switch(!0){case HT(n,t):return Ar.MAILING_ADDRESS;case GT(n):return cn.UK_BACS_CONFIRMATION;default:return WT(n,t)}}},[cn.UK_BACS_CONFIRMATION]:{guard:e=>LT(e(),u._h.UK_BACS,cn.UK_BACS_CONFIRMATION),next:(e,t)=>WT(e(),t)},[cn.IDEAL_CONFIRMATION]:{guard:e=>LT(e(),u._h.IDEAL,cn.IDEAL_CONFIRMATION),next:(e,t)=>WT(e(),t)},[cn.US_BANK_ACCOUNT_DONATE_OPTIONS]:{mandatory:e=>{return t=e(),UT([t.hasPaymentAttempt,t.paymentErrors[u._h.US_BANK_ACCOUNT],t.paymentOptions.selectedPaymentOption===Fy.US_BANK_ACCOUNT_INSTANT,t.paymentOptions.usBankAccountVerificationSetup.isInstantAndAbav]);var t},guard:e=>LT(e(),u._h.US_BANK_ACCOUNT,cn.US_BANK_ACCOUNT_DONATE_OPTIONS),next:(e,t)=>{const n=e();return!0===VT(n)?cn.US_BANK_ACCOUNT:cn.US_BANK_ACCOUNT_CONFIRMATION}},[cn.US_BANK_ACCOUNT]:{mandatory:e=>{return t=e(),UT([t.hasPaymentAttempt,t.paymentErrors[u._h.US_BANK_ACCOUNT],t.paymentOptions.selectedPaymentOption===Fy.US_BANK_ACCOUNT_VERIFICATION]);var t},guard:e=>LT(e(),u._h.US_BANK_ACCOUNT,cn.US_BANK_ACCOUNT),next:()=>cn.US_BANK_ACCOUNT_CONFIRMATION},[cn.US_BANK_ACCOUNT_CONFIRMATION]:{guard:e=>LT(e(),u._h.US_BANK_ACCOUNT,cn.US_BANK_ACCOUNT_CONFIRMATION),next:(e,t)=>{const n=e();return!0===(e=>UT([e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT,e.paymentOptions.usBankAccountVerificationSetup.isMicroDepositOnly]))(n)?cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE:WT(n,t)}},[cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:{guard:e=>LT(e(),u._h.US_BANK_ACCOUNT,cn.US_BANK_ACCOUNT_VERIFICATION_GUIDE),next:(e,t)=>WT(e(),t)},[cn.COMMUNICATION_CONSENT]:{next:(e,t)=>WT(e(),t)},[Ar.QUESTIONS]:{next:(e,t)=>{const n=e();return!0===YT(n)?cn.POST_DONATION_UPSELL:Ar.THANK_YOU}},[cn.POST_DONATION_UPSELL]:{next:()=>Ar.THANK_YOU},[Ar.THANK_YOU]:{},[Ar.BLOCKED]:{},[Ar.REMIND_ME]:{guard:e=>!e().remindMeLater.show,final:!0}}},R.get.bind(R)),J=new RT({checkoutConfiguration:t,currencyService:a,isValidScreen:$T,preDonationUpsellDataPoint:w.getDataPoint(YC.PRE_DONATION_UPSELL),adaptivePreDonationUpsellSuggestionsService:$}),ee=E.get(Sn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT),te=new hD(t,a,R,i,D,{version:ee.isTestGroup?dD.V2:dD.V1});if(!_)throw new Error("adaptiveAmountPresetsFetcher is required");const ne=new uD(Y,R,t,a,r,_);return{checkoutService:Y,formFlow:Z,initialScreenDecider:J,adaptiveSuggestionsService:new SD(te,ne,$,(()=>ee.tryExpose()))}},[Ae.CRYPTO]:function(e){let{checkoutConfiguration:t,intl:n,tracker:i,debug:s,currencyService:a,suggestionsService:r,targetWindow:o,globalWindow:c,sentry:l,subscriptionPeriodLabelsService:u,userSession:d,addressService:h,eventEmitter:m,checkoutAPIBridge:p,experiments:g,logger:y,requestService:f,mailingAddressModule:S,paymentMethodAvailabilityManagerRepository:E,mailingAddressCustomization:A}=e;const C=new KC(Rv.SESSION_UPDATE_DEBOUNCE),v=new Mv(i,t,l,C,f),N=new fb(v,a,r),b=new mb(t,a,h,r,n,d,v,g,i,l,A,{flowType:Ae.CRYPTO},N),P=new pb(b),D=function(e,t,n,i,s){const a=function(e,t,n,i){const s=function(e){return new cv(e)}(i),a=function(e,t,n,i){const s=new dv(e,t,n,i);return new hv(i,s)}(e,t,n,i);return new uv(s,a)}(e,t,n,s),r=[s,a],o=new gv(...r),c=new fv(...r),l=new Ev(...r),u=new _v(...r),d=new Cv(...r),h=new Nv(...r),m=new Pv(...r),p=new xv(...r),g=new kv(...r);return new av(o,c,l,u,d,h,m,p,g,a,i,e,s)}(t,S,E,s,P),_=new jv(D,P,t,v),T=new Iv(D,{screenSet:{mailingAddress:Ar.MAILING_ADDRESS,privacy:Ar.PRIVACY}}),x=Db(t.campaign.config),O=new gb(v),k=function(e,t){return new Tb(e,t,{screens:{firstScreen:Fb,unrestrictedExitScreens:Kb,mobileExitScreens:$b,alwaysRenderedScreens:Xb,screensWithoutTributeBadge:jb,mobileScreensWithoutAskTitle:Wb,mobileScreensWithAskText:Bb,mobileScreensWithoutFaqLinks:Yb,mobileScreensWithoutAskPage:zb,screensWithoutAskOverlay:Hb,canNotGoBackScreens:Vb,alwaysShowCloseButtonScreens:qb,conditionallyShowCloseButtonScreens:Gb}})}(x,D),I=new Eb(c,t,a,D),w=new iv(P,t,D,k,_,v,i,a,n,o,l,T,m,p,s,g,O,y,I,{screenSet:{thankYou:Ar.THANK_YOU}});return{checkoutService:w,formFlow:qC(new CP(w,D,n,s,l,a,u,A,g),{initial:()=>bP,screens:{[Cr.CRYPTO_CURRENCY]:{next:e=>e().comment.isRequired?Ar.COMMENT:Ar.PRIVACY},[Ar.COMMENT]:{next:()=>Cr.CRYPTO_CURRENCY},[Ar.PRIVACY]:{next:e=>e().mailingAddress.isEnabled?Ar.MAILING_ADDRESS:Cr.CRYPTO_WALLET},[Ar.MAILING_ADDRESS]:{next:()=>Cr.CRYPTO_WALLET},[Cr.CRYPTO_WALLET]:{next:e=>e().questions.isEnabled?Ar.QUESTIONS:Ar.THANK_YOU},[Ar.QUESTIONS]:{next:()=>Ar.THANK_YOU},[Ar.THANK_YOU]:{},[Ar.BLOCKED]:{}}},D.get.bind(D)),initialScreenDecider:new NP({checkoutConfiguration:t,isValidScreen:DP}),adaptiveSuggestionsService:null}},[Ae.STOCK]:function(){throw new Error("Stock flow is not supported")}};function QT(e,t,i,s,a,r,o){return(0,l.sH)(this,void 0,void 0,(function*(){var c,u,d;const h=t.createInstance("Checkout");h.log("checkoutCreateParams",r);const g=yield LC(r,o),f=A("#root",g),S=C(g),E=null===(c=r.infrastructureQueryParams)||void 0===c?void 0:c._fundraiseup_country;if(!r.livemode&&E){const e=yield function(e){return(0,l.sH)(this,void 0,void 0,(function*(){return function(e,t){const n=e[t];return{location:{countryCode:t,city:"TEST_PANEL",country:"TEST_PANEL"},langCurrencies:n||["USD"],countryCurrencies:n||["USD"]}}((yield Promise.resolve().then(n.t.bind(n,4601,19))).default,e)}))}(E);r.resolvedConfig.config.currencies.countryCurrencies=e.countryCurrencies,r.resolvedConfig.config.currencies.langCurrencies=e.langCurrencies,r.resolvedConfig.user.address.countryCode=E}(null===(u=r.infrastructureQueryParams)||void 0===u?void 0:u.checkoutIntent)&&(r.externalConfig.checkoutIntent=function(e){var t,n,i,s,a,r,o,c,l,u,d,h,m,p;if(e)try{const g=JSON.parse(function(e){try{return Buffer.from(e,"base64").toString()}catch(t){return atob(e)}}(e));return{flowType:g.flowType,donation:g.donation?{amount:null===(t=g.donation)||void 0===t?void 0:t.amount,currency:null===(n=g.donation)||void 0===n?void 0:n.currency,recurring:null===(i=g.donation)||void 0===i?void 0:i.recurring,frequency:null===(s=g.donation)||void 0===s?void 0:s.frequency,selectedHintId:null===(a=g.donation)||void 0===a?void 0:a.selectedHintId}:void 0,supporter:g.supporter?{firstName:null===(r=g.supporter)||void 0===r?void 0:r.firstName,lastName:null===(o=g.supporter)||void 0===o?void 0:o.lastName,email:null===(c=g.supporter)||void 0===c?void 0:c.email}:void 0,campaign:g.campaign?{id:g.campaign.id}:void 0,element:g.element?{key:null===(l=g.element)||void 0===l?void 0:l.key,type:null===(u=g.element)||void 0===u?void 0:u.type}:void 0,comment:g.comment,tribute:g.tribute,checkoutSettings:g.checkoutSettings?{designation:null===(d=g.checkoutSettings)||void 0===d?void 0:d.designation,customFields:null===(h=g.checkoutSettings)||void 0===h?void 0:h.customFields,modifyAmount:null===(m=g.checkoutSettings)||void 0===m?void 0:m.modifyAmount,modifyDesignation:null===(p=g.checkoutSettings)||void 0===p?void 0:p.modifyDesignation}:void 0,fundraisingPage:g.fundraisingPage?{key:g.fundraisingPage.key,customerKey:g.fundraisingPage.customerKey}:void 0,feeCovered:g.feeCovered}}catch(e){return}}(r.infrastructureQueryParams.checkoutIntent));const v=new m.A,b=new Ao(e,h,i,v,S.target,S.global,r,XT,o,a),P=new _C(f,g,v,b.sentryInstance,h,b);yield g.waitUntilFontsLoaded(),s.on(y.CHECKOUT_OPEN,(()=>{g.onShow()}));const D=new p(S.global),_=new N(P,b,D);return yield b.run(),_.initialize(),g.configure({locale:b.intl.locale,styles:yield UC(b.intl.language),localizedTitle:b.intl.translate("iframe.title")}),yield P.onHide((e=>{_.destroy(e),h.log("Closed")})).open(),D.hideAll(),h.log("Opened"),b.logger.checkoutOpen({key:b.checkoutConfiguration.campaign.key,name:b.checkoutConfiguration.campaign.name},b.checkoutAPIBridge.getOpenParams()),r.steplessCheckoutExperimentVariant&&b.trackerCheckout.customTrack({type:"testGroupExposed",data:{experimentId:Nn[Sn.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT],variantName:r.steplessCheckoutExperimentVariant,exclusion:null!==(d=r.steplessCheckoutExperimentExcluded)&&void 0!==d&&d}}),_}))}var ZT=n(8093);class JT{constructor(e){this.errorsStack=[],this.sentry=null,e.forceOff||(e.sentry?this.sentry=e.sentry:Promise.all([n.e(472),n.e(326)]).then(n.bind(n,1004)).then((t=>{this.sentry=t.initSentry(e,this.errorsStack,e.ignoreErrors),this.errorsStack=[]})))}captureError(e,t){if(!this.sentry)return this.errorsStack.push(e),void console.error(e);if(e instanceof Error)return this.sentry.captureException(e,t),void console.error(e);if(this.isErrorLike(e)){const n=new Error(e.message||"Unknown error like");return n.name=e.name,n.stack=e.stack,this.sentry.captureException(n,t),void console.error(e)}const n=new Error("Non error exception");if(t&&"object"==typeof t&&"setExtra"in t)return t.setExtra("nonError",e),this.sentry.captureException(n,t),void console.error(e);if(t&&"function"==typeof t)return this.sentry.captureException(n,(n=>{const i=t(n);return i.setExtra("nonError",e),i})),void console.error(e);const i=t||{};t=Object.assign(Object.assign({},i),{extra:Object.assign(Object.assign({},(null==i?void 0:i.extra)||{}),{nonError:e})}),this.sentry.captureException(n,t),console.error(e)}getSentryInstance(){return{captureException:(e,t)=>this.captureError(e,t),configureScope:e=>{this.sentry&&this.sentry.configureScope(e)}}}isErrorLike(e){return e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"message"in e}}class ex extends N{constructor(e,t,n,i,s,a,r,o,c,l){super(e,t),this.checkoutUI=e,this.embedTracker=n,this.debug=i,this.keysKeeper=s,this.targetWindow=a,this.globalWindow=r,this.params=o,this.sentry=c,this.funSessionStorage=l}get questionsScreenPageCount(){return this.checkoutCore.flowManager.questionsScreenPageCount}update(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutCore.dispose(),this.removeStripeIframes(this.globalWindow.document),this.removeStripeIframes(this.targetWindow.document);const t=new Ao(this.embedTracker,this.debug,this.keysKeeper,new m.A,this.targetWindow,this.globalWindow,Object.assign(Object.assign({},this.params),{resolvedConfig:this.convertShowcaseConfigToCheckoutConfig(e),isMobile:e.isMobile,localeCode:e.localeCode||""}),XT,this.sentry,this.funSessionStorage),n=this.isFlowTypeChanged(t);this.checkoutCore=t,yield t.run({initialScreen:e.initialScreen,localeCode:e.localeCode||t.checkoutConfiguration.campaign.config.localization.defaultLocale}),yield this.checkoutUI.replaceCore(this.checkoutCore,{forceRender:n,showcaseContext:e.showcaseContext}),this.updateIframeHtmlClass(e.isMobile)}))}removeStripeIframes(e){e.querySelectorAll('iframe[name*="privateStripe"]').forEach((e=>{e.remove()}))}convertShowcaseConfigToCheckoutConfig(e){return function(e,t){const n={applicationFees:{money:200,stock:200,crypto:200},coverFees:{custom:!1,amount:30,percent:100},stripeFee:{percent:100,fixed:30,currency:"USD"}},i=Object.assign({},e,{campaign:Object.assign(Object.assign({},e.widget),{recentDonations:null,totalRecentDonations:null,config:Object.assign(Object.assign({},e.widget.config),{experimentsSettings:{desktop:{},mobile:{}},trend:{once:0,daily:0,weekly:0,biweekly:0,every4weeks:0,monthly:0,bimonthly:0,quarterly:0,semiannual:0,annual:0}})}),config:Object.assign({},e.serverConfig),goals:[],aiSuggestions:[],fundraisingPage:null,user:{address:Object.assign(Object.assign({},e.user.address),{region:""})},company:Object.assign(Object.assign(Object.assign(Object.assign({},void 0),e.company),n),{parentCompanyConfig:Object.assign({},n)})});return i}(e)}isFlowTypeChanged(e){return this.checkoutCore.checkoutConfiguration.defaultFlowType!==e.checkoutConfiguration.defaultFlowType}updateIframeHtmlClass(e){const t=this.targetWindow.document.querySelector("html");e?null==t||t.classList.remove("desktop-view"):null==t||t.classList.add("desktop-view")}}class tx extends _C{replaceCore(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutCore=e,(null==t?void 0:t.forceRender)?yield this.forceRender():(yield this.configure(),yield this.render(null==t?void 0:t.showcaseContext),yield this.checkoutCore.flowManager.restart())}))}configure(){return(0,l.sH)(this,void 0,void 0,(function*(){this.iframe.configure({locale:this.checkoutCore.intl.locale,styles:yield UC(this.checkoutCore.intl.language),showcase:!0})}))}forceRender(){return(0,l.sH)(this,void 0,void 0,(function*(){this.regenerateKey(),yield this.render(),this.show()}))}}const nx=(e,t,i,a,r,o,c)=>(0,l.sH)(void 0,void 0,void 0,(function*(){const p=function(e){return function(e){const t=[/^https?:\/\/translate\.googleusercontent\.com/i,/^file:\/\/\//,/^https?:\/\/craigchurchministries\.org/i,/^https?:\/\/heartwoodhaven\.org/i,/^https?:\/\/wordpress-506039-2071925\.cloudwaysapps\.com/i];window.FUN_EXPERIMENTAL_SENTRY||t.push(/^https?:\/\/.*\.?mozilla\.org/i);const n="SQUARESPACE_ROLLUPS"in window||"Squarespace"in window,i=t.some((e=>e.test(window.location.href))),s=window.Sentry,a=window.FUN_DASHBOARD;return new JT({env:e.env,uri:e.uri,mainDomain:e.mainDomain,version:e.version,forceOff:!a&&(i||n||!!s),sentry:a&&s?s:void 0,isBrowserSupported:e.isBrowserSupported,isBrowserSupportedVersion:e.isBrowserSupportedVersion,scope:e.scope})}({uri:e.integrations.sentryUri,version:e.embedVersion,mainDomain:e.mainDomain,env:e.env,isBrowserSupported:e.browserData.isCommonBrowser,isBrowserSupportedVersion:e.browserData.isSupported,scope:ZT.b1.CHECKOUT}).getSentryInstance()}(o);try{if(o.showcase){const n=yield function(e,t,n,i,s,a,r){return(0,l.sH)(this,void 0,void 0,(function*(){const o=t.createInstance("ShowcaseCheckout");o.log("checkoutCreateParams",i);const c=yield LC(i,s),l=A("#root",c),u=C(c),d=new m.A,h=new Ao(e,o,n,d,u.target,u.global,i,XT,s,a),p=new tx(l,c,d,h.sentryInstance,o,h),g=new ex(p,h,e,o,n,u.target,u.global,i,s,a);yield h.run({initialScreen:i.initialScreen,localeCode:h.checkoutConfiguration.campaign.config.localization.defaultLocale});const y={locale:h.intl.locale};return c.configure(y),yield p.open({abortController:r}),o.log("Opened"),g}))}(e,t,i,o,p,r,c);return n}return s===u.hY.DEVELOPMENT&&(yield function(){return(0,l.sH)(this,void 0,void 0,(function*(){(yield function(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield n.e(85).then(n.t.bind(n,8085,23))).default}))}())(h,{trackAllPureComponents:!0})}))}()),yield QT(e,t,i,a,r,o,p)}catch(e){throw e instanceof d||p.captureException(e),e}}));(window.FUN_SERVICE_CONTAINER||(window.FUN_SERVICE_CONTAINER=new class{constructor(){this.providers=new Map,this.cache=new Map}get(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.providers.get(e);if(!n)throw new Error(`${String(e)} is not provided`);if(t&&this.cache.has(e))return this.cache.get(e);const i=n();return t?(this.cache.has(e)||this.cache.set(e,i),i):i}provide(e,t){return this.providers.has(e)?(console.warn(`${o.SERVICE_HAS_ALREADY_BEEN_PROVIDED} ${String(e)}`),this):(this.providers.set(e,t),this)}}),window.FUN_SERVICE_CONTAINER).provide(c.CHECKOUT,(()=>nx))},8984:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});const i=(0,n(4041).createContext)(null)},606:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var i=n(4041),s=n(8984);function a(){const e=(0,i.useContext)(s.R);if(!e)throw new Error("IntlService is not provided");return e}},1324:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var i=n(8728);const s=[i.D.EN_US,i.D.EN_GB,i.D.EN_CA,i.D.FR_CA,i.D.FR_FR,i.D.ES,i.D.NL,i.D.NO,i.D.DE,i.D.FI_FI,i.D.SV,i.D.IT,i.D.PT_PT,i.D.PT_BR,i.D.AR_001,i.D.ZH_CN,i.D.ZH_TW,i.D.JA,i.D.KO,i.D.HU,i.D.DA,i.D.ES_US,i.D.PL_PL,i.D.RU_RU]},3836:function(e,t,n){"use strict";n.d(t,{ZD:function(){return h},Qk:function(){return o},iJ:function(){return d},N_:function(){return u},q1:function(){return l}}),n(1324);var i=n(8728);i.D.AR_001;const s=[n(3340).L.AR],a=[i.D.AR_001];var r=n(5448);function o(e){return e.split("-")[0]}const c={"&amp;":"&"};function l(e){let t=e;for(const a in c)Object.prototype.hasOwnProperty.call(c,a)&&e.includes(a)&&(n=t,i=a,s=c[a],t=n.replace(new RegExp(i,"g"),s));var n,i,s;return t}function u(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!function(e){return a.includes(e)}(e)?r.p.LTR:r.p.RTL}function d(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!function(e){return s.includes(e)}(e)?r.p.LTR:r.p.RTL}function h(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(e=>t[e]))}},3340:function(e,t,n){"use strict";var i;n.d(t,{L:function(){return i}}),function(e){e.EN="en",e.ES="es",e.FR="fr",e.NL="nl",e.NO="no",e.DE="de",e.FI="fi",e.AR="ar",e.SV="sv",e.IT="it",e.PT="pt",e.ZH="zh",e.JA="ja",e.KO="ko",e.HU="hu",e.DA="da",e.RU="ru",e.PL="pl"}(i||(i={}))},5448:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e.LTR="ltr",e.RTL="rtl"}(i||(i={}))},8728:function(e,t,n){"use strict";var i;n.d(t,{D:function(){return i}}),function(e){e.EN_US="en-US",e.EN_GB="en-GB",e.EN_CA="en-CA",e.FR_CA="fr-CA",e.FR_FR="fr-FR",e.ES="es",e.NL="nl",e.NO="no",e.DE="de",e.FI_FI="fi-FI",e.AR_001="ar-001",e.SV="sv",e.IT="it",e.PT_PT="pt-PT",e.PT_BR="pt-BR",e.ZH_CN="zh-CN",e.ZH_TW="zh-TW",e.JA="ja",e.KO="ko",e.HU="hu",e.DA="da",e.RU_RU="ru-RU",e.ES_US="es-US",e.PL_PL="pl-PL"}(i||(i={}))},6901:function(e,t,n){"use strict";n.d(t,{S:function(){return v}});var i=n(5608),s=n(1085),a=n(4713),r=n(4835),o=n(1443),c=n(4357),l=n(2474),u=n.n(l),d=n(4041);const h=e=>({top:"bottom",right:"left",bottom:"top",left:"right"}[e]);var m,p,g,y;!function(e){e.CLICK="click",e.HOVER="hover",e.FOCUS="focus",e.MANUAL="manual"}(m||(m={})),function(e){e.WIDTH_175="175px",e.WIDTH_200="200px",e.WIDTH_220="220px",e.WIDTH_260="260px",e.WIDTH_280="280px",e.WIDTH_300="300px",e.WIDTH_360="360px",e.WIDTH_400="400px",e.NONE="none"}(p||(p={})),function(e){e.DEFAULT="default",e.DARK="dark",e.DANGER="danger"}(g||(g={})),function(e){e.DEFAULT="default",e.SM="sm"}(y||(y={}));const f={DEFAULT_PLACEMENT:"right",DEFAULT_OFFSET:10,DEFAULT_FLIP:{padding:5,fallbackAxisSideDirection:"start"},DEFAULT_SHIFT:{padding:5},DEFAULT_TRIGGER:m.HOVER,DEFAULT_SHOW_ARROW:!0,DEFAULT_HIDE_ON_SCROLL_EDGE_OFFSET:5,DEFAULT_VARIANT:g.DEFAULT,DEFAULT_SIZE:y.DEFAULT,MAX_WIDTH:p.WIDTH_200,DEFAULT_HAS_ANIMATION:!0,ANIMATION_DURATION_OPEN:150,ANIMATION_DURATION_CLOSE:100,ANIMATION_TRANSITION_OFFSET:"5px",ARROW_SIZE_DEFAULT:"12px",ARROW_SIZE_SM:"7px",ARROW_PADDING:16},S=(e,t)=>{let{arrowData:n,direction:i,size:a,dataTestId:r}=e;const o=a===y.SM?f.ARROW_SIZE_SM:f.ARROW_SIZE_DEFAULT;var c;const l=(c=o,Math.sqrt(2)*parseFloat(c)/2),u="bottom"===i||"left"===i?-1*l:l,d={width:o,height:o,transformOrigin:i,[h(i)]:`-${l}px`};return(null==n?void 0:n.x)&&(d.left=n.x+u/2),(null==n?void 0:n.y)&&(d.top=n.y+u/2),(0,s.jsx)("div",{ref:t,"data-testid":r,className:"ui-tooltip-arrow",style:d})},E=(0,d.forwardRef)(S),A=(e,t)=>{var{className:n,direction:a,variant:r,size:o,showArrow:l,children:u,floatingStyle:d,transitionStyle:h,arrowRef:m,context:p,dataTestId:g}=e,y=(0,i.Tt)(e,["className","direction","variant","size","showArrow","children","floatingStyle","transitionStyle","arrowRef","context","dataTestId"]);return(0,s.jsx)("div",Object.assign({ref:t,className:(0,c.A)(`ui-tooltip ui-tooltip-variant-${r} ui-tooltip-size-${o} ui-tooltip-${a}`,n),style:d,"data-testid":g},y,{children:(0,s.jsx)("div",{className:"ui-tooltip-body",style:h,children:u})}))},C=(0,d.forwardRef)(A),v=(0,d.forwardRef)(((e,t)=>{var n,l,{children:h,content:p,trigger:g=f.DEFAULT_TRIGGER,placement:y=f.DEFAULT_PLACEMENT,fallbackPlacements:S,offset:A=f.DEFAULT_OFFSET,shift:v=f.DEFAULT_SHIFT,flip:N=f.DEFAULT_FLIP,maxWidth:b=f.MAX_WIDTH,maxHeight:P,arrow:D=f.DEFAULT_SHOW_ARROW,arrowPadding:_=f.ARROW_PADDING,hasAnimation:T=f.DEFAULT_HAS_ANIMATION,hideOnScrollEdgeOffset:x=f.DEFAULT_HIDE_ON_SCROLL_EDGE_OFFSET,zIndex:O,hasPortal:k=!0,isInteractive:I=!1,manualFocusControl:w,shouldTrapFocusInside:R=!1,manualOpen:M,variant:L=f.DEFAULT_VARIANT,size:U=f.DEFAULT_SIZE,rootContainer:F}=e,j=(0,i.Tt)(e,["children","content","trigger","placement","fallbackPlacements","offset","shift","flip","maxWidth","maxHeight","arrow","arrowPadding","hasAnimation","hideOnScrollEdgeOffset","zIndex","hasPortal","isInteractive","manualFocusControl","shouldTrapFocusInside","manualOpen","variant","size","rootContainer"]);const B=(0,d.useRef)(null),[H,q]=(0,d.useState)(!1),G=H&&!!p||M,{context:V,refs:K,floatingStyles:Y,middlewareData:z,placement:W}=(0,a.we)({open:G,onOpenChange:q,placement:y,whileElementsMounted:r.ll,middleware:[(0,o.cY)(A),(0,o.BN)(v),(0,o.UU)(Object.assign(Object.assign({},N),{fallbackPlacements:S})),(0,o.UE)({element:B,padding:_}),(0,o.mG)(),(0,o.Ej)({apply(e){let{elements:t}=e;"none"===b?t.floating.style.maxWidth="calc(100vw - 40px)":b&&(t.floating.style.maxWidth=`min(${b}, calc(100vw - 40px))`)}}),(0,o.jD)({padding:x})]});null==w||w({open:G,refs:K});const{delay:$}=(0,a.ck)(V),X=(0,a.It)(V,{role:"tooltip"}),Q=W.split("-")[0],Z=(0,a.s9)(V),J=(0,a.Mk)(V,{enabled:g===m.HOVER,handleClose:I?(0,a.iB)():void 0,delay:$}),ee=(0,a.kp)(V,{enabled:g===m.CLICK}),te=(0,a.iQ)(V,{enabled:u()([m.FOCUS,m.HOVER],g)}),{getReferenceProps:ne,getFloatingProps:ie}=(0,a.bv)([J,te,ee,Z,X]),{isMounted:se,styles:ae}=(0,a.DL)(V,{duration:T?{open:Number(f.ANIMATION_DURATION_OPEN),close:Number(f.ANIMATION_DURATION_CLOSE)}:{open:0,close:0},initial:e=>{let{side:t}=e;return{opacity:0,transform:{top:`translate3d(0, ${f.ANIMATION_TRANSITION_OFFSET}, 0)`,bottom:`translate3d(0, -${f.ANIMATION_TRANSITION_OFFSET}, 0)`,left:`translate3d(${f.ANIMATION_TRANSITION_OFFSET}, 0, 0)`,right:`translate3d(-${f.ANIMATION_TRANSITION_OFFSET}, 0, 0)`}[t]}},open:{opacity:1,transform:"translate3d(0, 0, 0)"}}),re=(0,d.cloneElement)(h,Object.assign({ref:K.setReference,className:(0,c.A)(null===(n=h.props)||void 0===n?void 0:n.className)},ne({onClick:e=>{var t,n;null===(n=(t=h.props).onClick)||void 0===n||n.call(t,e)}}))),oe=Object.assign(Object.assign(Object.assign({},Y),{visibility:(null===(l=z.hide)||void 0===l?void 0:l.referenceHidden)?"hidden":"visible"}),O&&{zIndex:O}),ce={maxHeight:P?`min(${P}, calc(100vh - 40px))`:"calc(100vh - 40px)"};(0,d.useImperativeHandle)(t,(()=>K.reference.current),[K.reference]);const le=(0,s.jsx)(a.s3,{context:V,initialFocus:-1,modal:!1,children:(0,s.jsxs)(C,Object.assign({dataTestId:"ui-tooltip-popup",ref:K.setFloating,direction:Q,variant:L,size:U,floatingStyle:oe,transitionStyle:ae},ie(),j,{children:[D&&(0,s.jsx)(E,{ref:B,arrowData:z.arrow,direction:Q,size:U,dataTestId:"ui-tooltip-arrow"}),(0,s.jsx)("div",{className:"ui-tooltip-content",style:ce,children:p})]}))});return(0,s.jsxs)(d.Fragment,{children:[re,se&&(k?(0,s.jsx)(a.XF,{root:F,preserveTabOrder:!1,children:le}):le)]})}));v.displayName="UITooltip"},2650:function(e,t,n){"use strict";n.d(t,{g:function(){return r}}),n(5873);var i=n(3340);class s{constructor(e,t){this.intlService=e,this.params=t,this.countries=this.getInitialCountriesList()}getMailingAddressCountriesList(){return this.countries.map((e=>{let{countryName:t,countryCode:n}=e;return{countryName:t,countryCode:n}}))}getTelInputCountries(){return this.countries.filter((e=>"dialCode"in e)).map((e=>({name:e.countryName,iso2:e.countryCode,dialCode:e.dialCode,priority:e.priority||0,areaCodes:e.areaCodes||null})))}get language(){return this.intlService.language}getInitialCountriesList(){var e;let t=[{countryName:this.intlService.translate("countries.afghanistan")||"Afghanistan",countryCode:"AF",dialCode:"93"},{countryName:this.intlService.translate("countries.albania")||"Albania",countryCode:"AL",dialCode:"355"},{countryName:this.intlService.translate("countries.algeria")||"Algeria",countryCode:"DZ",dialCode:"213"},{countryName:this.intlService.translate("countries.andorra")||"Andorra",countryCode:"AD",dialCode:"376"},{countryName:this.intlService.translate("countries.angola")||"Angola",countryCode:"AO",dialCode:"244"},{countryName:this.intlService.translate("countries.anguilla")||"Anguilla",countryCode:"AI",dialCode:"1264"},{countryName:this.intlService.translate("countries.antiguaAndBarbuda")||"Antigua and Barbuda",countryCode:"AG",dialCode:"1268"},{countryName:this.intlService.translate("countries.argentina")||"Argentina",countryCode:"AR",dialCode:"54"},{countryName:this.intlService.translate("countries.armenia")||"Armenia",countryCode:"AM",dialCode:"374"},{countryName:this.intlService.translate("countries.aruba")||"Aruba",countryCode:"AW",dialCode:"297"},{countryName:this.intlService.translate("countries.australia")||"Australia",countryCode:"AU",dialCode:"61",priority:0},{countryName:this.intlService.translate("countries.austria")||"Austria",countryCode:"AT",dialCode:"43"},{countryName:this.intlService.translate("countries.alandIslands")||"land Islands",countryCode:"AX",dialCode:"358",priority:1},{countryName:this.intlService.translate("countries.azerbaijan")||"Azerbaijan",countryCode:"AZ",dialCode:"994"},{countryName:this.intlService.translate("countries.bahamas")||"Bahamas",countryCode:"BS",dialCode:"1242"},{countryName:this.intlService.translate("countries.bahrain")||"Bahrain",countryCode:"BH",dialCode:"973"},{countryName:this.intlService.translate("countries.bangladesh")||"Bangladesh",countryCode:"BD",dialCode:"880"},{countryName:this.intlService.translate("countries.barbados")||"Barbados",countryCode:"BB",dialCode:"1246"},{countryName:this.intlService.translate("countries.belarus")||"Belarus",countryCode:"BY",dialCode:"375"},{countryName:this.intlService.translate("countries.belgium")||"Belgium",countryCode:"BE",dialCode:"32"},{countryName:this.intlService.translate("countries.belize")||"Belize",countryCode:"BZ",dialCode:"501"},{countryName:this.intlService.translate("countries.benin")||"Benin",countryCode:"BJ",dialCode:"229"},{countryName:this.intlService.translate("countries.bermuda")||"Bermuda",countryCode:"BM",dialCode:"1441"},{countryName:this.intlService.translate("countries.bhutan")||"Bhutan",countryCode:"BT",dialCode:"975"},{countryName:this.intlService.translate("countries.bolivia")||"Bolivia",countryCode:"BO",dialCode:"591"},{countryName:this.intlService.translate("countries.bosniaAndHerzegovina")||"Bosnia and Herzegovina",countryCode:"BA",dialCode:"387"},{countryName:this.intlService.translate("countries.botswana")||"Botswana",countryCode:"BW",dialCode:"267"},{countryName:this.intlService.translate("countries.brazil")||"Brazil",countryCode:"BR",dialCode:"55"},{countryName:this.intlService.translate("countries.britishIndianOceanTerritory")||"British Indian Ocean Territory",countryCode:"IO",dialCode:"246"},{countryName:this.intlService.translate("countries.britishVirginIslands")||"British Virgin Islands",countryCode:"VG",dialCode:"1284"},{countryName:this.intlService.translate("countries.brunei")||"Brunei",countryCode:"BN",dialCode:"673"},{countryName:this.intlService.translate("countries.bulgaria")||"Bulgaria",countryCode:"BG",dialCode:"359"},{countryName:this.intlService.translate("countries.burkinaFaso")||"Burkina Faso",countryCode:"BF",dialCode:"226"},{countryName:this.intlService.translate("countries.burundi")||"Burundi",countryCode:"BI",dialCode:"257"},{countryName:this.intlService.translate("countries.cambodia")||"Cambodia",countryCode:"KH",dialCode:"855"},{countryName:this.intlService.translate("countries.cameroon")||"Cameroon",countryCode:"CM",dialCode:"237"},{countryName:this.intlService.translate("countries.canada")||"Canada",countryCode:"CA",dialCode:"1",priority:1,areaCodes:["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]},{countryName:this.intlService.translate("countries.capeVerde")||"Cape Verde",countryCode:"CV",dialCode:"238"},{countryName:this.intlService.translate("countries.caribbeanNetherlands")||"Caribbean Netherlands",countryCode:"BQ",dialCode:"599",priority:1},{countryName:this.intlService.translate("countries.caymanIslands")||"Cayman Islands",countryCode:"KY",dialCode:"1345"},{countryName:this.intlService.translate("countries.centralAfricanRepublic")||"Central African Republic",countryCode:"CF",dialCode:"236"},{countryName:this.intlService.translate("countries.chad")||"Chad",countryCode:"TD",dialCode:"235"},{countryName:this.intlService.translate("countries.chile")||"Chile",countryCode:"CL",dialCode:"56"},{countryName:this.intlService.translate("countries.china")||"China",countryCode:"CN",dialCode:"86"},{countryName:this.intlService.translate("countries.christmasIsland")||"Christmas Island",countryCode:"CX",dialCode:"61",priority:2},{countryName:this.intlService.translate("countries.cocos")||"Cocos Islands",countryCode:"CC",dialCode:"61",priority:1},{countryName:this.intlService.translate("countries.colombia")||"Colombia",countryCode:"CO",dialCode:"57"},{countryName:this.intlService.translate("countries.comoros")||"Comoros",countryCode:"KM",dialCode:"269"},{countryName:this.intlService.translate("countries.congoDRC")||"Congo (DRC)",countryCode:"CD",dialCode:"243"},{countryName:this.intlService.translate("countries.congoRepublic")||"Congo (Republic)",countryCode:"CG",dialCode:"242"},{countryName:this.intlService.translate("countries.cookIslands")||"Cook Islands",countryCode:"CK",dialCode:"682"},{countryName:this.intlService.translate("countries.costaRica")||"Costa Rica",countryCode:"CR",dialCode:"506"},{countryName:this.intlService.translate("countries.coteDIvoire")||"Cte dIvoire",countryCode:"CI",dialCode:"225"},{countryName:this.intlService.translate("countries.croatia")||"Croatia",countryCode:"HR",dialCode:"385"},{countryName:this.intlService.translate("countries.cuba")||"Cuba",countryCode:"CU",dialCode:"53"},{countryName:this.intlService.translate("countries.curasao")||"Curaao",countryCode:"CW",dialCode:"599",priority:0},{countryName:this.intlService.translate("countries.cyprus")||"Cyprus",countryCode:"CY",dialCode:"357"},{countryName:this.intlService.translate("countries.czechRepublic")||"Czech Republic",countryCode:"CZ",dialCode:"420"},{countryName:this.intlService.translate("countries.denmark")||"Denmark",countryCode:"DK",dialCode:"45"},{countryName:this.intlService.translate("countries.djibouti")||"Djibouti",countryCode:"DJ",dialCode:"253"},{countryName:this.intlService.translate("countries.dominica")||"Dominica",countryCode:"DM",dialCode:"1767"},{countryName:this.intlService.translate("countries.dominicanRepublic")||"Dominican Republic",countryCode:"DO",dialCode:"1",priority:2,areaCodes:["809","829","849"]},{countryName:this.intlService.translate("countries.ecuador")||"Ecuador",countryCode:"EC",dialCode:"593"},{countryName:this.intlService.translate("countries.egypt")||"Egypt",countryCode:"EG",dialCode:"20"},{countryName:this.intlService.translate("countries.elSalvador")||"El Salvador",countryCode:"SV",dialCode:"503"},{countryName:this.intlService.translate("countries.equatorialGuinea")||"Equatorial Guinea",countryCode:"GQ",dialCode:"240"},{countryName:this.intlService.translate("countries.eritrea")||"Eritrea",countryCode:"ER",dialCode:"291"},{countryName:this.intlService.translate("countries.estonia")||"Estonia",countryCode:"EE",dialCode:"372"},{countryName:this.intlService.translate("countries.ethiopia")||"Ethiopia",countryCode:"ET",dialCode:"251"},{countryName:this.intlService.translate("countries.falklandIslands")||"Falkland Islands",countryCode:"FK",dialCode:"500"},{countryName:this.intlService.translate("countries.faroeIslands")||"Faroe Islands",countryCode:"FO",dialCode:"298"},{countryName:this.intlService.translate("countries.fiji")||"Fiji",countryCode:"FJ",dialCode:"679"},{countryName:this.intlService.translate("countries.finland")||"Finland",countryCode:"FI",dialCode:"358",priority:0},{countryName:this.intlService.translate("countries.france")||"France",countryCode:"FR",dialCode:"33"},{countryName:this.intlService.translate("countries.frenchGuiana")||"French Guiana",countryCode:"GF",dialCode:"594"},{countryName:this.intlService.translate("countries.frenchPolynesia")||"French Polynesia",countryCode:"PF",dialCode:"689"},{countryCode:"TF",countryName:this.intlService.translate("countries.frenchSouthernTerritories")||"French Southern Territories"},{countryName:this.intlService.translate("countries.gabon")||"Gabon",countryCode:"GA",dialCode:"241"},{countryName:this.intlService.translate("countries.gambia")||"Gambia",countryCode:"GM",dialCode:"220"},{countryName:this.intlService.translate("countries.georgia")||"Georgia",countryCode:"GE",dialCode:"995"},{countryName:this.intlService.translate("countries.germany")||"Germany",countryCode:"DE",dialCode:"49"},{countryName:this.intlService.translate("countries.ghana")||"Ghana",countryCode:"GH",dialCode:"233"},{countryName:this.intlService.translate("countries.gibraltar")||"Gibraltar",countryCode:"GI",dialCode:"350"},{countryName:this.intlService.translate("countries.greece")||"Greece",countryCode:"GR",dialCode:"30"},{countryName:this.intlService.translate("countries.greenland")||"Greenland",countryCode:"GL",dialCode:"299"},{countryName:this.intlService.translate("countries.grenada")||"Grenada",countryCode:"GD",dialCode:"1473"},{countryName:this.intlService.translate("countries.guadeloupe")||"Guadeloupe",countryCode:"GP",dialCode:"590",priority:0},{countryName:this.intlService.translate("countries.guatemala")||"Guatemala",countryCode:"GT",dialCode:"502"},{countryName:this.intlService.translate("countries.guernsey")||"Guernsey",countryCode:"GG",dialCode:"44",priority:1},{countryName:this.intlService.translate("countries.guinea")||"Guinea",countryCode:"GN",dialCode:"224"},{countryName:this.intlService.translate("countries.guineaBissau")||"Guinea-Bissau",countryCode:"GW",dialCode:"245"},{countryName:this.intlService.translate("countries.guyana")||"Guyana",countryCode:"GY",dialCode:"592"},{countryName:this.intlService.translate("countries.haiti")||"Haiti",countryCode:"HT",dialCode:"509"},{countryName:this.intlService.translate("countries.honduras")||"Honduras",countryCode:"HN",dialCode:"504"},{countryName:this.intlService.translate("countries.hongKong")||"Hong Kong",countryCode:"HK",dialCode:"852"},{countryName:this.intlService.translate("countries.hungary")||"Hungary",countryCode:"HU",dialCode:"36"},{countryName:this.intlService.translate("countries.iceland")||"Iceland",countryCode:"IS",dialCode:"354"},{countryName:this.intlService.translate("countries.india")||"India",countryCode:"IN",dialCode:"91"},{countryName:this.intlService.translate("countries.indonesia")||"Indonesia",countryCode:"ID",dialCode:"62"},{countryName:this.intlService.translate("countries.iran")||"Iran",countryCode:"IR",dialCode:"98"},{countryName:this.intlService.translate("countries.iraq")||"Iraq",countryCode:"IQ",dialCode:"964"},{countryName:this.intlService.translate("countries.ireland")||"Ireland",countryCode:"IE",dialCode:"353"},{countryName:this.intlService.translate("countries.isleOfMan")||"Isle of Man",countryCode:"IM",dialCode:"44",priority:2},{countryName:this.intlService.translate("countries.israel")||"Israel",countryCode:"IL",dialCode:"972"},{countryName:this.intlService.translate("countries.italy")||"Italy",countryCode:"IT",dialCode:"39",priority:0},{countryName:this.intlService.translate("countries.jamaica")||"Jamaica",countryCode:"JM",dialCode:"1876"},{countryName:this.intlService.translate("countries.japan")||"Japan",countryCode:"JP",dialCode:"81"},{countryName:this.intlService.translate("countries.jersey")||"Jersey",countryCode:"JE",dialCode:"44",priority:3},{countryName:this.intlService.translate("countries.jordan")||"Jordan",countryCode:"JO",dialCode:"962"},{countryName:this.intlService.translate("countries.kazakhstan")||"Kazakhstan",countryCode:"KZ",dialCode:"7",priority:1},{countryName:this.intlService.translate("countries.kenya")||"Kenya",countryCode:"KE",dialCode:"254"},{countryName:this.intlService.translate("countries.kiribati")||"Kiribati",countryCode:"KI",dialCode:"686"},{countryName:this.intlService.translate("countries.kosovo")||"Kosovo",countryCode:"XK",dialCode:"383"},{countryName:this.intlService.translate("countries.kuwait")||"Kuwait",countryCode:"KW",dialCode:"965"},{countryName:this.intlService.translate("countries.kyrgyzstan")||"Kyrgyzstan",countryCode:"KG",dialCode:"996"},{countryName:this.intlService.translate("countries.laos")||"Laos",countryCode:"LA",dialCode:"856"},{countryName:this.intlService.translate("countries.latvia")||"Latvia",countryCode:"LV",dialCode:"371"},{countryName:this.intlService.translate("countries.lebanon")||"Lebanon",countryCode:"LB",dialCode:"961"},{countryName:this.intlService.translate("countries.lesotho")||"Lesotho",countryCode:"LS",dialCode:"266"},{countryName:this.intlService.translate("countries.liberia")||"Liberia",countryCode:"LR",dialCode:"231"},{countryName:this.intlService.translate("countries.libya")||"Libya",countryCode:"LY",dialCode:"218"},{countryName:this.intlService.translate("countries.liechtenstein")||"Liechtenstein",countryCode:"LI",dialCode:"423"},{countryName:this.intlService.translate("countries.lithuania")||"Lithuania",countryCode:"LT",dialCode:"370"},{countryName:this.intlService.translate("countries.luxembourg")||"Luxembourg",countryCode:"LU",dialCode:"352"},{countryName:this.intlService.translate("countries.macau")||"Macau",countryCode:"MO",dialCode:"853"},{countryName:this.intlService.translate("countries.macedonia")||"Macedonia (FYROM)",countryCode:"MK",dialCode:"389"},{countryName:this.intlService.translate("countries.madagascar")||"Madagascar",countryCode:"MG",dialCode:"261"},{countryName:this.intlService.translate("countries.malawi")||"Malawi",countryCode:"MW",dialCode:"265"},{countryName:this.intlService.translate("countries.malaysia")||"Malaysia",countryCode:"MY",dialCode:"60"},{countryName:this.intlService.translate("countries.maldives")||"Maldives",countryCode:"MV",dialCode:"960"},{countryName:this.intlService.translate("countries.mali")||"Mali",countryCode:"ML",dialCode:"223"},{countryName:this.intlService.translate("countries.malta")||"Malta",countryCode:"MT",dialCode:"356"},{countryName:this.intlService.translate("countries.marshallIslands")||"Marshall Islands",countryCode:"MH",dialCode:"692"},{countryName:this.intlService.translate("countries.martinique")||"Martinique",countryCode:"MQ",dialCode:"596"},{countryName:this.intlService.translate("countries.mauritania")||"Mauritania",countryCode:"MR",dialCode:"222"},{countryName:this.intlService.translate("countries.mauritius")||"Mauritius",countryCode:"MU",dialCode:"230"},{countryName:this.intlService.translate("countries.mayotte")||"Mayotte",countryCode:"YT",dialCode:"262",priority:1},{countryName:this.intlService.translate("countries.mexico")||"Mexico",countryCode:"MX",dialCode:"52"},{countryName:this.intlService.translate("countries.micronesia")||"Micronesia",countryCode:"FM",dialCode:"691"},{countryName:this.intlService.translate("countries.moldova")||"Moldova",countryCode:"MD",dialCode:"373"},{countryName:this.intlService.translate("countries.monaco")||"Monaco",countryCode:"MC",dialCode:"377"},{countryName:this.intlService.translate("countries.mongolia")||"Mongolia",countryCode:"MN",dialCode:"976"},{countryName:this.intlService.translate("countries.montenegro")||"Montenegro",countryCode:"ME",dialCode:"382"},{countryName:this.intlService.translate("countries.montserrat")||"Montserrat",countryCode:"MS",dialCode:"1664"},{countryName:this.intlService.translate("countries.morocco")||"Morocco",countryCode:"MA",dialCode:"212",priority:0},{countryName:this.intlService.translate("countries.mozambique")||"Mozambique",countryCode:"MZ",dialCode:"258"},{countryName:this.intlService.translate("countries.myanmar")||"Myanmar (Burma)",countryCode:"MM",dialCode:"95"},{countryName:this.intlService.translate("countries.namibia")||"Namibia",countryCode:"NA",dialCode:"264"},{countryName:this.intlService.translate("countries.nauru")||"Nauru",countryCode:"NR",dialCode:"674"},{countryName:this.intlService.translate("countries.nepal")||"Nepal",countryCode:"NP",dialCode:"977"},{countryName:this.intlService.translate("countries.netherlands")||"Netherlands",countryCode:"NL",dialCode:"31"},{countryName:this.intlService.translate("countries.newCaledonia")||"New Caledonia",countryCode:"NC",dialCode:"687"},{countryName:this.intlService.translate("countries.newZealand")||"New Zealand",countryCode:"NZ",dialCode:"64"},{countryName:this.intlService.translate("countries.nicaragua")||"Nicaragua",countryCode:"NI",dialCode:"505"},{countryName:this.intlService.translate("countries.niger")||"Niger",countryCode:"NE",dialCode:"227"},{countryName:this.intlService.translate("countries.nigeria")||"Nigeria",countryCode:"NG",dialCode:"234"},{countryName:this.intlService.translate("countries.niue")||"Niue",countryCode:"NU",dialCode:"683"},{countryName:this.intlService.translate("countries.norfolkIsland")||"Norfolk Island",countryCode:"NF",dialCode:"672"},{countryName:this.intlService.translate("countries.northKorea")||"North Korea",countryCode:"KP",dialCode:"850"},{countryName:this.intlService.translate("countries.norway")||"Norway",countryCode:"NO",dialCode:"47",priority:0},{countryName:this.intlService.translate("countries.oman")||"Oman",countryCode:"OM",dialCode:"968"},{countryName:this.intlService.translate("countries.pakistan")||"Pakistan",countryCode:"PK",dialCode:"92"},{countryName:this.intlService.translate("countries.palau")||"Palau",countryCode:"PW",dialCode:"680"},{countryName:this.intlService.translate("countries.palestine")||"Palestine",countryCode:"PS",dialCode:"970"},{countryName:this.intlService.translate("countries.panama")||"Panama",countryCode:"PA",dialCode:"507"},{countryName:this.intlService.translate("countries.papuaNewGuinea")||"Papua New Guinea",countryCode:"PG",dialCode:"675"},{countryName:this.intlService.translate("countries.paraguay")||"Paraguay",countryCode:"PY",dialCode:"595"},{countryName:this.intlService.translate("countries.peru")||"Peru",countryCode:"PE",dialCode:"51"},{countryName:this.intlService.translate("countries.philippines")||"Philippines",countryCode:"PH",dialCode:"63"},{countryCode:"PN",countryName:this.intlService.translate("countries.pitcairn")||"Pitcairn"},{countryName:this.intlService.translate("countries.poland")||"Poland",countryCode:"PL",dialCode:"48"},{countryName:this.intlService.translate("countries.portugal")||"Portugal",countryCode:"PT",dialCode:"351"},{countryName:this.intlService.translate("countries.qatar")||"Qatar",countryCode:"QA",dialCode:"974"},{countryName:this.intlService.translate("countries.reunion")||"Runion",countryCode:"RE",dialCode:"262",priority:0},{countryName:this.intlService.translate("countries.romania")||"Romania",countryCode:"RO",dialCode:"40"},{countryName:this.intlService.translate("countries.russia")||"Russia",countryCode:"RU",dialCode:"7",priority:0},{countryName:this.intlService.translate("countries.rwanda")||"Rwanda",countryCode:"RW",dialCode:"250"},{countryName:this.intlService.translate("countries.saintBarthelemy")||"Saint Barthlemy",countryCode:"BL",dialCode:"590",priority:1},{countryName:this.intlService.translate("countries.saintHelena")||"Saint Helena",countryCode:"SH",dialCode:"290"},{countryName:this.intlService.translate("countries.saintKittsAndNevis")||"Saint Kitts and Nevis",countryCode:"KN",dialCode:"1869"},{countryName:this.intlService.translate("countries.saintLucia")||"Saint Lucia",countryCode:"LC",dialCode:"1758"},{countryName:this.intlService.translate("countries.saintMartin")||"Saint Martin (Saint-Martin",countryCode:"MF",dialCode:"590",priority:2},{countryName:this.intlService.translate("countries.saintPierreAndMiquelon")||"Saint Pierre and Miquelon",countryCode:"PM",dialCode:"508"},{countryName:this.intlService.translate("countries.saintVincentAndTheGrenadines")||"Saint Vincent and the Grenadines",countryCode:"VC",dialCode:"1784"},{countryName:this.intlService.translate("countries.samoa")||"Samoa",countryCode:"WS",dialCode:"685"},{countryName:this.intlService.translate("countries.sanMarino")||"San Marino",countryCode:"SM",dialCode:"378"},{countryName:this.intlService.translate("countries.saoTomeAndPrincipe")||"So Tom and Prncipe",countryCode:"ST",dialCode:"239"},{countryName:this.intlService.translate("countries.saudiArabia")||"Saudi Arabia",countryCode:"SA",dialCode:"966"},{countryName:this.intlService.translate("countries.senegal")||"Senegal",countryCode:"SN",dialCode:"221"},{countryName:this.intlService.translate("countries.serbia")||"Serbia",countryCode:"RS",dialCode:"381"},{countryName:this.intlService.translate("countries.seychelles")||"Seychelles",countryCode:"SC",dialCode:"248"},{countryName:this.intlService.translate("countries.sierraLeone")||"Sierra Leone",countryCode:"SL",dialCode:"232"},{countryName:this.intlService.translate("countries.singapore")||"Singapore",countryCode:"SG",dialCode:"65"},{countryName:this.intlService.translate("countries.sintMaarten")||"Sint Maarten",countryCode:"SX",dialCode:"1721"},{countryName:this.intlService.translate("countries.slovakia")||"Slovakia",countryCode:"SK",dialCode:"421"},{countryName:this.intlService.translate("countries.slovenia")||"Slovenia",countryCode:"SI",dialCode:"386"},{countryName:this.intlService.translate("countries.solomonIslands")||"Solomon Islands",countryCode:"SB",dialCode:"677"},{countryName:this.intlService.translate("countries.somalia")||"Somalia",countryCode:"SO",dialCode:"252"},{countryName:this.intlService.translate("countries.southAfrica")||"South Africa",countryCode:"ZA",dialCode:"27"},{countryCode:"GS",countryName:this.intlService.translate("countries.southGeorgiaAndTheSouthSandwichIslands")||"South Georgia and the South Sandwich Islands"},{countryName:this.intlService.translate("countries.southKorea")||"South Korea",countryCode:"KR",dialCode:"82"},{countryName:this.intlService.translate("countries.southSudan")||"South Sudan",countryCode:"SS",dialCode:"211"},{countryName:this.intlService.translate("countries.spain")||"Spain",countryCode:"ES",dialCode:"34"},{countryName:this.intlService.translate("countries.sriLanka")||"Sri Lanka",countryCode:"LK",dialCode:"94"},{countryName:this.intlService.translate("countries.sudan")||"Sudan",countryCode:"SD",dialCode:"249"},{countryName:this.intlService.translate("countries.suriname")||"Suriname",countryCode:"SR",dialCode:"597"},{countryName:this.intlService.translate("countries.svalbardAndJanMayen")||"Svalbard and Jan Mayen",countryCode:"SJ",dialCode:"47",priority:1},{countryName:this.intlService.translate("countries.swaziland")||"Swaziland",countryCode:"SZ",dialCode:"268"},{countryName:this.intlService.translate("countries.sweden")||"Sweden",countryCode:"SE",dialCode:"46"},{countryName:this.intlService.translate("countries.switzerland")||"Switzerland",countryCode:"CH",dialCode:"41"},{countryName:this.intlService.translate("countries.syria")||"Syria",countryCode:"SY",dialCode:"963"},{countryName:this.intlService.translate("countries.taiwan")||"Taiwan",countryCode:"TW",dialCode:"886"},{countryName:this.intlService.translate("countries.tajikistan")||"Tajikistan",countryCode:"TJ",dialCode:"992"},{countryName:this.intlService.translate("countries.tanzania")||"Tanzania",countryCode:"TZ",dialCode:"255"},{countryName:this.intlService.translate("countries.thailand")||"Thailand",countryCode:"TH",dialCode:"66"},{countryName:this.intlService.translate("countries.timorLeste")||"Timor-Leste",countryCode:"TL",dialCode:"670"},{countryName:this.intlService.translate("countries.togo")||"Togo",countryCode:"TG",dialCode:"228"},{countryName:this.intlService.translate("countries.tokelau")||"Tokelau",countryCode:"TK",dialCode:"690"},{countryName:this.intlService.translate("countries.tonga")||"Tonga",countryCode:"TO",dialCode:"676"},{countryName:this.intlService.translate("countries.trinidadAndTobago")||"Trinidad and Tobago",countryCode:"TT",dialCode:"1868"},{countryName:this.intlService.translate("countries.tunisia")||"Tunisia",countryCode:"TN",dialCode:"216"},{countryName:this.intlService.translate("countries.turkey")||"Turkey",countryCode:"TR",dialCode:"90"},{countryName:this.intlService.translate("countries.turkmenistan")||"Turkmenistan",countryCode:"TM",dialCode:"993"},{countryName:this.intlService.translate("countries.turksAndCaicosIslands")||"Turks and Caicos Islands",countryCode:"TC",dialCode:"1649"},{countryName:this.intlService.translate("countries.tuvalu")||"Tuvalu",countryCode:"TV",dialCode:"688"},{countryName:this.intlService.translate("countries.uganda")||"Uganda",countryCode:"UG",dialCode:"256"},{countryName:this.intlService.translate("countries.ukraine")||"Ukraine",countryCode:"UA",dialCode:"380"},{countryName:this.intlService.translate("countries.unitedArabEmirates")||"United Arab Emirates",countryCode:"AE",dialCode:"971"},{countryName:this.intlService.translate("countries.unitedKingdom")||"United Kingdom",countryCode:"GB",dialCode:"44",priority:0},{countryCode:"UM",countryName:this.intlService.translate("countries.unitedStatesMinorOutlyingIslands")||"United States Minor Outlying Islands"},{countryName:this.intlService.translate("countries.unitedStates")||"United States",countryCode:"US",dialCode:"1",priority:0},{countryName:this.intlService.translate("countries.uruguay")||"Uruguay",countryCode:"UY",dialCode:"598"},{countryName:this.intlService.translate("countries.uzbekistan")||"Uzbekistan",countryCode:"UZ",dialCode:"998"},{countryName:this.intlService.translate("countries.vanuatu")||"Vanuatu",countryCode:"VU",dialCode:"678"},{countryName:this.intlService.translate("countries.vaticanCity")||"Vatican City",countryCode:"VA",dialCode:"39",priority:1},{countryName:this.intlService.translate("countries.venezuela")||"Venezuela",countryCode:"VE",dialCode:"58"},{countryName:this.intlService.translate("countries.vietnam")||"Vietnam",countryCode:"VN",dialCode:"84"},{countryName:this.intlService.translate("countries.wallisAndFutuna")||"Wallis and Futuna",countryCode:"WF",dialCode:"681"},{countryName:this.intlService.translate("countries.westernSahara")||"Western Sahara",countryCode:"EH",dialCode:"212",priority:1},{countryName:this.intlService.translate("countries.yemen")||"Yemen",countryCode:"YE",dialCode:"967"},{countryName:this.intlService.translate("countries.zambia")||"Zambia",countryCode:"ZM",dialCode:"260"},{countryName:this.intlService.translate("countries.zimbabwe")||"Zimbabwe",countryCode:"ZW",dialCode:"263"}];return this.language&&this.language!==i.L.EN&&(t=this.sortCountryListAlphabetically(t)),n=t,(null===(e=this.params)||void 0===e?void 0:e.excludePalestineFromCountriesList)?n.filter((e=>{let{countryCode:t}=e;return"PS"!==t})):n;var n}sortCountryListAlphabetically(e){return e.sort(((e,t)=>{const n=e.countryName.toLowerCase(),i=t.countryName.toLowerCase();return n<i?-1:n>i?1:0}))}}const a={language:null,translate:()=>null};function r(e){const t=(null==e?void 0:e.intl)||a;return new s(t,{excludePalestineFromCountriesList:null==e?void 0:e.excludePalestineFromCountriesList})}},2599:function(e,t,n){"use strict";n.d(t,{Ay:function(){return c},Bm:function(){return l}});var i=n(4850),s=n(472),a=n(2177);n(4601);const r=a,o=s;function c(e){const t=i.$.formatFiatCurrencies(r,e),n=i.$.formatCryptoCurrencies(o);return Object.assign(Object.assign({},t),n)}Object.values(r).map((e=>e.code)),Object.values(s).map((e=>e.code));const l=e=>"IDR"===e?12:8},4850:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i=n(5608),s=n(1217),a=n(2177);class r{loadFiat(e){const t=a;return r.formatFiatCurrencies(t,e)}loadCrypto(){return(0,i.sH)(this,void 0,void 0,(function*(){const e=yield this.getCryptoCurrencies();return r.formatCryptoCurrencies(e)}))}static formatFiatCurrencies(e,t){t||(t={translate:()=>null});const n={};for(const i in e){const a=e[i];n[i]={name:t.translate(`currencies.${i}`)||a.name,code:i,symbol:a.symbol,digits:a.digits,type:s.Z.FIAT,sources:[s.Z.FIAT]}}return n}static formatCryptoCurrencies(e){const t={};for(const n in e){const i=e[n];t[n]={name:i.name,code:n,symbol:i.symbol,digits:i.digits,protocol:i.protocol,networkName:i.networkName,network:i.network,provider:i.provider,type:s.Z.CRYPTO,sources:i.provider}}return t}}},6181:function(e,t,n){"use strict";n.d(t,{Uk:function(){return a},lt:function(){return i},yb:function(){return s}});const i=2,s='RangeError: currencyDisplay must be either "code", "symbol", or "name"',a="symbol"},7766:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var i=n(3266);function s(e,t){return t&&i.F.includes(e)?"":e}},3266:function(e,t,n){"use strict";n.d(t,{F:function(){return i},f:function(){return s}});const i=["GBP"];function s(e){return i.includes(e)}},1217:function(e,t,n){"use strict";var i;n.d(t,{Z:function(){return i}}),function(e){e.FIAT="fiat",e.CRYPTO="crypto"}(i||(i={}))},8393:function(e,t,n){"use strict";function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19;const t=window.crypto||window.msCrypto;let n="";if(t&&"function"==typeof t.getRandomValues){const i=new Uint8Array(e);t.getRandomValues(i),n=[].slice.call(i).map((e=>e%10)).join("")}else for(let t=0;t<e;t++)n+=Math.floor(10*Math.random()).toString();return"0"!==n[0]?n:i(e)}n.d(t,{i:function(){return i}})},641:function(e,t,n){"use strict";n.d(t,{Em:function(){return r},GI:function(){return c},Ki:function(){return l}});var i=n(5608),s=n(8093);const a=new Map;function r(e){return(0,i.sH)(this,void 0,void 0,(function*(){const t=new o(e),n=a.get(e.url);e.cancelSimilar&&n&&n(),a.set(e.url,t.abort.bind(t));try{const n=yield t.send();return a.delete(e.url),n}catch(t){throw"AbortError"!==(null==t?void 0:t.originalErrorName)&&a.delete(e.url),t}}))}class o{constructor(e){this.options=e,this.abortController=function(){try{return void 0!==window.AbortController}catch(e){return!1}}()?new AbortController:null}abort(){var e;null===(e=this.abortController)||void 0===e||e.abort()}send(){return(0,i.sH)(this,void 0,void 0,(function*(){var e,t;const n=this.getUrl(),i=this.getHeaders(),s=this.getBody(),a=this.getCredentials();let r;try{r=yield fetch(n,{method:this.options.method,signal:null===(e=this.abortController)||void 0===e?void 0:e.signal,headers:i,credentials:a,body:s})}catch(e){const t=e instanceof Error?e.message:"Network Error";throw new c(0,t,this.options.method,this.options.url,null==e?void 0:e.name,this.options.setCustomFingerprint)}const o=r.status;let l;const u=r.headers.get("content-type");if(l=(null==u?void 0:u.includes("application/json"))?yield r.json():yield r.text(),o>=500&&this.options.rejectOnInvalid)throw new c(o,r.statusText,this.options.method,this.options.url,"",this.options.setCustomFingerprint);const d=o>=200&&o<400||(null===(t=this.options.validStatuses)||void 0===t?void 0:t.includes(o));return{data:l,valid:Boolean(d)}}))}getHeaders(){const e=new Headers,t=this.options.headers;return t&&Object.keys(t).forEach((n=>{const i=t[n];void 0!==i&&e.append(n,i)})),e}getBody(){return void 0!==this.options.params&&"GET"!==this.options.method?JSON.stringify(this.options.params):null}getUrl(){let e=this.options.url;if("GET"===this.options.method&&this.options.params){const t=new URLSearchParams;for(const e of Object.keys(this.options.params))void 0!==this.options.params[e]&&t.set(e,String(this.options.params[e]));e+=`?${t.toString()}`}return e}getCredentials(){return"withCredentials"in this.options?this.options.withCredentials?"include":"omit":"include"}}class c extends Error{constructor(e,t,n,i,a,r){super(`[Checkout Shared]: Server ${n} response status ${e}, ${t} for url ${i}`),this.originalErrorName=a,r&&(this[s.Zk]=[i,t]),this.statusCode=e}}class l extends Error{constructor(){super('Request returned failure result with "rejectOnInvalid" flag set')}}},8093:function(e,t,n){"use strict";n.d(t,{Zk:function(){return i},b1:function(){return s}});const i=Symbol("CUSTOM_FINGERPRINT");var s;Symbol("EXTRA"),Symbol("TAGS"),function(e){e.COMMON="common",e.ADMIN="admin",e.DASHBOARD="dashboard",e.DONOR_PORTAL="donorPortal",e.CAMPAIGN_PAGE="campaign-page",e.INTEGRATION="integration",e.BILLING="billing",e.CHECKOUT="checkout",e.CHECKOUT_STEPLESS="checkout-stepless",e.EMAILS="emails"}(s||(s={}))},4020:function(e,t,n){"use strict";n.d(t,{MS:function(){return a}});const i=36e5,s=24*i,a={SECOND:1e3,MINUTE:6e4,HOUR:i,DAY:s,YEAR:365*s}},3954:function(e,t,n){"use strict";var i;n.d(t,{_:function(){return i}}),function(e){e.CARD="creditCard",e.APPLE_PAY="applePay",e.GOOGLE_PAY="googlePay",e.CLICK_TO_PAY="clickToPay",e.ACH="ach",e.PLAID="plaid",e.PAYPAL="paypal",e.VENMO="venmo",e.AU_BECS="auBecsDebit",e.UK_BACS="ukBacs",e.ACSS="acss",e.SEPA="sepa",e.IDEAL="ideal",e.CRYPTO="crypto",e.STOCK="stock",e.US_BANK_ACCOUNT="usBankAccount"}(i||(i={}))},3129:function(e,t,n){"use strict";var i;n.d(t,{_h:function(){return I._},fR:function(){return f},qs:function(){return l},M6:function(){return x},UH:function(){return S},Zq:function(){return N}}),function(e){e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.INCOMPLETE="incomplete",e.RETRYING="retrying",e.WAITING_FOR_TRANSFER="waiting_for_transfer",e.PAYPAL_ACTION_REQUIRED="paypal_action_required",e.SCHEDULED="scheduled",e.DISPUTE_LOST="dispute_lost",e.ACCOUNT_CLOSED="account_closed",e.ACCOUNT_FROZEN="account_frozen",e.AUTHENTICATION_REQUIRED="authentication_required",e.BANK_ACCOUNT_RESTRICTED="bank_account_restricted",e.CARD_DECLINED="card_declined",e.CREDIT_CARD_ACTION_REQUIRED="credit_card_action_required",e.DEBIT_NOT_AUTHORIZED="debit_not_authorized",e.EXPIRED_CARD="expired_card",e.INCORRECT_CVC="incorrect_cvc",e.INCORRECT_NUMBER="incorrect_number",e.INCORRECT_ZIP="incorrect_zip",e.INSUFFICIENT_FUNDS="insufficient_funds",e.INVALID_ACCOUNT_NUMBER="invalid_account_number",e.NO_ACCOUNT="no_account",e.PARAMETER_INVALID_INTEGER="parameter_invalid_integer",e.PROCESSING_ERROR="processing_error",e.RESOURCE_MISSING="resource_missing",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.FUN_VERIFICATION_CANCEL="fun_verification_cancel",e.SUBSCRIPTION_CANCELLED_BY_COMPANY="subscription_cancelled_by_company",e.SUBSCRIPTION_CANCELLED_BY_CUSTOMER="subscription_cancelled_by_customer",e.SUBSCRIPTION_SKIPPED_BY_COMPANY="subscription_skipped_by_company",e.SUBSCRIPTION_SKIPPED_BY_CUSTOMER="subscription_skipped_by_customer",e.PAYMENT_METHOD_INVALIDATED="payment_method_invalidated",e.FAILED_BY_TERMINATION_FLOW="failed_by_termination_flow",e.NOT_ELIGIBLE="not_eligible",e.UNKNOWN_REASON="unknown_reason",e.CANCELLED_BY_CUSTOMER="cancelled_by_customer",e.CANCELLED_BY_COMPANY="cancelled_by_company"}(i||(i={}));var s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,E,A,C,v,N,b,P,D,_,T,x,O,k,I=n(3954);!function(e){e.BITCOIN="bitcoin",e.ETHEREUM="ethereum",e.BITCOINCASH="bitcoincash",e.LITECOIN="litecoin",e.ZCASH="zcash",e.FILECOIN="filecoin",e.DOGECOIN="dogecoin",e.TEZOS="tezos",e.SOLANA="solana",e.POLKADOT="polkadot"}(s||(s={})),function(e){e.PENDING="pending",e.FAILED="failed",e.SUCCESS="success",e.REFUNDED="refunded"}(a||(a={})),function(e){e.FAIL="fail",e.FAIL_NOT_ELIGIBLE="fail_not_eligible",e.WAIT_FOR_TRANSFER="wait_for_transfer",e.SUCCEED="succeed"}(r||(r={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.FAILED="failed"}(o||(o={})),function(e){e.ACH="ach",e.GOOGLE_PAY="android_pay",e.APPLE_PAY="apple_pay",e.CLICK_TO_PAY="masterpass",e.PLAID="plaid"}(c||(c={})),function(e){e.CARD="card",e.BANK_ACCOUNT="bank_account",e.PAYPAL="paypal",e.VENMO="venmo",e.SOURCE="source",e.AU_BECS="au_becs_debit",e.UK_BACS="bacs_debit",e.ACSS="acss_debit",e.SEPA="sepa_debit",e.IDEAL="ideal",e.CRYPTO="crypto",e.STOCK="stock",e.US_BANK_ACCOUNT="us_bank_account"}(l||(l={})),function(e){e.CHARGEABLE="chargeable",e.NEW="new",e.VERIFICATION_FAILED="verification_failed",e.VERIFIED="verified",e.VALIDATED="validated",e.ERRORED="errored"}(u||(u={})),function(e){e.STRIPE="stripe",e.PAYPAL="paypal",e.MANUAL_BROKERAGE="manualBrokerage",e.GEMINI="gemini",e.COINBASE_COMMERCE="coinbaseCommerce"}(d||(d={})),function(e){e.STRIPE_TOKEN="stripeToken",e.STRIPE_PAYMENT_METHOD="stripePaymentMethod"}(h||(h={})),function(e){e.ACTIVE="active",e.CANCELLED="cancelled",e.FAILED="failed"}(m||(m={})),function(e){e.RETRYING="retrying",e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.SCHEDULED="scheduled",e.PAUSED="paused",e.CANCELLED_BY_COMPANY="cancelled_by_company",e.CANCELLED_BY_CUSTOMER="cancelled_by_customer",e.CANCELLED_BY_TERMINATION_FLOW="cancelled_by_termination_flow",e.CANCELLED_BY_DISPUTE_LOST="cancelled_by_dispute_lost",e.CANCELLED_BY_LIMIT="cancelled_by_limit",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.PAYMENT_METHOD_INVALIDATED="payment_method_invalidated",e.FAILED_BY_INSUFFICIENT="failed_by_insufficient_data"}(p||(p={})),function(e){e.CARD="card",e.BANK_ACCOUNT="bank_account",e.US_BANK_ACCOUNT="us_bank_account",e.AU_BECS="au_becs_debit",e.UK_BACS="bacs_debit",e.ACSS="acss_debit",e.SEPA="sepa_debit",e.IDEAL="ideal"}(g||(g={})),function(e){e.VISA="Visa",e.VISA_ELECTRON="Visa Electron",e.MASTER_CARD="MasterCard",e.AMERICAN_EXPRESS="American Express",e.DINERS_CLUB="Diners Club",e.DISCOVER="Discover",e.JCB="JCB",e.UNION_PAY="UnionPay"}(y||(y={})),function(e){e.VISA="visa",e.AMERICAN_EXPRESS="amex",e.MASTERCARD="mastercard",e.DISCOVER="discover"}(f||(f={})),function(e){e[e.STANDARD=290]="STANDARD",e[e.NON_PROFIT=220]="NON_PROFIT"}(S||(S={})),function(e){e[e.AUTO=-1]="AUTO",e[e.NEVER=0]="NEVER",e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX"}(E||(E={})),function(e){e.NEW="new",e.VALIDATED="validated",e.VERIFIED="verified",e.FAILED="verification_failed",e.ERRORED="errored"}(A||(A={})),function(e){e.INDIVIDUAL="individual",e.COMPANY="company"}(C||(C={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.DISABLED="disabled"}(v||(v={})),function(e){e.REQUIRES_ACTION="requires_action",e.REQUIRES_CONFIRMATION="requires_confirmation",e.REQUIRES_PAYMENT_METHOD="requires_payment_method",e.REQUIRES_CAPTURE="requires_capture",e.PROCESSING="processing",e.SUCCEEDED="succeeded",e.CANCELLED="canceled"}(N||(N={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(b||(b={})),function(e){e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_CANCELLED="ach_verification_cancelled",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.UNKNOWN_ERROR="unknown_error",e.DEACTIVATED_ON_PROVIDER_SIDE="deactivated_on_provider_side",e.ACCOUNT_CLOSED="account_closed",e.ACCOUNT_FROZEN="account_frozen",e.AUTHENTICATION_REQUIRED="authentication_required",e.BANK_ACCOUNT_RESTRICTED="bank_account_restricted",e.CARD_DECLINED="card_declined",e.DEBIT_NOT_AUTHORIZED="debit_not_authorized",e.EXPIRED_CARD="expired_card",e.FUN_VERIFICATION_CANCEL="fun_verification_cancel",e.FUN_WRONG_PAYMENT_METHOD="fun_wrong_payment_method",e.INCORRECT_CVC="incorrect_cvc",e.INCORRECT_NUMBER="incorrect_number",e.INCORRECT_ZIP="incorrect_zip",e.INSUFFICIENT_FUNDS="insufficient_funds",e.INVALID_ACCOUNT_NUMBER="invalid_account_number",e.NO_ACCOUNT="no_account",e.PROCESSING_ERROR="processing_error",e.RESOURCE_MISSING="resource_missing",e.MANDATE_INACTIVE="mandate_inactive",e.STRIPE_CUSTOMER_REQUIRED="stripe_customer_required",e.STRIPE_CUSTOMER_NONE="stripe_customer_none"}(P||(P={})),function(e){e.PAYMENT_METHOD_INVALIDATED="fun_payment_method_invalidated",e.CHARGE_VERIFICATION_CANCELLED="fun_verification_cancel",e.PAYMENT_METHOD_VERIFICATION_EXPIRED="fun_verification_expired",e.PAYMENT_METHOD_VERIFICATION_FAILED="fun_verification_failed",e.CHARGE_VERIFICATION_CANCELLED_BY_COMPANY="fun_verification_cancel_by_company",e.CHARGE_VERIFICATION_CANCELLED_BY_SUPPORTER="fun_verification_cancel_by_supporter",e.PAYMENT_WAS_CANCELLED="fun_payment_was_cancelled",e.ACCOUNT_WAS_TERMINATED="fun_account_was_terminated"}(D||(D={})),function(e){e.DUPLICATE_DONATION="duplicate_donation",e.FRAUD="fraud",e.REQUESTED_BY_SUPPORTER="requested_by_supporter",e.EXPIRED_UNCAPTURED_CHARGE="expired_uncaptured_charge",e.OTHER="other"}(_||(_={})),function(e){e.UPDATE_SUBSCRIPTION_CUSTOMER_ADDRESS="update_subscription_customer_address",e.UPDATE_SUBSCRIPTION_QUESTIONS="update_subscription_questions",e.UPDATE_SUBSCRIPTION_AMOUNT="update_subscription_amount",e.UPDATE_SUBSCRIPTION_CUSTOM_FIELDS="update_subscription_custom_fields",e.UPDATE_SUBSCRIPTION_UTM="update_subscription_utm",e.UPDATE_SUBSCRIPTION_GOAL="update_subscription_goal",e.UPDATE_SUBSCRIPTION_LIMITS="update_subscription_limits",e.UPDATE_SUBSCRIPTION_WIDGET="update_subscription_widget",e.UPDATE_SUBSCRIPTION_PAYMENT_METHOD="update_subscription_payment_method",e.UPDATE_CHARGE_CUSTOMER_ADDRESS="update_charge_customer_address",e.UPDATE_CHARGE_RECEIPT="update_charge_receipt",e.UPDATE_CHARGE_CUSTOM_FIELDS="update_charge_custom_fields",e.UPDATE_CHARGE_GOAL="update_charge_goal",e.UPDATE_CHARGE_WIDGET="update_charge_widget",e.REFUND_APPLICATION_FEE="refund_application_fee",e.UPDATE_CUSTOMER_NAME="update_customer_name"}(T||(T={})),function(e){e.PAYPAL_ERROR="PAYPAL_ERROR",e.PAYPAL_REQUEST_ERROR="PAYPAL_REQUEST_ERROR",e.REFUND_FAILED_INSUFFICIENT_FUNDS="REFUND_FAILED_INSUFFICIENT_FUNDS",e.TRANSACTION_REFUSED="TRANSACTION_REFUSED",e.TRANSACTION_ALREADY_REFUNDED="TRANSACTION_ALREADY_REFUNDED",e.USER_ACCOUNT_RESTRICTED="USER_ACCOUNT_RESTRICTED",e.INTERNAL="INTERNAL",e.UNAVAILABLE="UNAVAILABLE",e.EXECUTE_AGREEMENT_BUYER_NOT_ACCEPTED="EXECUTE_AGREEMENT_BUYER_NOT_ACCEPTED",e.ORDER_EXPIRED="ORDER_EXPIRED",e.VALIDATION_ERROR="VALIDATION_ERROR"}(x||(x={})),function(e){let t;!function(e){let t,n,i,s,a,r,o,c;!function(e){e.CREATED="charge.created",e.PENDING="charge.pending",e.REFUNDED="charge.refunded",e.FAILED="charge.failed",e.UPDATED="charge.updated",e.SUCCESS="charge.success",e.SUCCESS_EARLY_FRAUD_WARNING="charge.success_early_fraud_warning",e.PENDING_ACH_VERIFICATION_REQUIRED="charge.pending_ach_verification_required",e.PENDING_INCOMPLETE="charge.pending_incomplete",e.PENDING_SCHEDULED="charge.pending_scheduled",e.PENDING_WAITING_FOR_TRANSFER="charge.pending_waiting_for_transfer",e.PENDING_PAYPAL_ACTION_REQUIRED="charge.pending_paypal_action_required",e.PENDING_RETRYING="charge.pending_retrying",e.PERSONAL_DATA_DELETED="charge.personal_data_deleted",e.SUCCESS_DISPUTE_CREATED="charge.success_dispute_created",e.SUCCESS_DISPUTE_LOST="charge.success_dispute_lost",e.SUCCESS_DISPUTE_WON="charge.success_dispute_won",e.SUCCESS_DISPUTE_IN_REVIEW="charge.success_dispute_in_review"}(t=e.EChargeEvent||(e.EChargeEvent={})),function(e){e.ACTIVATED="subscription.activated",e.SCHEDULED="subscription.scheduled",e.FAILED="subscription.failed",e.COMPLETED="subscription.completed",e.CANCELLED="subscription.cancelled",e.TERMS_UPDATED="subscription.subscription_terms.updated",e.DETAILS_UPDATED="subscription.details.updated",e.PAUSED="subscription.paused",e.RETRYING="subscription.retrying",e.PERSONAL_DATA_DELETED="subscription.personal_data_deleted"}(n=e.ESubscriptionEvent||(e.ESubscriptionEvent={})),function(e){e.PENDING="charge_attempt.pending",e.SUCCESS="charge_attempt.success",e.FAILED="charge_attempt.failed"}(i=e.EChargeAttemptEvent||(e.EChargeAttemptEvent={})),function(e){e.ACTIVATE="payment_method.active",e.DEACTIVATE="payment_method.inactive",e.CREATED="payment_method.created",e.UPDATED="payment_method.updated",e.PERSONAL_DATA_DELETED="payment_method.personal_data_deleted"}(s=e.EPaymentMethodEvent||(e.EPaymentMethodEvent={})),function(e){e.CREATED="tribute.created",e.UPDATED="tribute.updated",e.SHARED="tribute.shared"}(a=e.ETributeEvent||(e.ETributeEvent={})),function(e){e.CREATED="abandoned_donation.created",e.OPEN="abandoned_donation.open",e.CANCELLED="abandoned_donation.cancelled",e.COMPLETED="abandoned_donation.completed",e.PERSONAL_DATA_DELETED="abandoned_donation.personal_data_deleted"}(r=e.EAbandonedDonationEvent||(e.EAbandonedDonationEvent={})),function(e){e.PERSONAL_DATA_DELETED="customer.personal_data_deleted",e.CREATED="customer.created",e.UPDATED="customer.updated"}(o=e.ECustomerEvent||(e.ECustomerEvent={})),function(e){e.CREATED="payment_attempt.created",e.PENDING="payment_attempt.pending",e.FAILED="payment_attempt.failed",e.SUCCEEDED="payment_attempt.succeeded"}(c=e.EPaymentAttemptEvent||(e.EPaymentAttemptEvent={}))}(t=e.DomainEvent||(e.DomainEvent={}))}(O||(O={})),function(e){e.REQUIRES_PAYMENT="requires_payment",e.REQUIRES_CAPTURE="requires_capture",e.REQUIRES_PAYMENT_METHOD_VERIFICATION="requires_payment_method_verification",e.FAILED="failed",e.SUCCEEDED="succeeded",e.CANCELED="canceled",e.PROCESSING="processing"}(k||(k={}))},4909:function(e,t,n){"use strict";var i;n.d(t,{h:function(){return i}}),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(i||(i={}))},5873:function(e,t,n){"use strict";var i;n.d(t,{_h:function(){return a._h},qs:function(){return a.qs},hY:function(){return _.h},Jy:function(){return S},tg:function(){return o},Bg:function(){return y},Au:function(){return p},dR:function(){return s},kt:function(){return h},ax:function(){return f},N4:function(){return d},XN:function(){return i},VN:function(){return u}}),function(e){e.DEFAULT_YES="defaultYes",e.DEFAULT_NO="defaultNo",e.ONLY_YES="onlyYes",e.ONLY_NO="onlyNo",e.SMART_COVERING="smartCovering"}(i||(i={}));var s,a=n(3129);!function(e){e.IN_HONOR_MEMORY="inHonorMemory",e.DEDICATION="dedication"}(s||(s={}));var r,o,c,l,u,d,h,m,p,g,y,f,S,E,A,C,v,N,b,P,D,_=n(4909);!function(e){e.DONOR_PORTAL="donorPortal",e.DASHBOARD="dashboard",e.DASHBOARD_USER="dashboardUser"}(r||(r={})),function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(o||(o={})),function(e){e.PAN_ONLY="PAN_ONLY",e.CRYPTOGRAM_3DS="CRYPTOGRAM_3DS"}(c||(c={})),function(e){e.AMEX="AMEX",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.VISA="VISA"}(l||(l={})),function(e){e.DEFAULT_MONTHLY="defaultMonthly",e.ONLY_MONTHLY="onlyMonthly",e.DEFAULT_ONETIME="defaultOnetime",e.ONLY_ONETIME="onlyOnetime"}(u||(u={})),function(e){e.FUNDRAISING_PAGE="fundraisingPage",e.REDIRECT="redirect",e.THANK_YOU_SCREEN="thankYouScreen"}(d||(d={})),function(e){e.NONE="none",e.GENERAL="general",e.CUSTOMIZED="customized"}(h||(h={})),function(e){e.ADAPTIVE_COST_COVERAGE="adaptiveCostCoverage",e.PRE_DONATION_UPSELL="preDonationUpsell",e.POST_DONATION_UPSELL="postDonationUpsell"}(m||(m={})),function(e){e.GENERAL="general",e.CUSTOMIZED="customized"}(p||(p={})),function(e){e.EMAIL="email",e.POSTAL_MAIL="postalMail",e.SMS="sms",e.PHONE_CALLS="phoneCalls",e.SOCIAL_MEDIA="socialMedia"}(g||(g={})),function(e){e.NOT_SUBMITTED="notSubmitted",e.OPTED_IN="optedIn",e.OPTED_OUT="optedOut"}(y||(y={})),function(e){e.EMAIL="email",e.SMS="sms",e.PHONE_CALLS="phoneCalls",e.POSTAL_MAIL="postalMail",e.SOCIAL_MEDIA="socialMedia"}(f||(f={})),function(e){e.DESKTOP="desktop",e.MOBILE="mobile"}(S||(S={})),function(e){e.DISABLED="disabled",e.DRY_RUN="dry-run",e.ENABLED="enabled"}(E||(E={})),function(e){e.LIVE="live",e.TEST="test"}(A||(A={})),function(e){e.TEXT="text",e.EMAIL="email"}(C||(C={})),function(e){e.WEBSITE="website",e.CAMPAIGN_PAGE="campaignPage",e.VIRTUAL_TERMINAL="virtualTerminal",e.DONOR_PORTAL="donorPortal",e.DASHBOARD="dashboard",e.RECURRING_MIGRATION="recurringMigration",e.API="api"}(v||(v={})),function(e){e.DAY_7="7d",e.MONTH="1m",e.MONTH_3="3m",e.YEAR_TO_DAY="ytd",e.YEAR="1y",e.YEAR_5="5y"}(N||(N={})),function(e){e.FULL="full",e.CHUNK="chunk"}(b||(b={})),function(e){e.CHARGES="charges",e.COMPANIES="companies",e.CUSTOMERS="customers",e.ELEMENTS="elements",e.SUBSCRIPTIONS="subscriptions",e.WIDGETS="widgets",e.FUNDRAISING_PAGES="fundraisingpages",e.USERS="users"}(P||(P={})),function(e){e.FULL="full",e.FROM="from"}(D||(D={})),N.DAY_7,N.MONTH,N.MONTH_3,N.YEAR_TO_DAY,N.YEAR,N.YEAR_5},3367:function(e,t,n){var i={"./ar_001.json":[3372,830],"./da.json":[1104,639],"./de.json":[444,436],"./en_CA.json":[9821,245],"./en_GB.json":[4828,234],"./en_US.json":[2853,627],"./es.json":[847,616],"./es_US.json":[7868,425],"./fi_FI.json":[1078,662],"./fr_CA.json":[5292,471],"./fr_FR.json":[3764,381],"./hu.json":[5472,572],"./it.json":[8054,775],"./ja.json":[6598,966],"./ko.json":[9277,561],"./nl.json":[2785,752],"./no.json":[7396,763],"./pl_PL.json":[3848,954],"./pt_BR.json":[9672,989],"./pt_PT.json":[8216,180],"./ru_RU.json":[6214,740],"./sv.json":[2642,901],"./zh_CN.json":[507,710],"./zh_TW.json":[2851,519]};function s(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return n.e(t[1]).then((function(){return n.t(s,19)}))}s.keys=function(){return Object.keys(i)},s.id=3367,e.exports=s},3421:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-amex.f704acb7cb0f1c209efa.png"},2707:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-diners.b69117170ac25814aa42.png"},1229:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-discover.dbc0569d3c7cfb9e0c1e.png"},543:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-jcb.12e905d1462fd708b795.png"},9848:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-mastercard.51e8e6a0a1b07ef9c09b.png"},8057:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unionpay.98ea5861340fc8694663.png"},2217:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unknown-error.7afd2ac2559f2f9f3960.png"},8044:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unknown.265c1bce7f59ecbff072.png"},9503:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-visa.d358d698a9d21919e7c1.png"},6843:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-300.woff2"},4312:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-400.woff2"},7977:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-500.woff2"},5870:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-600.woff2"},9807:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-700.woff2"},8552:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-300.woff2"},1755:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-400.woff2"},9706:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-500.woff2"},3717:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-600.woff2"},8676:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-700.woff2"},3179:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/sacramento/sacramento-v15-400.woff2"},9562:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/verveine/verveine-400.woff2"},9658:function(e){"use strict";e.exports=JSON.parse('{"u":"URL","ck":"companyKey","cm":"checkoutCompanyKey","cd":"clientId","ct":"clientTime","cz":"clientTimeZone","lo":"clientLocale","ek":"elementKey","el":"elementLocale","er":"elementReminderKey","ey":"elementType","ep":"elementParams","et":"eventType","te":"customEventType","ev":"customEventData","ed":"elementData","eg":"eventTags","pv":"pageViewId","pl":"pageViewLifetime","r":"referer","rh":"resolutionHeight","rw":"resolutionWidth","t":"title","hl":"uaHistoryLength","wk":"widgetKey","wh":"windowHeight","wx":"windowScrollX","wy":"windowScrollY","ww":"windowWidth","cv":"checkoutViewId","ce":"checkoutError","co":"checkoutOpenTime","cl":"checkoutLifetime","cs":"checkoutScreen","sd":"checkoutScreenData","cc":"checkoutClickElement","cf":"checkoutFrequency","fp":"clickDOMPath","fh":"clickAHref","ft":"clickText","dk":"chargeCampaignKey","dd":"chargeKey","du":"chargeInUSDAmount","di":"chargeInDefaultCurrencyAmount","da":"chargeAmount","dc":"chargeCurrency","df":"chargeFeeCovered","dm":"chargePaymentMethod","dr":"chargeIsRecurring","dn":"chargeHasComment","dh":"chargeHasTribute","dg":"chargeGoal","st":"splitTestName","sv":"splitTestVariant","pm":"paymentMethod","ws":"widgetSession","lm":"livemode","fv":"funSnippetVersion","fe":"funEmbedRelease","vf":"isFundraiseupVisitor","lc":"checkoutLocale","cr":"checkoutIsRecurring","cy":"checkoutCurrency","ca":"checkoutAmount","cu":"checkoutInUSDAmount","yr":"checkoutCurrencyRate","fa":"checkoutDefaultAmount","cp":"checkoutPresets","ps":"pageScripts","ol":"clientOnLine","dt":"clientDoNotTrack","pr":"clientDevicePixelRatio","rm":"clientDeviceMemory","hc":"clientHardwareConcurrency","nt":"clientConnectionType","nd":"clientConnectionDownlink","nr":"clientConnectionRTT","ne":"clientConnectionEffectiveType","bc":"clientBatteryCharging","bt":"clientBatteryChargingTime","bd":"clientBatteryDischargingTime","bl":"clientBatteryLevel","de":"dataLayerEventName","dp":"dataLayerParams","fn":"pixelEventName","fs":"pixelEventData","gk":"fundraisingGroupKey","pk":"fundraisingPageKey","pc":"fundraisingPageCustomerKey","ec":"eventComment","ba":"uaIsInApp","uw":"uaWebdriver","rd":"duration","se":"source","sk":"supporterKey","ak":"agentKey","pu":"pointingDeviceIsUsed","fo":"donationType","cn":"clientCookieConsent","tt":"checkoutType"}')},472:function(e){"use strict";e.exports=JSON.parse('{"BTC":{"name":"Bitcoin","code":"BTC","symbol":"","digits":8,"network":"bitcoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Bitcoin","coin":true},"ETH":{"name":"Ethereum","code":"ETH","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":true},"USDT":{"name":"Tether USD","code":"USDT","symbol":"","digits":8,"network":"ethereum","provider":["coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"USDC":{"name":"USD Coin","code":"USDC","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"SOL":{"name":"Solana","code":"SOL","symbol":"","digits":8,"network":"solana","provider":["gemini"],"protocol":"","networkName":"Solana","coin":true},"DOT":{"name":"Polkadot","code":"DOT","symbol":"","digits":8,"network":"polkadot","provider":["gemini"],"protocol":"","networkName":"Polkadot","coin":true},"DOGE":{"name":"Dogecoin","code":"DOGE","symbol":"","digits":8,"network":"dogecoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Dogecoin","coin":true},"SHIB":{"name":"Shiba Inu","code":"SHIB","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"LTC":{"name":"Litecoin","code":"LTC","symbol":"","digits":8,"network":"litecoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Litecoin","coin":true},"BCH":{"name":"Bitcoin Cash","code":"BCH","symbol":"","digits":8,"network":"bitcoincash","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Bitcoin Cash","coin":true},"XTZ":{"name":"Tezos","code":"XTZ","symbol":"","digits":8,"network":"tezos","provider":["gemini"],"protocol":"","networkName":"Tezos","coin":true},"FIL":{"name":"Filecoin","code":"FIL","symbol":"","digits":8,"network":"filecoin","provider":["gemini"],"protocol":"","networkName":"Filecoin","coin":true},"FTM":{"name":"Fantom","code":"FTM","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"GALA":{"name":"Gala","code":"GALA","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"PAXG":{"name":"PAX Gold","code":"PAXG","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"ZEC":{"name":"Zcash","code":"ZEC","symbol":"","digits":8,"network":"zcash","provider":["gemini"],"protocol":"","networkName":"Zcash","coin":true}}')},2177:function(e){"use strict";e.exports=JSON.parse('{"SHP":{"name":"St. Helena Pound","code":"SHP","symbol":"","digits":2},"EUR":{"name":"Euro","code":"EUR","symbol":"","digits":2},"AED":{"name":"United Arab Emirates Dirham","code":"AED","symbol":"","digits":2},"AFN":{"name":"Afghan Afghani","code":"AFN","symbol":"","digits":2},"XCD":{"name":"East Caribbean Dollar","code":"XCD","symbol":"$","digits":2},"ALL":{"name":"Albanian Lek","code":"ALL","symbol":"","digits":2},"AMD":{"name":"Armenian Dram","code":"AMD","symbol":"","digits":2},"AOA":{"name":"Angolan Kwanza","code":"AOA","symbol":"Kz","digits":2},"ARS":{"name":"Argentine Peso","code":"ARS","symbol":"$","digits":2},"USD":{"name":"US Dollar","code":"USD","symbol":"$","digits":2},"AUD":{"name":"Australian Dollar","code":"AUD","symbol":"$","digits":2},"ANG":{"name":"Netherlands Antillean Guilder","code":"ANG","symbol":"","digits":2},"AWG":{"name":"Aruban Florin","code":"AWG","symbol":"","digits":2},"AZN":{"name":"Azerbaijani Manat","code":"AZN","symbol":"","digits":2},"BAM":{"name":"Bosnia-Herzegovina Convertible Mark","code":"BAM","symbol":"KM","digits":2},"BBD":{"name":"Barbadian Dollar","code":"BBD","symbol":"$","digits":2},"INR":{"name":"Indian Rupee","code":"INR","symbol":"","digits":2},"PKR":{"name":"Pakistani Rupee","code":"PKR","symbol":"Rs","digits":2},"BDT":{"name":"Bangladeshi Taka","code":"BDT","symbol":"","digits":2},"XOF":{"name":"West African CFA Franc","code":"XOF","symbol":"","digits":0},"BGN":{"name":"Bulgarian Lev","code":"BGN","symbol":"","digits":2},"BHD":{"name":"Bahraini Dinar","code":"BHD","symbol":"","digits":2},"BIF":{"name":"Burundian Franc","code":"BIF","symbol":"","digits":0},"BMD":{"name":"Bermudan Dollar","code":"BMD","symbol":"$","digits":2},"MYR":{"name":"Malaysian Ringgit","code":"MYR","symbol":"RM","digits":2},"BND":{"name":"Brunei Dollar","code":"BND","symbol":"$","digits":2},"BOB":{"name":"Bolivian Boliviano","code":"BOB","symbol":"Bs","digits":2},"BRL":{"name":"Brazilian Real","code":"BRL","symbol":"R$","digits":2},"BSD":{"name":"Bahamian Dollar","code":"BSD","symbol":"$","digits":2},"BTN":{"name":"Bhutanese Ngultrum","code":"BTN","symbol":"","digits":2},"NOK":{"name":"Norwegian Krone","code":"NOK","symbol":"kr","digits":2},"ZAR":{"name":"South African Rand","code":"ZAR","symbol":"R","digits":2},"BWP":{"name":"Botswanan Pula","code":"BWP","symbol":"P","digits":2},"BYN":{"name":"Belarusian Ruble","code":"BYN","symbol":"","digits":2},"BZD":{"name":"Belize Dollar","code":"BZD","symbol":"$","digits":2},"CAD":{"name":"Canadian Dollar","code":"CAD","symbol":"$","digits":2},"CDF":{"name":"Congolese Franc","code":"CDF","symbol":"","digits":2},"XAF":{"name":"Central African CFA Franc","code":"XAF","symbol":"","digits":0},"CHF":{"name":"Swiss Franc","code":"CHF","symbol":"","digits":2},"NZD":{"name":"New Zealand Dollar","code":"NZD","symbol":"$","digits":2},"CLP":{"name":"Chilean Peso","code":"CLP","symbol":"$","digits":0},"CNY":{"name":"Chinese Yuan","code":"CNY","symbol":"","digits":2},"COP":{"name":"Colombian Peso","code":"COP","symbol":"$","digits":2},"CRC":{"name":"Costa Rican Coln","code":"CRC","symbol":"","digits":2},"CVE":{"name":"Cape Verdean Escudo","code":"CVE","symbol":"","digits":2},"CZK":{"name":"Czech Koruna","code":"CZK","symbol":"K","digits":2},"DJF":{"name":"Djiboutian Franc","code":"DJF","symbol":"","digits":0},"DKK":{"name":"Danish Krone","code":"DKK","symbol":"kr","digits":2},"DOP":{"name":"Dominican Peso","code":"DOP","symbol":"$","digits":2},"DZD":{"name":"Algerian Dinar","code":"DZD","symbol":"","digits":2},"EGP":{"name":"Egyptian Pound","code":"EGP","symbol":"E","digits":2},"MAD":{"name":"Moroccan Dirham","code":"MAD","symbol":"","digits":2},"ETB":{"name":"Ethiopian Birr","code":"ETB","symbol":"","digits":2},"FJD":{"name":"Fijian Dollar","code":"FJD","symbol":"$","digits":2},"FKP":{"name":"Falkland Islands Pound","code":"FKP","symbol":"","digits":2},"JPY":{"name":"Japanese Yen","code":"JPY","symbol":"","digits":0},"GBP":{"name":"British Pound","code":"GBP","symbol":"","digits":2},"GEL":{"name":"Georgian Lari","code":"GEL","symbol":"","digits":2},"GHS":{"name":"Ghanaian Cedi","code":"GHS","symbol":"GH","digits":2},"GIP":{"name":"Gibraltar Pound","code":"GIP","symbol":"","digits":2},"GMD":{"name":"Gambian Dalasi","code":"GMD","symbol":"","digits":2},"GNF":{"name":"Guinean Franc","code":"GNF","symbol":"FG","digits":0},"GTQ":{"name":"Guatemalan Quetzal","code":"GTQ","symbol":"Q","digits":2},"GYD":{"name":"Guyanaese Dollar","code":"GYD","symbol":"$","digits":2},"HKD":{"name":"Hong Kong Dollar","code":"HKD","symbol":"$","digits":2},"HNL":{"name":"Honduran Lempira","code":"HNL","symbol":"L","digits":2},"HRK":{"name":"Croatian Kuna","code":"HRK","symbol":"kn","digits":2},"HTG":{"name":"Haitian Gourde","code":"HTG","symbol":"","digits":2},"HUF":{"name":"Hungarian Forint","code":"HUF","symbol":"Ft","digits":2},"IDR":{"name":"Indonesian Rupiah","code":"IDR","symbol":"Rp","digits":2},"ILS":{"name":"Israeli New Shekel","code":"ILS","symbol":"","digits":2},"ISK":{"name":"Icelandic Krna","code":"ISK","symbol":"kr","digits":2},"JMD":{"name":"Jamaican Dollar","code":"JMD","symbol":"$","digits":2},"JOD":{"name":"Jordanian Dinar","code":"JOD","symbol":"","digits":2},"KES":{"name":"Kenyan Shilling","code":"KES","symbol":"","digits":2},"KGS":{"name":"Kyrgystani Som","code":"KGS","symbol":"","digits":2},"KHR":{"name":"Cambodian Riel","code":"KHR","symbol":"","digits":2},"KMF":{"name":"Comorian Franc","code":"KMF","symbol":"CF","digits":0},"KRW":{"name":"South Korean Won","code":"KRW","symbol":"","digits":0},"KWD":{"name":"Kuwaiti Dinar","code":"KWD","symbol":"","digits":2},"KYD":{"name":"Cayman Islands Dollar","code":"KYD","symbol":"$","digits":2},"KZT":{"name":"Kazakhstani Tenge","code":"KZT","symbol":"","digits":2},"LAK":{"name":"Laotian Kip","code":"LAK","symbol":"","digits":2},"LBP":{"name":"Lebanese Pound","code":"LBP","symbol":"L","digits":2},"LKR":{"name":"Sri Lankan Rupee","code":"LKR","symbol":"Rs","digits":2},"LRD":{"name":"Liberian Dollar","code":"LRD","symbol":"$","digits":2},"LSL":{"name":"Lesotho Loti","code":"LSL","symbol":"","digits":2},"MDL":{"name":"Moldovan Leu","code":"MDL","symbol":"","digits":2},"MGA":{"name":"Malagasy Ariary","code":"MGA","symbol":"Ar","digits":0},"MKD":{"name":"Macedonian Denar","code":"MKD","symbol":"","digits":2},"MMK":{"name":"Myanmar Kyat","code":"MMK","symbol":"K","digits":2},"MNT":{"name":"Mongolian Tugrik","code":"MNT","symbol":"","digits":2},"MOP":{"name":"Macanese Pataca","code":"MOP","symbol":"","digits":2},"MRO":{"name":"Mauritanian Ouguiya (19732017)","code":"MRO","symbol":"","digits":2},"MUR":{"name":"Mauritian Rupee","code":"MUR","symbol":"Rs","digits":2},"MVR":{"name":"Maldivian Rufiyaa","code":"MVR","symbol":"","digits":2},"MWK":{"name":"Malawian Kwacha","code":"MWK","symbol":"","digits":2},"MXN":{"name":"Mexican Peso","code":"MXN","symbol":"$","digits":2},"MZN":{"name":"Mozambican Metical","code":"MZN","symbol":"","digits":2},"NAD":{"name":"Namibian Dollar","code":"NAD","symbol":"$","digits":2},"XPF":{"name":"CFP Franc","code":"XPF","symbol":"","digits":0},"NGN":{"name":"Nigerian Naira","code":"NGN","symbol":"","digits":2},"NIO":{"name":"Nicaraguan Crdoba","code":"NIO","symbol":"C$","digits":2},"SEK":{"name":"Swedish Krona","code":"SEK","symbol":"kr","digits":2},"NPR":{"name":"Nepalese Rupee","code":"NPR","symbol":"Rs","digits":2},"OMR":{"name":"Omani Rial","code":"OMR","symbol":"","digits":2},"PAB":{"name":"Panamanian Balboa","code":"PAB","symbol":"","digits":2},"PEN":{"name":"Peruvian Sol","code":"PEN","symbol":"","digits":2},"PGK":{"name":"Papua New Guinean Kina","code":"PGK","symbol":"","digits":2},"PHP":{"name":"Philippine Peso","code":"PHP","symbol":"","digits":2},"PLN":{"name":"Polish Zloty","code":"PLN","symbol":"z","digits":2},"PYG":{"name":"Paraguayan Guarani","code":"PYG","symbol":"","digits":0},"QAR":{"name":"Qatari Riyal","code":"QAR","symbol":"","digits":2},"RON":{"name":"Romanian Leu","code":"RON","symbol":"lei","digits":2},"RSD":{"name":"Serbian Dinar","code":"RSD","symbol":"","digits":2},"RUB":{"name":"Russian Ruble","code":"RUB","symbol":"","digits":2},"RWF":{"name":"Rwandan Franc","code":"RWF","symbol":"RF","digits":0},"SAR":{"name":"Saudi Riyal","code":"SAR","symbol":"","digits":2},"SBD":{"name":"Solomon Islands Dollar","code":"SBD","symbol":"$","digits":2},"SCR":{"name":"Seychellois Rupee","code":"SCR","symbol":"","digits":2},"SGD":{"name":"Singapore Dollar","code":"SGD","symbol":"$","digits":2},"SLL":{"name":"Sierra Leonean Leone (19642022)","code":"SLL","symbol":"","digits":2},"SLE":{"name":"Sierra Leonean Leone","code":"SLE","symbol":"","digits":2},"SOS":{"name":"Somali Shilling","code":"SOS","symbol":"","digits":2},"SRD":{"name":"Surinamese Dollar","code":"SRD","symbol":"$","digits":2},"STD":{"name":"So Tom & Prncipe Dobra (19772017)","code":"STD","symbol":"","digits":2},"SVC":{"name":"Salvadoran Coln","code":"SVC","symbol":"","digits":2},"SZL":{"name":"Swazi Lilangeni","code":"SZL","symbol":"","digits":2},"THB":{"name":"Thai Baht","code":"THB","symbol":"","digits":2},"TJS":{"name":"Tajikistani Somoni","code":"TJS","symbol":"","digits":2},"TND":{"name":"Tunisian Dinar","code":"TND","symbol":"","digits":2},"TOP":{"name":"Tongan Paanga","code":"TOP","symbol":"T$","digits":2},"TRY":{"name":"Turkish Lira","code":"TRY","symbol":"","digits":2},"TTD":{"name":"Trinidad & Tobago Dollar","code":"TTD","symbol":"$","digits":2},"TWD":{"name":"New Taiwan Dollar","code":"TWD","symbol":"$","digits":2},"TZS":{"name":"Tanzanian Shilling","code":"TZS","symbol":"","digits":2},"UAH":{"name":"Ukrainian Hryvnia","code":"UAH","symbol":"","digits":2},"UYU":{"name":"Uruguayan Peso","code":"UYU","symbol":"$","digits":2},"UZS":{"name":"Uzbekistani Som","code":"UZS","symbol":"","digits":2},"VND":{"name":"Vietnamese Dong","code":"VND","symbol":"","digits":0},"VUV":{"name":"Vanuatu Vatu","code":"VUV","symbol":"","digits":0},"WST":{"name":"Samoan Tala","code":"WST","symbol":"","digits":2},"YER":{"name":"Yemeni Rial","code":"YER","symbol":"","digits":2},"ZMW":{"name":"Zambian Kwacha","code":"ZMW","symbol":"ZK","digits":2}}')},4601:function(e){"use strict";e.exports=JSON.parse('{"AC":["SHP"],"AD":["EUR"],"AE":["AED"],"AF":["AFN"],"AG":["XCD"],"AI":["XCD"],"AL":["ALL"],"AM":["AMD"],"AO":["AOA"],"AR":["ARS"],"AS":["USD"],"AT":["EUR"],"AU":["AUD"],"AW":["AWG","ANG"],"AX":["EUR"],"AZ":["AZN"],"BA":["BAM"],"BB":["BBD","XCD"],"BD":["BDT","PKR","INR"],"BE":["EUR"],"BF":["XOF"],"BG":["BGN","EUR"],"BH":["BHD"],"BI":["BIF"],"BJ":["XOF"],"BL":["EUR"],"BM":["BMD"],"BN":["BND","MYR"],"BO":["BOB"],"BQ":["USD","ANG"],"BR":["BRL"],"BS":["BSD"],"BT":["BTN","INR"],"BV":["NOK"],"BW":["BWP","ZAR"],"BY":["BYN","EUR"],"BZ":["BZD"],"CA":["CAD","USD"],"CC":["AUD"],"CD":["CDF"],"CF":["XAF"],"CG":["XAF"],"CH":["CHF"],"CI":["XOF"],"CK":["NZD"],"CL":["CLP"],"CM":["XAF"],"CN":["CNY"],"CO":["COP"],"CR":["CRC"],"CS":["EUR"],"CU":["USD"],"CV":["CVE"],"CW":["ANG"],"CX":["AUD"],"CY":["EUR"],"CZ":["CZK","EUR"],"DE":["EUR"],"DG":["USD"],"DJ":["DJF"],"DK":["DKK","EUR"],"DM":["XCD"],"DO":["DOP","USD"],"DZ":["DZD"],"EA":["EUR"],"EC":["USD"],"EE":["EUR"],"EG":["EGP"],"EH":["MAD"],"ER":["ETB"],"ES":["EUR"],"ET":["ETB"],"EU":["EUR"],"FI":["EUR"],"FJ":["FJD"],"FK":["FKP"],"FM":["USD","JPY"],"FO":["DKK"],"FR":["EUR"],"GA":["XAF"],"GB":["GBP","EUR"],"GD":["XCD"],"GE":["GEL"],"GF":["EUR"],"GG":["GBP"],"GH":["GHS"],"GI":["GIP"],"GL":["DKK"],"GM":["GMD"],"GN":["GNF"],"GP":["EUR"],"GQ":["XAF"],"GR":["EUR"],"GS":["GBP"],"GT":["GTQ"],"GU":["USD"],"GW":["XOF"],"GY":["GYD"],"HK":["HKD"],"HM":["AUD"],"HN":["HNL"],"HR":["EUR"],"HT":["USD","HTG"],"HU":["HUF","EUR"],"IC":["EUR"],"ID":["IDR"],"IE":["EUR","GBP"],"IL":["ILS"],"IM":["GBP"],"IN":["INR"],"IO":["USD"],"IQ":["INR","EGP"],"IS":["ISK","DKK"],"IT":["EUR"],"JE":["GBP"],"JM":["JMD"],"JO":["JOD"],"JP":["JPY"],"KE":["KES"],"KG":["KGS"],"KH":["KHR"],"KI":["AUD"],"KM":["KMF"],"KN":["XCD"],"KR":["KRW"],"KW":["KWD"],"KY":["KYD","JMD"],"KZ":["KZT"],"LA":["LAK"],"LB":["LBP"],"LC":["XCD"],"LI":["CHF"],"LK":["LKR"],"LR":["LRD"],"LS":["LSL","ZAR"],"LT":["EUR"],"LU":["EUR"],"LV":["EUR"],"MA":["MAD"],"MC":["EUR"],"MD":["MDL"],"ME":["EUR"],"MF":["EUR"],"MG":["MGA"],"MH":["USD"],"MK":["MKD"],"ML":["XOF","XOF"],"MM":["MMK"],"MN":["MNT"],"MO":["MOP"],"MP":["USD"],"MQ":["EUR"],"MR":["XOF"],"MS":["XCD"],"MT":["EUR"],"MU":["MUR"],"MV":["MVR"],"MW":["MWK"],"MX":["MXN","USD"],"MY":["MYR"],"MZ":["MZN"],"NA":["NAD","ZAR"],"NC":["XPF"],"NE":["XOF"],"NF":["AUD"],"NG":["NGN"],"NI":["NIO"],"NL":["EUR"],"NO":["NOK","SEK","EUR"],"NP":["NPR","INR"],"NR":["AUD"],"NU":["NZD"],"NZ":["NZD"],"OM":["OMR"],"PA":["USD","PAB"],"PE":["PEN"],"PF":["XPF"],"PG":["PGK","AUD"],"PH":["PHP"],"PK":["PKR","INR"],"PL":["PLN","EUR"],"PM":["EUR"],"PN":["NZD"],"PR":["USD"],"PS":["JOD","ILS","JOD"],"PT":["EUR"],"PW":["USD"],"PY":["PYG"],"QA":["QAR"],"RE":["EUR"],"RO":["RON","EUR"],"RS":["RSD"],"RU":["RUB","EUR"],"RW":["RWF"],"SA":["SAR"],"SB":["SBD","AUD"],"SC":["SCR"],"SD":["GBP","EGP"],"SE":["SEK","EUR"],"SG":["SGD","MYR"],"SH":["SHP"],"SI":["EUR"],"SJ":["NOK"],"SK":["EUR"],"SL":["SLE","GBP","SLL"],"SM":["EUR"],"SN":["XOF"],"SO":["SOS"],"SR":["SRD"],"ST":["USD"],"SV":["USD"],"SX":["ANG"],"SZ":["SZL"],"TA":["GBP"],"TC":["USD"],"TD":["XAF"],"TF":["EUR"],"TG":["XOF"],"TH":["THB"],"TJ":["TJS"],"TK":["NZD"],"TL":["USD","IDR"],"TN":["TND"],"TO":["TOP"],"TP":["IDR"],"TR":["TRY"],"TT":["TTD"],"TV":["AUD"],"TW":["TWD"],"TZ":["TZS"],"UA":["UAH","EUR"],"UM":["USD"],"US":["USD"],"UY":["UYU"],"UZ":["UZS"],"VA":["EUR"],"VC":["XCD"],"VG":["GBP","USD"],"VI":["USD"],"VN":["VND"],"VU":["VUV"],"WF":["XPF"],"WS":["WST"],"XK":["EUR"],"YE":["YER"],"YT":["EUR","KMF"],"ZA":["ZAR"],"ZM":["ZMW"],"ZW":["USD"]}')},4025:function(e){"use strict";e.exports=JSON.parse('{"name":"ACH","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":9500,"currency":"USD"}},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},8913:function(e){"use strict";e.exports=JSON.parse('{"name":"ACSS","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"CAD"}},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},8825:function(e){"use strict";e.exports=JSON.parse('{"name":"Apple Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},4776:function(e){"use strict";e.exports=JSON.parse('{"name":"BECS Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"AUD"}},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"AUD"}},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},4246:function(e){"use strict";e.exports=JSON.parse('{"name":"Click to Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},9392:function(e){"use strict";e.exports=JSON.parse('{"name":"Credit Card","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},5718:function(e){"use strict";e.exports=JSON.parse('{"name":"Crypto","provider":"gemini","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')},7958:function(e){"use strict";e.exports=JSON.parse('{"name":"Google Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},2876:function(e){"use strict";e.exports=JSON.parse('{"name":"iDEAL","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":["NL","BE","LU","DE"],"email":{"required":true},"address":{"required":false},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{},"widget":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":["NL","BE","LU","DE"],"email":{"required":true},"address":{"required":false},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{}}')},8524:function(e){"use strict";e.exports=JSON.parse('{"name":"PayPal","provider":"paypal","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},6631:function(e){"use strict";e.exports=JSON.parse('{"name":"Plaid","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},7012:function(e){"use strict";e.exports=JSON.parse('{"name":"SEPA Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true}},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["EUR"],"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true}},"widget":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"requiredIfIbanCountry":["AD","PF","TF","GI","GB","GG","VA","IM","JE","MC","NC","BL","PM","SM","CH","WF"]},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"address":{"requiredIfIbanCountry":["AD","PF","TF","GI","GB","GG","VA","IM","JE","MC","NC","BL","PM","SM","CH","WF"]},"email":{"required":true},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},5199:function(e){"use strict";e.exports=JSON.parse('{"name":"Stock","provider":"manualBrokerage","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')},7804:function(e){"use strict";e.exports=JSON.parse('{"name":"Bacs Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"GBP"}},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"GBP"}},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},2384:function(e){"use strict";e.exports=JSON.parse('{"name":"ACH","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},9576:function(e){"use strict";e.exports=JSON.parse('{"name":"Venmo","provider":"paypal","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=a,e=[],o.O=function(t,n,i,s){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],s=e[u][2];for(var r=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(r=!1,s<a&&(a=s));if(r){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,i,s]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var a={};t=t||[null,n({}),n([]),n(n)];for(var r=2&i&&e;"object"==typeof r&&!~t.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},o.d(s,a),s},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return({173:"legacy-currency-filter",180:"checkout-locale19",234:"checkout-locale4",245:"checkout-locale3",326:"sentry",381:"checkout-locale10",425:"checkout-locale7",436:"checkout-locale2",471:"checkout-locale9",472:"checkout-sentry-vendor",519:"checkout-locale23",561:"checkout-locale14",572:"checkout-locale11",616:"checkout-locale6",627:"checkout-locale5",639:"checkout-locale1",645:"checkout-rtl-styles",662:"checkout-locale8",706:"checkout-styles",710:"checkout-locale22",740:"checkout-locale20",752:"checkout-locale15",763:"checkout-locale16",775:"checkout-locale12",830:"checkout-locale0",901:"checkout-locale21",954:"checkout-locale17",966:"checkout-locale13",989:"checkout-locale18"}[e]||e)+"."+{85:"38733c898cb8cb80800c",97:"5906404696a07bec5a10",173:"98635101d5471599341c",180:"5e9104545b0248c6cee3",234:"667ace1bb47b683ccd2f",245:"3e3ef5eb83966e5291b6",295:"6c82d1f24456f0f97ee2",326:"b51417ba851d23a7e727",339:"abf84573440fdad238f2",381:"abe340d38ec19975096e",425:"47e15f43bdc3cbd15e80",436:"7cff5cdbe99b2a8d6f20",471:"f9af83d5b193eb7476c5",472:"b290bc926fe51ec5de1a",513:"aeb397916e49c34451f4",519:"367579d638fd1383b6a7",561:"343a0923f33f06169cdf",572:"a5a842f231cd06ded5dd",616:"5072686e65a67f8d4aa7",627:"d29a83d5f74c3c6b9356",639:"024858f9f3638f557275",645:"d8c86de577ae3858ae39",662:"921c114d014aa06120a4",706:"2c650774bb18498ec8b3",710:"f55ea937bad976be7e02",740:"3656454e54737e03a775",752:"d136ba82e78abba562bd",763:"7489459531ca400d1028",775:"893c56f5a75a33a81362",830:"0b2fd2cb3a9584920961",840:"273c08d6885fb31c427d",901:"e06092020dc5eb487e8f",954:"5403041b1ea55ac24874",965:"91140891d98391300208",966:"f57b3bb1e27b8eba32b9",989:"44256a2147dbff72e485"}[e]+".js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i={},s="@fundraiseup/checkout:",o.l=function(e,t,n,a){if(i[e])i[e].push(t);else{var r,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==s+n){r=d;break}}r||(c=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",s+n),r.src=e),i[e]=[t];var h=function(t,n){r.onerror=r.onload=null,clearTimeout(m);var s=i[e];if(delete i[e],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),c&&document.head.appendChild(r)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},o.p="https://static.fundraiseup.com/",function(){o.b=document.baseURI||self.location.href;var e={251:0};o.f.j=function(t,n){var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise((function(n,s){i=e[t]=[n,s]}));n.push(i[2]=s);var a=o.p+o.u(t),r=new Error;o.l(a,(function(n){if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",r.name="ChunkLoadError",r.type=s,r.request=a,i[1](r)}}),"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,a=n[0],r=n[1],c=n[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(c)var u=c(o)}for(t&&t(n);l<a.length;l++)s=a[l],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},n=self.webpackChunk_fundraiseup_checkout=self.webpackChunk_fundraiseup_checkout||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var c=o.O(void 0,[521],(function(){return o(1380)}));c=o.O(c)}();